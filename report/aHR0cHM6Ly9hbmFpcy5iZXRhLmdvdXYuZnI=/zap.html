<!DOCTYPE html>
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ZAP Scanning Report</title>
<style type="text/css">
body {
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
	color: #000;
	font-size: 13px;
}

h1 {
	text-align: center;
	font-weight: bold;
	font-size: 32px
}

h3 {
	font-size: 16px;
}

table {
	border: none;
	font-size: 13px;
}

td, th {
	padding: 3px 4px;
	word-break: break-word;
}

th {
	font-weight: bold;
	background-color: #666666;
}

td {
	background-color: #e8e8e8;
}

.spacer {
	margin: 10px;
}

.spacer-lg {
	margin: 40px;
}

.indent1 {
	padding: 4px 20px;
}

.indent2 {
	padding: 4px 40px;
}

.risk-3 {
	background-color: red;
	color: #FFF;
}

.risk-2 {
	background-color: orange;
	color: #FFF;
}

.risk-1 {
	background-color: yellow;
	color: #000;
}

.risk-0 {
	background-color: blue;
	color: #FFF;
}

.risk--1 {
	background-color: green;
	color: #FFF;
}

.summary {
	width: 45%;
}

.summary th {
	color: #FFF;
}

.alerts {
	width: 75%;
}

.alerts th {
	color: #FFF;
}

.results {
	width: 100%;
}

.results th {
	text-align: left;
}

.left-header {
	display: inline-block;
}
</style>
</head>
<body>
	<h1>
		<!-- The ZAP Logo -->
		<img
			src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABqbAAAamwHdbkbTAAAAB3RJTUUH4QsKDDQPKy6k8AAABxpJREFUWMO9l31sVWcdxz+/55xzbwt9QddJExClvIzNxTKJDZi22oJSbFZpmRb4g8sfhpEIwXQNTKh0NYgiMKIwo5AsdIxdQldGNBN5W2OTFRVcIZE1YwExcXOdc1DK+nLvOc/PP87tC9CWsj98bp6ck3Ofc57v7+37/T3wYGMucBR4F/gK/8exAugAdPXq1bpx40YFekZdHYuP+8PuGP+lAc8CmzIyMtLq6uqora3FcRwAzp49m/7Wv5O95tsNEfyEKvwH9B1V2hT7GnB+PABkhGePAvVA9dy5c6mvr2fp0qX3LOru7iYrK4toSQ1OXhGKohpOiyVQe0NVn9PGFb8iFofGFSMCMMPulwEXgbdXrlxZ3dHRQXt7+4ibA2RmZtLc3Ex/y/O4fg8RMUSMS8RxiRiPqPE+4xrnl07syA3Q+aN5wADlwO1oNPpqQ0NDfl9fH4cPH2bOnDn3dV9VVRWVlVV88vsteNF0XCO4xuA6Bs9xiBgPz/EmueKcIxavHyk/BPjnli1bpm3btu1TZ2hmxkTk8aeYMK8aay1WFVWwqgSqBDYgqQFJGxygccWa4e86IhJpbW39Zk5ODgUFBZ8KwOLFZeyr/wHZs0vw0jMxIqFpAuFt+EOYZ/OrAi41t96dhF8HThcWFnpnzpwhGo0+MIhnamvZs+8AM55uIhn4+Cnrkza8Wqv4NiBhfXwNCgxy3jauuKMKPOCPrpHSU2fOUlJS8sAg8qZP50bGY0xeuIFk4JO0SnIYiMAqSRuQDPyPgsbqh++ugqSsPXGC+WsoLS1lzZqnHxhA40svcfPvfyDNjRARwTOCJ+E0IjgiOGIwRnIkFl97NwBMX9dPvEfLSC+t5cCB/eTk5Ix78ylTplBcXMxDjy3EweIZISKSqoxwcyOCYwRXHETkuSEAsTjE4kVGTLrjpdP7p33U1NTQ2dk5bgCbN28Ow7BoA8YmcVOWR1KWuyKIgEEwYjBiJhN75Ushr15qRp747g9dcRZ4RtCuf3HhdBMlpQuZNm3auAAUFBRw+fJlWl/dy9SCaqwGIBIyJGBTUwemWqzy/mAIRPmaEUGsJeNbz+IVfJ+ioiI2bNgwbi80NTUxJWciV47/GM9Lwwg4CA6CSblbBqYYRPjqEACRR8JaVcRPkPHlJ5m66kX27W8kL2/6uMPR3t7Ox+++yQcXjmLEIEYQA8YIkuIHSYVDkBnDk3DSEDwAi5c5mUfWNtGVPovc3FwOHTp0XwDZ2dm0nTvH9Td+zSedVxDVkIQAEQ1BoIgKCpnmflqpQcAXyjYxo6KeVatWUVZWRiKRGPO1+fPns2vXLjoOr7uvFA8HcHMoQ8IHmkqOINnH1d81kJeXR0VFRcqKkUcQBLS0tHD79u2QXHq7UmkIqgKqoIKKAnQPNiSqXFG0QFVCXbcGK4pVIdnTBcDOnTupqqoa06q2tjZKS0uZ8LmZzKiox5nwWXzfx9qBfmGgCkDRa4MeUNE3repg2QSEiwMFk5nDF8vrWLZsGTNnzqS9vX1UAEVFRezYsYOeD68y8fNPEFifAL2rDAfBnJdhGv0NzzgtoYYbHGOICkSMIWKEqBE8x+X91v18cKGJyspKDh48SFZW1ohAlixZQstfLzM99iK9iQQJqySsxVfFDyz9Nolv/fw7gumsPtIbMZE0zxhcR3DFEDVCZIDTjeA5Drb3Jv84sYOu639j69atNDQ0jAgiN3cyPQ/NJXvhM/QnEwRW8dWSDAL6bbLTHlyee0cVWNWfBhpgVbEWfFUSqiSGqVoyCCCaxayndjKn+nm2736BzIyJHDt27B4AFy9eovvtU3R3nA5DkFJEXwNUtWHEptSsPtIXNW7UMy4mJSLeMA+4IrhCKC6A46XR+VYz772xj/z8fJqampg1a9bg906ePElZWRlZy3+DZuSGPUGQ/G/QuDznHjVMeaEyaS2+WqxVbMryxMDVKv0W+qzSr0pPoo/Mx8uZs/51rgdTmD17NrFYbJArFi9ezKZNm7h1dD1B4JO0PgG23KR6QxnlYLHXM846z7i4oX4P6vmA9Q6ENMsQZyiGxK1OPjr5M5Kd77B7925qamoAWLBgAX+59jFU7tmivy3fPvq5INXDSyx+3DXOd1xx8YzBiGBMKCIDwmKMDLEWEnoMUDdK37U2bp/6BQ9PSueV+BEWLVpEdnYW3be6f67wo7EOJoMgiMX3uuKs84zBEQcjghjBMCAmhF1niskGCMaiqFWs8ehrj+Off5nCwkK2b99OcXExwFTgvdEB3AmizIi85oqTNgDCSKrPFWV4DFRD/beqWLX4YUXdst0ffk+b168CVqZWpwN9YwO4Wzhi8c1GpM6ISTcYREJPMOSAQYZLHc1upY5meyjfBq/XAUwGbgL9Y4dgrBGLFwtSITAPkekCk1L73wS9qsoFxR6nceWfx/O5/wGLCSMJ+zJrfwAAAABJRU5ErkJggg=="
			alt="" />
		ZAP Scanning Report
	</h1>
	<p />
	

	<h2>
		
		Site: https://anais.beta.gouv.fr
		
	</h2>

	<h3>
		Generated on Sun, 9 Oct 2022 08:59:33
	</h3>

	
		<h3 class="left-header">Summary of Alerts</h3>
		<table class="summary">
			<tr>
				<th width="45%"
					height="24">Risk Level</th>
				<th width="55%"
					align="center">Number of Alerts</th>
			</tr>
			<tr>
				<td class="risk-3">
					<div>High</div>
				</td>
				<td align="center">
					<div>0</div>
				</td>
			</tr>
			<tr>
				<td class="risk-2">
					<div>Medium</div>
				</td>
				<td align="center">
					<div>1</div>
				</td>
			</tr>
			<tr>
				<td class="risk-1">
					<div>Low</div>
				</td>
				<td align="center">
					<div>5</div>
				</td>
			</tr>
			<tr>
				<td class="risk-0">
					<div>Informational</div>
				</td>
				<td align="center">
					<div>6</div>
				</td>
			</tr>
			<tr>
				<td class="risk--1">
					<div>				False Positives:</div>
				</td>
				<td align="center">
					<div>0</div>
				</td>
			</tr>
		</table>
		<div class="spacer-lg"></div>
	

	
		<h3>Alerts</h3>
		<table class="alerts">
			<tr>
				<th width="60%" height="24">Name</th>
				<th width="20%"
					align="center">Risk Level</th>
				<th width="20%"
					align="center">Number of Instances</th>
			</tr>
			<tr>
				<td><a href="#10038">Content Security Policy (CSP) Header Not Set</a></td>
				<td align="center" class="risk-2">Medium</td>
				<td align="center">4</td>
			</tr>
			<tr>
				<td><a href="#10110">Dangerous JS Functions</a></td>
				<td align="center" class="risk-1">Low</td>
				<td align="center">2</td>
			</tr>
			<tr>
				<td><a href="#10009">In Page Banner Information Leak</a></td>
				<td align="center" class="risk-1">Low</td>
				<td align="center">1</td>
			</tr>
			<tr>
				<td><a href="#10063">Permissions Policy Header Not Set</a></td>
				<td align="center" class="risk-1">Low</td>
				<td align="center">11</td>
			</tr>
			<tr>
				<td><a href="#10036">Server Leaks Version Information via &quot;Server&quot; HTTP Response Header Field</a></td>
				<td align="center" class="risk-1">Low</td>
				<td align="center">11</td>
			</tr>
			<tr>
				<td><a href="#10096">Timestamp Disclosure - Unix</a></td>
				<td align="center" class="risk-1">Low</td>
				<td align="center">6</td>
			</tr>
			<tr>
				<td><a href="#10094">Base64 Disclosure</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">4</td>
			</tr>
			<tr>
				<td><a href="#10027">Information Disclosure - Suspicious Comments</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">4</td>
			</tr>
			<tr>
				<td><a href="#10109">Modern Web Application</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">6</td>
			</tr>
			<tr>
				<td><a href="#10049">Non-Storable Content</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">4</td>
			</tr>
			<tr>
				<td><a href="#10015">Re-examine Cache-control Directives</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">3</td>
			</tr>
			<tr>
				<td><a href="#10049">Storable and Cacheable Content</a></td>
				<td align="center" class="risk-0">Informational</td>
				<td align="center">7</td>
			</tr>
		</table>
		<div class="spacer-lg"></div>
	

	
		<h3>Alert Detail</h3>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-2"><a
						id="10038"></a>
						<div>Medium</div></th>
					<th class="risk-2">Content Security Policy (CSP) Header Not Set</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>Content Security Policy (CSP) is an added layer of security that helps to detect and mitigate certain types of attacks, including Cross Site Scripting (XSS) and data injection attacks. These attacks are used for everything from data theft to site defacement or distribution of malware. CSP provides a set of standard HTTP headers that allow website owners to declare approved sources of content that browsers should be allowed to load on that page â€” covered types are JavaScript, CSS, HTML frames, fonts, images and embeddable objects such as Java applets, ActiveX, audio and video files.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/maps/osmfr/">https://anais.beta.gouv.fr/maps/osmfr/</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">4</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Ensure that your web server, application server, load balancer, etc. is configured to set the Content-Security-Policy header, to achieve optimal browser support: &quot;Content-Security-Policy&quot; for Chrome 25+, Firefox 23+ and Safari 7+, &quot;X-Content-Security-Policy&quot; for Firefox 4.0+ and Internet Explorer 10+, and &quot;X-WebKit-CSP&quot; for Chrome 14+ and Safari 6+.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://developer.mozilla.org/en-US/docs/Web/Security/CSP/Introducing_Content_Security_Policy">https://developer.mozilla.org/en-US/docs/Web/Security/CSP/Introducing_Content_Security_Policy</a>
							<br />
						
							<a href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html">https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html</a>
							<br />
						
							<a href="http://www.w3.org/TR/CSP/">http://www.w3.org/TR/CSP/</a>
							<br />
						
							<a href="http://w3c.github.io/webappsec/specs/content-security-policy/csp-specification.dev.html">http://w3c.github.io/webappsec/specs/content-security-policy/csp-specification.dev.html</a>
							<br />
						
							<a href="http://www.html5rocks.com/en/tutorials/security/content-security-policy/">http://www.html5rocks.com/en/tutorials/security/content-security-policy/</a>
							<br />
						
							<a href="http://caniuse.com/#feat=contentsecuritypolicy">http://caniuse.com/#feat=contentsecuritypolicy</a>
							<br />
						
							<a href="http://content-security-policy.com/">http://content-security-policy.com/</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/693.html">693</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">15</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10038/">10038</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-1"><a
						id="10110"></a>
						<div>Low</div></th>
					<th class="risk-1">Dangerous JS Functions</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>A dangerous JS function seems to be in use that would leave the site vulnerable.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">bypassSecurityTrustHtml</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">bypassSecurityTrustHtml</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">2</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>See the references for security advice on the use of these functions.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://angular.io/guide/security">https://angular.io/guide/security</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/749.html">749</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%"></td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10110/">10110</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-1"><a
						id="10009"></a>
						<div>Low</div></th>
					<th class="risk-1">In Page Banner Information Leak</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The server returned a version banner string in the response content. Such information leaks may allow attackers to further target specific issues impacting the product and version in use.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/maps/osmfr/">https://anais.beta.gouv.fr/maps/osmfr/</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">Apache/2.4.29</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">1</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Configure the server to prevent such information leaks. For example:</div>
							<br />
						
							<div>Under Tomcat this is done via the &quot;server&quot; directive and implementation of custom error pages.</div>
							<br />
						
							<div>Under Apache this is done via the &quot;ServerSignature&quot; and &quot;ServerTokens&quot; directives.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://owasp.org/www-project-web-security-testing-guide/v41/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/">https://owasp.org/www-project-web-security-testing-guide/v41/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/200.html">200</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10009/">10009</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-1"><a
						id="10063"></a>
						<div>Low</div></th>
					<th class="risk-1">Permissions Policy Header Not Set</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>Permissions Policy Header is an added layer of security that helps to restrict from unauthorized access or usage of browser/client features by web resources. This policy ensures the user privacy by limiting or specifying the features of the browsers can be used by the web resources. Permissions Policy provides a set of standard HTTP headers that allow website owners to limit which features of browsers can be used by the page such as camera, microphone, location, full screen etc.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/assets/settings.js">https://anais.beta.gouv.fr/assets/settings.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/maps/osmfr/">https://anais.beta.gouv.fr/maps/osmfr/</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js">https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%"></td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">11</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Ensure that your web server, application server, load balancer, etc. is configured to set the Permissions-Policy header.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy</a>
							<br />
						
							<a href="https://developers.google.com/web/updates/2018/06/feature-policy">https://developers.google.com/web/updates/2018/06/feature-policy</a>
							<br />
						
							<a href="https://scotthelme.co.uk/a-new-security-header-feature-policy/">https://scotthelme.co.uk/a-new-security-header-feature-policy/</a>
							<br />
						
							<a href="https://w3c.github.io/webappsec-feature-policy/">https://w3c.github.io/webappsec-feature-policy/</a>
							<br />
						
							<a href="https://www.smashingmagazine.com/2018/12/feature-policy/">https://www.smashingmagazine.com/2018/12/feature-policy/</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/693.html">693</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">15</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10063/">10063</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-1"><a
						id="10036"></a>
						<div>Low</div></th>
					<th class="risk-1">Server Leaks Version Information via &quot;Server&quot; HTTP Response Header Field</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The web/application server is leaking version information via the &quot;Server&quot; HTTP response header. Access to such information may facilitate attackers identifying other vulnerabilities your web/application server is subject to.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/assets/images/favicon_anais.png">https://anais.beta.gouv.fr/assets/images/favicon_anais.png</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/assets/settings.js">https://anais.beta.gouv.fr/assets/settings.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js">https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/styles.3f1a5fce2dbcdaf664bc.css">https://anais.beta.gouv.fr/styles.3f1a5fce2dbcdaf664bc.css</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">nginx/1.21.6</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">11</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Ensure that your web server, application server, load balancer, etc. is configured to suppress the &quot;Server&quot; header or provide generic details.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="http://httpd.apache.org/docs/current/mod/core.html#servertokens">http://httpd.apache.org/docs/current/mod/core.html#servertokens</a>
							<br />
						
							<a href="http://msdn.microsoft.com/en-us/library/ff648552.aspx#ht_urlscan_007">http://msdn.microsoft.com/en-us/library/ff648552.aspx#ht_urlscan_007</a>
							<br />
						
							<a href="http://blogs.msdn.com/b/varunm/archive/2013/04/23/remove-unwanted-http-response-headers.aspx">http://blogs.msdn.com/b/varunm/archive/2013/04/23/remove-unwanted-http-response-headers.aspx</a>
							<br />
						
							<a href="http://www.troyhunt.com/2012/02/shhh-dont-let-your-response-headers.html">http://www.troyhunt.com/2012/02/shhh-dont-let-your-response-headers.html</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/200.html">200</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10036/">10036</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-1"><a
						id="10096"></a>
						<div>Low</div></th>
					<th class="risk-1">Timestamp Disclosure - Unix</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>A timestamp was disclosed by the application/web server - Unix</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1358797613</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1431655765</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1431655768</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1358797613</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1431655765</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">1431655768</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">6</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Manually confirm that the timestamp data is not sensitive, and that the data cannot be aggregated to disclose exploitable patterns.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="http://projects.webappsec.org/w/page/13246936/Information%20Leakage">http://projects.webappsec.org/w/page/13246936/Information%20Leakage</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/200.html">200</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10096/">10096</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10094"></a>
						<div>Informational</div></th>
					<th class="risk-0">Base64 Disclosure</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>Base64 encoded data was disclosed by the application/web server. Note: in the interests of performance not all base64 strings in the response were analyzed individually, the entire response should be looked at by the analyst/security team/developer(s).</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js">https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">4</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Manually confirm that the Base64 data does not leak sensitive information, and that the data cannot be aggregated/used to exploit other vulnerabilities.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="http://projects.webappsec.org/w/page/13246936/Information%20Leakage">http://projects.webappsec.org/w/page/13246936/Information%20Leakage</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/200.html">200</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10094/">10094</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10027"></a>
						<div>Informational</div></th>
					<th class="risk-0">Information Disclosure - Suspicious Comments</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The response appears to contain suspicious comments which may help an attacker. Note: Matches made within script blocks or files are against the entire content not only comments.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">Bug</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">Bug</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js">https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">from</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">select</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">4</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Remove all comments that return information that may help an attacker and fix any underlying problems they refer to.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%"></td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/200.html">200</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10027/">10027</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10109"></a>
						<div>Informational</div></th>
					<th class="risk-0">Modern Web Application</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The application appears to be a modern web application. If you need to explore it automatically then the Ajax Spider may well be more effective than the standard one.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;noscript&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;styles.3f1a5fce2dbcdaf664bc.css&quot;&gt;&lt;/noscript&gt;</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;a&gt;&gt;&gt;0)){r=0;break}o=o+1|0}else r=0}while(0);o=0==(0|r)}else o=0;if(u=0|ve(a+1|0,0,52),r=0|w()|-15728641&amp;e,Mt(e=(u|t)&amp;~(e=0|ve(7,0,0|(l=3*(14-a|0)|0))),a=r&amp;~(0|w()),i,n),r=n+(h&lt;&lt;3)|0,!o)return Mt((u=0|ve(1,0,0|l))|e,0|w()|a,i,r),u=r+(h&lt;&lt;3)|0,Mt((c=0|ve(2,0,0|l))|e,0|w()|a,i,u),u=u+(h&lt;&lt;3)|0,Mt((c=0|ve(3,0,0|l))|e,0|w()|a,i,u),u=u+(h&lt;&lt;3)|0,Mt((c=0|ve(4,0,0|l))|e,0|w()|a,i,u),u=u+(h&lt;&lt;3)|0,Mt((c=0|ve(5,0,0|l))|e,0|w()|a,i,u),void Mt((c=0|ve(6,0,0|l))|e,0|w()|a,i,u+(h&lt;&lt;3)|0);o=r+(h&lt;&lt;3)|0,(0|c)&gt;6&amp;&amp;(xe(0|r,0,8+(u=(o&gt;&gt;&gt;0&gt;(c=r+8|0)&gt;&gt;&gt;0?o:c)+-1+(0-r)|0)&amp;-8|0),r=c+(u&gt;&gt;&gt;3&lt;&lt;3)|0),Mt((u=0|ve(2,0,0|l))|e,0|w()|a,i,r),u=r+(h&lt;&lt;3)|0,Mt((c=0|ve(3,0,0|l))|e,0|w()|a,i,u),u=u+(h&lt;&lt;3)|0,Mt((c=0|ve(4,0,0|l))|e,0|w()|a,i,u),u=u+(h&lt;&lt;3)|0,Mt((c=0|ve(5,0,0|l))|e,0|w()|a,i,u),Mt((c=0|ve(6,0,0|l))|e,0|w()|a,i,u+(h&lt;&lt;3)|0)}}function Tt(t,e){var i=0,n=0,s=0;if(s=0|Ae(0|(t|=0),0|(e|=0),45),w(),!(0|L(127&amp;s)))return 0;s=0|Ae(0|t,0|e,52),w(),s&amp;=15;t:do{if(s)for(n=1;;){if(i=0|Ae(0|t,0|e,3*(15-n|0)|0),w(),0|(i&amp;=7))break t;if(!(n&gt;&gt;&gt;0&lt;s&gt;&gt;&gt;0)){i=0;break}n=n+1|0}else i=0}while(0);return 0|0==(0|i)&amp;1}function It(t,e){var i=0,n=0,s=0;if(s=0|Ae(0|(t|=0),0|(e|=0),52),w(),!(s&amp;=15))return 0;for(n=1;;){if(i=0|Ae(0|t,0|e,3*(15-n|0)|0),w(),0|(i&amp;=7)){n=5;break}if(!(n&gt;&gt;&gt;0&lt;s&gt;&gt;&gt;0)){i=0,n=5;break}n=n+1|0}return 5==(0|n)?0|i:0}function Dt(t,e){var i=0,n=0,s=0,r=0,o=0,a=0,l=0;if(l=0|Ae(0|(t|=0),0|(e|=0),52),w(),!(l&amp;=15))return l=t,x(0|(a=e)),0|l;for(a=1,i=0;;){n=0|ve(7,0,0|(r=3*(15-a|0)|0)),s=0|w(),o=0|Ae(0|t,0|e,0|r),w(),t=(r=0|ve(0|at(7&amp;o),0,0|r))|t&amp;~n,e=(o=0|w())|e&amp;~s;t:do{if(!i)if(0==(r&amp;n|0)&amp;0==(o&amp;s|0))i=0;else if(n=0|Ae(0|t,0|e,52),w(),n&amp;=15,n){i=1;e:for(;;){switch(o=0|Ae(0|t,0|e,3*(15-i|0)|0),w(),7&amp;o){case 1:break e;case 0:break;default:i=1;break t}if(!(i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0)){i=1;break t}i=i+1|0}for(i=1;;){if(s=0|Ae(0|t,0|e,0|(o=3*(15-i|0)|0)),w(),r=0|ve(7,0,0|o),e&amp;=~(0|w()),t=t&amp;~r|(o=0|ve(0|at(7&amp;s),0,0|o)),e=0|e|w(),!(i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0)){i=1;break}i=i+1|0}}else i=1}while(0);if(!(a&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0))break;a=a+1|0}return x(0|e),0|t}function Ot(t,e){var i=0,n=0,s=0,r=0,o=0;if(n=0|Ae(0|(t|=0),0|(e|=0),52),w(),!(n&amp;=15))return n=t,x(0|(i=e)),0|n;for(i=1;o=0|Ae(0|t,0|e,0|(r=3*(15-i|0)|0)),w(),s=0|ve(7,0,0|r),e&amp;=~(0|w()),t=(r=0|ve(0|at(7&amp;o),0,0|r))|t&amp;~s,e=0|w()|e,i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0;)i=i+1|0;return x(0|e),0|t}function Pt(t,e){var i=0,n=0,s=0,r=0,o=0,a=0,l=0;if(l=0|Ae(0|(t|=0),0|(e|=0),52),w(),!(l&amp;=15))return l=t,x(0|(a=e)),0|l;for(a=1,i=0;;){n=0|ve(7,0,0|(r=3*(15-a|0)|0)),s=0|w(),o=0|Ae(0|t,0|e,0|r),w(),t=(r=0|ve(0|lt(7&amp;o),0,0|r))|t&amp;~n,e=(o=0|w())|e&amp;~s;t:do{if(!i)if(0==(r&amp;n|0)&amp;0==(o&amp;s|0))i=0;else if(n=0|Ae(0|t,0|e,52),w(),n&amp;=15,n){i=1;e:for(;;){switch(o=0|Ae(0|t,0|e,3*(15-i|0)|0),w(),7&amp;o){case 1:break e;case 0:break;default:i=1;break t}if(!(i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0)){i=1;break t}i=i+1|0}for(i=1;;){if(r=0|ve(7,0,0|(s=3*(15-i|0)|0)),o=e&amp;~(0|w()),e=0|Ae(0|t,0|e,0|s),w(),t=t&amp;~r|(e=0|ve(0|lt(7&amp;e),0,0|s)),e=0|o|w(),!(i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0)){i=1;break}i=i+1|0}}else i=1}while(0);if(!(a&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0))break;a=a+1|0}return x(0|e),0|t}function Rt(t,e){var i=0,n=0,s=0,r=0,o=0;if(n=0|Ae(0|(t|=0),0|(e|=0),52),w(),!(n&amp;=15))return n=t,x(0|(i=e)),0|n;for(i=1;r=0|ve(7,0,0|(o=3*(15-i|0)|0)),s=e&amp;~(0|w()),e=0|Ae(0|t,0|e,0|o),w(),t=(e=0|ve(0|lt(7&amp;e),0,0|o))|t&amp;~r,e=0|w()|s,i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0;)i=i+1|0;return x(0|e),0|t}function Ft(t){return 0|(0|(t|=0))%2}function Lt(t,e){var i,n;return t|=0,n=I,I=I+16|0,i=n,(e|=0)&gt;&gt;&gt;0&lt;=15&amp;&amp;2146435072!=(2146435072&amp;s[t+4&gt;&gt;2]|0)&amp;&amp;2146435072!=(2146435072&amp;s[t+8+4&gt;&gt;2]|0)?(function(t,e,i){var n,o;n=I,I=I+16|0,function(t,e,i,n){e|=0,i|=0,n|=0;var o,a=0,l=0,c=0,h=0;if(o=I,I=I+32|0,function(t,e){e|=0;var i,n,s=0;i=+u(+(s=+r[(t|=0)&gt;&gt;3])),s=+d(+s),r[e+16&gt;&gt;3]=s,n=i*+u(+(s=+r[t+8&gt;&gt;3])),r[e&gt;&gt;3]=n,s=i*+d(+s),r[e+8&gt;&gt;3]=s}(t|=0,l=o),s[i&gt;&gt;2]=0,a=+ie(15888,l),(c=+ie(15912,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=1,a=c),(c=+ie(15936,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=2,a=c),(c=+ie(15960,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=3,a=c),(c=+ie(15984,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=4,a=c),(c=+ie(16008,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=5,a=c),(c=+ie(16032,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=6,a=c),(c=+ie(16056,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=7,a=c),(c=+ie(16080,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=8,a=c),(c=+ie(16104,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=9,a=c),(c=+ie(16128,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=10,a=c),(c=+ie(16152,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=11,a=c),(c=+ie(16176,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=12,a=c),(c=+ie(16200,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=13,a=c),(c=+ie(16224,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=14,a=c),(c=+ie(16248,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=15,a=c),(c=+ie(16272,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=16,a=c),(c=+ie(16296,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=17,a=c),(c=+ie(16320,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=18,a=c),(c=+ie(16344,l))&lt;a&amp;&amp;(s[i&gt;&gt;2]=19,a=c),(c=+f(+(1-.5*a)))&lt;1e-16)return s[n&gt;&gt;2]=0,s[n+4&gt;&gt;2]=0,s[n+8&gt;&gt;2]=0,s[n+12&gt;&gt;2]=0,void(I=o);if(a=+yt((a=+r[16368+(24*(i=0|s[i&gt;&gt;2])|0)&gt;&gt;3])-+yt(+function(t,e){var i,n,s,o,a;return t|=0,a=(n=+u(+(o=+r[(e|=0)&gt;&gt;3])))*+d(+(s=+r[e+8&gt;&gt;3]-+r[t+8&gt;&gt;3])),i=+r[t&gt;&gt;3],+ +A(+a,+(+d(+o)*+u(+i)-+u(+s)*(n*+d(+i))))}(15568+(i&lt;&lt;4)|0,t))),h=0|Ft(e)?+yt(a+-.3334731722518321):a,a=+p(+c)/.381966011250105,(0|e)&gt;0){l=0;do{a*=2.6457513110645907,l=l+1|0}while((0|l)!=(0|e))}c=+u(+h)*a,r[n&gt;&gt;3]=c,h=+d(+h)*a,r[n+8&gt;&gt;3]=h,I=o}(t|=0,e|=0,i|=0,o=n),function(t,e){t|=0;var i,n,o,a,c=0,h=0,u=0,d=0,p=0,f=0,m=0;s[(a=8+(e|=0)|0)&gt;&gt;2]=0,d=+l(+(n=+r[t&gt;&gt;3])),d+=.5*(p=+l(+(o=+r[t+8&gt;&gt;3]))/.8660254037844386),d-=+(0|(c=~~d)),p-=+(0|(t=~~p));do{if(d&lt;.5){if(d&lt;.3333333333333333){if(s[e&gt;&gt;2]=c,p&lt;.5*(d+1)){s[e+4&gt;&gt;2]=t;break}s[e+4&gt;&gt;2]=t=t+1|0;break}if(s[e+4&gt;&gt;2]=t=(1&amp;!(p&lt;(m=1-d)))+t|0,m&lt;=p&amp;p&lt;2*d){s[e&gt;&gt;2]=c=c+1|0;break}s[e&gt;&gt;2]=c;break}if(!(d&lt;.6666666666666666)){if(s[e&gt;&gt;2]=c=c+1|0,p&lt;.5*d){s[e+4&gt;&gt;2]=t;break}s[e+4&gt;&gt;2]=t=t+1|0;break}if(p&lt;1-d){if(s[e+4&gt;&gt;2]=t,2*d-1&lt;p){s[e&gt;&gt;2]=c;break}}else s[e+4&gt;&gt;2]=t=t+1|0;s[e&gt;&gt;2]=c=c+1|0}while(0);do{if(n&lt;0){if(1&amp;t){c=~~(+(0|c)-(2*(+((f=0|fe(0|c,((0|c)&lt;0)&lt;&lt;31&gt;&gt;31|0,0|(f=(t+1|0)/2|0),((0|f)&lt;0)&lt;&lt;31&gt;&gt;31|0))&gt;&gt;&gt;0)+4294967296*+(0|w()))+1)),s[e&gt;&gt;2]=c;break}c=~~(+(0|c)-2*(+((f=0|fe(0|c,((0|c)&lt;0)&lt;&lt;31&gt;&gt;31|0,0|(f=(0|t)/2|0),((0|f)&lt;0)&lt;&lt;31&gt;&gt;31|0))&gt;&gt;&gt;0)+4294967296*+(0|w()))),s[e&gt;&gt;2]=c;break}}while(0);f=e+4|0,o&lt;0&amp;&amp;(s[e&gt;&gt;2]=c=c-((1|t&lt;&lt;1)/2|0)|0,s[f&gt;&gt;2]=t=0-t|0),h=t-c|0,(0|c)&lt;0?(u=0-c|0,s[f&gt;&gt;2]=h,s[a&gt;&gt;2]=u,s[e&gt;&gt;2]=0,t=h,c=0):u=0,(0|t)&lt;0&amp;&amp;(s[e&gt;&gt;2]=c=c-t|0,s[a&gt;&gt;2]=u=u-t|0,s[f&gt;&gt;2]=0,t=0),i=c-u|0,h=t-u|0,(0|u)&lt;0&amp;&amp;(s[e&gt;&gt;2]=i,s[f&gt;&gt;2]=h,s[a&gt;&gt;2]=0,t=h,c=i,u=0),!((0|(h=(0|u)&lt;(0|(h=(0|t)&lt;(0|c)?t:c))?u:h))&lt;=0)&amp;&amp;(s[e&gt;&gt;2]=c-h,s[f&gt;&gt;2]=t-h,s[a&gt;&gt;2]=u-h)}(o,i+4|0),I=n}(t,e,i),e=0|function(t,e){t|=0;var i,n=0,r=0,o=0,a=0,l=0,c=0,h=0,u=0;if(i=I,I=I+64|0,c=i+40|0,r=i+24|0,o=i+12|0,a=i,ve(0|(e|=0),0,52),n=134225919|w(),!e)return(0|s[t+4&gt;&gt;2])&gt;2||(0|s[t+8&gt;&gt;2])&gt;2||(0|s[t+12&gt;&gt;2])&gt;2?(c=0,x(0|(l=0)),I=i,0|c):(ve(0|z(t),0,45),l=0|w()|n,c=-1,x(0|l),I=i,0|c);if(s[c&gt;&gt;2]=s[t&gt;&gt;2],s[c+4&gt;&gt;2]=s[t+4&gt;&gt;2],s[c+8&gt;&gt;2]=s[t+8&gt;&gt;2],s[c+12&gt;&gt;2]=s[t+12&gt;&gt;2],l=c+4|0,(0|e)&gt;0)for(t=-1;s[r&gt;&gt;2]=s[l&gt;&gt;2],s[r+4&gt;&gt;2]=s[l+4&gt;&gt;2],s[r+8&gt;&gt;2]=s[l+8&gt;&gt;2],1&amp;e?(tt(l),s[o&gt;&gt;2]=s[l&gt;&gt;2],s[o+4&gt;&gt;2]=s[l+4&gt;&gt;2],s[o+8&gt;&gt;2]=s[l+8&gt;&gt;2],it(o)):(et(l),s[o&gt;&gt;2]=s[l&gt;&gt;2],s[o+4&gt;&gt;2]=s[l+4&gt;&gt;2],s[o+8&gt;&gt;2]=s[l+8&gt;&gt;2],nt(o)),X(r,o,a),Y(a),h=0|ve(7,0,0|(u=3*(15-e|0)|0)),n&amp;=~(0|w()),t=(u=0|ve(0|J(a),0,0|u))|t&amp;~h,n=0|w()|n,(0|e)&gt;1;)e=e+-1|0;else t=-1;t:do{if((0|s[l&gt;&gt;2])&lt;=2&amp;&amp;(0|s[c+8&gt;&gt;2])&lt;=2&amp;&amp;(0|s[c+12&gt;&gt;2])&lt;=2){if(e=0|ve(0|(r=0|z(c)),0,45),e|=t,t=0|w()|-1040385&amp;n,a=0|N(c),!(0|L(r))){if((0|a)&lt;=0)break;for(o=0;;){if(r=0|Ae(0|e,0|t,52),w(),r&amp;=15)for(n=1;c=0|Ae(0|e,0|t,0|(u=3*(15-n|0)|0)),w(),h=0|ve(7,0,0|u),t&amp;=~(0|w()),e=e&amp;~h|(u=0|ve(0|at(7&amp;c),0,0|u)),t=0|t|w(),n&gt;&gt;&gt;0&lt;r&gt;&gt;&gt;0;)n=n+1|0;if((0|(o=o+1|0))==(0|a))break t}}o=0|Ae(0|e,0|t,52),w(),o&amp;=15;e:do{if(o){n=1;i:for(;;){switch(u=0|Ae(0|e,0|t,3*(15-n|0)|0),w(),7&amp;u){case 1:break i;case 0:break;default:break e}if(!(n&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0))break e;n=n+1|0}if(0|V(r,0|s[c&gt;&gt;2]))for(n=1;h=0|ve(7,0,0|(c=3*(15-n|0)|0)),u=t&amp;~(0|w()),t=0|Ae(0|e,0|t,0|c),w(),e=e&amp;~h|(t=0|ve(0|lt(7&amp;t),0,0|c)),t=0|u|w(),n&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)n=n+1|0;else for(n=1;c=0|Ae(0|e,0|t,0|(u=3*(15-n|0)|0)),w(),h=0|ve(7,0,0|u),t&amp;=~(0|w()),e=e&amp;~h|(u=0|ve(0|at(7&amp;c),0,0|u)),t=0|t|w(),n&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)n=n+1|0}}while(0);if((0|a)&gt;0){n=0;do{e=0|Dt(e,t),t=0|w(),n=n+1|0}while((0|n)!=(0|a))}}else e=0,t=0}while(0);return u=e,x(0|(h=t)),I=i,0|u}(i,e),t=0|w()):(t=0,e=0),x(0|t),I=n,0|e}function Bt(t,e,i){var n,r=0,o=0,a=0;if(n=4+(i|=0)|0,o=0|Ae(0|(t|=0),0|(e|=0),52),w(),o&amp;=15,a=0|Ae(0|t,0|e,45),w(),r=0==(0|o),0|L(127&amp;a)){if(r)return 1;r=1}else{if(r)return 0;r=0==(0|s[n&gt;&gt;2])&amp;&amp;0==(0|s[i+8&gt;&gt;2])?0!=(0|s[i+12&gt;&gt;2])&amp;1:1}for(i=1;1&amp;i?it(n):nt(n),a=0|Ae(0|t,0|e,3*(15-i|0)|0),w(),st(n,7&amp;a),i&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)i=i+1|0;return 0|r}function zt(t,e,i){i|=0;var n,r,o=0,a=0,l=0,c=0,h=0,u=0;r=I,I=I+16|0,n=r,u=0|Ae(0|(t|=0),0|(e|=0),45),w(),u&amp;=127;t:do{if(0!=(0|L(u))&amp;&amp;(l=0|Ae(0|t,0|e,52),w(),l&amp;=15,0!=(0|l))){o=1;e:for(;;){switch(h=0|Ae(0|t,0|e,3*(15-o|0)|0),w(),7&amp;h){case 5:break e;case 0:break;default:o=e;break t}if(!(o&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0)){o=e;break t}o=o+1|0}for(a=1,o=e;c=0|ve(7,0,0|(e=3*(15-a|0)|0)),h=o&amp;~(0|w()),o=0|Ae(0|t,0|o,0|e),w(),t=t&amp;~c|(o=0|ve(0|lt(7&amp;o),0,0|e)),o=0|h|w(),a&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0;)a=a+1|0}else o=e}while(0);if(s[i&gt;&gt;2]=s[(h=7728+(28*u|0)|0)&gt;&gt;2],s[i+4&gt;&gt;2]=s[h+4&gt;&gt;2],s[i+8&gt;&gt;2]=s[h+8&gt;&gt;2],s[i+12&gt;&gt;2]=s[h+12&gt;&gt;2],0|Bt(t,o,i)){if(s[n&gt;&gt;2]=s[(c=i+4|0)&gt;&gt;2],s[n+4&gt;&gt;2]=s[c+4&gt;&gt;2],s[n+8&gt;&gt;2]=s[c+8&gt;&gt;2],l=0|Ae(0|t,0|o,52),w(),h=15&amp;l,1&amp;l?(nt(c),l=h+1|0):l=h,0|L(u)){t:do{if(h)for(e=1;;){if(a=0|Ae(0|t,0|o,3*(15-e|0)|0),w(),0|(a&amp;=7)){o=a;break t}if(!(e&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0)){o=0;break}e=e+1|0}else o=0}while(0);o=4==(0|o)&amp;1}else o=0;if(0|At(i,l,o,0)){if(0|L(u))do{}while(0!=(0|At(i,l,0,0)));(0|l)!=(0|h)&amp;&amp;et(c)}else(0|l)!=(0|h)&amp;&amp;(s[c&gt;&gt;2]=s[n&gt;&gt;2],s[c+4&gt;&gt;2]=s[n+4&gt;&gt;2],s[c+8&gt;&gt;2]=s[n+8&gt;&gt;2]);I=r}else I=r}function Nt(t,e,i){var n,r;i|=0,n=I,I=I+16|0,zt(t|=0,e|=0,r=n),e=0|Ae(0|t,0|e,52),w(),function(t,e,i){var n,r;e|=0,i|=0,n=I,I=I+16|0,Z(4+(t|=0)|0,r=n),ft(r,0|s[t&gt;&gt;2],e,0,i),I=n}(r,15&amp;e,i),I=n}function Vt(t,e,i){i|=0;var n,s,r=0,o=0;s=I,I=I+16|0,zt(t|=0,e|=0,n=s),r=0|Ae(0|t,0|e,45),w(),r=0==(0|L(127&amp;r)),o=0|Ae(0|t,0|e,52),w(),o&amp;=15;t:do{if(!r){if(0|o)for(r=1;;){if(!(0==((0|ve(7,0,3*(15-r|0)|0))&amp;t|0)&amp;0==((0|w())&amp;e|0)))break t;if(!(r&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0))break;r=r+1|0}return mt(n,o,0,5,i),void(I=s)}}while(0);_t(n,o,0,6,i),I=s}function $t(t,e){e|=0;var i,n=0,r=0,o=0,a=0,l=0,c=0;if(ve(0|(t|=0),0,52),i=134225919|w(),(0|t)&lt;1){r=0,n=0;do{0|L(r)&amp;&amp;(ve(0|r,0,45),l=0|i|w(),s[(t=e+(n&lt;&lt;3)|0)&gt;&gt;2]=-1,s[t+4&gt;&gt;2]=l,n=n+1|0),r=r+1|0}while(122!=(0|r))}else{l=0,n=0;do{if(0|L(l)){for(ve(0|l,0,45),r=1,o=-1,a=0|i|w();o&amp;=~(c=0|ve(7,0,3*(15-r|0)|0)),a&amp;=~(0|w()),(0|r)!=(0|t);)r=r+1|0;s[(c=e+(n&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=a,n=n+1|0}l=l+1|0}while(122!=(0|l))}}function Ut(t,e,i,n){var r,o=0,a=0,l=0,c=0,h=0;if(r=I,I=I+64|0,l=r,(0|(t|=0))==(0|(i|=0))&amp;(0|(e|=0))==(0|(n|=0))|!1|134217728!=(2013265920&amp;e|0)|!1|134217728!=(2013265920&amp;n|0)||(o=0|Ae(0|t,0|e,52),w(),o&amp;=15,a=0|Ae(0|i,0|n,52),w(),(0|o)!=(15&amp;a|0)))return I=r,0;if(a=o+-1|0,o&gt;&gt;&gt;0&gt;1&amp;&amp;(h=0|Et(t,e,a),c=0|w(),(0|h)==(0|(a=0|Et(i,n,a)))&amp;(0|c)==(0|w()))&amp;&amp;(o=0|Ae(0|t,0|e,0|(a=3*(15^o)|0)),w(),o&amp;=7,a=0|Ae(0|i,0|n,0|a),w(),0==(0|o)|0==(0|(a&amp;=7))||(0|s[21136+(o&lt;&lt;2)&gt;&gt;2])==(0|a)||(0|s[21168+(o&lt;&lt;2)&gt;&gt;2])==(0|a)))return I=r,1;a=(o=l)+56|0;do{s[o&gt;&gt;2]=0,o=o+4|0}while((0|o)&lt;(0|a));return D(t,e,1,l),o=(0|s[(h=l)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)||(0|s[(h=l+8|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)||(0|s[(h=l+16|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)||(0|s[(h=l+24|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)||(0|s[(h=l+32|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)||(0|s[(h=l+40|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[h+4&gt;&gt;2])==(0|n)?1:1&amp;((0|s[(o=l+48|0)&gt;&gt;2])==(0|i)?(0|s[o+4&gt;&gt;2])==(0|n):0),I=r,0|o}function jt(t,e,i){i|=0;var n,r,o,a,l=0;if(o=I,I=I+16|0,r=o,l=0|Ae(0|(t|=0),0|(e|=0),56),w(),-1==(0|(e=0|function(t,e,i){i|=0;var n=0,r=0;return n=0|Tt(t|=0,e|=0),(i+-1|0)&gt;&gt;&gt;0&gt;5||1==(0|i)&amp;(r=0!=(0|n))?0|(i=-1):(n=0|function(t,e){var i,n,r,o=0,a=0,l=0,c=0,h=0;if(r=I,I=I+32|0,n=r,zt(t|=0,e|=0,i=r+16|0),l=0|St(t,e),h=0|It(t,e),function(t,e){s[(e|=0)&gt;&gt;2]=s[(t=7728+(28*(t|=0)|0)|0)&gt;&gt;2],s[e+4&gt;&gt;2]=s[t+4&gt;&gt;2],s[e+8&gt;&gt;2]=s[t+8&gt;&gt;2],s[e+12&gt;&gt;2]=s[t+12&gt;&gt;2]}(l,n),e=0|function(t,e){t|=0;var i=0,n=0;if((e|=0)&gt;&gt;&gt;0&gt;20)return-1;do{if((0|s[11152+(216*e|0)&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+8&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+16&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+24&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+32&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+40&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+48&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+56&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+64&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+72&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+80&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+88&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+96&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+104&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+112&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+120&gt;&gt;2])!=(0|t))if((0|s[11152+(216*e|0)+128&gt;&gt;2])!=(0|t)){if((0|s[11152+(216*e|0)+136&gt;&gt;2])!=(0|t)){if((0|s[11152+(216*e|0)+144&gt;&gt;2])==(0|t)){t=0,i=2,n=0;break}if((0|s[11152+(216*e|0)+152&gt;&gt;2])==(0|t)){t=0,i=2,n=1;break}if((0|s[11152+(216*e|0)+160&gt;&gt;2])==(0|t)){t=0,i=2,n=2;break}if((0|s[11152+(216*e|0)+168&gt;&gt;2])==(0|t)){t=1,i=2,n=0;break}if((0|s[11152+(216*e|0)+176&gt;&gt;2])==(0|t)){t=1,i=2,n=1;break}if((0|s[11152+(216*e|0)+184&gt;&gt;2])==(0|t)){t=1,i=2,n=2;break}if((0|s[11152+(216*e|0)+192&gt;&gt;2])==(0|t)){t=2,i=2,n=0;break}if((0|s[11152+(216*e|0)+200&gt;&gt;2])==(0|t)){t=2,i=2,n=1;break}if((0|s[11152+(216*e|0)+208&gt;&gt;2])==(0|t)){t=2,i=2,n=2;break}return-1}t=2,i=1,n=2}else t=2,i=1,n=1;else t=2,i=1,n=0;else t=1,i=1,n=2;else t=1,i=1,n=1;else t=1,i=1,n=0;else t=0,i=1,n=2;else t=0,i=1,n=1;else t=0,i=1,n=0;else t=2,i=0,n=2;else t=2,i=0,n=1;else t=2,i=0,n=0;else t=1,i=0,n=2;else t=1,i=0,n=1;else t=1,i=0,n=0;else t=0,i=0,n=2;else t=0,i=0,n=1;else t=0,i=0,n=0}while(0);return 0|s[11152+(216*e|0)+(72*i|0)+(24*t|0)+(n&lt;&lt;3)+4&gt;&gt;2]}(l,0|s[i&gt;&gt;2]),!(0|L(l)))return I=r,0|e;switch(0|l){case 4:t=0,o=14;break;case 14:t=1,o=14;break;case 24:t=2,o=14;break;case 38:t=3,o=14;break;case 49:t=4,o=14;break;case 58:t=5,o=14;break;case 63:t=6,o=14;break;case 72:t=7,o=14;break;case 83:t=8,o=14;break;case 97:t=9,o=14;break;case 107:t=10,o=14;break;case 117:t=11,o=14;break;default:c=0,a=0}return 14==(0|o)&amp;&amp;(c=0|s[22096+(24*t|0)+8&gt;&gt;2],a=0|s[22096+(24*t|0)+16&gt;&gt;2]),(0|(t=0|s[i&gt;&gt;2]))!=(0|s[n&gt;&gt;2])&amp;&amp;(l=0|B(l))|(0|(t=0|s[i&gt;&gt;2]))==(0|a)&amp;&amp;(e=(e+1|0)%6|0),3==(0|h)&amp;(0|t)==(0|a)?(I=r,0|(h=(e+5|0)%6|0)):5==(0|h)&amp;(0|t)==(0|c)?(I=r,0|(h=(e+1|0)%6|0)):(I=r,0|(h=e))}(t,e),r?0|(i=(5-n+(0|s[22384+(i&lt;&lt;2)&gt;&gt;2])|0)%5|0):0|(i=(6-n+(0|s[22416+(i&lt;&lt;2)&gt;&gt;2])|0)%6|0))}(n=(a=!0&amp;268435456==(2013265920&amp;e|0))?t:0,t=a?-2130706433&amp;e|134217728:0,7&amp;l))))return s[i&gt;&gt;2]=0,void(I=o);zt(n,t,r),l=0|Ae(0|n,0|t,52),w(),l&amp;=15,0|Tt(n,t)?mt(r,l,e,2,i):_t(r,l,e,2,i),I=o}function Ht(t){t|=0;var e,i,n=0;return(e=0|pe(1,12))||C(22691,22646,49,22704),0|(n=0|s[(i=t+4|0)&gt;&gt;2])?(s[(n=n+8|0)&gt;&gt;2]=e,s[i&gt;&gt;2]=e,0|e):(0|s[t&gt;&gt;2]&amp;&amp;C(22721,22646,61,22744),s[(n=t)&gt;&gt;2]=e,s[i&gt;&gt;2]=e,0|e)}function Gt(t,e){var i,n;return t|=0,e|=0,(n=0|ue(24))||C(22758,22646,78,22772),s[n&gt;&gt;2]=s[e&gt;&gt;2],s[n+4&gt;&gt;2]=s[e+4&gt;&gt;2],s[n+8&gt;&gt;2]=s[e+8&gt;&gt;2],s[n+12&gt;&gt;2]=s[e+12&gt;&gt;2],s[n+16&gt;&gt;2]=0,0|(i=0|s[(e=t+4|0)&gt;&gt;2])?(s[i+16&gt;&gt;2]=n,s[e&gt;&gt;2]=n,0|n):(0|s[t&gt;&gt;2]&amp;&amp;C(22787,22646,82,22772),s[t&gt;&gt;2]=n,s[e&gt;&gt;2]=n,0|n)}function qt(t){var e,i,n=0,o=0,a=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0,w=0,S=0,k=0,E=0,M=0,T=0,I=0,D=0,O=0,P=0,R=0,F=0,L=0;if(0|s[(c=8+(t|=0)|0)&gt;&gt;2])return 1;if(!(a=0|s[t&gt;&gt;2]))return 0;n=a,o=0;do{o=o+1|0,n=0|s[n+8&gt;&gt;2]}while(0!=(0|n));if(o&gt;&gt;&gt;0&lt;2)return 0;(i=0|ue(o&lt;&lt;2))||C(22807,22646,317,22826),(e=0|ue(o&lt;&lt;5))||C(22848,22646,321,22826),s[t&gt;&gt;2]=0,s[(M=t+4|0)&gt;&gt;2]=0,s[c&gt;&gt;2]=0,o=0,R=0,E=0,g=0;t:for(;;){if(m=0|s[a&gt;&gt;2]){h=0,u=m;do{if(n=u,+l(+((p=+r[u+8&gt;&gt;3])-(d=+r[(c=(f=0==(0|(u=0|s[u+16&gt;&gt;2])))?m:u)+8&gt;&gt;3])))&gt;3.141592653589793){L=14;break}h+=(d-p)*(+r[n&gt;&gt;3]+ +r[c&gt;&gt;3])}while(!f);if(14==(0|L)){L=0,h=0,n=m;do{h+=(+r[n&gt;&gt;3]+ +r[(O=0==(0|(O=0|s[(P=n+16|0)&gt;&gt;2]))?m:O)&gt;&gt;3])*(((S=+r[O+8&gt;&gt;3])&lt;0?S+6.283185307179586:S)-((k=+r[n+8&gt;&gt;3])&lt;0?k+6.283185307179586:k)),n=0|s[(0==(0|n)?a:P)&gt;&gt;2]}while(0!=(0|n))}h&gt;0?(s[i+(R&lt;&lt;2)&gt;&gt;2]=a,R=R+1|0,c=E,n=g):L=19}else L=19;if(19==(0|L)){L=0;do{if(!o){if(g){c=M,u=g+8|0,n=a,o=t;break}if(0|s[t&gt;&gt;2]){L=27;break t}c=M,u=t,n=a,o=t;break}if(0|s[(n=o+8|0)&gt;&gt;2]){L=21;break t}if(!(o=0|pe(1,12))){L=23;break t}s[n&gt;&gt;2]=o,c=o+4|0,u=o,n=g}while(0);if(s[u&gt;&gt;2]=a,s[c&gt;&gt;2]=a,u=e+(E&lt;&lt;5)|0,f=0|s[a&gt;&gt;2]){for(r[(m=e+(E&lt;&lt;5)+8|0)&gt;&gt;3]=17976931348623157e292,r[(g=e+(E&lt;&lt;5)+24|0)&gt;&gt;3]=17976931348623157e292,r[u&gt;&gt;3]=-17976931348623157e292,r[(A=e+(E&lt;&lt;5)+16|0)&gt;&gt;3]=-17976931348623157e292,x=17976931348623157e292,w=-17976931348623157e292,c=0,v=f,p=17976931348623157e292,b=17976931348623157e292,y=-17976931348623157e292,d=-17976931348623157e292;h=+r[v&gt;&gt;3],k=+r[v+8&gt;&gt;3],S=+r[((_=0==(0|(v=0|s[v+16&gt;&gt;2])))?f:v)+8&gt;&gt;3],h&lt;p&amp;&amp;(r[m&gt;&gt;3]=h,p=h),k&lt;b&amp;&amp;(r[g&gt;&gt;3]=k,b=k),h&gt;y?r[u&gt;&gt;3]=h:h=y,k&gt;d&amp;&amp;(r[A&gt;&gt;3]=k,d=k),x=k&gt;0&amp;k&lt;x?k:x,w=k&lt;0&amp;k&gt;w?k:w,c|=+l(+(k-S))&gt;3.141592653589793,!_;)y=h;c&amp;&amp;(r[A&gt;&gt;3]=w,r[g&gt;&gt;3]=x)}else s[u&gt;&gt;2]=0,s[u+4&gt;&gt;2]=0,s[u+8&gt;&gt;2]=0,s[u+12&gt;&gt;2]=0,s[u+16&gt;&gt;2]=0,s[u+20&gt;&gt;2]=0,s[u+24&gt;&gt;2]=0,s[u+28&gt;&gt;2]=0;c=E+1|0}if(a=0|s[(P=a+8|0)&gt;&gt;2],s[P&gt;&gt;2]=0,!a){L=45;break}E=c,g=n}if(21==(0|L))C(22624,22646,35,22658);else if(23==(0|L))C(22678,22646,37,22658);else if(27==(0|L))C(22721,22646,61,22744);else if(45==(0|L)){t:do{if((0|R)&gt;0){for(P=0==(0|c),D=c&lt;&lt;2,O=0==(0|t),I=0,n=0;;){if(T=0|s[i+(I&lt;&lt;2)&gt;&gt;2],P)L=73;else{if(!(E=0|ue(D))){L=50;break}if(!(M=0|ue(D))){L=52;break}e:do{if(O)o=0;else{for(c=0,o=0,u=t;0|Wt(0|s[u&gt;&gt;2],a=e+(c&lt;&lt;5)|0,0|s[T&gt;&gt;2])?(s[E+(o&lt;&lt;2)&gt;&gt;2]=u,s[M+(o&lt;&lt;2)&gt;&gt;2]=a,_=o+1|0):_=o,u=0|s[u+8&gt;&gt;2];)c=c+1|0,o=_;if((0|_)&gt;0)if(a=0|s[E&gt;&gt;2],1==(0|_))o=a;else for(A=0,v=-1,o=a,g=a;;){for(f=0|s[g&gt;&gt;2],a=0,u=0;m=(0|(c=0|s[s[E+(u&lt;&lt;2)&gt;&gt;2]&gt;&gt;2]))==(0|f)?a:a+(1&amp;(0|Wt(c,0|s[M+(u&lt;&lt;2)&gt;&gt;2],0|s[f&gt;&gt;2])))|0,(0|(u=u+1|0))!=(0|_);)a=m;if(o=(c=(0|m)&gt;(0|v))?g:o,(0|(a=A+1|0))==(0|_))break e;A=a,v=c?m:v,g=0|s[E+(a&lt;&lt;2)&gt;&gt;2]}else o=0}}while(0);if(de(E),de(M),o){if(a=0|s[(c=o+4|0)&gt;&gt;2])o=a+8|0;else if(0|s[o&gt;&gt;2]){L=70;break}s[o&gt;&gt;2]=T,s[c&gt;&gt;2]=T}else L=73}if(73==(0|L)){if(L=0,0|(n=0|s[T&gt;&gt;2]))do{M=n,n=0|s[n+16&gt;&gt;2],de(M)}while(0!=(0|n));de(T),n=2}if((0|(I=I+1|0))&gt;=(0|R)){F=n;break t}}50==(0|L)?C(22863,22646,249,22882):52==(0|L)?C(22901,22646,252,22882):70==(0|L)&amp;&amp;C(22721,22646,61,22744)}else F=0}while(0);return de(i),de(e),0|F}return 0}function Wt(t,e,i){t|=0;var n=0,o=0,a=0,l=0,c=0,h=0,u=0,d=0;if(!(0|H(e|=0,i|=0)&amp;&amp;(e=0|j(e),u=+r[i&gt;&gt;3],n=+r[i+8&gt;&gt;3],n=e&amp;n&lt;0?n+6.283185307179586:n,t=0|s[t&gt;&gt;2],t)))return 0;if(e){e=0,i=t;t:for(;;){for(;l=+r[i&gt;&gt;3],h=+r[i+8&gt;&gt;3],o=+r[(d=0==(0|(d=0|s[(i=i+16|0)&gt;&gt;2]))?t:d)+8&gt;&gt;3],l&gt;(a=+r[d&gt;&gt;3])?(c=l,l=h):(c=a,a=l,l=o,o=h),u&lt;a|u&gt;c;)if(!(i=0|s[i&gt;&gt;2])){i=22;break t}if(n=(l=l&lt;0?l+6.283185307179586:l)==n|(h=o&lt;0?o+6.283185307179586:o)==n?n+-2220446049250313e-31:n,((h+=(u-a)/(c-a)*(l-h))&lt;0?h+6.283185307179586:h)&gt;n&amp;&amp;(e^=1),!(i=0|s[i&gt;&gt;2])){i=22;break}}if(22==(0|i))return 0|e}else{e=0,i=t;t:for(;;){for(;l=+r[i&gt;&gt;3],h=+r[i+8&gt;&gt;3],o=+r[(d=0==(0|(d=0|s[(i=i+16|0)&gt;&gt;2]))?t:d)+8&gt;&gt;3],l&gt;(a=+r[d&gt;&gt;3])?(c=l,l=h):(c=a,a=l,l=o,o=h),u&lt;a|u&gt;c;)if(!(i=0|s[i&gt;&gt;2])){i=22;break t}if(o+(u-a)/(c-a)*(l-o)&gt;(n=l==n|o==n?n+-2220446049250313e-31:n)&amp;&amp;(e^=1),!(i=0|s[i&gt;&gt;2])){i=22;break}}if(22==(0|i))return 0|e}return 0}function Yt(t,e,i,r,o){i|=0,r|=0,o|=0;var a,l,c,h,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0;if(h=I,I=I+32|0,b=h+16|0,c=h,u=0|Ae(0|(t|=0),0|(e|=0),52),w(),u&amp;=15,A=0|Ae(0|i,0|r,52),w(),(0|u)!=(15&amp;A|0))return I=h,1;if(m=0|Ae(0|t,0|e,45),w(),m&amp;=127,g=0|Ae(0|i,0|r,45),w(),A=(0|m)!=(0|(g&amp;=127))){if(7==(0|(p=0|U(m,g))))return I=h,2;7==(0|(f=0|U(g,m)))?C(22925,22949,151,22959):(v=p,d=f)}else v=0,d=0;a=0|L(m),l=0|L(g),s[b&gt;&gt;2]=0,s[b+4&gt;&gt;2]=0,s[b+8&gt;&gt;2]=0,s[b+12&gt;&gt;2]=0;do{if(v){if(p=(0|(g=0|s[4304+(28*m|0)+(v&lt;&lt;2)&gt;&gt;2]))&gt;0,l)if(p){m=0,f=i,p=r;do{f=0|Pt(f,p),p=0|w(),1==(0|(d=0|lt(d)))&amp;&amp;(d=0|lt(1)),m=m+1|0}while((0|m)!=(0|g));g=d,m=f,f=p}else g=d,m=i,f=r;else if(p){m=0,f=i,p=r;do{f=0|Rt(f,p),p=0|w(),d=0|lt(d),m=m+1|0}while((0|m)!=(0|g));g=d,m=f,f=p}else g=d,m=i,f=r;if(Bt(m,f,b),A||C(22972,22949,181,22959),(p=0!=(0|a))&amp;(d=0!=(0|l))&amp;&amp;C(22999,22949,182,22959),p){if(d=0|It(t,e),0|n[22032+(7*d|0)+v&gt;&gt;0]){u=3;break}m=f=0|s[21200+(28*d|0)+(v&lt;&lt;2)&gt;&gt;2],_=26}else if(d){if(d=0|It(m,f),0|n[22032+(7*d|0)+g&gt;&gt;0]){u=4;break}m=0,f=0|s[21200+(28*g|0)+(d&lt;&lt;2)&gt;&gt;2],_=26}else d=0;if(26==(0|_))if((0|f)&lt;=-1&amp;&amp;C(23030,22949,212,22959),(0|m)&lt;=-1&amp;&amp;C(23053,22949,213,22959),(0|f)&gt;0){p=b+4|0,d=0;do{ot(p),d=d+1|0}while((0|d)!=(0|f));d=m}else d=m;if(s[c&gt;&gt;2]=0,s[c+4&gt;&gt;2]=0,s[c+8&gt;&gt;2]=0,st(c,v),0|u)for(;0|Ft(u)?it(c):nt(c),(0|u)&gt;1;)u=u+-1|0;if((0|d)&gt;0){u=0;do{ot(c),u=u+1|0}while((0|u)!=(0|d))}K(_=b+4|0,c,_),Y(_),_=50}else if(Bt(i,r,b),0!=(0|a)&amp;0!=(0|l))if((0|g)!=(0|m)&amp;&amp;C(23077,22949,243,22959),d=0|It(t,e),u=0|It(i,r),0|n[22032+(7*d|0)+u&gt;&gt;0])u=5;else if((0|(d=0|s[21200+(28*d|0)+(u&lt;&lt;2)&gt;&gt;2]))&gt;0){p=b+4|0,u=0;do{ot(p),u=u+1|0}while((0|u)!=(0|d));_=50}else _=50;else _=50}while(0);return 50==(0|_)&amp;&amp;(s[o&gt;&gt;2]=s[(u=b+4|0)&gt;&gt;2],s[o+4&gt;&gt;2]=s[u+4&gt;&gt;2],s[o+8&gt;&gt;2]=s[u+8&gt;&gt;2],u=0),I=h,0|u}function Zt(t,e,i,n){i|=0,n|=0;var r,o,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0;if(o=I,I=I+48|0,c=o+36|0,h=o+24|0,u=o+12|0,d=o,l=0|Ae(0|(t|=0),0|(e|=0),52),w(),l&amp;=15,f=0|Ae(0|t,0|e,45),w(),r=0|L(f&amp;=127),ve(0|l,0,52),A=134225919|w(),s[(g=n)&gt;&gt;2]=-1,s[g+4&gt;&gt;2]=A,!l)return(0|s[i&gt;&gt;2])&gt;1||(0|s[i+4&gt;&gt;2])&gt;1||(0|s[i+8&gt;&gt;2])&gt;1||127==(0|(a=0|$(f,0|J(i))))?(I=o,0|(A=1)):(m=0|ve(0|a,0,45),g=0|w(),g|=-1040385&amp;s[(f=n)+4&gt;&gt;2],s[(A=n)&gt;&gt;2]=s[f&gt;&gt;2]|m,s[A+4&gt;&gt;2]=g,I=o,0|(A=0));for(s[c&gt;&gt;2]=s[i&gt;&gt;2],s[c+4&gt;&gt;2]=s[i+4&gt;&gt;2],s[c+8&gt;&gt;2]=s[i+8&gt;&gt;2];s[h&gt;&gt;2]=s[c&gt;&gt;2],s[h+4&gt;&gt;2]=s[c+4&gt;&gt;2],s[h+8&gt;&gt;2]=s[c+8&gt;&gt;2],0|Ft(l)?(tt(c),s[u&gt;&gt;2]=s[c&gt;&gt;2],s[u+4&gt;&gt;2]=s[c+4&gt;&gt;2],s[u+8&gt;&gt;2]=s[c+8&gt;&gt;2],it(u)):(et(c),s[u&gt;&gt;2]=s[c&gt;&gt;2],s[u+4&gt;&gt;2]=s[c+4&gt;&gt;2],s[u+8&gt;&gt;2]=s[c+8&gt;&gt;2],nt(u)),X(h,u,d),Y(d),v=0|s[(g=n)&gt;&gt;2],g=0|s[g+4&gt;&gt;2],i=0|ve(7,0,0|(_=3*(15-l|0)|0)),g&amp;=~(0|w()),_=0|ve(0|J(d),0,0|_),g=0|w()|g,s[(A=n)&gt;&gt;2]=_|v&amp;~i,s[A+4&gt;&gt;2]=g,(0|l)&gt;1;)l=l+-1|0;t:do{if((0|s[c&gt;&gt;2])&lt;=1&amp;&amp;(0|s[c+4&gt;&gt;2])&lt;=1&amp;&amp;(0|s[c+8&gt;&gt;2])&lt;=1){d=127==(0|(h=0|$(f,l=0|J(c))))?0:0|L(h);e:do{if(l){if(r){if(c=21408+(28*(0|It(t,e))|0)+(l&lt;&lt;2)|0,(0|(c=0|s[c&gt;&gt;2]))&gt;0){i=0;do{l=0|at(l),i=i+1|0}while((0|i)!=(0|c))}if(1==(0|l)){a=3;break t}127==(0|(i=0|$(f,l)))&amp;&amp;C(23104,22949,376,23134),0|L(i)?C(23147,22949,377,23134):(m=c,p=l,a=i)}else m=0,p=l,a=h;if((0|(u=0|s[4304+(28*f|0)+(p&lt;&lt;2)&gt;&gt;2]))&lt;=-1&amp;&amp;C(23178,22949,384,23134),!d){if((0|m)&lt;=-1&amp;&amp;C(23030,22949,417,23134),0|m){l=0,i=0|s[(c=n)&gt;&gt;2],c=0|s[c+4&gt;&gt;2];do{i=0|Ot(i,c),c=0|w(),s[(_=n)&gt;&gt;2]=i,s[_+4&gt;&gt;2]=c,l=l+1|0}while((0|l)&lt;(0|m))}if((0|u)&lt;=0){l=54;break}for(l=0,i=0|s[(c=n)&gt;&gt;2],c=0|s[c+4&gt;&gt;2];;)if(i=0|Ot(i,c),c=0|w(),s[(_=n)&gt;&gt;2]=i,s[_+4&gt;&gt;2]=c,(0|(l=l+1|0))==(0|u)){l=54;break e}}if(7==(0|(h=0|U(a,f)))&amp;&amp;C(22925,22949,393,23134),i=0|s[(l=n)&gt;&gt;2],l=0|s[l+4&gt;&gt;2],(0|u)&gt;0){c=0;do{i=0|Ot(i,l),l=0|w(),s[(_=n)&gt;&gt;2]=i,s[_+4&gt;&gt;2]=l,c=c+1|0}while((0|c)!=(0|u))}if(i=0|It(i,l),_=0|B(a),(0|(i=0|s[(_?21824:21616)+(28*h|0)+(i&lt;&lt;2)&gt;&gt;2]))&lt;=-1&amp;&amp;C(23030,22949,412,23134),i){l=0,c=0|s[(h=n)&gt;&gt;2],h=0|s[h+4&gt;&gt;2];do{c=0|Dt(c,h),h=0|w(),s[(_=n)&gt;&gt;2]=c,s[_+4&gt;&gt;2]=h,l=l+1|0}while((0|l)&lt;(0|i));l=54}else l=54}else if(0!=(0|r)&amp;0!=(0|d))if(_=0|It(t,e),l=n,l=21408+(28*_|0)+((0|It(0|s[l&gt;&gt;2],0|s[l+4&gt;&gt;2]))&lt;&lt;2)|0,l=0|s[l&gt;&gt;2],(0|l)&lt;=-1&amp;&amp;C(23201,22949,433,23134),l){a=0,i=0|s[(c=n)&gt;&gt;2],c=0|s[c+4&gt;&gt;2];do{i=0|Ot(i,c),c=0|w(),s[(_=n)&gt;&gt;2]=i,s[_+4&gt;&gt;2]=c,a=a+1|0}while((0|a)&lt;(0|l));a=h,l=54}else a=h,l=55;else a=h,l=54}while(0);if(54==(0|l)&amp;&amp;d&amp;&amp;(l=55),55==(0|l)&amp;&amp;1==(0|It(0|s[(_=n)&gt;&gt;2],0|s[_+4&gt;&gt;2]))){a=4;break}A=0|s[(_=n)&gt;&gt;2],_=-1040385&amp;s[_+4&gt;&gt;2],v=0|ve(0|a,0,45),_=0|_|w(),s[(a=n)&gt;&gt;2]=A|v,s[a+4&gt;&gt;2]=_,a=0}else a=2}while(0);return I=o,0|a}function Kt(t,e){var i=0;if(!(e|=0))return 1;i=t|=0,t=1;do{t=0|_(0==(1&amp;e|0)?1:i,t),e&gt;&gt;=1,i=0|_(i,i)}while(0!=(0|e));return 0|t}function Xt(t,e,i){t|=0;var n,o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0;if(!(0|H(e|=0,i|=0))||(e=0|j(e),f=+r[i&gt;&gt;3],o=e&amp;(o=+r[i+8&gt;&gt;3])&lt;0?o+6.283185307179586:o,(0|(p=0|s[t&gt;&gt;2]))&lt;=0))return 0;if(n=0|s[t+4&gt;&gt;2],e){e=0,i=-1,t=0;t:for(;;){for(d=t;u=+r[n+(d&lt;&lt;4)+8&gt;&gt;3],a=+r[n+((t=(i+2|0)%(0|p)|0)&lt;&lt;4)+8&gt;&gt;3],(c=+r[n+(d&lt;&lt;4)&gt;&gt;3])&gt;(l=+r[n+(t&lt;&lt;4)&gt;&gt;3])?(h=c,c=u):(h=l,l=c,c=a,a=u),f&lt;l|f&gt;h;){if(!((0|(i=d+1|0))&lt;(0|p))){i=22;break t}t=d,d=i,i=t}if(o=(c=c&lt;0?c+6.283185307179586:c)==o|(u=a&lt;0?a+6.283185307179586:a)==o?o+-2220446049250313e-31:o,((u+=(f-l)/(h-l)*(c-u))&lt;0?u+6.283185307179586:u)&gt;o&amp;&amp;(e^=1),(0|(t=d+1|0))&gt;=(0|p)){i=22;break}i=d}if(22==(0|i))return 0|e}else{e=0,i=-1,t=0;t:for(;;){for(d=t;u=+r[n+(d&lt;&lt;4)+8&gt;&gt;3],a=+r[n+((t=(i+2|0)%(0|p)|0)&lt;&lt;4)+8&gt;&gt;3],(c=+r[n+(d&lt;&lt;4)&gt;&gt;3])&gt;(l=+r[n+(t&lt;&lt;4)&gt;&gt;3])?(h=c,c=u):(h=l,l=c,c=a,a=u),f&lt;l|f&gt;h;){if(!((0|(i=d+1|0))&lt;(0|p))){i=22;break t}t=d,d=i,i=t}if(a+(f-l)/(h-l)*(c-a)&gt;(o=c==o|a==o?o+-2220446049250313e-31:o)&amp;&amp;(e^=1),(0|(t=d+1|0))&gt;=(0|p)){i=22;break}i=d}if(22==(0|i))return 0|e}return 0}function Qt(t,e){e|=0;var i,n,o,a,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0;if(!(i=0|s[(t|=0)&gt;&gt;2]))return s[e&gt;&gt;2]=0,s[e+4&gt;&gt;2]=0,s[e+8&gt;&gt;2]=0,s[e+12&gt;&gt;2]=0,s[e+16&gt;&gt;2]=0,s[e+20&gt;&gt;2]=0,s[e+24&gt;&gt;2]=0,void(s[e+28&gt;&gt;2]=0);if(r[(n=e+8|0)&gt;&gt;3]=17976931348623157e292,r[(o=e+24|0)&gt;&gt;3]=17976931348623157e292,r[e&gt;&gt;3]=-17976931348623157e292,r[(a=e+16|0)&gt;&gt;3]=-17976931348623157e292,!((0|i)&lt;=0)){for(_=0|s[t+4&gt;&gt;2],g=17976931348623157e292,A=-17976931348623157e292,v=0,t=-1,d=17976931348623157e292,p=17976931348623157e292,m=-17976931348623157e292,h=-17976931348623157e292,b=0;f=+r[_+(b&lt;&lt;4)+8&gt;&gt;3],u=+r[_+(((0|(t=t+2|0))==(0|i)?0:t)&lt;&lt;4)+8&gt;&gt;3],(c=+r[_+(b&lt;&lt;4)&gt;&gt;3])&lt;d&amp;&amp;(r[n&gt;&gt;3]=c,d=c),f&lt;p&amp;&amp;(r[o&gt;&gt;3]=f,p=f),c&gt;m?r[e&gt;&gt;3]=c:c=m,f&gt;h&amp;&amp;(r[a&gt;&gt;3]=f,h=f),g=f&gt;0&amp;f&lt;g?f:g,A=f&lt;0&amp;f&gt;A?f:A,v|=+l(+(f-u))&gt;3.141592653589793,(0|(t=b+1|0))!=(0|i);)y=b,m=c,b=t,t=y;!v||(r[a&gt;&gt;3]=A,r[o&gt;&gt;3]=g)}}function Jt(t,e,i){var n=0,r=0;if(!(0|Xt(t|=0,e|=0,i|=0)))return 0;if((0|s[(r=t+8|0)&gt;&gt;2])&lt;=0)return 1;for(n=t+12|0,t=0;;){if(0|Xt((0|s[n&gt;&gt;2])+(t&lt;&lt;3)|0,e+((t=t+1|0)&lt;&lt;5)|0,i)){t=0,n=6;break}if((0|t)&gt;=(0|s[r&gt;&gt;2])){t=1,n=6;break}}return 6==(0|n)?0|t:0}function te(t,e,i,n,s){var o,a,l,c,h,u,d,p=0;r[(s|=0)&gt;&gt;3]=(c=+r[(t|=0)&gt;&gt;3])+(l=+r[(e|=0)&gt;&gt;3]-c)*(p=((p=+r[(n|=0)&gt;&gt;3]-(u=+r[(i|=0)&gt;&gt;3]))*((a=+r[t+8&gt;&gt;3])-(d=+r[i+8&gt;&gt;3]))-(c-u)*(h=+r[n+8&gt;&gt;3]-d))/(l*h-(o=+r[e+8&gt;&gt;3]-a)*p)),r[s+8&gt;&gt;3]=a+o*p}function ee(t,e){return+r[(t|=0)&gt;&gt;3]!=+r[(e|=0)&gt;&gt;3]?0|(e=0):0|(e=+r[t+8&gt;&gt;3]==+r[e+8&gt;&gt;3])}function ie(t,e){var i,n,s;return+((s=+r[(t|=0)&gt;&gt;3]-+r[(e|=0)&gt;&gt;3])*s+(n=+r[t+8&gt;&gt;3]-+r[e+8&gt;&gt;3])*n+(i=+r[t+16&gt;&gt;3]-+r[e+16&gt;&gt;3])*i)}function ne(t,e,i){t|=0,i|=0;var n=0;(0|(e|=0))&gt;0?(n=0|pe(e,4),s[t&gt;&gt;2]=n,n||C(23230,23253,40,23267)):s[t&gt;&gt;2]=0,s[t+4&gt;&gt;2]=e,s[t+8&gt;&gt;2]=0,s[t+12&gt;&gt;2]=i}function se(t){var e,i,n,o=0,a=0,c=0,u=0;e=4+(t|=0)|0,i=t+12|0,n=t+8|0;t:for(;;){for(a=0|s[e&gt;&gt;2],o=0;;){if((0|o)&gt;=(0|a))break t;if(u=0|s[(c=0|s[t&gt;&gt;2])+(o&lt;&lt;2)&gt;&gt;2])break;o=o+1|0}o=c+(~~(+l(+ +h(10,+ +(15-(0|s[i&gt;&gt;2])|0))*(+r[u&gt;&gt;3]+ +r[u+8&gt;&gt;3]))%+(0|a))&gt;&gt;&gt;0&lt;&lt;2)|0,a=0|s[o&gt;&gt;2];e:do{if(0|a){if(c=u+32|0,(0|a)==(0|u))s[o&gt;&gt;2]=s[c&gt;&gt;2];else{if(!(o=0|s[(a=a+32|0)&gt;&gt;2]))break;for(;(0|o)!=(0|u);)if(!(o=0|s[(a=o+32|0)&gt;&gt;2]))break e;s[a&gt;&gt;2]=s[c&gt;&gt;2]}de(u),s[n&gt;&gt;2]=(0|s[n&gt;&gt;2])-1}}while(0)}de(0|s[t&gt;&gt;2])}function re(t){var e,i=0,n=0;for(e=0|s[4+(t|=0)&gt;&gt;2],n=0;;){if((0|n)&gt;=(0|e)){i=0,n=4;break}if(i=0|s[(0|s[t&gt;&gt;2])+(n&lt;&lt;2)&gt;&gt;2]){n=4;break}n=n+1|0}return 4==(0|n)?0|i:0}function oe(t,e){e|=0;var i=0,n=0,o=0,a=0;if(i=~~(+l(+ +h(10,+ +(15-(0|s[12+(t|=0)&gt;&gt;2])|0))*(+r[e&gt;&gt;3]+ +r[e+8&gt;&gt;3]))%+(0|s[t+4&gt;&gt;2]))&gt;&gt;&gt;0,!(n=0|s[(i=(0|s[t&gt;&gt;2])+(i&lt;&lt;2)|0)&gt;&gt;2]))return 1;a=e+32|0;do{if((0|n)!=(0|e)){if(!(i=0|s[n+32&gt;&gt;2]))return 1;for(o=i;;){if((0|o)==(0|e)){o=8;break}if(!(i=0|s[o+32&gt;&gt;2])){i=1,o=10;break}n=o,o=i}if(8==(0|o)){s[n+32&gt;&gt;2]=s[a&gt;&gt;2];break}if(10==(0|o))return 0|i}else s[i&gt;&gt;2]=s[a&gt;&gt;2]}while(0);return de(e),s[(a=t+8|0)&gt;&gt;2]=(0|s[a&gt;&gt;2])-1,0}function ae(t,e,i){t|=0,e|=0,i|=0;var n,o=0,a=0,c=0;(n=0|ue(40))||C(23283,23253,98,23296),s[n&gt;&gt;2]=s[e&gt;&gt;2],s[n+4&gt;&gt;2]=s[e+4&gt;&gt;2],s[n+8&gt;&gt;2]=s[e+8&gt;&gt;2],s[n+12&gt;&gt;2]=s[e+12&gt;&gt;2],s[(a=n+16|0)&gt;&gt;2]=s[i&gt;&gt;2],s[a+4&gt;&gt;2]=s[i+4&gt;&gt;2],s[a+8&gt;&gt;2]=s[i+8&gt;&gt;2],s[a+12&gt;&gt;2]=s[i+12&gt;&gt;2],s[n+32&gt;&gt;2]=0,a=~~(+l(+ +h(10,+ +(15-(0|s[t+12&gt;&gt;2])|0))*(+r[e&gt;&gt;3]+ +r[e+8&gt;&gt;3]))%+(0|s[t+4&gt;&gt;2]))&gt;&gt;&gt;0,o=0|s[(a=(0|s[t&gt;&gt;2])+(a&lt;&lt;2)|0)&gt;&gt;2];do{if(o){for(;!(0|xt(o,e)&amp;&amp;0|xt(o+16|0,i));)if(!(0|s[(o=0==(0|(a=0|s[o+32&gt;&gt;2]))?o:a)+32&gt;&gt;2])){c=10;break}if(10==(0|c)){s[o+32&gt;&gt;2]=n;break}return de(n),0|o}s[a&gt;&gt;2]=n}while(0);return s[(c=t+8|0)&gt;&gt;2]=1+(0|s[c&gt;&gt;2]),0|n}function le(t,e,i){e|=0,i|=0;var n=0,o=0;if(o=~~(+l(+ +h(10,+ +(15-(0|s[12+(t|=0)&gt;&gt;2])|0))*(+r[e&gt;&gt;3]+ +r[e+8&gt;&gt;3]))%+(0|s[t+4&gt;&gt;2]))&gt;&gt;&gt;0,!(o=0|s[(0|s[t&gt;&gt;2])+(o&lt;&lt;2)&gt;&gt;2]))return 0;if(!i){for(t=o;;){if(0|xt(t,e)){n=10;break}if(!(t=0|s[t+32&gt;&gt;2])){t=0,n=10;break}}if(10==(0|n))return 0|t}for(t=o;;){if(0|xt(t,e)&amp;&amp;0|xt(t+16|0,i)){n=10;break}if(!(t=0|s[t+32&gt;&gt;2])){t=0,n=10;break}}return 10==(0|n)?0|t:0}function ce(t,e){e|=0;var i=0;if(i=~~(+l(+ +h(10,+ +(15-(0|s[12+(t|=0)&gt;&gt;2])|0))*(+r[e&gt;&gt;3]+ +r[e+8&gt;&gt;3]))%+(0|s[t+4&gt;&gt;2]))&gt;&gt;&gt;0,!(t=0|s[(0|s[t&gt;&gt;2])+(i&lt;&lt;2)&gt;&gt;2]))return 0;for(;;){if(0|xt(t,e)){e=5;break}if(!(t=0|s[t+32&gt;&gt;2])){t=0,e=5;break}}return 5==(0|e)?0|t:0}function he(t){return 0|~~+function(t){return+ +we(+(t=+t))}(t=+t)}function ue(t){t|=0;var e,i=0,n=0,r=0,o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0;e=I,I=I+16|0,f=e;do{if(t&gt;&gt;&gt;0&lt;245){if(3&amp;(n=(p=0|s[5829])&gt;&gt;&gt;(t=(u=t&gt;&gt;&gt;0&lt;11?16:t+11&amp;-8)&gt;&gt;&gt;3))|0)return(0|(a=0|s[(o=8+(r=0|s[(n=8+(t=23356+((i=(1&amp;n^1)+t|0)&lt;&lt;1&lt;&lt;2)|0)|0)&gt;&gt;2])|0)&gt;&gt;2]))==(0|t)?s[5829]=p&amp;~(1&lt;&lt;i):(s[a+12&gt;&gt;2]=t,s[n&gt;&gt;2]=a),s[r+4&gt;&gt;2]=3|(x=i&lt;&lt;3),s[(x=r+x+4|0)&gt;&gt;2]=1|s[x&gt;&gt;2],I=e,0|o;if(u&gt;&gt;&gt;0&gt;(d=0|s[5831])&gt;&gt;&gt;0){if(0|n)return i=((i=n&lt;&lt;t&amp;((i=2&lt;&lt;t)|0-i))&amp;0-i)-1|0,(0|(n=0|s[(c=8+(a=0|s[(t=8+(i=23356+((r=((n=(i&gt;&gt;&gt;=c=i&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|c|(a=(i&gt;&gt;&gt;=n)&gt;&gt;&gt;2&amp;4)|(t=(i&gt;&gt;&gt;=a)&gt;&gt;&gt;1&amp;2)|(r=(i&gt;&gt;&gt;=t)&gt;&gt;&gt;1&amp;1))+(i&gt;&gt;&gt;r)|0)&lt;&lt;1&lt;&lt;2)|0)|0)&gt;&gt;2])|0)&gt;&gt;2]))==(0|i)?s[5829]=t=p&amp;~(1&lt;&lt;r):(s[n+12&gt;&gt;2]=i,s[t&gt;&gt;2]=n,t=p),l=(x=r&lt;&lt;3)-u|0,s[a+4&gt;&gt;2]=3|u,s[4+(o=a+u|0)&gt;&gt;2]=1|l,s[a+x&gt;&gt;2]=l,0|d&amp;&amp;(r=0|s[5834],n=23356+((i=d&gt;&gt;&gt;3)&lt;&lt;1&lt;&lt;2)|0,t&amp;(i=1&lt;&lt;i)?i=0|s[(t=n+8|0)&gt;&gt;2]:(s[5829]=t|i,i=n,t=n+8|0),s[t&gt;&gt;2]=r,s[i+12&gt;&gt;2]=r,s[r+8&gt;&gt;2]=i,s[r+12&gt;&gt;2]=n),s[5831]=l,s[5834]=o,I=e,0|c;if(a=0|s[5830]){for(n=(a&amp;0-a)-1|0,n=h=0|s[23620+(((r=(n&gt;&gt;&gt;=o=n&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|o|(l=(n&gt;&gt;&gt;=r)&gt;&gt;&gt;2&amp;4)|(c=(n&gt;&gt;&gt;=l)&gt;&gt;&gt;1&amp;2)|(h=(n&gt;&gt;&gt;=c)&gt;&gt;&gt;1&amp;1))+(n&gt;&gt;&gt;h)&lt;&lt;2)&gt;&gt;2],c=h,h=(-8&amp;s[h+4&gt;&gt;2])-u|0;(t=0|s[n+16&gt;&gt;2])||(t=0|s[n+20&gt;&gt;2]);)n=t,c=(o=(l=(-8&amp;s[t+4&gt;&gt;2])-u|0)&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0)?t:c,h=o?l:h;if((l=c+u|0)&gt;&gt;&gt;0&gt;c&gt;&gt;&gt;0){o=0|s[c+24&gt;&gt;2],i=0|s[c+12&gt;&gt;2];do{if((0|i)==(0|c)){if(!(i=0|s[(t=c+20|0)&gt;&gt;2])&amp;&amp;!(i=0|s[(t=c+16|0)&gt;&gt;2])){n=0;break}for(;;)if(n=0|s[(r=i+20|0)&gt;&gt;2])i=n,t=r;else{if(!(n=0|s[(r=i+16|0)&gt;&gt;2]))break;i=n,t=r}s[t&gt;&gt;2]=0,n=i}else s[12+(n=0|s[c+8&gt;&gt;2])&gt;&gt;2]=i,s[i+8&gt;&gt;2]=n,n=i}while(0);do{if(0|o){if((0|c)==(0|s[(t=23620+((i=0|s[c+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])){if(s[t&gt;&gt;2]=n,!n){s[5830]=a&amp;~(1&lt;&lt;i);break}}else if(s[((0|s[(x=o+16|0)&gt;&gt;2])==(0|c)?x:o+20|0)&gt;&gt;2]=n,!n)break;s[n+24&gt;&gt;2]=o,0|(i=0|s[c+16&gt;&gt;2])&amp;&amp;(s[n+16&gt;&gt;2]=i,s[i+24&gt;&gt;2]=n),0|(i=0|s[c+20&gt;&gt;2])&amp;&amp;(s[n+20&gt;&gt;2]=i,s[i+24&gt;&gt;2]=n)}}while(0);return h&gt;&gt;&gt;0&lt;16?(s[c+4&gt;&gt;2]=3|(x=h+u|0),s[(x=c+x+4|0)&gt;&gt;2]=1|s[x&gt;&gt;2]):(s[c+4&gt;&gt;2]=3|u,s[l+4&gt;&gt;2]=1|h,s[l+h&gt;&gt;2]=h,0|d&amp;&amp;(r=0|s[5834],n=23356+((i=d&gt;&gt;&gt;3)&lt;&lt;1&lt;&lt;2)|0,(i=1&lt;&lt;i)&amp;p?i=0|s[(t=n+8|0)&gt;&gt;2]:(s[5829]=i|p,i=n,t=n+8|0),s[t&gt;&gt;2]=r,s[i+12&gt;&gt;2]=r,s[r+8&gt;&gt;2]=i,s[r+12&gt;&gt;2]=n),s[5831]=h,s[5834]=l),I=e,0|c+8}p=u}else p=u}else p=u}else if(t&gt;&gt;&gt;0&lt;=4294967231)if(u=-8&amp;(t=t+11|0),r=0|s[5830]){o=0-u|0,h=(t&gt;&gt;&gt;=8)?u&gt;&gt;&gt;0&gt;16777215?31:u&gt;&gt;&gt;(7+(h=14-((c=(520192+(A=t&lt;&lt;(p=(t+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|p|(h=(245760+(A&lt;&lt;=c)|0)&gt;&gt;&gt;16&amp;2))+(A&lt;&lt;h&gt;&gt;&gt;15)|0)|0)&amp;1|h&lt;&lt;1:0,n=0|s[23620+(h&lt;&lt;2)&gt;&gt;2];t:do{if(n)for(t=0,c=u&lt;&lt;(31==(0|h)?0:25-(h&gt;&gt;&gt;1)|0),a=0;;){if((l=(-8&amp;s[n+4&gt;&gt;2])-u|0)&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0){if(!l){t=n,o=0,A=65;break t}t=n,o=l}if(a=0==(0|(A=0|s[n+20&gt;&gt;2]))|(0|A)==(0|(n=0|s[n+16+(c&gt;&gt;&gt;31&lt;&lt;2)&gt;&gt;2]))?a:A,!n){n=a,A=61;break}c&lt;&lt;=1}else n=0,t=0,A=61}while(0);if(61==(0|A)){if(0==(0|n)&amp;0==(0|t)){if(!(t=((t=2&lt;&lt;h)|0-t)&amp;r)){p=u;break}p=(t&amp;0-t)-1|0,t=0,n=0|s[23620+(((a=(p&gt;&gt;&gt;=l=p&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|l|(c=(p&gt;&gt;&gt;=a)&gt;&gt;&gt;2&amp;4)|(h=(p&gt;&gt;&gt;=c)&gt;&gt;&gt;1&amp;2)|(n=(p&gt;&gt;&gt;=h)&gt;&gt;&gt;1&amp;1))+(p&gt;&gt;&gt;n)&lt;&lt;2)&gt;&gt;2]}n?A=65:(c=t,l=o)}if(65==(0|A))for(a=n;;){if(o=(n=(p=(-8&amp;s[a+4&gt;&gt;2])-u|0)&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0)?p:o,t=n?a:t,(n=0|s[a+16&gt;&gt;2])||(n=0|s[a+20&gt;&gt;2]),!n){c=t,l=o;break}a=n}if(0!=(0|c)&amp;&amp;l&gt;&gt;&gt;0&lt;((0|s[5831])-u|0)&gt;&gt;&gt;0&amp;&amp;(d=c+u|0)&gt;&gt;&gt;0&gt;c&gt;&gt;&gt;0){a=0|s[c+24&gt;&gt;2],i=0|s[c+12&gt;&gt;2];do{if((0|i)==(0|c)){if(!(i=0|s[(t=c+20|0)&gt;&gt;2])&amp;&amp;!(i=0|s[(t=c+16|0)&gt;&gt;2])){i=0;break}for(;;)if(n=0|s[(o=i+20|0)&gt;&gt;2])i=n,t=o;else{if(!(n=0|s[(o=i+16|0)&gt;&gt;2]))break;i=n,t=o}s[t&gt;&gt;2]=0}else s[12+(x=0|s[c+8&gt;&gt;2])&gt;&gt;2]=i,s[i+8&gt;&gt;2]=x}while(0);do{if(a){if((0|c)==(0|s[(n=23620+((t=0|s[c+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])){if(s[n&gt;&gt;2]=i,!i){s[5830]=r&amp;=~(1&lt;&lt;t);break}}else if(s[((0|s[(x=a+16|0)&gt;&gt;2])==(0|c)?x:a+20|0)&gt;&gt;2]=i,!i)break;s[i+24&gt;&gt;2]=a,0|(t=0|s[c+16&gt;&gt;2])&amp;&amp;(s[i+16&gt;&gt;2]=t,s[t+24&gt;&gt;2]=i),(t=0|s[c+20&gt;&gt;2])&amp;&amp;(s[i+20&gt;&gt;2]=t,s[t+24&gt;&gt;2]=i)}}while(0);t:do{if(l&gt;&gt;&gt;0&lt;16)x=l+u|0,s[c+4&gt;&gt;2]=3|x,x=c+x+4|0,s[x&gt;&gt;2]=1|s[x&gt;&gt;2];else{if(s[c+4&gt;&gt;2]=3|u,s[d+4&gt;&gt;2]=1|l,s[d+l&gt;&gt;2]=l,i=l&gt;&gt;&gt;3,l&gt;&gt;&gt;0&lt;256){n=23356+(i&lt;&lt;1&lt;&lt;2)|0,(t=0|s[5829])&amp;(i=1&lt;&lt;i)?i=0|s[(t=n+8|0)&gt;&gt;2]:(s[5829]=t|i,i=n,t=n+8|0),s[t&gt;&gt;2]=d,s[i+12&gt;&gt;2]=d,s[d+8&gt;&gt;2]=i,s[d+12&gt;&gt;2]=n;break}if(n=(i=l&gt;&gt;&gt;8)?l&gt;&gt;&gt;0&gt;16777215?31:l&gt;&gt;&gt;(7+(n=14-((b=(520192+(x=i&lt;&lt;(y=(i+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|y|(n=(245760+(x&lt;&lt;=b)|0)&gt;&gt;&gt;16&amp;2))+(x&lt;&lt;n&gt;&gt;&gt;15)|0)|0)&amp;1|n&lt;&lt;1:0,i=23620+(n&lt;&lt;2)|0,s[d+28&gt;&gt;2]=n,s[4+(t=d+16|0)&gt;&gt;2]=0,s[t&gt;&gt;2]=0,!(r&amp;(t=1&lt;&lt;n))){s[5830]=r|t,s[i&gt;&gt;2]=d,s[d+24&gt;&gt;2]=i,s[d+12&gt;&gt;2]=d,s[d+8&gt;&gt;2]=d;break}i=0|s[i&gt;&gt;2];e:do{if((-8&amp;s[i+4&gt;&gt;2]|0)!=(0|l)){for(r=l&lt;&lt;(31==(0|n)?0:25-(n&gt;&gt;&gt;1)|0);t=0|s[(n=i+16+(r&gt;&gt;&gt;31&lt;&lt;2)|0)&gt;&gt;2];){if((-8&amp;s[t+4&gt;&gt;2]|0)==(0|l)){i=t;break e}r&lt;&lt;=1,i=t}s[n&gt;&gt;2]=d,s[d+24&gt;&gt;2]=i,s[d+12&gt;&gt;2]=d,s[d+8&gt;&gt;2]=d;break t}}while(0);s[12+(x=0|s[(y=i+8|0)&gt;&gt;2])&gt;&gt;2]=d,s[y&gt;&gt;2]=d,s[d+8&gt;&gt;2]=x,s[d+12&gt;&gt;2]=i,s[d+24&gt;&gt;2]=0}}while(0);return I=e,0|c+8}p=u}else p=u;else p=-1}while(0);if((n=0|s[5831])&gt;&gt;&gt;0&gt;=p&gt;&gt;&gt;0)return t=0|s[5834],(i=n-p|0)&gt;&gt;&gt;0&gt;15?(s[5834]=x=t+p|0,s[5831]=i,s[x+4&gt;&gt;2]=1|i,s[t+n&gt;&gt;2]=i,s[t+4&gt;&gt;2]=3|p):(s[5831]=0,s[5834]=0,s[t+4&gt;&gt;2]=3|n,s[(x=t+n+4|0)&gt;&gt;2]=1|s[x&gt;&gt;2]),I=e,0|t+8;if((l=0|s[5832])&gt;&gt;&gt;0&gt;p&gt;&gt;&gt;0)return s[5832]=b=l-p|0,s[5835]=y=(x=0|s[5835])+p|0,s[y+4&gt;&gt;2]=1|b,s[x+4&gt;&gt;2]=3|p,I=e,0|x+8;if(0|s[5947]?t=0|s[5949]:(s[5949]=4096,s[5948]=4096,s[5950]=-1,s[5951]=-1,s[5952]=0,s[5940]=0,s[5947]=-16&amp;f^1431655768,t=4096),c=p+48|0,(u=(a=t+(h=p+47|0)|0)&amp;(o=0-t|0))&gt;&gt;&gt;0&lt;=p&gt;&gt;&gt;0||0|(t=0|s[5939])&amp;&amp;(f=(d=0|s[5937])+u|0)&gt;&gt;&gt;0&lt;=d&gt;&gt;&gt;0|f&gt;&gt;&gt;0&gt;t&gt;&gt;&gt;0)return I=e,0;t:do{if(4&amp;s[5940])i=0,A=143;else{n=0|s[5835];e:do{if(n){for(r=23764;!((f=0|s[r&gt;&gt;2])&gt;&gt;&gt;0&lt;=n&gt;&gt;&gt;0&amp;&amp;(f+(0|s[r+4&gt;&gt;2])|0)&gt;&gt;&gt;0&gt;n&gt;&gt;&gt;0);){if(!(t=0|s[r+8&gt;&gt;2])){A=128;break e}r=t}if((i=a-l&amp;o)&gt;&gt;&gt;0&lt;2147483647)if((0|(t=0|Ce(0|i)))==((0|s[r&gt;&gt;2])+(0|s[r+4&gt;&gt;2])|0)){if(-1!=(0|t)){l=i,a=t,A=145;break t}}else r=t,A=136;else i=0}else A=128}while(0);do{if(128==(0|A))if(-1!=(0|(n=0|Ce(0)))&amp;&amp;(g=(i=(0==((g=(m=0|s[5948])-1|0)&amp;(i=n)|0)?0:(g+i&amp;0-m)-i|0)+u|0)+(m=0|s[5937])|0,i&gt;&gt;&gt;0&gt;p&gt;&gt;&gt;0&amp;i&gt;&gt;&gt;0&lt;2147483647)){if(0|(f=0|s[5939])&amp;&amp;g&gt;&gt;&gt;0&lt;=m&gt;&gt;&gt;0|g&gt;&gt;&gt;0&gt;f&gt;&gt;&gt;0){i=0;break}if((0|(t=0|Ce(0|i)))==(0|n)){l=i,a=n,A=145;break t}r=t,A=136}else i=0}while(0);do{if(136==(0|A)){if(n=0-i|0,!(c&gt;&gt;&gt;0&gt;i&gt;&gt;&gt;0&amp;i&gt;&gt;&gt;0&lt;2147483647&amp;-1!=(0|r))){if(-1==(0|r)){i=0;break}l=i,a=r,A=145;break t}if((t=h-i+(t=0|s[5949])&amp;0-t)&gt;&gt;&gt;0&gt;=2147483647){l=i,a=r,A=145;break t}if(-1==(0|Ce(0|t))){Ce(0|n),i=0;break}l=t+i|0,a=r,A=145;break t}}while(0);s[5940]=4|s[5940],A=143}}while(0);if((143==(0|A)&amp;&amp;u&gt;&gt;&gt;0&lt;2147483647?!(-1==(0|(b=0|Ce(0|u)))|1^(_=(v=(g=0|Ce(0))-b|0)&gt;&gt;&gt;0&gt;(p+40|0)&gt;&gt;&gt;0)|b&gt;&gt;&gt;0&lt;g&gt;&gt;&gt;0&amp;-1!=(0|b)&amp;-1!=(0|g)^1):0)&amp;&amp;(l=_?v:i,a=b,A=145),145==(0|A)){s[5937]=i=(0|s[5937])+l|0,i&gt;&gt;&gt;0&gt;(0|s[5938])&gt;&gt;&gt;0&amp;&amp;(s[5938]=i),h=0|s[5835];t:do{if(h){for(i=23764;;){if((0|a)==((t=0|s[i&gt;&gt;2])+(n=0|s[i+4&gt;&gt;2])|0)){A=154;break}if(!(r=0|s[i+8&gt;&gt;2]))break;i=r}if(154==(0|A)&amp;&amp;(y=i+4|0,0==(8&amp;s[i+12&gt;&gt;2]|0))&amp;&amp;a&gt;&gt;&gt;0&gt;h&gt;&gt;&gt;0&amp;t&gt;&gt;&gt;0&lt;=h&gt;&gt;&gt;0){s[y&gt;&gt;2]=n+l,y=h+(b=0==(7&amp;(b=h+8|0)|0)?0:0-b&amp;7)|0,b=(x=(0|s[5832])+l|0)-b|0,s[5835]=y,s[5832]=b,s[y+4&gt;&gt;2]=1|b,s[h+x+4&gt;&gt;2]=40,s[5836]=s[5951];break}for(a&gt;&gt;&gt;0&lt;(0|s[5833])&gt;&gt;&gt;0&amp;&amp;(s[5833]=a),n=a+l|0,i=23764;;){if((0|s[i&gt;&gt;2])==(0|n)){A=162;break}if(!(t=0|s[i+8&gt;&gt;2]))break;i=t}if(162==(0|A)&amp;&amp;0==(8&amp;s[i+12&gt;&gt;2]|0)){s[i&gt;&gt;2]=a,s[(d=i+4|0)&gt;&gt;2]=(0|s[d&gt;&gt;2])+l,u=(d=a+(0==(7&amp;(d=a+8|0)|0)?0:0-d&amp;7)|0)+p|0,c=(i=n+(0==(7&amp;(i=n+8|0)|0)?0:0-i&amp;7)|0)-d-p|0,s[d+4&gt;&gt;2]=3|p;e:do{if((0|h)==(0|i))x=(0|s[5832])+c|0,s[5832]=x,s[5835]=u,s[u+4&gt;&gt;2]=1|x;else{if((0|s[5834])==(0|i)){s[5831]=x=(0|s[5831])+c|0,s[5834]=u,s[u+4&gt;&gt;2]=1|x,s[u+x&gt;&gt;2]=x;break}if(1==(3&amp;(t=0|s[i+4&gt;&gt;2])|0)){l=-8&amp;t,r=t&gt;&gt;&gt;3;i:do{if(t&gt;&gt;&gt;0&lt;256){if((0|(n=0|s[i+12&gt;&gt;2]))==(0|(t=0|s[i+8&gt;&gt;2]))){s[5829]=s[5829]&amp;~(1&lt;&lt;r);break}s[t+12&gt;&gt;2]=n,s[n+8&gt;&gt;2]=t;break}a=0|s[i+24&gt;&gt;2],t=0|s[i+12&gt;&gt;2];do{if((0|t)==(0|i)){if(t=0|s[(r=4+(n=i+16|0)|0)&gt;&gt;2])n=r;else if(!(t=0|s[n&gt;&gt;2])){t=0;break}for(;;)if(r=0|s[(o=t+20|0)&gt;&gt;2])t=r,n=o;else{if(!(r=0|s[(o=t+16|0)&gt;&gt;2]))break;t=r,n=o}s[n&gt;&gt;2]=0}else s[12+(x=0|s[i+8&gt;&gt;2])&gt;&gt;2]=t,s[t+8&gt;&gt;2]=x}while(0);if(!a)break;r=23620+((n=0|s[i+28&gt;&gt;2])&lt;&lt;2)|0;do{if((0|s[r&gt;&gt;2])==(0|i)){if(s[r&gt;&gt;2]=t,0|t)break;s[5830]=s[5830]&amp;~(1&lt;&lt;n);break i}if(s[((0|s[(x=a+16|0)&gt;&gt;2])==(0|i)?x:a+20|0)&gt;&gt;2]=t,!t)break i}while(0);if(s[t+24&gt;&gt;2]=a,0|(r=0|s[(n=i+16|0)&gt;&gt;2])&amp;&amp;(s[t+16&gt;&gt;2]=r,s[r+24&gt;&gt;2]=t),!(n=0|s[n+4&gt;&gt;2]))break;s[t+20&gt;&gt;2]=n,s[n+24&gt;&gt;2]=t}while(0);i=i+l|0,o=l+c|0}else o=c;if(s[(i=i+4|0)&gt;&gt;2]=-2&amp;s[i&gt;&gt;2],s[u+4&gt;&gt;2]=1|o,s[u+o&gt;&gt;2]=o,i=o&gt;&gt;&gt;3,o&gt;&gt;&gt;0&lt;256){n=23356+(i&lt;&lt;1&lt;&lt;2)|0,(t=0|s[5829])&amp;(i=1&lt;&lt;i)?i=0|s[(t=n+8|0)&gt;&gt;2]:(s[5829]=t|i,i=n,t=n+8|0),s[t&gt;&gt;2]=u,s[i+12&gt;&gt;2]=u,s[u+8&gt;&gt;2]=i,s[u+12&gt;&gt;2]=n;break}i=o&gt;&gt;&gt;8;do{if(i){if(o&gt;&gt;&gt;0&gt;16777215){r=31;break}r=o&gt;&gt;&gt;(7+(r=14-((b=(520192+(x=i&lt;&lt;(y=(i+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|y|(r=(245760+(x&lt;&lt;=b)|0)&gt;&gt;&gt;16&amp;2))+(x&lt;&lt;r&gt;&gt;&gt;15)|0)|0)&amp;1|r&lt;&lt;1}else r=0}while(0);if(i=23620+(r&lt;&lt;2)|0,s[u+28&gt;&gt;2]=r,s[4+(t=u+16|0)&gt;&gt;2]=0,s[t&gt;&gt;2]=0,!((t=0|s[5830])&amp;(n=1&lt;&lt;r))){s[5830]=t|n,s[i&gt;&gt;2]=u,s[u+24&gt;&gt;2]=i,s[u+12&gt;&gt;2]=u,s[u+8&gt;&gt;2]=u;break}i=0|s[i&gt;&gt;2];i:do{if((-8&amp;s[i+4&gt;&gt;2]|0)!=(0|o)){for(r=o&lt;&lt;(31==(0|r)?0:25-(r&gt;&gt;&gt;1)|0);t=0|s[(n=i+16+(r&gt;&gt;&gt;31&lt;&lt;2)|0)&gt;&gt;2];){if((-8&amp;s[t+4&gt;&gt;2]|0)==(0|o)){i=t;break i}r&lt;&lt;=1,i=t}s[n&gt;&gt;2]=u,s[u+24&gt;&gt;2]=i,s[u+12&gt;&gt;2]=u,s[u+8&gt;&gt;2]=u;break e}}while(0);s[12+(x=0|s[(y=i+8|0)&gt;&gt;2])&gt;&gt;2]=u,s[y&gt;&gt;2]=u,s[u+8&gt;&gt;2]=x,s[u+12&gt;&gt;2]=i,s[u+24&gt;&gt;2]=0}}while(0);return I=e,0|d+8}for(i=23764;!((t=0|s[i&gt;&gt;2])&gt;&gt;&gt;0&lt;=h&gt;&gt;&gt;0&amp;&amp;(x=t+(0|s[i+4&gt;&gt;2])|0,x&gt;&gt;&gt;0&gt;h&gt;&gt;&gt;0));)i=0|s[i+8&gt;&gt;2];i=(t=(t=(o=x+-47|0)+(0==(7&amp;(t=o+8|0)|0)?0:0-t&amp;7)|0)&gt;&gt;&gt;0&lt;(o=h+16|0)&gt;&gt;&gt;0?h:t)+8|0,y=a+(b=0==(7&amp;(b=a+8|0)|0)?0:0-b&amp;7)|0,b=(n=l+-40|0)-b|0,s[5835]=y,s[5832]=b,s[y+4&gt;&gt;2]=1|b,s[a+n+4&gt;&gt;2]=40,s[5836]=s[5951],s[(n=t+4|0)&gt;&gt;2]=27,s[i&gt;&gt;2]=s[5941],s[i+4&gt;&gt;2]=s[5942],s[i+8&gt;&gt;2]=s[5943],s[i+12&gt;&gt;2]=s[5944],s[5941]=a,s[5942]=l,s[5944]=0,s[5943]=i,i=t+24|0;do{y=i,s[(i=i+4|0)&gt;&gt;2]=7}while((y+8|0)&gt;&gt;&gt;0&lt;x&gt;&gt;&gt;0);if((0|t)!=(0|h)){if(a=t-h|0,s[n&gt;&gt;2]=-2&amp;s[n&gt;&gt;2],s[h+4&gt;&gt;2]=1|a,s[t&gt;&gt;2]=a,i=a&gt;&gt;&gt;3,a&gt;&gt;&gt;0&lt;256){n=23356+(i&lt;&lt;1&lt;&lt;2)|0,(t=0|s[5829])&amp;(i=1&lt;&lt;i)?i=0|s[(t=n+8|0)&gt;&gt;2]:(s[5829]=t|i,i=n,t=n+8|0),s[t&gt;&gt;2]=h,s[i+12&gt;&gt;2]=h,s[h+8&gt;&gt;2]=i,s[h+12&gt;&gt;2]=n;break}if(n=23620+((r=(i=a&gt;&gt;&gt;8)?a&gt;&gt;&gt;0&gt;16777215?31:a&gt;&gt;&gt;(7+(r=14-((b=(520192+(x=i&lt;&lt;(y=(i+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|y|(r=(245760+(x&lt;&lt;=b)|0)&gt;&gt;&gt;16&amp;2))+(x&lt;&lt;r&gt;&gt;&gt;15)|0)|0)&amp;1|r&lt;&lt;1:0)&lt;&lt;2)|0,s[h+28&gt;&gt;2]=r,s[h+20&gt;&gt;2]=0,s[o&gt;&gt;2]=0,!((i=0|s[5830])&amp;(t=1&lt;&lt;r))){s[5830]=i|t,s[n&gt;&gt;2]=h,s[h+24&gt;&gt;2]=n,s[h+12&gt;&gt;2]=h,s[h+8&gt;&gt;2]=h;break}i=0|s[n&gt;&gt;2];e:do{if((-8&amp;s[i+4&gt;&gt;2]|0)!=(0|a)){for(r=a&lt;&lt;(31==(0|r)?0:25-(r&gt;&gt;&gt;1)|0);t=0|s[(n=i+16+(r&gt;&gt;&gt;31&lt;&lt;2)|0)&gt;&gt;2];){if((-8&amp;s[t+4&gt;&gt;2]|0)==(0|a)){i=t;break e}r&lt;&lt;=1,i=t}s[n&gt;&gt;2]=h,s[h+24&gt;&gt;2]=i,s[h+12&gt;&gt;2]=h,s[h+8&gt;&gt;2]=h;break t}}while(0);s[12+(x=0|s[(y=i+8|0)&gt;&gt;2])&gt;&gt;2]=h,s[y&gt;&gt;2]=h,s[h+8&gt;&gt;2]=x,s[h+12&gt;&gt;2]=i,s[h+24&gt;&gt;2]=0}}else x=0|s[5833],0==(0|x)|a&gt;&gt;&gt;0&lt;x&gt;&gt;&gt;0&amp;&amp;(s[5833]=a),s[5941]=a,s[5942]=l,s[5944]=0,s[5838]=s[5947],s[5837]=-1,s[5842]=23356,s[5841]=23356,s[5844]=23364,s[5843]=23364,s[5846]=23372,s[5845]=23372,s[5848]=23380,s[5847]=23380,s[5850]=23388,s[5849]=23388,s[5852]=23396,s[5851]=23396,s[5854]=23404,s[5853]=23404,s[5856]=23412,s[5855]=23412,s[5858]=23420,s[5857]=23420,s[5860]=23428,s[5859]=23428,s[5862]=23436,s[5861]=23436,s[5864]=23444,s[5863]=23444,s[5866]=23452,s[5865]=23452,s[5868]=23460,s[5867]=23460,s[5870]=23468,s[5869]=23468,s[5872]=23476,s[5871]=23476,s[5874]=23484,s[5873]=23484,s[5876]=23492,s[5875]=23492,s[5878]=23500,s[5877]=23500,s[5880]=23508,s[5879]=23508,s[5882]=23516,s[5881]=23516,s[5884]=23524,s[5883]=23524,s[5886]=23532,s[5885]=23532,s[5888]=23540,s[5887]=23540,s[5890]=23548,s[5889]=23548,s[5892]=23556,s[5891]=23556,s[5894]=23564,s[5893]=23564,s[5896]=23572,s[5895]=23572,s[5898]=23580,s[5897]=23580,s[5900]=23588,s[5899]=23588,s[5902]=23596,s[5901]=23596,s[5904]=23604,s[5903]=23604,x=l+-40|0,b=a+8|0,b=0==(7&amp;b|0)?0:0-b&amp;7,y=a+b|0,b=x-b|0,s[5835]=y,s[5832]=b,s[y+4&gt;&gt;2]=1|b,s[a+x+4&gt;&gt;2]=40,s[5836]=s[5951]}while(0);if((i=0|s[5832])&gt;&gt;&gt;0&gt;p&gt;&gt;&gt;0)return s[5832]=b=i-p|0,s[5835]=y=(x=0|s[5835])+p|0,s[y+4&gt;&gt;2]=1|b,s[x+4&gt;&gt;2]=3|p,I=e,0|x+8}return s[(x=23312)&gt;&gt;2]=12,I=e,0}function de(t){var e=0,i=0,n=0,r=0,o=0,a=0,l=0,c=0;if(t|=0){r=0|s[5833],c=(i=t+-8|0)+(e=-8&amp;(t=0|s[t+-4&gt;&gt;2]))|0;do{if(1&amp;t)l=i,a=i;else{if(n=0|s[i&gt;&gt;2],!(3&amp;t)||(o=n+e|0,(a=i+(0-n)|0)&gt;&gt;&gt;0&lt;r&gt;&gt;&gt;0))return;if((0|s[5834])==(0|a)){if(3!=(3&amp;(e=0|s[(t=c+4|0)&gt;&gt;2])|0)){l=a,e=o;break}return s[5831]=o,s[t&gt;&gt;2]=-2&amp;e,s[a+4&gt;&gt;2]=1|o,void(s[a+o&gt;&gt;2]=o)}if(i=n&gt;&gt;&gt;3,n&gt;&gt;&gt;0&lt;256){if((0|(e=0|s[a+12&gt;&gt;2]))==(0|(t=0|s[a+8&gt;&gt;2]))){s[5829]=s[5829]&amp;~(1&lt;&lt;i),l=a,e=o;break}s[t+12&gt;&gt;2]=e,s[e+8&gt;&gt;2]=t,l=a,e=o;break}r=0|s[a+24&gt;&gt;2],t=0|s[a+12&gt;&gt;2];do{if((0|t)==(0|a)){if(t=0|s[(i=4+(e=a+16|0)|0)&gt;&gt;2])e=i;else if(!(t=0|s[e&gt;&gt;2])){t=0;break}for(;;)if(i=0|s[(n=t+20|0)&gt;&gt;2])t=i,e=n;else{if(!(i=0|s[(n=t+16|0)&gt;&gt;2]))break;t=i,e=n}s[e&gt;&gt;2]=0}else s[12+(l=0|s[a+8&gt;&gt;2])&gt;&gt;2]=t,s[t+8&gt;&gt;2]=l}while(0);if(r){if((0|s[(i=23620+((e=0|s[a+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])==(0|a)){if(s[i&gt;&gt;2]=t,!t){s[5830]=s[5830]&amp;~(1&lt;&lt;e),l=a,e=o;break}}else if(s[((0|s[(l=r+16|0)&gt;&gt;2])==(0|a)?l:r+20|0)&gt;&gt;2]=t,!t){l=a,e=o;break}s[t+24&gt;&gt;2]=r,0|(i=0|s[(e=a+16|0)&gt;&gt;2])&amp;&amp;(s[t+16&gt;&gt;2]=i,s[i+24&gt;&gt;2]=t),(e=0|s[e+4&gt;&gt;2])?(s[t+20&gt;&gt;2]=e,s[e+24&gt;&gt;2]=t,l=a,e=o):(l=a,e=o)}else l=a,e=o}}while(0);if(!(a&gt;&gt;&gt;0&gt;=c&gt;&gt;&gt;0)&amp;&amp;1&amp;(n=0|s[(t=c+4|0)&gt;&gt;2])){if(2&amp;n)s[t&gt;&gt;2]=-2&amp;n,s[l+4&gt;&gt;2]=1|e,s[a+e&gt;&gt;2]=e,r=e;else{if((0|s[5835])==(0|c)){if(s[5832]=c=(0|s[5832])+e|0,s[5835]=l,s[l+4&gt;&gt;2]=1|c,(0|l)!=(0|s[5834]))return;return s[5834]=0,void(s[5831]=0)}if((0|s[5834])==(0|c))return s[5831]=c=(0|s[5831])+e|0,s[5834]=a,s[l+4&gt;&gt;2]=1|c,void(s[a+c&gt;&gt;2]=c);r=(-8&amp;n)+e|0,i=n&gt;&gt;&gt;3;do{if(n&gt;&gt;&gt;0&lt;256){if((0|(t=0|s[c+12&gt;&gt;2]))==(0|(e=0|s[c+8&gt;&gt;2]))){s[5829]=s[5829]&amp;~(1&lt;&lt;i);break}s[e+12&gt;&gt;2]=t,s[t+8&gt;&gt;2]=e;break}o=0|s[c+24&gt;&gt;2],t=0|s[c+12&gt;&gt;2];do{if((0|t)==(0|c)){if(t=0|s[(i=4+(e=c+16|0)|0)&gt;&gt;2])e=i;else if(!(t=0|s[e&gt;&gt;2])){i=0;break}for(;;)if(i=0|s[(n=t+20|0)&gt;&gt;2])t=i,e=n;else{if(!(i=0|s[(n=t+16|0)&gt;&gt;2]))break;t=i,e=n}s[e&gt;&gt;2]=0,i=t}else s[12+(i=0|s[c+8&gt;&gt;2])&gt;&gt;2]=t,s[t+8&gt;&gt;2]=i,i=t}while(0);if(0|o){if((0|s[(e=23620+((t=0|s[c+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])==(0|c)){if(s[e&gt;&gt;2]=i,!i){s[5830]=s[5830]&amp;~(1&lt;&lt;t);break}}else if(s[((0|s[(n=o+16|0)&gt;&gt;2])==(0|c)?n:o+20|0)&gt;&gt;2]=i,!i)break;s[i+24&gt;&gt;2]=o,0|(e=0|s[(t=c+16|0)&gt;&gt;2])&amp;&amp;(s[i+16&gt;&gt;2]=e,s[e+24&gt;&gt;2]=i),0|(t=0|s[t+4&gt;&gt;2])&amp;&amp;(s[i+20&gt;&gt;2]=t,s[t+24&gt;&gt;2]=i)}}while(0);if(s[l+4&gt;&gt;2]=1|r,s[a+r&gt;&gt;2]=r,(0|l)==(0|s[5834]))return void(s[5831]=r)}if(t=r&gt;&gt;&gt;3,r&gt;&gt;&gt;0&lt;256)return i=23356+(t&lt;&lt;1&lt;&lt;2)|0,(e=0|s[5829])&amp;(t=1&lt;&lt;t)?t=0|s[(e=i+8|0)&gt;&gt;2]:(s[5829]=e|t,t=i,e=i+8|0),s[e&gt;&gt;2]=l,s[t+12&gt;&gt;2]=l,s[l+8&gt;&gt;2]=t,void(s[l+12&gt;&gt;2]=i);n=(t=r&gt;&gt;&gt;8)?r&gt;&gt;&gt;0&gt;16777215?31:r&gt;&gt;&gt;(7+(n=14-((o=(520192+(c=t&lt;&lt;(a=(t+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|a|(n=(245760+(c&lt;&lt;=o)|0)&gt;&gt;&gt;16&amp;2))+(c&lt;&lt;n&gt;&gt;&gt;15)|0)|0)&amp;1|n&lt;&lt;1:0,t=23620+(n&lt;&lt;2)|0,s[l+28&gt;&gt;2]=n,s[l+20&gt;&gt;2]=0,s[l+16&gt;&gt;2]=0,e=0|s[5830],i=1&lt;&lt;n;t:do{if(e&amp;i){t=0|s[t&gt;&gt;2];e:do{if((-8&amp;s[t+4&gt;&gt;2]|0)!=(0|r)){for(n=r&lt;&lt;(31==(0|n)?0:25-(n&gt;&gt;&gt;1)|0);e=0|s[(i=t+16+(n&gt;&gt;&gt;31&lt;&lt;2)|0)&gt;&gt;2];){if((-8&amp;s[e+4&gt;&gt;2]|0)==(0|r)){t=e;break e}n&lt;&lt;=1,t=e}s[i&gt;&gt;2]=l,s[l+24&gt;&gt;2]=t,s[l+12&gt;&gt;2]=l,s[l+8&gt;&gt;2]=l;break t}}while(0);s[12+(c=0|s[(a=t+8|0)&gt;&gt;2])&gt;&gt;2]=l,s[a&gt;&gt;2]=l,s[l+8&gt;&gt;2]=c,s[l+12&gt;&gt;2]=t,s[l+24&gt;&gt;2]=0}else s[5830]=e|i,s[t&gt;&gt;2]=l,s[l+24&gt;&gt;2]=t,s[l+12&gt;&gt;2]=l,s[l+8&gt;&gt;2]=l}while(0);if(s[5837]=c=(0|s[5837])-1|0,!(0|c)){for(t=23772;t=0|s[t&gt;&gt;2];)t=t+8|0;s[5837]=-1}}}}function pe(t,e){e|=0;var i=0;return(t|=0)?(i=0|_(e,t),(e|t)&gt;&gt;&gt;0&gt;65535&amp;&amp;(i=(0|(i&gt;&gt;&gt;0)/(t&gt;&gt;&gt;0))==(0|e)?i:-1)):i=0,!(t=0|ue(i))||!(3&amp;s[t+-4&gt;&gt;2])||xe(0|t,0,0|i),0|t}function fe(t,e,i,n){return x(0|(n=(e|=0)-(n|=0)-((i|=0)&gt;&gt;&gt;0&gt;(t|=0)&gt;&gt;&gt;0|0)&gt;&gt;&gt;0)),0|t-i&gt;&gt;&gt;0}function me(t){return 0|((t|=0)?31-(0|y(t^t-1))|0:32)}function ge(t,e,i,n){var r,o;return o=I,I=I+16|0,function(t,e,i,n,r){r|=0;var o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0;if(u=t|=0,a=i|=0,l=p=n|=0,!(h=c=e|=0))return o=0!=(0|r),l?o?(s[r&gt;&gt;2]=0|t,s[r+4&gt;&gt;2]=0&amp;e,r=0,x(0|(p=0)),0|r):(r=0,x(0|(p=0)),0|r):(o&amp;&amp;(s[r&gt;&gt;2]=(u&gt;&gt;&gt;0)%(a&gt;&gt;&gt;0),s[r+4&gt;&gt;2]=0),r=(u&gt;&gt;&gt;0)/(a&gt;&gt;&gt;0)&gt;&gt;&gt;0,x(0|(p=0)),0|r);o=0==(0|l);do{if(a){if(!o){if((o=(0|y(0|l))-(0|y(0|h))|0)&gt;&gt;&gt;0&lt;=31){a=d=o+1|0,t=u&gt;&gt;&gt;(d&gt;&gt;&gt;0)&amp;(e=o-31&gt;&gt;31)|h&lt;&lt;(l=31-o|0),e&amp;=h&gt;&gt;&gt;(d&gt;&gt;&gt;0),o=0,l=u&lt;&lt;l;break}return r?(s[r&gt;&gt;2]=0|t,s[r+4&gt;&gt;2]=c|0&amp;e,r=0,x(0|(p=0)),0|r):(r=0,x(0|(p=0)),0|r)}if((o=a-1|0)&amp;a|0){a=l=33+(0|y(0|a))-(0|y(0|h))|0,t=(d=32-l|0)-1&gt;&gt;31&amp;h&gt;&gt;&gt;((f=l-32|0)&gt;&gt;&gt;0)|(h&lt;&lt;d|u&gt;&gt;&gt;(l&gt;&gt;&gt;0))&amp;(e=f&gt;&gt;31),e&amp;=h&gt;&gt;&gt;(l&gt;&gt;&gt;0),o=u&lt;&lt;(m=64-l|0)&amp;(c=d&gt;&gt;31),l=(h&lt;&lt;m|u&gt;&gt;&gt;(f&gt;&gt;&gt;0))&amp;c|u&lt;&lt;d&amp;l-33&gt;&gt;31;break}return 0|r&amp;&amp;(s[r&gt;&gt;2]=o&amp;u,s[r+4&gt;&gt;2]=0),1==(0|a)?(m=0|t,x(0|(f=c|0&amp;e)),0|m):(f=h&gt;&gt;&gt;((m=0|me(0|a))&gt;&gt;&gt;0)|0,m=h&lt;&lt;32-m|u&gt;&gt;&gt;(m&gt;&gt;&gt;0)|0,x(0|f),0|m)}if(o)return 0|r&amp;&amp;(s[r&gt;&gt;2]=(h&gt;&gt;&gt;0)%(a&gt;&gt;&gt;0),s[r+4&gt;&gt;2]=0),m=(h&gt;&gt;&gt;0)/(a&gt;&gt;&gt;0)&gt;&gt;&gt;0,x(0|(f=0)),0|m;if(!u)return 0|r&amp;&amp;(s[r&gt;&gt;2]=0,s[r+4&gt;&gt;2]=(h&gt;&gt;&gt;0)%(l&gt;&gt;&gt;0)),m=(h&gt;&gt;&gt;0)/(l&gt;&gt;&gt;0)&gt;&gt;&gt;0,x(0|(f=0)),0|m;if(!((o=l-1|0)&amp;l))return 0|r&amp;&amp;(s[r&gt;&gt;2]=0|t,s[r+4&gt;&gt;2]=o&amp;h|0&amp;e),f=0,m=h&gt;&gt;&gt;((0|me(0|l))&gt;&gt;&gt;0),x(0|f),0|m;if((o=(0|y(0|l))-(0|y(0|h))|0)&gt;&gt;&gt;0&lt;=30){a=e=o+1|0,t=h&lt;&lt;(l=31-o|0)|u&gt;&gt;&gt;(e&gt;&gt;&gt;0),e=h&gt;&gt;&gt;(e&gt;&gt;&gt;0),o=0,l=u&lt;&lt;l;break}return r?(s[r&gt;&gt;2]=0|t,s[r+4&gt;&gt;2]=c|0&amp;e,m=0,x(0|(f=0)),0|m):(m=0,x(0|(f=0)),0|m)}while(0);if(a){h=0|function(t,e,i,n){return x((e|=0)+(n|=0)+((i=(t|=0)+(i|=0)&gt;&gt;&gt;0)&gt;&gt;&gt;0&lt;t&gt;&gt;&gt;0|0)&gt;&gt;&gt;0|0),0|i}(0|(d=0|i),0|(u=p|0&amp;n),-1,-1),i=0|w(),c=l,l=0;do{n=c,c=o&gt;&gt;&gt;31|c&lt;&lt;1,o=l|o&lt;&lt;1,fe(0|h,0|i,0|(n=t&lt;&lt;1|n&gt;&gt;&gt;31|0),0|(p=t&gt;&gt;&gt;31|e&lt;&lt;1|0)),l=1&amp;(f=(m=0|w())&gt;&gt;31|((0|m)&lt;0?-1:0)&lt;&lt;1),t=0|fe(0|n,0|p,f&amp;d|0,(((0|m)&lt;0?-1:0)&gt;&gt;31|((0|m)&lt;0?-1:0)&lt;&lt;1)&amp;u|0),e=0|w(),a=a-1|0}while(0!=(0|a));h=c,c=0}else h=l,c=0,l=0;a=0,0|r&amp;&amp;(s[r&gt;&gt;2]=t,s[r+4&gt;&gt;2]=e),m=-2&amp;(o&lt;&lt;1|0)|l,x(0|(f=(0|o)&gt;&gt;&gt;31|(h|a)&lt;&lt;1|0&amp;(a&lt;&lt;1|o&gt;&gt;&gt;31)|c))}(t|=0,e|=0,i|=0,n|=0,r=0|o),I=o,x(0|s[r+4&gt;&gt;2]),0|s[r&gt;&gt;2]}function Ae(t,e,i){return t|=0,e|=0,(0|(i|=0))&lt;32?(x(e&gt;&gt;&gt;i|0),t&gt;&gt;&gt;i|(e&amp;(1&lt;&lt;i)-1)&lt;&lt;32-i):(x(0),e&gt;&gt;&gt;i-32|0)}function ve(t,e,i){return t|=0,(0|(i|=0))&lt;32?(x((e|=0)&lt;&lt;i|(t&amp;(1&lt;&lt;i)-1&lt;&lt;32-i)&gt;&gt;&gt;32-i|0),t&lt;&lt;i):(x(t&lt;&lt;i-32|0),0)}function _e(t,e){return e=+e,(t=+t)!=t?+e:e!=e?+t:+b(+t,+e)}function be(t){return(t=+t)&gt;=0?+a(t+.5):+v(t-.5)}function ye(t,e,i){t|=0,e|=0;var r,o,a=0;if((0|(i|=0))&gt;=8192)return E(0|t,0|e,0|i),0|t;if(o=0|t,r=t+i|0,(3&amp;t)==(3&amp;e)){for(;3&amp;t;){if(!i)return 0|o;n[t&gt;&gt;0]=0|n[e&gt;&gt;0],t=t+1|0,e=e+1|0,i=i-1|0}for(a=(i=-4&amp;r|0)-64|0;(0|t)&lt;=(0|a);)s[t&gt;&gt;2]=s[e&gt;&gt;2],s[t+4&gt;&gt;2]=s[e+4&gt;&gt;2],s[t+8&gt;&gt;2]=s[e+8&gt;&gt;2],s[t+12&gt;&gt;2]=s[e+12&gt;&gt;2],s[t+16&gt;&gt;2]=s[e+16&gt;&gt;2],s[t+20&gt;&gt;2]=s[e+20&gt;&gt;2],s[t+24&gt;&gt;2]=s[e+24&gt;&gt;2],s[t+28&gt;&gt;2]=s[e+28&gt;&gt;2],s[t+32&gt;&gt;2]=s[e+32&gt;&gt;2],s[t+36&gt;&gt;2]=s[e+36&gt;&gt;2],s[t+40&gt;&gt;2]=s[e+40&gt;&gt;2],s[t+44&gt;&gt;2]=s[e+44&gt;&gt;2],s[t+48&gt;&gt;2]=s[e+48&gt;&gt;2],s[t+52&gt;&gt;2]=s[e+52&gt;&gt;2],s[t+56&gt;&gt;2]=s[e+56&gt;&gt;2],s[t+60&gt;&gt;2]=s[e+60&gt;&gt;2],t=t+64|0,e=e+64|0;for(;(0|t)&lt;(0|i);)s[t&gt;&gt;2]=s[e&gt;&gt;2],t=t+4|0,e=e+4|0}else for(i=r-4|0;(0|t)&lt;(0|i);)n[t&gt;&gt;0]=0|n[e&gt;&gt;0],n[t+1&gt;&gt;0]=0|n[e+1&gt;&gt;0],n[t+2&gt;&gt;0]=0|n[e+2&gt;&gt;0],n[t+3&gt;&gt;0]=0|n[e+3&gt;&gt;0],t=t+4|0,e=e+4|0;for(;(0|t)&lt;(0|r);)n[t&gt;&gt;0]=0|n[e&gt;&gt;0],t=t+1|0,e=e+1|0;return 0|o}function xe(t,e,i){e|=0;var r,o=0,a=0,l=0;if(r=(t|=0)+(i|=0)|0,e&amp;=255,(0|i)&gt;=67){for(;3&amp;t;)n[t&gt;&gt;0]=e,t=t+1|0;for(l=e|e&lt;&lt;8|e&lt;&lt;16|e&lt;&lt;24,a=(o=-4&amp;r|0)-64|0;(0|t)&lt;=(0|a);)s[t&gt;&gt;2]=l,s[t+4&gt;&gt;2]=l,s[t+8&gt;&gt;2]=l,s[t+12&gt;&gt;2]=l,s[t+16&gt;&gt;2]=l,s[t+20&gt;&gt;2]=l,s[t+24&gt;&gt;2]=l,s[t+28&gt;&gt;2]=l,s[t+32&gt;&gt;2]=l,s[t+36&gt;&gt;2]=l,s[t+40&gt;&gt;2]=l,s[t+44&gt;&gt;2]=l,s[t+48&gt;&gt;2]=l,s[t+52&gt;&gt;2]=l,s[t+56&gt;&gt;2]=l,s[t+60&gt;&gt;2]=l,t=t+64|0;for(;(0|t)&lt;(0|o);)s[t&gt;&gt;2]=l,t=t+4|0}for(;(0|t)&lt;(0|r);)n[t&gt;&gt;0]=e,t=t+1|0;return r-i|0}function we(t){return(t=+t)&gt;=0?+a(t+.5):+v(t-.5)}function Ce(t){var e,i,n;return t|=0,n=0|k(),(0|t)&gt;0&amp;(0|(e=(i=0|s[o&gt;&gt;2])+t|0))&lt;(0|i)|(0|e)&lt;0?(T(0|e),S(12),-1):(0|e)&gt;(0|n)&amp;&amp;!(0|M(0|e))?(S(12),-1):(s[o&gt;&gt;2]=e,0|i)}return{___uremdi3:ge,_bitshift64Lshr:Ae,_bitshift64Shl:ve,_calloc:pe,_cellAreaKm2:function(t,e){var i,n,r,o=0;if(r=I,I=I+192|0,n=r,Nt(t|=0,e|=0,i=r+168|0),Vt(t,e,n),(0|(e=0|s[n&gt;&gt;2]))&gt;0){if(o=+Ct(n+8|0,n+8+((1!=(0|e)&amp;1)&lt;&lt;4)|0,i)+0,1!=(0|e)){t=1;do{o+=+Ct(n+8+(t&lt;&lt;4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)&lt;&lt;4)|0,i)}while((0|t)&lt;(0|e))}}else o=0;return I=r,6371.007180918475*o*6371.007180918475},_cellAreaM2:function(t,e){var i,n,r,o=0;if(r=I,I=I+192|0,n=r,Nt(t|=0,e|=0,i=r+168|0),Vt(t,e,n),(0|(e=0|s[n&gt;&gt;2]))&gt;0){if(o=+Ct(n+8|0,n+8+((1!=(0|e)&amp;1)&lt;&lt;4)|0,i)+0,1!=(0|e)){t=1;do{o+=+Ct(n+8+(t&lt;&lt;4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)&lt;&lt;4)|0,i)}while((0|t)&lt;(0|e))}}else o=0;return I=r,6371.007180918475*o*6371.007180918475*1e3*1e3},_cellAreaRads2:function(t,e){var i,n,r,o=0;if(r=I,I=I+192|0,n=r,Nt(t|=0,e|=0,i=r+168|0),Vt(t,e,n),(0|(e=0|s[n&gt;&gt;2]))&lt;=0)return I=r,+(o=0);if(o=+Ct(n+8|0,n+8+((1!=(0|e)&amp;1)&lt;&lt;4)|0,i)+0,1==(0|e))return I=r,+o;t=1;do{o+=+Ct(n+8+(t&lt;&lt;4)|0,n+8+(((0|(t=t+1|0))%(0|e)|0)&lt;&lt;4)|0,i)}while((0|t)&lt;(0|e));return I=r,+o},_compact:function(t,e,i){e|=0;var n,r=0,o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0,C=0,S=0,k=0;if(!(i|=0))return 0;if(r=0|s[(o=t|=0)&gt;&gt;2],!0&amp;0==(15728640&amp;(o=0|s[o+4&gt;&gt;2])|0)){if((0|i)&lt;=0||(s[(S=e)&gt;&gt;2]=r,s[S+4&gt;&gt;2]=o,1==(0|i)))return 0;r=1;do{C=0|s[4+(x=t+(r&lt;&lt;3)|0)&gt;&gt;2],s[(S=e+(r&lt;&lt;3)|0)&gt;&gt;2]=s[x&gt;&gt;2],s[S+4&gt;&gt;2]=C,r=r+1|0}while((0|r)!=(0|i));return 0}if(!(C=0|ue(x=i&lt;&lt;3)))return-3;if(ye(0|C,0|t,0|x),!(n=0|pe(i,8)))return de(C),-3;r=i;t:for(;;){b=0|Ae(0|(d=0|s[(l=C)&gt;&gt;2]),0|(l=0|s[l+4&gt;&gt;2]),52),w(),y=(b&amp;=15)-1|0,_=(0|r)&gt;0;e:do{if(_){if(v=((0|r)&lt;0)&lt;&lt;31&gt;&gt;31,g=0|ve(0|y,0,52),A=0|w(),y&gt;&gt;&gt;0&gt;15)for(o=0,t=d,i=l;;){if(!(0==(0|t)&amp;0==(0|i))){if(a=0|Ae(0|t,0|i,52),w(),c=(0|(a&amp;=15))&lt;(0|y),a=(0|a)==(0|y),i=0|ge(0|(u=c?0:a?t:0),0|(t=c?0:a?i:0),0|r,0|v),w(),0==(0|(h=0|s[(c=a=n+(i&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(c=0|s[c+4&gt;&gt;2])))i=u;else for(g=0,m=i,f=c,i=u;;){if((0|g)&gt;(0|r)){S=41;break t}if((0|h)==(0|i)&amp;(-117440513&amp;f|0)==(0|t)){u=0|Ae(0|h,0|f,56),w(),p=1+(u&amp;=7)|0,A=0|Ae(0|h,0|f,45),w();i:do{if(0|L(127&amp;A)){if(h=0|Ae(0|h,0|f,52),w(),!(h&amp;=15)){c=6;break}for(c=1;;){if(!(0==((A=0|ve(7,0,3*(15-c|0)|0))&amp;i|0)&amp;0==((0|w())&amp;t|0))){c=7;break i}if(!(c&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0)){c=6;break}c=c+1|0}}else c=7}while(0);if((u+2|0)&gt;&gt;&gt;0&gt;c&gt;&gt;&gt;0){S=51;break t}A=0|ve(0|p,0,56),t=0|w()|-117440513&amp;t,s[(c=a)&gt;&gt;2]=0,s[c+4&gt;&gt;2]=0,c=m,i|=A}else c=(m+1|0)%(0|r)|0;if(0==(0|(h=0|s[(f=a=n+(c&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(f=0|s[f+4&gt;&gt;2])))break;g=g+1|0,m=c}s[(A=a)&gt;&gt;2]=i,s[A+4&gt;&gt;2]=t}if((0|(o=o+1|0))&gt;=(0|r))break e;t=0|s[(i=C+(o&lt;&lt;3)|0)&gt;&gt;2],i=0|s[i+4&gt;&gt;2]}for(o=0,t=d,i=l;;){if(!(0==(0|t)&amp;0==(0|i))){if(c=0|Ae(0|t,0|i,52),w(),(0|(c&amp;=15))&gt;=(0|y)){if((0|c)!=(0|y)&amp;&amp;(t|=g,i=-15728641&amp;i|A,c&gt;&gt;&gt;0&gt;=b&gt;&gt;&gt;0)){a=y;do{m=0|ve(7,0,3*(14-a|0)|0),a=a+1|0,t|=m,i=0|w()|i}while(a&gt;&gt;&gt;0&lt;c&gt;&gt;&gt;0)}}else t=0,i=0;if(c=0|ge(0|t,0|i,0|r,0|v),w(),!(0==(0|(u=0|s[(h=a=n+(c&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(h=0|s[h+4&gt;&gt;2]))))for(m=0;;){if((0|m)&gt;(0|r)){S=41;break t}if((0|u)==(0|t)&amp;(-117440513&amp;h|0)==(0|i)){p=0|Ae(0|u,0|h,56),w(),f=1+(p&amp;=7)|0,k=0|Ae(0|u,0|h,45),w();i:do{if(0|L(127&amp;k)){if(u=0|Ae(0|u,0|h,52),w(),!(u&amp;=15)){h=6;break}for(h=1;;){if(!(0==((k=0|ve(7,0,3*(15-h|0)|0))&amp;t|0)&amp;0==((0|w())&amp;i|0))){h=7;break i}if(!(h&gt;&gt;&gt;0&lt;u&gt;&gt;&gt;0)){h=6;break}h=h+1|0}}else h=7}while(0);if((p+2|0)&gt;&gt;&gt;0&gt;h&gt;&gt;&gt;0){S=51;break t}k=0|ve(0|f,0,56),i=0|w()|-117440513&amp;i,s[(f=a)&gt;&gt;2]=0,s[f+4&gt;&gt;2]=0,t|=k}else c=(c+1|0)%(0|r)|0;if(0==(0|(u=0|s[(h=a=n+(c&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(h=0|s[h+4&gt;&gt;2])))break;m=m+1|0}s[(k=a)&gt;&gt;2]=t,s[k+4&gt;&gt;2]=i}if((0|(o=o+1|0))&gt;=(0|r))break e;t=0|s[(i=C+(o&lt;&lt;3)|0)&gt;&gt;2],i=0|s[i+4&gt;&gt;2]}}}while(0);if((r+5|0)&gt;&gt;&gt;0&lt;11){S=99;break}if(!(A=0|pe((0|r)/6|0,8))){S=58;break}e:do{if(_){m=0,f=0;do{if(!(0==(0|(o=0|s[(t=c=n+(m&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(t=0|s[t+4&gt;&gt;2])))){h=0|Ae(0|o,0|t,56),w(),i=1+(h&amp;=7)|0,u=-117440513&amp;t,k=0|Ae(0|o,0|t,45),w();i:do{if(0|L(127&amp;k)){if(p=0|Ae(0|o,0|t,52),w(),0|(p&amp;=15))for(a=1;;){if(!(0==(o&amp;(k=0|ve(7,0,3*(15-a|0)|0))|0)&amp;0==(u&amp;(0|w())|0)))break i;if(!(a&gt;&gt;&gt;0&lt;p&gt;&gt;&gt;0))break;a=a+1|0}o|=t=0|ve(0|i,0,56),t=0|w()|u,s[(i=c)&gt;&gt;2]=o,s[i+4&gt;&gt;2]=t,i=h+2|0}}while(0);7==(0|i)&amp;&amp;(s[(k=A+(f&lt;&lt;3)|0)&gt;&gt;2]=o,s[k+4&gt;&gt;2]=-117440513&amp;t,f=f+1|0)}m=m+1|0}while((0|m)!=(0|r));if(_){if(g=((0|r)&lt;0)&lt;&lt;31&gt;&gt;31,p=0|ve(0|y,0,52),m=0|w(),y&gt;&gt;&gt;0&gt;15)for(t=0,o=0;;){do{if(!(0==(0|d)&amp;0==(0|l))){for(h=0|Ae(0|d,0|l,52),w(),a=(0|(h&amp;=15))&lt;(0|y),h=(0|h)==(0|y),a=0|ge(0|(c=a?0:h?d:0),0|(h=a?0:h?l:0),0|r,0|g),w(),i=0;;){if((0|i)&gt;(0|r)){S=98;break t}if((-117440513&amp;(u=0|s[4+(k=n+(a&lt;&lt;3)|0)&gt;&gt;2])|0)==(0|h)&amp;&amp;(0|s[k&gt;&gt;2])==(0|c)){S=70;break}if((0|s[(k=n+((a=(a+1|0)%(0|r)|0)&lt;&lt;3)|0)&gt;&gt;2])==(0|c)&amp;&amp;(0|s[k+4&gt;&gt;2])==(0|h))break;i=i+1|0}if(70==(0|S)&amp;&amp;(S=0,!0&amp;100663296==(117440512&amp;u|0)))break;s[(k=e+(o&lt;&lt;3)|0)&gt;&gt;2]=d,s[k+4&gt;&gt;2]=l,o=o+1|0}}while(0);if((0|(t=t+1|0))&gt;=(0|r)){r=f;break e}d=0|s[(l=C+(t&lt;&lt;3)|0)&gt;&gt;2],l=0|s[l+4&gt;&gt;2]}for(t=0,o=0;;){do{if(!(0==(0|d)&amp;0==(0|l))){if(h=0|Ae(0|d,0|l,52),w(),(0|(h&amp;=15))&gt;=(0|y))if((0|h)!=(0|y))if(i=d|p,a=-15728641&amp;l|m,h&gt;&gt;&gt;0&lt;b&gt;&gt;&gt;0)h=a;else{c=y;do{k=0|ve(7,0,3*(14-c|0)|0),c=c+1|0,i|=k,a=0|w()|a}while(c&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0);h=a}else i=d,h=l;else i=0,h=0;for(c=0|ge(0|i,0|h,0|r,0|g),w(),a=0;;){if((0|a)&gt;(0|r)){S=98;break t}if((-117440513&amp;(u=0|s[4+(k=n+(c&lt;&lt;3)|0)&gt;&gt;2])|0)==(0|h)&amp;&amp;(0|s[k&gt;&gt;2])==(0|i)){S=93;break}if((0|s[(k=n+((c=(c+1|0)%(0|r)|0)&lt;&lt;3)|0)&gt;&gt;2])==(0|i)&amp;&amp;(0|s[k+4&gt;&gt;2])==(0|h))break;a=a+1|0}if(93==(0|S)&amp;&amp;(S=0,!0&amp;100663296==(117440512&amp;u|0)))break;s[(k=e+(o&lt;&lt;3)|0)&gt;&gt;2]=d,s[k+4&gt;&gt;2]=l,o=o+1|0}}while(0);if((0|(t=t+1|0))&gt;=(0|r)){r=f;break e}d=0|s[(l=C+(t&lt;&lt;3)|0)&gt;&gt;2],l=0|s[l+4&gt;&gt;2]}}else o=0,r=f}else o=0,r=0}while(0);if(xe(0|n,0,0|x),ye(0|C,0|A,r&lt;&lt;3|0),de(A),!r)break;e=e+(o&lt;&lt;3)|0}return 41==(0|S)?(de(C),de(n),0|(k=-1)):51==(0|S)?(de(C),de(n),0|(k=-2)):58==(0|S)?(de(C),de(n),0|(k=-3)):98==(0|S)?(de(A),de(C),de(n),0|(k=-1)):(99==(0|S)&amp;&amp;ye(0|e,0|C,r&lt;&lt;3|0),de(C),de(n),0|(k=0))},_destroyLinkedPolygon:function(t){var e=0,i=0,n=0,r=0;if(t|=0)for(n=1;;){if(0|(e=0|s[t&gt;&gt;2]))do{if(0|(i=0|s[e&gt;&gt;2]))do{r=i,i=0|s[i+16&gt;&gt;2],de(r)}while(0!=(0|i));r=e,e=0|s[e+8&gt;&gt;2],de(r)}while(0!=(0|e));if(e=t,t=0|s[t+8&gt;&gt;2],n||de(e),!t)break;n=0}},_edgeLengthKm:function(t){return+ +r[20752+((t|=0)&lt;&lt;3)&gt;&gt;3]},_edgeLengthM:function(t){return+ +r[20880+((t|=0)&lt;&lt;3)&gt;&gt;3]},_emscripten_replace_memory:function(t){return n=new Int8Array(t),new Uint8Array(t),s=new Int32Array(t),new Float32Array(t),r=new Float64Array(t),i=t,!0},_exactEdgeLengthKm:function(t,e){var i,n,o=0,a=0,l=0,h=0,p=0,f=0;if(n=I,I=I+176|0,jt(t|=0,e|=0,i=n),(0|(t=0|s[i&gt;&gt;2]))&lt;=1)return I=n,+(l=0);e=t+-1|0,t=0,o=0,a=+r[i+8&gt;&gt;3],l=+r[i+16&gt;&gt;3];do{p=a,h=l,h=(f=+d(.5*((a=+r[i+8+((t=t+1|0)&lt;&lt;4)&gt;&gt;3])-p)))*f+(h=+d(.5*((l=+r[i+8+(t&lt;&lt;4)+8&gt;&gt;3])-h)))*(+u(+p)*+u(+a)*h),o+=2*+A(+ +c(+h),+ +c(+(1-h)))}while((0|t)!=(0|e));return I=n,+(f=6371.007180918475*o)},_exactEdgeLengthM:function(t,e){var i,n,o=0,a=0,l=0,h=0,p=0,f=0;if(n=I,I=I+176|0,jt(t|=0,e|=0,i=n),(0|(t=0|s[i&gt;&gt;2]))&lt;=1)return I=n,+(l=0);e=t+-1|0,t=0,o=0,a=+r[i+8&gt;&gt;3],l=+r[i+16&gt;&gt;3];do{p=a,h=l,h=(f=+d(.5*((a=+r[i+8+((t=t+1|0)&lt;&lt;4)&gt;&gt;3])-p)))*f+(h=+d(.5*((l=+r[i+8+(t&lt;&lt;4)+8&gt;&gt;3])-h)))*(+u(+p)*+u(+a)*h),o+=2*+A(+ +c(+h),+ +c(+(1-h)))}while((0|t)!=(0|e));return I=n,+(f=6371.007180918475*o*1e3)},_exactEdgeLengthRads:function(t,e){var i,n,o=0,a=0,l=0,h=0,p=0,f=0;if(n=I,I=I+176|0,jt(t|=0,e|=0,i=n),(0|(t=0|s[i&gt;&gt;2]))&lt;=1)return I=n,+(l=0);e=t+-1|0,t=0,o=0,a=+r[i+8&gt;&gt;3],l=+r[i+16&gt;&gt;3];do{p=a,h=l,h=(f=+d(.5*((a=+r[i+8+((t=t+1|0)&lt;&lt;4)&gt;&gt;3])-p)))*f+(h=+d(.5*((l=+r[i+8+(t&lt;&lt;4)+8&gt;&gt;3])-h)))*(+u(+a)*+u(+p)*h),o+=2*+A(+ +c(+h),+ +c(+(1-h)))}while((0|t)&lt;(0|e));return I=n,+o},_experimentalH3ToLocalIj:function(t,e,i,n,r){var o,a;return r|=0,a=I,I=I+16|0,(t=0|Yt(t|=0,e|=0,i|=0,n|=0,o=a))||(function(t,e){var i;s[(e|=0)&gt;&gt;2]=(0|s[(t|=0)&gt;&gt;2])-(i=0|s[t+8&gt;&gt;2]),s[e+4&gt;&gt;2]=(0|s[t+4&gt;&gt;2])-i}(o,r),t=0),I=a,0|t},_experimentalLocalIjToH3:function(t,e,i,n){var r,o;return t|=0,e|=0,n|=0,r=I,I=I+16|0,function(t,e){var i,n,r,o=0,a=0,l=0;s[(e|=0)&gt;&gt;2]=a=0|s[(t|=0)&gt;&gt;2],s[(n=e+4|0)&gt;&gt;2]=t=0|s[t+4&gt;&gt;2],s[(r=e+8|0)&gt;&gt;2]=0,o=t-a|0,(0|a)&lt;0?(t=0-a|0,s[n&gt;&gt;2]=o,s[r&gt;&gt;2]=t,s[e&gt;&gt;2]=0,a=0):(o=t,t=0),(0|o)&lt;0&amp;&amp;(s[e&gt;&gt;2]=a=a-o|0,s[r&gt;&gt;2]=t=t-o|0,s[n&gt;&gt;2]=0,o=0),i=a-t|0,l=o-t|0,(0|t)&lt;0?(s[e&gt;&gt;2]=i,s[n&gt;&gt;2]=l,s[r&gt;&gt;2]=0,o=l,l=i,t=0):l=a,!((0|(a=(0|t)&lt;(0|(a=(0|o)&lt;(0|l)?o:l))?t:a))&lt;=0)&amp;&amp;(s[e&gt;&gt;2]=l-a,s[n&gt;&gt;2]=o-a,s[r&gt;&gt;2]=t-a)}(i|=0,o=r),n=0|Zt(t,e,o,n),I=r,0|n},_free:de,_geoToH3:Lt,_getDestinationH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var i,n=0,r=0;return i=I,I=I+16|0,n=i,!0&amp;268435456==(2013265920&amp;(e|=0)|0)?(r=0|Ae(0|t,0|e,56),w(),s[n&gt;&gt;2]=0,n=0|R(t,-2130706433&amp;e|134217728,7&amp;r,n),e=0|w(),x(0|e),I=i,0|n):(n=0,x(0|(e=0)),I=i,0|n)},_getH3IndexesFromUnidirectionalEdge:function(t,e,i){t|=0;var n,r,o,a,l=0;o=I,I=I+16|0,n=o,r=-2130706433&amp;(e|=0)|134217728,s[(l=i|=0)&gt;&gt;2]=(a=!0&amp;268435456==(2013265920&amp;e|0))?t:0,s[l+4&gt;&gt;2]=a?r:0,a?(e=0|Ae(0|t,0|e,56),w(),s[n&gt;&gt;2]=0,t=0|R(t,r,7&amp;e,n),e=0|w()):(t=0,e=0),s[(l=i+8|0)&gt;&gt;2]=t,s[l+4&gt;&gt;2]=e,I=o},_getH3UnidirectionalEdge:function(t,e,i,n){var r,o,a=0,l=0,c=0,h=0,u=0;if(o=I,I=I+16|0,r=o,!(0|Ut(t|=0,e|=0,i|=0,n|=0)))return h=0,x(0|(c=0)),I=o,0|h;for(c=-2130706433&amp;e,a=(a=0==(0|Tt(t,e)))?1:2;s[r&gt;&gt;2]=0,l=a+1|0,!((0|(u=0|R(t,e,a,r)))==(0|i)&amp;(0|w())==(0|n));){if(!(l&gt;&gt;&gt;0&lt;7)){a=0,t=0,h=6;break}a=l}return 6==(0|h)?(x(0|a),I=o,0|t):(u=0|ve(0|a,0,56),h=0|c|w()|268435456,u|=t,x(0|h),I=o,0|u)},_getH3UnidirectionalEdgeBoundary:jt,_getH3UnidirectionalEdgesFromHexagon:function(t,e,i){i|=0;var n,r=0;n=0==(0|Tt(t|=0,e|=0)),e&amp;=-2130706433,s[(r=i)&gt;&gt;2]=n?t:0,s[r+4&gt;&gt;2]=n?285212672|e:0,s[(r=i+8|0)&gt;&gt;2]=t,s[r+4&gt;&gt;2]=301989888|e,s[(r=i+16|0)&gt;&gt;2]=t,s[r+4&gt;&gt;2]=318767104|e,s[(r=i+24|0)&gt;&gt;2]=t,s[r+4&gt;&gt;2]=335544320|e,s[(r=i+32|0)&gt;&gt;2]=t,s[r+4&gt;&gt;2]=352321536|e,s[(i=i+40|0)&gt;&gt;2]=t,s[i+4&gt;&gt;2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(t,e){var i;return t|=0,x(0|((i=!0&amp;268435456==(2013265920&amp;(e|=0)|0))?-2130706433&amp;e|134217728:0)),0|(i?t:0)},_getPentagonIndexes:$t,_getRes0Indexes:function(t){t|=0;var e=0,i=0,n=0;e=0;do{ve(0|e,0,45),n=134225919|w(),s[(i=t+(e&lt;&lt;3)|0)&gt;&gt;2]=-1,s[i+4&gt;&gt;2]=n,e=e+1|0}while(122!=(0|e))},_h3Distance:function(t,e,i,n){var s,r,o;return i|=0,n|=0,o=I,I=I+32|0,r=o,t=0==(0|Yt(t|=0,e|=0,t,e,s=o+12|0))&amp;&amp;0==(0|Yt(t,e,i,n,r))?0|ut(s,r):-1,I=o,0|t},_h3GetBaseCell:St,_h3GetFaces:function t(e,i,n){n|=0;var r,o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0;r=I,I=I+128|0,d=r+112|0,l=r+96|0,p=r,a=0|Ae(0|(e|=0),0|(i|=0),52),w(),s[d&gt;&gt;2]=h=15&amp;a,c=0|Ae(0|e,0|i,45),w(),c&amp;=127;t:do{if(0|L(c)){if(0|h)for(o=1;;){if(!(0==((u=0|ve(7,0,3*(15-o|0)|0))&amp;e|0)&amp;0==((0|w())&amp;i|0))){a=0;break t}if(!(o&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0))break;o=o+1|0}if(!(1&amp;a))return u=0|ve(h+1|0,0,52),p=0|w()|-15728641&amp;i,t((u|e)&amp;~(d=0|ve(7,0,3*(14-h|0)|0)),p&amp;~(0|w()),n),void(I=r);a=1}else a=0}while(0);zt(e,i,l),a?(gt(l,d,p),u=5):(bt(l,d,p),u=6);t:do{if(0|L(c))if(h)for(o=1;;){if(!(0==((c=0|ve(7,0,3*(15-o|0)|0))&amp;e|0)&amp;0==((0|w())&amp;i|0))){o=8;break t}if(!(o&gt;&gt;&gt;0&lt;h&gt;&gt;&gt;0)){o=20;break}o=o+1|0}else o=20;else o=8}while(0);if(xe(0|n,-1,0|o),a){a=0;do{for(vt(l=p+(a&lt;&lt;4)|0,0|s[d&gt;&gt;2]),l=0|s[l&gt;&gt;2],o=0;!(-1==(0|(h=0|s[(c=n+(o&lt;&lt;2)|0)&gt;&gt;2]))|(0|h)==(0|l));)o=o+1|0;s[c&gt;&gt;2]=l,a=a+1|0}while((0|a)!=(0|u))}else{a=0;do{for(At(l=p+(a&lt;&lt;4)|0,0|s[d&gt;&gt;2],0,1),l=0|s[l&gt;&gt;2],o=0;!(-1==(0|(h=0|s[(c=n+(o&lt;&lt;2)|0)&gt;&gt;2]))|(0|h)==(0|l));)o=o+1|0;s[c&gt;&gt;2]=l,a=a+1|0}while((0|a)!=(0|u))}I=r},_h3GetResolution:function(t,e){return e=0|Ae(0|(t|=0),0|(e|=0),52),w(),15&amp;e|0},_h3IndexesAreNeighbors:Ut,_h3IsPentagon:Tt,_h3IsResClassIII:function(t,e){return e=0|Ae(0|(t|=0),0|(e|=0),52),w(),1&amp;e|0},_h3IsValid:kt,_h3Line:function(t,e,i,n,r){i|=0,n|=0,r|=0;var o,a=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0,w=0,C=0;if(o=I,I=I+48|0,c=o+12|0,w=o,0==(0|Yt(t|=0,e|=0,t,e,a=o+24|0))&amp;&amp;0==(0|Yt(t,e,i,n,c))){if((0|(x=0|ut(a,c)))&lt;0)return I=o,0|x;for(s[a&gt;&gt;2]=0,s[a+4&gt;&gt;2]=0,s[a+8&gt;&gt;2]=0,s[c&gt;&gt;2]=0,s[c+4&gt;&gt;2]=0,s[c+8&gt;&gt;2]=0,Yt(t,e,t,e,a),Yt(t,e,i,n,c),dt(a),dt(c),x?(y=a,i=p=0|s[a&gt;&gt;2],n=f=0|s[(_=a+4|0)&gt;&gt;2],a=m=0|s[(b=a+8|0)&gt;&gt;2],A=+((0|s[c&gt;&gt;2])-p|0)/(g=+(0|x)),v=+((0|s[c+4&gt;&gt;2])-f|0)/g,g=+((0|s[c+8&gt;&gt;2])-m|0)/g):(_=n=a+4|0,b=m=a+8|0,y=a,i=0|s[a&gt;&gt;2],n=0|s[n&gt;&gt;2],a=0|s[m&gt;&gt;2],A=0,v=0,g=0),s[w&gt;&gt;2]=i,s[(m=w+4|0)&gt;&gt;2]=n,s[(f=w+8|0)&gt;&gt;2]=a,p=0;;){C=A*(u=+(0|p))+ +(0|i),h=v*u+ +(0|s[_&gt;&gt;2]),u=g*u+ +(0|s[b&gt;&gt;2]),n=~~+be(+C),c=~~+be(+h),i=~~+be(+u),C=+l(+(+(0|n)-C)),h=+l(+(+(0|c)-h)),u=+l(+(+(0|i)-u));do{if(!(C&gt;h&amp;C&gt;u)){if(d=0-n|0,h&gt;u){a=d-i|0;break}a=c,i=d-c|0;break}n=0-(c+i)|0,a=c}while(0);if(s[w&gt;&gt;2]=n,s[m&gt;&gt;2]=a,s[f&gt;&gt;2]=i,pt(w),Zt(t,e,w,r+(p&lt;&lt;3)|0),(0|p)==(0|x))break;p=p+1|0,i=0|s[y&gt;&gt;2]}return I=o,0}return I=o,-1},_h3LineSize:function(t,e,i,n){var s,r,o;return i|=0,n|=0,o=I,I=I+32|0,r=o,t=0==(0|Yt(t|=0,e|=0,t,e,s=o+12|0))&amp;&amp;0==(0|Yt(t,e,i,n,r))?0|ut(s,r):-1,I=o,(t&gt;&gt;&gt;31^1)+t|0},_h3SetToLinkedGeo:function(t,e,i){i|=0;var n,r,o,a=0;if(o=I,I=I+32|0,n=o,function(t,e,i){t|=0,i|=0;var n,r,o=0,a=0,l=0,c=0,h=0;if(r=I,I=I+176|0,n=r,(0|(e|=0))&lt;1)return ne(i,0,0),void(I=r);c=0|Ae(0|s[(c=t)&gt;&gt;2],0|s[c+4&gt;&gt;2],52),w(),ne(i,(0|e)&gt;6?e:6,15&amp;c),c=0;do{if(Vt(0|s[(o=t+(c&lt;&lt;3)|0)&gt;&gt;2],0|s[o+4&gt;&gt;2],n),(0|(o=0|s[n&gt;&gt;2]))&gt;0){h=0;do{l=n+8+(h&lt;&lt;4)|0,(a=0|le(i,o=n+8+(((0|(h=h+1|0))%(0|o)|0)&lt;&lt;4)|0,l))?oe(i,a):ae(i,l,o),o=0|s[n&gt;&gt;2]}while((0|h)&lt;(0|o))}c=c+1|0}while((0|c)!=(0|e));I=r}(t|=0,e|=0,r=o+16|0),s[i&gt;&gt;2]=0,s[i+4&gt;&gt;2]=0,s[i+8&gt;&gt;2]=0,!(t=0|re(r)))return qt(i),se(r),void(I=o);do{e=0|Ht(i);do{Gt(e,t),s[n&gt;&gt;2]=s[(a=t+16|0)&gt;&gt;2],s[n+4&gt;&gt;2]=s[a+4&gt;&gt;2],s[n+8&gt;&gt;2]=s[a+8&gt;&gt;2],s[n+12&gt;&gt;2]=s[a+12&gt;&gt;2],oe(r,t),t=0|ce(r,n)}while(0!=(0|t));t=0|re(r)}while(0!=(0|t));qt(i),se(r),I=o},_h3ToCenterChild:function(t,e,i){i|=0;var n=0,s=0;if(n=0|Ae(0|(t|=0),0|(e|=0),52),w(),(0|i)&lt;16&amp;(0|(n&amp;=15))&lt;=(0|i)){if((0|n)!=(0|i)&amp;&amp;(t|=s=0|ve(0|i,0,52),e=0|w()|-15728641&amp;e,(0|n)&lt;(0|i)))do{s=0|ve(7,0,3*(14-n|0)|0),n=n+1|0,t&amp;=~s,e&amp;=~(0|w())}while((0|n)&lt;(0|i))}else e=0,t=0;return x(0|e),0|t},_h3ToChildren:Mt,_h3ToGeo:Nt,_h3ToGeoBoundary:Vt,_h3ToParent:Et,_h3UnidirectionalEdgeIsValid:function(t,e){var i=0;if(!(!0&amp;268435456==(2013265920&amp;(e|=0)|0)))return 0;switch(i=0|Ae(0|(t|=0),0|e,56),w(),7&amp;i){case 0:case 7:return 0}return!0&amp;16777216==(117440512&amp;e|0)&amp;0!=(0|Tt(t,i=-2130706433&amp;e|134217728))?0|(i=0):0|(i=0|kt(t,i))},_hexAreaKm2:function(t){return+ +r[20496+((t|=0)&lt;&lt;3)&gt;&gt;3]},_hexAreaM2:function(t){return+ +r[20624+((t|=0)&lt;&lt;3)&gt;&gt;3]},_hexRing:function(t,e,i,n){t|=0,e|=0,n|=0;var r,o=0,a=0,l=0,c=0,h=0,u=0,d=0;if(r=I,I=I+16|0,d=r,!(i|=0))return s[(d=n)&gt;&gt;2]=t,s[d+4&gt;&gt;2]=e,I=r,0;s[d&gt;&gt;2]=0;t:do{if(0|Tt(t,e))t=1;else{if(a=(0|i)&gt;0){o=0,u=t;do{if(0==(0|(u=0|R(u,e,4,d)))&amp;0==(0|(e=0|w()))){t=2;break t}if(o=o+1|0,0|Tt(u,e)){t=1;break t}}while((0|o)&lt;(0|i));if(s[(h=n)&gt;&gt;2]=u,s[h+4&gt;&gt;2]=e,h=i+-1|0,a){a=0,l=1,o=u,t=e;do{if(0==(0|(o=0|R(o,t,2,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if(s[(c=n+(l&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=t,l=l+1|0,0|Tt(o,t)){t=1;break t}a=a+1|0}while((0|a)&lt;(0|i));c=0,a=l;do{if(0==(0|(o=0|R(o,t,3,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if(s[(l=n+(a&lt;&lt;3)|0)&gt;&gt;2]=o,s[l+4&gt;&gt;2]=t,a=a+1|0,0|Tt(o,t)){t=1;break t}c=c+1|0}while((0|c)&lt;(0|i));l=0;do{if(0==(0|(o=0|R(o,t,1,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if(s[(c=n+(a&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=t,a=a+1|0,0|Tt(o,t)){t=1;break t}l=l+1|0}while((0|l)&lt;(0|i));l=0;do{if(0==(0|(o=0|R(o,t,5,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if(s[(c=n+(a&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=t,a=a+1|0,0|Tt(o,t)){t=1;break t}l=l+1|0}while((0|l)&lt;(0|i));l=0;do{if(0==(0|(o=0|R(o,t,4,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if(s[(c=n+(a&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=t,a=a+1|0,0|Tt(o,t)){t=1;break t}l=l+1|0}while((0|l)&lt;(0|i));for(l=0;;){if(0==(0|(o=0|R(o,t,6,d)))&amp;0==(0|(t=0|w()))){t=2;break t}if((0|l)!=(0|h)){if(s[(c=n+(a&lt;&lt;3)|0)&gt;&gt;2]=o,s[c+4&gt;&gt;2]=t,0|Tt(o,t)){t=1;break t}a=a+1|0}if((0|(l=l+1|0))&gt;=(0|i)){l=u,a=e;break}}}else l=u,o=u,a=e,t=e}else s[(l=n)&gt;&gt;2]=t,s[l+4&gt;&gt;2]=e,l=t,o=t,a=e,t=e;t=1&amp;((0|l)!=(0|o)|(0|a)!=(0|t))}}while(0);return I=r,0|t},_i64Subtract:fe,_kRing:D,_kRingDistances:function(t,e,i,n,s){var r=0;if(0|O(t|=0,e|=0,i|=0,n|=0,s|=0)){if(xe(0|n,0,(r=1+(0|_(3*i|0,i+1|0))|0)&lt;&lt;3|0),0|s)return xe(0|s,0,r&lt;&lt;2|0),void P(t,e,i,n,s,r,0);(s=0|pe(r,4))&amp;&amp;(P(t,e,i,n,s,r,0),de(s))}},_llvm_minnum_f64:_e,_llvm_round_f64:be,_malloc:ue,_maxFaceCount:function(t,e){var i=0,n=0;if(n=0|Ae(0|(t|=0),0|(e|=0),45),w(),!(0|L(127&amp;n)))return 2;if(n=0|Ae(0|t,0|e,52),w(),!(n&amp;=15))return 5;for(i=1;;){if(!(0==((0|ve(7,0,3*(15-i|0)|0))&amp;t|0)&amp;0==((0|w())&amp;e|0))){i=2,t=6;break}if(!(i&gt;&gt;&gt;0&lt;n&gt;&gt;&gt;0)){i=5,t=6;break}i=i+1|0}return 6==(0|t)?0|i:0},_maxH3ToChildrenSize:function(t,e,i){return i|=0,t=0|Ae(0|(t|=0),0|(e|=0),52),w(),(0|i)&lt;16&amp;(0|(t&amp;=15))&lt;=(0|i)?0|(i=0|Kt(7,i-t|0)):0|(i=0)},_maxKringSize:function(t){return 1+(0|_(3*(t|=0)|0,t+1|0))|0},_maxPolyfillSize:function(t,e){e|=0;var i,n=0,r=0,o=0,a=0,l=0;if(i=I,I=I+48|0,o=i+8|0,a=0|s[4+(l=t|=0)&gt;&gt;2],s[(n=r=i)&gt;&gt;2]=s[l&gt;&gt;2],s[n+4&gt;&gt;2]=a,Qt(r,o),o=0|G(o,e),e=0|s[r&gt;&gt;2],(0|(r=0|s[t+8&gt;&gt;2]))&lt;=0)return I=i,0|(l=(a=(0|o)&lt;(0|(l=e)))?l:o)+12;n=0|s[t+12&gt;&gt;2],t=0;do{e=(0|s[n+(t&lt;&lt;3)&gt;&gt;2])+e|0,t=t+1|0}while((0|t)&lt;(0|r));return I=i,0|(l=(l=(0|o)&lt;(0|e))?e:o)+12},_maxUncompactSize:function(t,e,i){t|=0;var n=0,r=0,o=0,a=0;if((0|(e|=0))&lt;=0)return 0;if((0|(i|=0))&gt;=16){for(n=0;;){if(!(0==(0|s[(a=t+(n&lt;&lt;3)|0)&gt;&gt;2])&amp;0==(0|s[a+4&gt;&gt;2]))){n=-1,r=13;break}if((0|(n=n+1|0))&gt;=(0|e)){n=0,r=13;break}}if(13==(0|r))return 0|n}n=0,a=0;t:for(;;){o=0|s[(r=t+(a&lt;&lt;3)|0)&gt;&gt;2],r=0|s[r+4&gt;&gt;2];do{if(!(0==(0|o)&amp;0==(0|r))){if(r=0|Ae(0|o,0|r,52),w(),(0|(r&amp;=15))&gt;(0|i)){n=-1,r=13;break t}if((0|r)==(0|i)){n=n+1|0;break}n=(0|Kt(7,i-r|0))+n|0;break}}while(0);if((0|(a=a+1|0))&gt;=(0|e)){r=13;break}}return 13==(0|r)?0|n:0},_memcpy:ye,_memset:xe,_numHexagons:function(t){var e;return t=0|s[(e=21008+((t|=0)&lt;&lt;3)|0)&gt;&gt;2],x(0|s[e+4&gt;&gt;2]),0|t},_pentagonIndexCount:function(){return 12},_pointDistKm:wt,_pointDistM:function(t,e){var i,n,s,o=0;return o=(s=+d(.5*((n=+r[(e|=0)&gt;&gt;3])-(i=+r[(t|=0)&gt;&gt;3]))))*s+(o=+d(.5*(+r[e+8&gt;&gt;3]-+r[t+8&gt;&gt;3])))*(+u(+n)*+u(+i)*o),2*+A(+ +c(+o),+ +c(+(1-o)))*6371.007180918475*1e3},_pointDistRads:function(t,e){var i,n,s,o=0;return o=(s=+d(.5*((n=+r[(e|=0)&gt;&gt;3])-(i=+r[(t|=0)&gt;&gt;3]))))*s+(o=+d(.5*(+r[e+8&gt;&gt;3]-+r[t+8&gt;&gt;3])))*(+u(+n)*+u(+i)*o),2*+A(+ +c(+o),+ +c(+(1-o)))},_polyfill:function(t,e,i){var n,o=0,a=0,c=0,h=0,u=0;if(n=I,I=I+48|0,o=n+8|0,a=n,0|function(t,e,i){e|=0,i|=0;var n,o,a,c,h,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0,S=0,k=0,E=0,M=0,T=0,D=0,R=0,L=0,B=0,z=0,N=0,V=0,$=0;if(h=I,I=I+112|0,o=h+80|0,g=h+72|0,a=h,c=h+56|0,($=0|ue(32+(s[(A=8+(t|=0)|0)&gt;&gt;2]&lt;&lt;5)|0))||C(22848,22448,800,22456),function(t,e){e|=0;var i=0,n=0,o=0,a=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0,A=0,v=0,_=0,b=0,y=0,x=0,w=0,C=0,S=0,k=0;if(A=0|s[(t|=0)&gt;&gt;2]){if(r[(v=e+8|0)&gt;&gt;3]=17976931348623157e292,r[(_=e+24|0)&gt;&gt;3]=17976931348623157e292,r[e&gt;&gt;3]=-17976931348623157e292,r[(b=e+16|0)&gt;&gt;3]=-17976931348623157e292,(0|A)&gt;0){for(o=0|s[t+4&gt;&gt;2],m=17976931348623157e292,g=-17976931348623157e292,n=0,i=-1,u=17976931348623157e292,d=17976931348623157e292,f=-17976931348623157e292,c=-17976931348623157e292,y=0;p=+r[o+(y&lt;&lt;4)+8&gt;&gt;3],h=+r[o+(((0|(S=i+2|0))==(0|A)?0:S)&lt;&lt;4)+8&gt;&gt;3],(a=+r[o+(y&lt;&lt;4)&gt;&gt;3])&lt;u&amp;&amp;(r[v&gt;&gt;3]=a,u=a),p&lt;d&amp;&amp;(r[_&gt;&gt;3]=p,d=p),a&gt;f?r[e&gt;&gt;3]=a:a=f,p&gt;c&amp;&amp;(r[b&gt;&gt;3]=p,c=p),m=p&gt;0&amp;p&lt;m?p:m,g=p&lt;0&amp;p&gt;g?p:g,n|=+l(+(p-h))&gt;3.141592653589793,(0|(i=y+1|0))!=(0|A);)S=y,f=a,y=i,i=S;n&amp;&amp;(r[b&gt;&gt;3]=g,r[_&gt;&gt;3]=m)}}else s[e&gt;&gt;2]=0,s[e+4&gt;&gt;2]=0,s[e+8&gt;&gt;2]=0,s[e+12&gt;&gt;2]=0,s[e+16&gt;&gt;2]=0,s[e+20&gt;&gt;2]=0,s[e+24&gt;&gt;2]=0,s[e+28&gt;&gt;2]=0;if(!((0|(i=0|s[(S=t+8|0)&gt;&gt;2]))&lt;=0)){C=t+12|0,w=0;do{if(n=w,_=e+((w=w+1|0)&lt;&lt;5)|0,b=0|s[(o=0|s[C&gt;&gt;2])+(n&lt;&lt;3)&gt;&gt;2]){if(r[(y=e+(w&lt;&lt;5)+8|0)&gt;&gt;3]=17976931348623157e292,r[(t=e+(w&lt;&lt;5)+24|0)&gt;&gt;3]=17976931348623157e292,r[_&gt;&gt;3]=-17976931348623157e292,r[(x=e+(w&lt;&lt;5)+16|0)&gt;&gt;3]=-17976931348623157e292,(0|b)&gt;0){for(A=0|s[o+(n&lt;&lt;3)+4&gt;&gt;2],m=17976931348623157e292,g=-17976931348623157e292,o=0,n=-1,v=0,u=17976931348623157e292,d=17976931348623157e292,p=-17976931348623157e292,c=-17976931348623157e292;f=+r[A+(v&lt;&lt;4)+8&gt;&gt;3],h=+r[A+(((0|(n=n+2|0))==(0|b)?0:n)&lt;&lt;4)+8&gt;&gt;3],(a=+r[A+(v&lt;&lt;4)&gt;&gt;3])&lt;u&amp;&amp;(r[y&gt;&gt;3]=a,u=a),f&lt;d&amp;&amp;(r[t&gt;&gt;3]=f,d=f),a&gt;p?r[_&gt;&gt;3]=a:a=p,f&gt;c&amp;&amp;(r[x&gt;&gt;3]=f,c=f),m=f&gt;0&amp;f&lt;m?f:m,g=f&lt;0&amp;f&gt;g?f:g,o|=+l(+(f-h))&gt;3.141592653589793,(0|(n=v+1|0))!=(0|b);)k=v,v=n,p=a,n=k;o&amp;&amp;(r[x&gt;&gt;3]=g,r[t&gt;&gt;3]=m)}}else s[_&gt;&gt;2]=0,s[_+4&gt;&gt;2]=0,s[_+8&gt;&gt;2]=0,s[_+12&gt;&gt;2]=0,s[_+16&gt;&gt;2]=0,s[_+20&gt;&gt;2]=0,s[_+24&gt;&gt;2]=0,s[_+28&gt;&gt;2]=0,i=0|s[S&gt;&gt;2]}while((0|w)&lt;(0|i))}}(t,$),u=0|s[(p=t)+4&gt;&gt;2],s[(m=g)&gt;&gt;2]=s[p&gt;&gt;2],s[m+4&gt;&gt;2]=u,Qt(g,o),m=0|G(o,e),u=0|s[g&gt;&gt;2],(0|(p=0|s[A&gt;&gt;2]))&gt;0){f=0|s[t+12&gt;&gt;2],d=0;do{u=(0|s[f+(d&lt;&lt;3)&gt;&gt;2])+u|0,d=d+1|0}while((0|d)!=(0|p))}if(d=0|pe(n=(m=(0|m)&lt;(0|u)?u:m)+12|0,8),v=0|pe(n,8),s[o&gt;&gt;2]=0,V=0|s[(N=t)+4&gt;&gt;2],s[(u=g)&gt;&gt;2]=s[N&gt;&gt;2],s[u+4&gt;&gt;2]=V,0|(u=0|F(g,n,e,o,d,v)))return de(d),de(v),de($),I=h,0|u;t:do{if((0|s[A&gt;&gt;2])&gt;0){for(p=t+12|0,u=0;f=0|F((0|s[p&gt;&gt;2])+(u&lt;&lt;3)|0,n,e,o,d,v),u=u+1|0,!(0|f);)if((0|u)&gt;=(0|s[A&gt;&gt;2]))break t;return de(d),de(v),de($),I=h,0|f}}while(0);(0|m)&gt;-12&amp;&amp;xe(0|v,0,((0|n)&gt;1?n:1)&lt;&lt;3|0);t:do{if((0|s[o&gt;&gt;2])&gt;0){V=((0|n)&lt;0)&lt;&lt;31&gt;&gt;31,D=d,R=v,L=d,B=d,z=v,N=d,u=d,k=d,E=v,M=v,T=v,d=v;e:for(;;){for(S=0|s[o&gt;&gt;2],y=0,x=0,p=0;;){m=(f=a)+56|0;do{s[f&gt;&gt;2]=0,f=f+4|0}while((0|f)&lt;(0|m));if(0|O(g=0|s[(e=D+(y&lt;&lt;3)|0)&gt;&gt;2],e=0|s[e+4&gt;&gt;2],1,a,0)){m=(f=a)+56|0;do{s[f&gt;&gt;2]=0,f=f+4|0}while((0|f)&lt;(0|m));0|(f=0|pe(7,4))&amp;&amp;(P(g,e,1,a,f,7,0),de(f))}b=0;do{v=0|s[(_=a+(b&lt;&lt;3)|0)&gt;&gt;2],_=0|s[_+4&gt;&gt;2];i:do{if(!(0==(0|v)&amp;0==(0|_))){if(g=0|ge(0|v,0|_,0|n,0|V),w(),!(0==(0|(e=0|s[(m=f=i+(g&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(m=0|s[m+4&gt;&gt;2]))))for(A=0;;){if((0|A)&gt;(0|n))break e;if((0|e)==(0|v)&amp;(0|m)==(0|_))break i;if(0==(0|(e=0|s[(m=f=i+((g=(g+1|0)%(0|n)|0)&lt;&lt;3)|0)&gt;&gt;2]))&amp;0==(0|(m=0|s[m+4&gt;&gt;2])))break;A=A+1|0}0==(0|v)&amp;0==(0|_)||(Nt(v,_,c),0|Jt(t,$,c)&amp;&amp;(s[(A=f)&gt;&gt;2]=v,s[A+4&gt;&gt;2]=_,s[(A=R+(p&lt;&lt;3)|0)&gt;&gt;2]=v,s[A+4&gt;&gt;2]=_,p=p+1|0))}}while(0);b=b+1|0}while(b&gt;&gt;&gt;0&lt;7);if((0|(x=x+1|0))&gt;=(0|S))break;y=y+1|0}if((0|S)&gt;0&amp;&amp;xe(0|L,0,S&lt;&lt;3|0),s[o&gt;&gt;2]=p,!((0|p)&gt;0))break t;v=d,_=T,b=N,y=M,x=E,S=R,d=k,T=u,M=B,E=L,k=v,u=_,N=z,z=b,B=y,L=x,R=D,D=S}return de(B),de(z),de($),I=h,-1}u=v}while(0);return de($),de(d),de(u),I=h,0}(t|=0,e|=0,i|=0)){if(c=0|s[(u=t)+4&gt;&gt;2],s[(h=a)&gt;&gt;2]=s[u&gt;&gt;2],s[h+4&gt;&gt;2]=c,Qt(a,o),h=0|G(o,e),e=0|s[a&gt;&gt;2],(0|(c=0|s[t+8&gt;&gt;2]))&gt;0){a=0|s[t+12&gt;&gt;2],o=0;do{e=(0|s[a+(o&lt;&lt;3)&gt;&gt;2])+e|0,o=o+1|0}while((0|o)!=(0|c))}(0|(e=(0|h)&lt;(0|e)?e:h))&lt;=-12||xe(0|i,0,8+(((0|(u=e+11|0))&gt;0?u:0)&lt;&lt;3)|0),I=n}else I=n},_res0IndexCount:function(){return 122},_round:we,_sbrk:Ce,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(t,e,i,n,r){t|=0,i|=0,n|=0;var o=0,a=0,l=0,c=0,h=0,u=0;if((0|(e|=0))&lt;=0)return 0;if((0|(r|=0))&gt;=16){for(o=0;;){if(!(0==(0|s[(u=t+(o&lt;&lt;3)|0)&gt;&gt;2])&amp;0==(0|s[u+4&gt;&gt;2]))){o=14;break}if((0|(o=o+1|0))&gt;=(0|e)){a=0,o=16;break}}if(14==(0|o))return 0|((0|n)&gt;0?-2:-1);if(16==(0|o))return 0|a}o=0,u=0;t:for(;;){a=0|s[(l=h=t+(u&lt;&lt;3)|0)&gt;&gt;2],l=0|s[l+4&gt;&gt;2];do{if(!(0==(0|a)&amp;0==(0|l))){if((0|o)&gt;=(0|n)){a=-1,o=16;break t}if(c=0|Ae(0|a,0|l,52),w(),(0|(c&amp;=15))&gt;(0|r)){a=-2,o=16;break t}if((0|c)==(0|r)){s[(h=i+(o&lt;&lt;3)|0)&gt;&gt;2]=a,s[h+4&gt;&gt;2]=l,o=o+1|0;break}if((0|(a=(0|Kt(7,r-c|0))+o|0))&gt;(0|n)){a=-1,o=16;break t}Mt(0|s[h&gt;&gt;2],0|s[h+4&gt;&gt;2],r,i+(o&lt;&lt;3)|0),o=a}}while(0);if((0|(u=u+1|0))&gt;=(0|e)){a=0,o=16;break}}return 16==(0|o)?0|a:0},establishStackSpace:function(t,e){I=t|=0},stackAlloc:function(t){var e;return e=I,I=15+(I=I+(t|=0)|0)&amp;-16,0|e},stackRestore:function(t){I=t|=0},stackSave:function(){return 0|I}}}({Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},{a:at,b:function(t){c=t},c:h,d:function(t,e,i,n){at(&quot;Assertion failed: &quot;+x(t)+&quot;, at: &quot;+[e?x(e):&quot;unknown filename&quot;,i,n?x(n):&quot;unknown function&quot;])},e:function(t){return i.___errno_location&amp;&amp;(v[i.___errno_location()&gt;&gt;2]=t),t},f:G,g:function(t,e,i){g.set(g.subarray(e,e+i),t)},h:function(t){var e=G(),i=2130706432;if(t&gt;i)return!1;for(var n=Math.max(e,16777216);n&lt;t;)n=n&lt;=536870912?w(2*n,16777216):Math.min(w((3*n+2147483648)/4,16777216),i);return!!q(n)},i:function(t){at(&quot;OOM&quot;)},j:function(t){return t},k:j,l:q,m:H,n:function(){var t=H();return i.extraStackTrace&amp;&amp;(t+=&quot;\n&quot;+i.extraStackTrace()),j(t)},o:24032,p:24016},f),Q=(i.___uremdi3=X.___uremdi3,i._bitshift64Lshr=X._bitshift64Lshr,i._bitshift64Shl=X._bitshift64Shl,i._calloc=X._calloc,i._cellAreaKm2=X._cellAreaKm2,i._cellAreaM2=X._cellAreaM2,i._cellAreaRads2=X._cellAreaRads2,i._compact=X._compact,i._destroyLinkedPolygon=X._destroyLinkedPolygon,i._edgeLengthKm=X._edgeLengthKm,i._edgeLengthM=X._edgeLengthM,i._emscripten_replace_memory=X._emscripten_replace_memory),J=(i._exactEdgeLengthKm=X._exactEdgeLengthKm,i._exactEdgeLengthM=X._exactEdgeLengthM,i._exactEdgeLengthRads=X._exactEdgeLengthRads,i._experimentalH3ToLocalIj=X._experimentalH3ToLocalIj,i._experimentalLocalIjToH3=X._experimentalLocalIjToH3,i._free=X._free,i._geoToH3=X._geoToH3,i._getDestinationH3IndexFromUnidirectionalEdge=X._getDestinationH3IndexFromUnidirectionalEdge,i._getH3IndexesFromUnidirectionalEdge=X._getH3IndexesFromUnidirectionalEdge,i._getH3UnidirectionalEdge=X._getH3UnidirectionalEdge,i._getH3UnidirectionalEdgeBoundary=X._getH3UnidirectionalEdgeBoundary,i._getH3UnidirectionalEdgesFromHexagon=X._getH3UnidirectionalEdgesFromHexagon,i._getOriginH3IndexFromUnidirectionalEdge=X._getOriginH3IndexFromUnidirectionalEdge,i._getPentagonIndexes=X._getPentagonIndexes,i._getRes0Indexes=X._getRes0Indexes,i._h3Distance=X._h3Distance,i._h3GetBaseCell=X._h3GetBaseCell,i._h3GetFaces=X._h3GetFaces,i._h3GetResolution=X._h3GetResolution,i._h3IndexesAreNeighbors=X._h3IndexesAreNeighbors,i._h3IsPentagon=X._h3IsPentagon,i._h3IsResClassIII=X._h3IsResClassIII,i._h3IsValid=X._h3IsValid,i._h3Line=X._h3Line,i._h3LineSize=X._h3LineSize,i._h3SetToLinkedGeo=X._h3SetToLinkedGeo,i._h3ToCenterChild=X._h3ToCenterChild,i._h3ToChildren=X._h3ToChildren,i._h3ToGeo=X._h3ToGeo,i._h3ToGeoBoundary=X._h3ToGeoBoundary,i._h3ToParent=X._h3ToParent,i._h3UnidirectionalEdgeIsValid=X._h3UnidirectionalEdgeIsValid,i._hexAreaKm2=X._hexAreaKm2,i._hexAreaM2=X._hexAreaM2,i._hexRing=X._hexRing,i._i64Subtract=X._i64Subtract,i._kRing=X._kRing,i._kRingDistances=X._kRingDistances,i._llvm_minnum_f64=X._llvm_minnum_f64,i._llvm_round_f64=X._llvm_round_f64,i._malloc=X._malloc,i._maxFaceCount=X._maxFaceCount,i._maxH3ToChildrenSize=X._maxH3ToChildrenSize,i._maxKringSize=X._maxKringSize,i._maxPolyfillSize=X._maxPolyfillSize,i._maxUncompactSize=X._maxUncompactSize,i._memcpy=X._memcpy,i._memset=X._memset,i._numHexagons=X._numHexagons,i._pentagonIndexCount=X._pentagonIndexCount,i._pointDistKm=X._pointDistKm,i._pointDistM=X._pointDistM,i._pointDistRads=X._pointDistRads,i._polyfill=X._polyfill,i._res0IndexCount=X._res0IndexCount,i._round=X._round,i._sbrk=X._sbrk,i._sizeOfCoordIJ=X._sizeOfCoordIJ,i._sizeOfGeoBoundary=X._sizeOfGeoBoundary,i._sizeOfGeoCoord=X._sizeOfGeoCoord,i._sizeOfGeoPolygon=X._sizeOfGeoPolygon,i._sizeOfGeofence=X._sizeOfGeofence,i._sizeOfH3Index=X._sizeOfH3Index,i._sizeOfLinkedGeoPolygon=X._sizeOfLinkedGeoPolygon,i._uncompact=X._uncompact,i.establishStackSpace=X.establishStackSpace,i.stackAlloc=X.stackAlloc),tt=i.stackRestore=X.stackRestore,et=i.stackSave=X.stackSave;if(i.asm=X,i.cwrap=function(t,e,i,n){var s=(i=i||[]).every(function(t){return&quot;number&quot;===t});return&quot;string&quot;!==e&amp;&amp;s&amp;&amp;!n?d(t):function(){return p(t,e,i,arguments)}},i.setValue=function(t,e,i,n){switch(&quot;*&quot;===(i=i||&quot;i8&quot;).charAt(i.length-1)&amp;&amp;(i=&quot;i32&quot;),i){case&quot;i1&quot;:case&quot;i8&quot;:m[t&gt;&gt;0]=e;break;case&quot;i16&quot;:A[t&gt;&gt;1]=e;break;case&quot;i32&quot;:v[t&gt;&gt;2]=e;break;case&quot;i64&quot;:N=[e&gt;&gt;&gt;0,(z=e,+D(z)&gt;=1?z&gt;0?(0|R(+P(z/4294967296),4294967295))&gt;&gt;&gt;0:~~+O((z-+(~~z&gt;&gt;&gt;0))/4294967296)&gt;&gt;&gt;0:0)],v[t&gt;&gt;2]=N[0],v[t+4&gt;&gt;2]=N[1];break;case&quot;float&quot;:_[t&gt;&gt;2]=e;break;case&quot;double&quot;:b[t&gt;&gt;3]=e;break;default:at(&quot;invalid type for setValue: &quot;+i)}},i.getValue=function(t,e,i){switch(&quot;*&quot;===(e=e||&quot;i8&quot;).charAt(e.length-1)&amp;&amp;(e=&quot;i32&quot;),e){case&quot;i1&quot;:case&quot;i8&quot;:return m[t&gt;&gt;0];case&quot;i16&quot;:return A[t&gt;&gt;1];case&quot;i32&quot;:case&quot;i64&quot;:return v[t&gt;&gt;2];case&quot;float&quot;:return _[t&gt;&gt;2];case&quot;double&quot;:return b[t&gt;&gt;3];default:at(&quot;invalid type for getValue: &quot;+e)}return null},i.getTempRet0=h,V){U(V)||(Z=V,V=i.locateFile?i.locateFile(Z,o):o+Z),F++,i.monitorRunDependencies&amp;&amp;i.monitorRunDependencies(F);var it=function(t){t.byteLength&amp;&amp;(t=new Uint8Array(t)),g.set(t,8),i.memoryInitializerRequest&amp;&amp;delete i.memoryInitializerRequest.response,function(t){if(F--,i.monitorRunDependencies&amp;&amp;i.monitorRunDependencies(F),0==F&amp;&amp;(null!==L&amp;&amp;(clearInterval(L),L=null),B)){var e=B;B=null,e()}}()},nt=function(){s(V,it,function(){throw&quot;could not load memory initializer &quot;+V})},st=Y(V);if(st)it(st.buffer);else if(i.memoryInitializerRequest){var rt=function(){var t=i.memoryInitializerRequest,e=t.response;if(200!==t.status&amp;&amp;0!==t.status){var n=Y(i.memoryInitializerRequestURL);if(!n)return console.warn(&quot;a problem seems to have happened with Module.memoryInitializerRequest, status: &quot;+t.status+&quot;, retrying &quot;+V),void nt();e=n.buffer}it(e)};i.memoryInitializerRequest.response?setTimeout(rt,0):i.memoryInitializerRequest.addEventListener(&quot;load&quot;,rt)}else nt()}function ot(t){function e(){K||(K=!0,!u&amp;&amp;(k(M),k(T),i.onRuntimeInitialized&amp;&amp;i.onRuntimeInitialized(),function(){if(i.postRun)for(&quot;function&quot;==typeof i.postRun&amp;&amp;(i.postRun=[i.postRun]);i.postRun.length;)t=i.postRun.shift(),I.unshift(t);var t;k(I)}()))}t=t||r,F&gt;0||(function(){if(i.preRun)for(&quot;function&quot;==typeof i.preRun&amp;&amp;(i.preRun=[i.preRun]);i.preRun.length;)t=i.preRun.shift(),E.unshift(t);var t;k(E)}(),F&gt;0)||(i.setStatus?(i.setStatus(&quot;Running...&quot;),setTimeout(function(){setTimeout(function(){i.setStatus(&quot;&quot;)},1),e()},1)):e())}function at(t){throw i.onAbort&amp;&amp;i.onAbort(t),a(t+=&quot;&quot;),l(t),u=!0,&quot;abort(&quot;+t+&quot;). Build with -s ASSERTIONS=1 for more info.&quot;}if(B=function t(){K||ot(),K||(B=t)},i.run=ot,i.abort=at,i.preInit)for(&quot;function&quot;==typeof i.preInit&amp;&amp;(i.preInit=[i.preInit]);i.preInit.length&gt;0;)i.preInit.pop()();return ot(),t}(&quot;object&quot;==typeof WU?WU:{}),YU=&quot;number&quot;,ZU={};[[&quot;sizeOfH3Index&quot;,YU],[&quot;sizeOfGeoCoord&quot;,YU],[&quot;sizeOfGeoBoundary&quot;,YU],[&quot;sizeOfGeoPolygon&quot;,YU],[&quot;sizeOfGeofence&quot;,YU],[&quot;sizeOfLinkedGeoPolygon&quot;,YU],[&quot;sizeOfCoordIJ&quot;,YU],[&quot;h3IsValid&quot;,YU,[YU,YU]],[&quot;geoToH3&quot;,YU,[YU,YU,YU]],[&quot;h3ToGeo&quot;,null,[YU,YU,YU]],[&quot;h3ToGeoBoundary&quot;,null,[YU,YU,YU]],[&quot;maxKringSize&quot;,YU,[YU]],[&quot;kRing&quot;,null,[YU,YU,YU,YU]],[&quot;kRingDistances&quot;,null,[YU,YU,YU,YU,YU]],[&quot;hexRing&quot;,null,[YU,YU,YU,YU]],[&quot;maxPolyfillSize&quot;,YU,[YU,YU]],[&quot;polyfill&quot;,null,[YU,YU,YU]],[&quot;h3SetToLinkedGeo&quot;,null,[YU,YU,YU]],[&quot;destroyLinkedPolygon&quot;,null,[YU]],[&quot;compact&quot;,YU,[YU,YU,YU]],[&quot;uncompact&quot;,YU,[YU,YU,YU,YU,YU]],[&quot;maxUncompactSize&quot;,YU,[YU,YU,YU]],[&quot;h3IsPentagon&quot;,YU,[YU,YU]],[&quot;h3IsResClassIII&quot;,YU,[YU,YU]],[&quot;h3GetBaseCell&quot;,YU,[YU,YU]],[&quot;h3GetResolution&quot;,YU,[YU,YU]],[&quot;maxFaceCount&quot;,YU,[YU,YU]],[&quot;h3GetFaces&quot;,null,[YU,YU,YU]],[&quot;h3ToParent&quot;,YU,[YU,YU,YU]],[&quot;h3ToChildren&quot;,null,[YU,YU,YU,YU]],[&quot;h3ToCenterChild&quot;,YU,[YU,YU,YU]],[&quot;maxH3ToChildrenSize&quot;,YU,[YU,YU,YU]],[&quot;h3IndexesAreNeighbors&quot;,YU,[YU,YU,YU,YU]],[&quot;getH3UnidirectionalEdge&quot;,YU,[YU,YU,YU,YU]],[&quot;getOriginH3IndexFromUnidirectionalEdge&quot;,YU,[YU,YU]],[&quot;getDestinationH3IndexFromUnidirectionalEdge&quot;,YU,[YU,YU]],[&quot;h3UnidirectionalEdgeIsValid&quot;,YU,[YU,YU]],[&quot;getH3IndexesFromUnidirectionalEdge&quot;,null,[YU,YU,YU]],[&quot;getH3UnidirectionalEdgesFromHexagon&quot;,null,[YU,YU,YU]],[&quot;getH3UnidirectionalEdgeBoundary&quot;,null,[YU,YU,YU]],[&quot;h3Distance&quot;,YU,[YU,YU,YU,YU]],[&quot;h3Line&quot;,YU,[YU,YU,YU,YU,YU]],[&quot;h3LineSize&quot;,YU,[YU,YU,YU,YU]],[&quot;experimentalH3ToLocalIj&quot;,YU,[YU,YU,YU,YU,YU]],[&quot;experimentalLocalIjToH3&quot;,YU,[YU,YU,YU,YU]],[&quot;hexAreaM2&quot;,YU,[YU]],[&quot;hexAreaKm2&quot;,YU,[YU]],[&quot;edgeLengthM&quot;,YU,[YU]],[&quot;edgeLengthKm&quot;,YU,[YU]],[&quot;pointDistM&quot;,YU,[YU,YU]],[&quot;pointDistKm&quot;,YU,[YU,YU]],[&quot;pointDistRads&quot;,YU,[YU,YU]],[&quot;cellAreaM2&quot;,YU,[YU,YU]],[&quot;cellAreaKm2&quot;,YU,[YU,YU]],[&quot;cellAreaRads2&quot;,YU,[YU,YU]],[&quot;exactEdgeLengthM&quot;,YU,[YU,YU]],[&quot;exactEdgeLengthKm&quot;,YU,[YU,YU]],[&quot;exactEdgeLengthRads&quot;,YU,[YU,YU]],[&quot;numHexagons&quot;,YU,[YU]],[&quot;getRes0Indexes&quot;,null,[YU]],[&quot;res0IndexCount&quot;,YU],[&quot;getPentagonIndexes&quot;,null,[YU,YU]],[&quot;pentagonIndexCount&quot;,YU]].forEach(function(t){ZU[t[0]]=WU.cwrap.apply(WU,t)});var KU=ZU.sizeOfH3Index(),XU=ZU.sizeOfGeoCoord(),QU=ZU.sizeOfGeoBoundary(),JU=ZU.sizeOfGeoPolygon(),tj=ZU.sizeOfGeofence();ZU.sizeOfLinkedGeoPolygon(),ZU.sizeOfCoordIJ();var ej=/[^0-9a-fA-F]/;function ij(t){if(Array.isArray(t)&amp;&amp;2===t.length&amp;&amp;Number.isInteger(t[0])&amp;&amp;Number.isInteger(t[1]))return t;if(&quot;string&quot;!=typeof t||ej.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),16);return[parseInt(t.substring(t.length-8),16),e]}function nj(t){if(t&gt;=0)return t.toString(16);var e=rj(8,(t&amp;=2147483647).toString(16));return(parseInt(e[0],16)+8).toString(16)+e.substring(1)}function sj(t,e){return nj(e)+rj(8,nj(t))}function rj(t,e){for(var i=t-e.length,n=&quot;&quot;,s=0;s&lt;i;s++)n+=&quot;0&quot;;return n+e}function oj(t,e,i){for(var n=t.length,s=WU._calloc(n,XU),r=i?1:0,o=i?0:1,a=0;a&lt;2*n;a+=2)WU.HEAPF64.set([t[a/2][r],t[a/2][o]].map(wj),s/8+a);return WU.HEAPU32.set([n,s],e/4),e}function aj(t){var e=function(t){return[t,WU.getTempRet0()]}(t),i=e[1];return i?sj(e[0],i):null}function lj(t,e){void 0===e&amp;&amp;(e=0);var i=WU.getValue(t+4*e*2,&quot;i32&quot;),n=WU.getValue(t+4*(2*e+1),&quot;i32&quot;);return n?sj(i,n):null}function cj(t,e){for(var i=[],n=0;n&lt;e;n++){var s=lj(t,n);null!==s&amp;&amp;i.push(s)}return i}function hj(t){return function(t){return 180*t/Math.PI}(WU.getValue(t,&quot;double&quot;))}function uj(t){return[hj(t),hj(t+8)]}function dj(t){return[hj(t+8),hj(t)]}function pj(t,e,i){for(var n=WU.getValue(t,&quot;i32&quot;),s=t+8,r=[],o=e?dj:uj,a=0;a&lt;2*n;a+=2)r.push(o(s+8*a));return i&amp;&amp;r.push(r[0]),r}function fj(t){var e=WU._malloc(XU),i=ij(t);ZU.h3ToGeo(i[0],i[1],e);var n=uj(e);return WU._free(e),n}function mj(t,e){var i=WU._malloc(QU),n=ij(t);ZU.h3ToGeoBoundary(n[0],n[1],i);var s=pj(i,e,e);return WU._free(i),s}function gj(t,e){var i=ij(t);return aj(ZU.h3ToParent(i[0],i[1],e))}function Aj(t,e,i){if(function(t){if(&quot;number&quot;!=typeof t||t&lt;0||t&gt;15||Math.floor(t)!==t)throw new Error(&quot;Invalid resolution: &quot;+t)}(e),i=Boolean(i),0===t.length||0===t[0].length)return[];&quot;number&quot;==typeof t[0][0]&amp;&amp;(t=[t]);var n=function(t,e){var i,n=t.length-1,s=WU._calloc(JU),r=0+tj,o=r+4;if(oj(t[0],s+0,e),n&gt;0){i=WU._calloc(n,tj);for(var a=0;a&lt;n;a++)oj(t[a+1],i+tj*a,e)}return WU.setValue(s+r,n,&quot;i32&quot;),WU.setValue(s+o,i,&quot;i32&quot;),s}(t,i),s=ZU.maxPolyfillSize(n,e),r=WU._calloc(s,KU);ZU.polyfill(n,e,r);var o=cj(r,s);return WU._free(r),function(t){var e=0+tj,i=e+4;WU._free(WU.getValue(t+0+4,&quot;i8*&quot;));var n=WU.getValue(t+e,&quot;i32&quot;);if(n&gt;0){for(var s=WU.getValue(t+i,&quot;i32&quot;),r=0;r&lt;n;r++)WU._free(WU.getValue(s+tj*r+4,&quot;i8*&quot;));WU._free(s)}WU._free(t)}(n),o}function vj(t){var e=ij(t);return aj(ZU.getOriginH3IndexFromUnidirectionalEdge(e[0],e[1]))}function _j(t){var e=ij(t);return aj(ZU.getDestinationH3IndexFromUnidirectionalEdge(e[0],e[1]))}function bj(t){var e=ij(t);return Boolean(ZU.h3UnidirectionalEdgeIsValid(e[0],e[1]))}function yj(t){var e=ij(t),i=e[0],n=e[1],s=WU._calloc(2,KU);ZU.getH3IndexesFromUnidirectionalEdge(i,n,s);var r=cj(s,2);return WU._free(s),r}function xj(t,e){var i=WU._malloc(QU),n=ij(t);ZU.getH3UnidirectionalEdgeBoundary(n[0],n[1],i);var s=pj(i,e);return WU._free(i),s}function wj(t){return t*Math.PI/180}function Cj(t){let e=null;const i=t.map(t=&gt;{const i=PU(mj(t,!0),e);return e=i[i.length-1],i}).map(t=&gt;t.reduce((t,e)=&gt;(e[0]&lt;t.minLongitude&amp;&amp;(t.minLongitude=e[0]),e[0]&gt;t.maxLongitude&amp;&amp;(t.maxLongitude=e[0]),e[1]&lt;t.minLatitude&amp;&amp;(t.minLatitude=e[1]),e[1]&gt;t.maxLatitude&amp;&amp;(t.maxLatitude=e[1]),t),{minLongitude:Number.MAX_SAFE_INTEGER,maxLongitude:Number.MIN_SAFE_INTEGER,minLatitude:Number.MAX_SAFE_INTEGER,maxLatitude:Number.MIN_SAFE_INTEGER})).reduce((t,e)=&gt;(e.minLongitude&lt;t.minLongitude&amp;&amp;(t.minLongitude=e.minLongitude),e.maxLongitude&gt;t.maxLongitude&amp;&amp;(t.maxLongitude=e.maxLongitude),e.minLatitude&lt;t.minLatitude&amp;&amp;(t.minLatitude=e.minLatitude),e.maxLatitude&gt;t.maxLatitude&amp;&amp;(t.maxLatitude=e.maxLatitude),t),{minLongitude:Number.MAX_SAFE_INTEGER,maxLongitude:Number.MIN_SAFE_INTEGER,minLatitude:Number.MAX_SAFE_INTEGER,maxLatitude:Number.MIN_SAFE_INTEGER});return[...IV([i.minLongitude,i.minLatitude]),...IV([i.maxLongitude,i.maxLatitude])]}function Sj(t){return{id:t.id,name:t.name,h3indexes:t.h3indexes}}let kj=(()=&gt;{class t{constructor(t,e){this.configService=t,this.mapConfigService=e,this.view$=new Qp(null),this.pointerMove$=new S,this.locateEvents$=new S,this.fitEvents$=new S,this.zoomEvents$=new S,this.flyToEvents$=new S,this.pingLocation$=new S,this.hasBooted$=new Qp(!1)}init(){this.locateEvents$.pipe(FO()).subscribe(()=&gt;{this.hasBooted$.next(!0)})}destroy(){this.hasBooted$.next(!1)}centerOn(t,e){if(!uU(t[0])||!uU(t[1]))throw new Error(`centerOn: can&#39;t center on malformed location: ${t.toString()}`);this.locateEvents$.next(new qU({center:t,zoom:e}))}centerOnLonLat(t,e){this.centerOn(IV(t),e)}locate(t){this.centerOnLonLat(t,10)}resetToDefaultView(){const t=this.configService.lastView;t?this.centerOn(t.center,t.zoom):this.centerOnLonLat([8.3825684,40.4385859],7)}fitOn(t,e=1e3){this.fitEvents$.next(new GU({polygon:t,duration:e}))}flyTo(t,e){this.flyToEvents$.next(new qU({center:t,zoom:e}))}fitOnHexagons(t,e=1e3){this.fitOn(Cj(t),e)}zoomByDelta(t){this.zoomEvents$.next(t)}updateViewState(t){this.view$.next(t)}emitPointerMoveEvent(t){this.pointerMove$.next(t)}locateFit(t){if(this.pingLocation(t),this.mapConfigService.zoomOnLocationEvents$.value)this.locate(t);else{const[e,i]=IV(t),n=this.view$.value;let[s,r,o,a]=n.extent;if(!(s&lt;e&amp;&amp;e&lt;o&amp;&amp;r&lt;i&amp;&amp;i&lt;a)){e&lt;s&amp;&amp;(s=e),e&gt;o&amp;&amp;(o=e),i&lt;r&amp;&amp;(r=i),i&gt;a&amp;&amp;(a=i);const l=EN(n.center,n.maxResolution,0,n.viewportSize.map(t=&gt;t-200)),c=l[3]-l[1];o-s&lt;l[2]-l[0]&amp;&amp;a-r&lt;c?this.fitOn([s,r,o,a]):this.centerOnLonLat(t)}}}pingLocation(t){this.pingLocation$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(jU),Mn(HU))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function Ej(t,e=uf){const i=function(t){return t instanceof Date&amp;&amp;!isNaN(+t)}(t)?+t-e.now():Math.abs(t);return t=&gt;t.lift(new Mj(i,e))}class Mj{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Tj(t,this.delay,this.scheduler))}}class Tj extends g{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,n=t.scheduler,s=t.destination;for(;i.length&gt;0&amp;&amp;i[0].time-n.now()&lt;=0;)i.shift().notification.observe(s);if(i.length&gt;0){const e=Math.max(0,i[0].time-n.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Tj.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new Ij(e.now()+this.delay,t);this.queue.push(i),!1===this.active&amp;&amp;this._schedule(e)}_next(t){this.scheduleNotification(_g.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(_g.createComplete()),this.unsubscribe()}}class Ij{constructor(t,e){this.time=t,this.notification=e}}let Dj=(()=&gt;{class t{constructor(t){this.mapConfigService=t,this.timestamp$=new Qp(0),this.timestamp$.pipe(Sf(1),Ej(0)).subscribe(t=&gt;{this.mapConfigService.freezeTimestamp(t)})}setTimestampToNow(){this.setTimestamp(this.getCurrentTimestamp())}setTimestamp(t){t=Math.min(t,this.getCurrentTimestamp()),this.timestamp$.next(t)}incrementTimestamp(t){this.setTimestamp(this.timestamp$.value+t)}resetTimestamp(){this.setTimestamp(0)}getCurrentTimestamp(){return Math.ceil(Date.now()/1e3)}}return t.\u0275fac=function(e){return new(e||t)(Mn(HU))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Oj=(()=&gt;{class t{constructor(t,e,i,n){this.router=t,this.configService=e,this.historyService=i,this.mapService=n,this.previousUrl=void 0,this.currentUrl=void 0,this.route$=new Qp(&quot;&quot;),this.viewURL$=new Qp(&quot;&quot;),this.router.events.subscribe(t=&gt;{t instanceof zO&amp;&amp;(this.currentUrl&amp;&amp;(this.previousUrl=this.currentUrl),this.currentUrl=t.urlAfterRedirects,this.route$.next(this.currentUrl))}),QT([this.mapService.view$.pipe(Sf(1)),this.historyService.timestamp$]).pipe(df(500)).subscribe(([t,e])=&gt;{let i=t.toURL();e&amp;&amp;(i+=`,${new Date(1e3*e).toISOString()}`),this.viewURL$.next(i),null!==t.center[0]&amp;&amp;this.configService.set(&quot;lastView&quot;,t.toLocateEvent())})}goToPreviousPage(){return jp(this,void 0,void 0,function*(){yield this.router.navigateByUrl(this.previousUrl)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(dF),Mn(jU),Mn(Dj),Mn(kj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const Pj=Symbol(&quot;Comlink.proxy&quot;),Rj=Symbol(&quot;Comlink.endpoint&quot;),Fj=Symbol(&quot;Comlink.releaseProxy&quot;),Lj=Symbol(&quot;Comlink.thrown&quot;),Bj=t=&gt;&quot;object&quot;==typeof t&amp;&amp;null!==t||&quot;function&quot;==typeof t,zj=new Map([[&quot;proxy&quot;,{canHandle:t=&gt;Bj(t)&amp;&amp;t[Pj],serialize(t){const{port1:e,port2:i}=new MessageChannel;return Nj(t,e),[i,[i]]},deserialize:t=&gt;(t.start(),$j(t))}],[&quot;throw&quot;,{canHandle:t=&gt;Bj(t)&amp;&amp;Lj in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}}]]);function Nj(t,e=self){e.addEventListener(&quot;message&quot;,function i(n){if(!n||!n.data)return;const{id:s,type:r,path:o}=Object.assign({path:[]},n.data),a=(n.data.argumentList||[]).map(Zj);let l;try{const e=o.slice(0,-1).reduce((t,e)=&gt;t[e],t),i=o.reduce((t,e)=&gt;t[e],t);switch(r){case&quot;GET&quot;:l=i;break;case&quot;SET&quot;:e[o.slice(-1)[0]]=Zj(n.data.value),l=!0;break;case&quot;APPLY&quot;:l=i.apply(e,a);break;case&quot;CONSTRUCT&quot;:l=Wj(new i(...a));break;case&quot;ENDPOINT&quot;:{const{port1:e,port2:i}=new MessageChannel;Nj(t,i),l=function(t,e){return qj.set(t,e),t}(e,[e])}break;case&quot;RELEASE&quot;:l=void 0;break;default:return}}catch(c){l={value:c,[Lj]:0}}Promise.resolve(l).catch(t=&gt;({value:t,[Lj]:0})).then(t=&gt;{const[n,o]=Yj(t);e.postMessage(Object.assign(Object.assign({},n),{id:s}),o),&quot;RELEASE&quot;===r&amp;&amp;(e.removeEventListener(&quot;message&quot;,i),Vj(e))})}),e.start&amp;&amp;e.start()}function Vj(t){(function(t){return&quot;MessagePort&quot;===t.constructor.name})(t)&amp;&amp;t.close()}function $j(t,e){return jj(t,[],e)}function Uj(t){if(t)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function jj(t,e=[],i=function(){}){let n=!1;const s=new Proxy(i,{get(i,r){if(Uj(n),r===Fj)return()=&gt;Kj(t,{type:&quot;RELEASE&quot;,path:e.map(t=&gt;t.toString())}).then(()=&gt;{Vj(t),n=!0});if(&quot;then&quot;===r){if(0===e.length)return{then:()=&gt;s};const i=Kj(t,{type:&quot;GET&quot;,path:e.map(t=&gt;t.toString())}).then(Zj);return i.then.bind(i)}return jj(t,[...e,r])},set(i,s,r){Uj(n);const[o,a]=Yj(r);return Kj(t,{type:&quot;SET&quot;,path:[...e,s].map(t=&gt;t.toString()),value:o},a).then(Zj)},apply(i,s,r){Uj(n);const o=e[e.length-1];if(o===Rj)return Kj(t,{type:&quot;ENDPOINT&quot;}).then(Zj);if(&quot;bind&quot;===o)return jj(t,e.slice(0,-1));const[a,l]=Gj(r);return Kj(t,{type:&quot;APPLY&quot;,path:e.map(t=&gt;t.toString()),argumentList:a},l).then(Zj)},construct(i,s){Uj(n);const[r,o]=Gj(s);return Kj(t,{type:&quot;CONSTRUCT&quot;,path:e.map(t=&gt;t.toString()),argumentList:r},o).then(Zj)}});return s}function Hj(t){return Array.prototype.concat.apply([],t)}function Gj(t){const e=t.map(Yj);return[e.map(t=&gt;t[0]),Hj(e.map(t=&gt;t[1]))]}const qj=new WeakMap;function Wj(t){return Object.assign(t,{[Pj]:!0})}function Yj(t){for(const[e,i]of zj)if(i.canHandle(t)){const[n,s]=i.serialize(t);return[{type:&quot;HANDLER&quot;,name:e,value:n},s]}return[{type:&quot;RAW&quot;,value:t},qj.get(t)||[]]}function Zj(t){switch(t.type){case&quot;HANDLER&quot;:return zj.get(t.name).deserialize(t.value);case&quot;RAW&quot;:return t.value}}function Kj(t,e,i){return new Promise(n=&gt;{const s=new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;);t.addEventListener(&quot;message&quot;,function e(i){!i.data||!i.data.id||i.data.id!==s||(t.removeEventListener(&quot;message&quot;,e),n(i.data))}),t.start&amp;&amp;t.start(),t.postMessage(Object.assign({id:s},e),i)})}const Xj=new Worker(i.tu(new URL(i.p+i.u(685),i.b)),{type:void 0}),Qj=$j(Xj);let Jj=(()=&gt;{class t{constructor(t,e){this.ngZone=t,this.errorHandler=e,this.areaShipsFeeds$=new S,this.areaAircraftsFeeds$=new S,this.inflightRequests$=new Qp(!1),this.applicationHealth$=new Qp(null),this.isOffline=!1,Xj.addEventListener(&quot;message&quot;,t=&gt;{var e;switch(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.type){case&quot;error&quot;:case&quot;unhandledrejection&quot;:this.errorHandler.handleError(Object.assign(new Error,t.data));break;case&quot;sentry_breadcrumb&quot;:nz(t.data.breadcrumb)}})}init(){return jp(this,void 0,void 0,function*(){yield new Promise((t,e)=&gt;{this.ngZone.runOutsideAngular(()=&gt;jp(this,void 0,void 0,function*(){try{this.worker=yield new Qj({serverURL:window.__anaisSettings.ANAIS_SERVER_URL,sepiaServerURL:window.__anaisSettings.SEPIA_SERVER_URL,sentryURL:window.__anaisSettings.SENTRY_URL,sentryRelease:window.__anaisSettings.APPLICATION_FULL_VERSION},Wj({areaShipsFeed:t=&gt;jp(this,void 0,void 0,function*(){this.areaShipsFeeds$.next(t)}),areaAircraftsFeed:t=&gt;{this.areaAircraftsFeeds$.next(t)},inflightRequests:t=&gt;{this.inflightRequests$.next(t)},applicationHealth:t=&gt;{this.isOffline||this.applicationHealth$.next(t)}})),t()}catch(i){e(i)}}))})})}setOffline(t){this.isOffline=t,this.application.setOffline(t)}get(){return this.worker}get aircrafts(){return this.worker.aircrafts}get alerts(){return this.worker.alerts}get alertRules(){return this.worker.alertRules}get annotations(){return this.worker.annotations}get application(){return this.worker.application}get authentication(){return this.worker.authentication}get containers(){return this.worker.containers}get export(){return this.worker.export}get fleets(){return this.worker.fleets}get groups(){return this.worker.groups}get lloyds(){return this.worker.lloyds}get offline(){return this.worker.offline}get ports(){return this.worker.ports}get ships(){return this.worker.ships}get tickets(){return this.worker.tickets}get users(){return this.worker.users}get zones(){return this.worker.zones}get view(){return this.worker.view}get viewport(){return this.worker.viewport}get aircraftsFeed(){return this.worker.aircraftsFeed}get shipsFeed(){return this.worker.shipsFeed}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu),Mn(Ps))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),tH=(()=&gt;{class t{constructor(t,e,i,n,s){this.errorHandler=t,this.mapConfigService=e,this.mapService=i,this.routeService=n,this.workerService=s,this.initialized=!1,this.user$=new Qp(null),this.user$.subscribe(t=&gt;{!function(t){ez(&quot;setUser&quot;,t)}(t?{id:t.id,email:t.email}:null)}),this.errorHandler.unauthorizedError$.subscribe(()=&gt;{var t;this.clearAuthentication();let e=this.routeService.currentUrl;(&quot;/&quot;===e||e.startsWith(&quot;/@&quot;))&amp;&amp;(e=null===(t=this.mapService.view$.value)||void 0===t?void 0:t.toURL()),location.href=&quot;/login?expired=&quot;+(e?&quot;&amp;redirect=&quot;+e:&quot;&quot;)})}init(t){return jp(this,void 0,void 0,function*(){if(t)this.user$.next(t);else try{this.user$.next(yield this.workerService.authentication.getUserInfos())}catch(e){if(e.name!==oz.Unauthorized&amp;&amp;e.name!==oz.Maintenance)throw e}this.initialized=!0})}isAuthenticated(){return null!==this.user$.value}isAdmin(){return this.isAuthenticated()&amp;&amp;&quot;admin&quot;===this.user$.value.profile}getUserId(){return this.isAuthenticated()&amp;&amp;this.user$.value.id}login(t){return jp(this,void 0,void 0,function*(){yield this.workerService.authentication.login(t),this.mapConfigService.resetShipFilter(),this.user$.next(yield this.workerService.authentication.getUserInfos())})}logout(){return jp(this,void 0,void 0,function*(){try{yield this.workerService.authentication.logout()}finally{this.clearAuthentication()}})}clearAuthentication(){this.user$.next(null)}}return t.\u0275fac=function(e){return new(e||t)(Mn(Ps),Mn(HU),Mn(kj),Mn(Oj),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),eH=(()=&gt;{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(Da(KS))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-confirm-dialog&quot;]],decls:11,vars:4,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;],[&quot;mat-dialog-content&quot;,&quot;&quot;],[&quot;mat-dialog-actions&quot;,&quot;&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Oui&quot;,3,&quot;mat-dialog-close&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Non&quot;,3,&quot;mat-dialog-close&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1),Fa(),Ra(2,&quot;div&quot;,1),Ra(3,&quot;p&quot;),xl(4),Fa(),Fa(),Ra(5,&quot;div&quot;,2),La(6,&quot;div&quot;,3),Ra(7,&quot;button&quot;,4),xl(8,&quot;Oui&quot;),Fa(),Ra(9,&quot;button&quot;,5),xl(10,&quot;Non&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(1),wl(e.data.title),Sr(3),wl(e.data.message),Sr(3),Oa(&quot;mat-dialog-close&quot;,!0),Sr(2),Oa(&quot;mat-dialog-close&quot;,!1))},directives:[sk,rk,ok,Ry,nk],encapsulation:2,changeDetection:0}),t})();function iH(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,1),Ra(1,&quot;button&quot;,2),Ha(&quot;click&quot;,function(){return Le(t),Za().action()}),xl(2),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(2),wl(t.data.action)}}function nH(t,e){}const sH=new Ji(&quot;MatSnackBarData&quot;);class rH{constructor(){this.politeness=&quot;assertive&quot;,this.announcementMessage=&quot;&quot;,this.duration=0,this.data=null,this.horizontalPosition=&quot;center&quot;,this.verticalPosition=&quot;bottom&quot;}}const oH=Math.pow(2,31)-1;class aH{constructor(t,e){this._overlayRef=e,this._afterDismissed=new S,this._afterOpened=new S,this._onAction=new S,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=&gt;this.dismiss()),t._onExit.subscribe(()=&gt;this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=&gt;this.dismiss(),Math.min(t,oH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let lH=(()=&gt;{class t{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.\u0275fac=function(e){return new(e||t)(Da(aH),Da(sH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;simple-snack-bar&quot;]],hostAttrs:[1,&quot;mat-simple-snackbar&quot;],decls:3,vars:2,consts:[[&quot;class&quot;,&quot;mat-simple-snackbar-action&quot;,4,&quot;ngIf&quot;],[1,&quot;mat-simple-snackbar-action&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;),xl(1),Fa(),ra(2,iH,3,1,&quot;div&quot;,0)),2&amp;t&amp;&amp;(Sr(1),wl(e.data.message),Sr(1),Oa(&quot;ngIf&quot;,e.hasAction))},directives:[Nd,Ry],styles:[&quot;.mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n&quot;],encapsulation:2,changeDetection:0}),t})();const cH={snackBarState:BA(&quot;state&quot;,[$A(&quot;void, hidden&quot;,VA({transform:&quot;scale(0.8)&quot;,opacity:0})),$A(&quot;visible&quot;,VA({transform:&quot;scale(1)&quot;,opacity:1})),jA(&quot;* =&gt; visible&quot;,zA(&quot;150ms cubic-bezier(0, 0, 0.2, 1)&quot;)),jA(&quot;* =&gt; void, * =&gt; hidden&quot;,zA(&quot;75ms cubic-bezier(0.4, 0.0, 1, 1)&quot;,VA({opacity:0})))])};let hH=(()=&gt;{class t extends Yp{constructor(t,e,i,n,s){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=i,this._platform=n,this.snackBarConfig=s,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new S,this._onExit=new S,this._onEnter=new S,this._animationState=&quot;void&quot;,this.attachDomPortal=t=&gt;(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(t)),this._live=&quot;assertive&quot;!==s.politeness||s.announcementMessage?&quot;off&quot;===s.politeness?&quot;off&quot;:&quot;polite&quot;:&quot;assertive&quot;,this._platform.FIREFOX&amp;&amp;(&quot;polite&quot;===this._live&amp;&amp;(this._role=&quot;status&quot;),&quot;assertive&quot;===this._live&amp;&amp;(this._role=&quot;alert&quot;))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:e,toState:i}=t;if((&quot;void&quot;===i&amp;&amp;&quot;void&quot;!==e||&quot;hidden&quot;===i)&amp;&amp;this._completeExit(),&quot;visible&quot;===i){const t=this._onEnter;this._ngZone.run(()=&gt;{t.next(),t.complete()})}}enter(){this._destroyed||(this._animationState=&quot;visible&quot;,this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState=&quot;hidden&quot;,this._elementRef.nativeElement.setAttribute(&quot;mat-exit&quot;,&quot;&quot;),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(xf(1)).subscribe(()=&gt;{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&amp;&amp;(Array.isArray(e)?e.forEach(e=&gt;t.classList.add(e)):t.classList.add(e)),&quot;center&quot;===this.snackBarConfig.horizontalPosition&amp;&amp;t.classList.add(&quot;mat-snack-bar-center&quot;),&quot;top&quot;===this.snackBarConfig.verticalPosition&amp;&amp;t.classList.add(&quot;mat-snack-bar-top&quot;)}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=&gt;{this._announceTimeoutId=setTimeout(()=&gt;{const t=this._elementRef.nativeElement.querySelector(&quot;[aria-hidden]&quot;),e=this._elementRef.nativeElement.querySelector(&quot;[aria-live]&quot;);if(t&amp;&amp;e){let i=null;this._platform.isBrowser&amp;&amp;document.activeElement instanceof HTMLElement&amp;&amp;t.contains(document.activeElement)&amp;&amp;(i=document.activeElement),t.removeAttribute(&quot;aria-hidden&quot;),e.appendChild(t),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(ec),Da(Ec),Da(jf),Da(rH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;snack-bar-container&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(Kp,7),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._portalOutlet=t.first)}},hostAttrs:[1,&quot;mat-snack-bar-container&quot;],hostVars:1,hostBindings:function(t,e){1&amp;t&amp;&amp;Ga(&quot;@state.done&quot;,function(t){return e.onAnimationEnd(t)}),2&amp;t&amp;&amp;Il(&quot;@state&quot;,e._animationState)},features:[$o],decls:3,vars:2,consts:[[&quot;aria-hidden&quot;,&quot;true&quot;],[&quot;cdkPortalOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),ra(1,nH,0,0,&quot;ng-template&quot;,1),Fa(),La(2,&quot;div&quot;)),2&amp;t&amp;&amp;(Sr(2),ea(&quot;aria-live&quot;,e._live)(&quot;role&quot;,e._role))},directives:[Kp],styles:[&quot;.mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n&quot;],encapsulation:2,data:{animation:[cH.snackBarState]}}),t})(),uH=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[PA,Xp,ip,Ly,Fb],Fb]}),t})();const dH=new Ji(&quot;mat-snack-bar-default-options&quot;,{providedIn:&quot;root&quot;,factory:function(){return new rH}});let pH=(()=&gt;{class t{constructor(t,e,i,n,s,r){this._overlay=t,this._live=e,this._injector=i,this._breakpointObserver=n,this._parentSnackBar=s,this._defaultConfig=r,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=lH,this.snackBarContainerComponent=hH,this.handsetCssClass=&quot;mat-snack-bar-handset&quot;}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e=&quot;&quot;,i){const n=Object.assign(Object.assign({},this._defaultConfig),i);return n.data={message:t,action:e},n.announcementMessage===t&amp;&amp;(n.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,n)}dismiss(){this._openedSnackBarRef&amp;&amp;this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&amp;&amp;this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){const i=No.create({parent:e&amp;&amp;e.viewContainerRef&amp;&amp;e.viewContainerRef.injector||this._injector,providers:[{provide:rH,useValue:e}]}),n=new Gp(this.snackBarContainerComponent,e.viewContainerRef,i),s=t.attach(n);return s.instance.snackBarConfig=e,s.instance}_attach(t,e){const i=Object.assign(Object.assign(Object.assign({},new rH),this._defaultConfig),e),n=this._createOverlay(i),s=this._attachSnackBarContainer(n,i),r=new aH(s,n);if(t instanceof Oc){const e=new qp(t,null,{$implicit:i.data,snackBarRef:r});r.instance=s.attachTemplatePortal(e)}else{const e=this._createInjector(i,r),n=new Gp(t,void 0,e),o=s.attachComponentPortal(n);r.instance=o.instance}return this._breakpointObserver.observe(&quot;(max-width: 599.98px) and (orientation: portrait)&quot;).pipe(Df(n.detachments())).subscribe(t=&gt;{const e=n.overlayElement.classList;t.matches?e.add(this.handsetCssClass):e.remove(this.handsetCssClass)}),i.announcementMessage&amp;&amp;s._onAnnounce.subscribe(()=&gt;{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(r,i),this._openedSnackBarRef=r,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=&gt;{this._openedSnackBarRef==t&amp;&amp;(this._openedSnackBarRef=null),e.announcementMessage&amp;&amp;this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=&gt;{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&amp;&amp;e.duration&gt;0&amp;&amp;t.afterOpened().subscribe(()=&gt;t._dismissAfter(e.duration))}_createOverlay(t){const e=new lA;e.direction=t.direction;let i=this._overlay.position().global();const n=&quot;rtl&quot;===t.direction,s=&quot;left&quot;===t.horizontalPosition||&quot;start&quot;===t.horizontalPosition&amp;&amp;!n||&quot;end&quot;===t.horizontalPosition&amp;&amp;n,r=!s&amp;&amp;&quot;center&quot;!==t.horizontalPosition;return s?i.left(&quot;0&quot;):r?i.right(&quot;0&quot;):i.centerHorizontally(),&quot;top&quot;===t.verticalPosition?i.top(&quot;0&quot;):i.bottom(&quot;0&quot;),e.positionStrategy=i,this._overlay.create(e)}_createInjector(t,e){return No.create({parent:t&amp;&amp;t.viewContainerRef&amp;&amp;t.viewContainerRef.injector||this._injector,providers:[{provide:aH,useValue:e},{provide:sH,useValue:t.data}]})}}return t.\u0275fac=function(e){return new(e||t)(Mn(EA),Mn(Fm),Mn(No),Mn(rI),Mn(t,12),Mn(dH))},t.\u0275prov=mt({factory:function(){return new t(Mn(EA),Mn(Fm),Mn(Co),Mn(rI),Mn(t,12),Mn(dH))},token:t,providedIn:uH}),t})(),fH=(()=&gt;{class t{constructor(t,e,i){this.ngZone=t,this.dialog=e,this.snackBar=i,this.drawingMode$=new Qp(!1),this.errors$=new S,this.errors$.pipe(FM(1e3,hf,{leading:!0,trailing:!0})).subscribe(t=&gt;{this.ngZone.run(()=&gt;{this.snackBar.open(t,&quot;Fermer&quot;,{panelClass:&quot;error-snack-bar&quot;,duration:4e3})})})}success(t,e=0){this.snackBar.open(t,0===e?&quot;Fermer&quot;:&quot;&quot;,{duration:e})}error(t){this.errors$.next(t)}confirm(t){this.ngZone.run(()=&gt;{this.dialog.open(eH,{data:{title:t.title,message:t.message}}).afterClosed().subscribe(t.action)})}confirmAsync(t){return jp(this,void 0,void 0,function*(){return new Promise(e=&gt;{this.ngZone.run(()=&gt;{this.dialog.open(eH,{data:{title:t.title,message:t.message}}).afterClosed().subscribe(t=&gt;{e(t)})})})})}setDrawingMode(t){this.drawingMode$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu),Mn(ek),Mn(pH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),mH=(()=&gt;{class t{constructor(t,e,i){this.authenticationService=t,this.router=e,this.uiService=i}canActivateChild(t,e){return jp(this,void 0,void 0,function*(){return!!this.authenticationService.isAdmin()||(this.uiService.error(&quot;Vous n&#39;avez pas les permissions requises.&quot;),yield this.router.navigateByUrl(&quot;/&quot;),!1)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(tH),Mn(dF),Mn(fH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const gH=[{label:&quot;15 minutes&quot;,value:900},{label:&quot;30 minutes&quot;,value:1800},{label:&quot;1 heure&quot;,value:3600},{label:&quot;2 heures&quot;,value:7200},{label:&quot;6 heures&quot;,value:21600},{label:&quot;12 heures&quot;,value:43200},{label:&quot;24 heures&quot;,value:86400},{label:&quot;2 jours&quot;,value:172800},{label:&quot;1 semaine&quot;,value:604800},{label:&quot;2 semaines&quot;,value:1209600},{label:&quot;1 mois&quot;,value:2592e3},{label:&quot;3 mois&quot;,value:7776e3}],AH=gH.reduce((t,e)=&gt;(t[e.value]=e.label,t),{});var vH=(()=&gt;(function(t){t.RealTime=&quot;realTime&quot;,t.PastAndRealTime=&quot;pastAndRealTime&quot;,t.Past=&quot;past&quot;}(vH||(vH={})),vH))();function _H(t){t.speed||(t.speed={enable:!1,min:0,max:100}),t.erraticRoute||(t.erraticRoute={enable:!1}),t.transhipment||(t.transhipment={enable:!1}),t.aisInterruption||(t.aisInterruption={enable:!1}),t.passageInZone||(t.passageInZone={enable:!1,sequential:!1,timeWindow:gH.find(t=&gt;&quot;1 mois&quot;===t.label).value,passages:[]}),t.spoofing||(t.spoofing={enable:!1}),t.identifier||(t.identifier={enable:!1,identifiers:[]}),t.fleet||(t.fleet={enable:!1,fleets:[]}),t.flag||(t.flag={enable:!1,flags:[]}),t.type||(t.type={enable:!1,types:[]}),t.time||(t.time={type:vH.RealTime,since:null,to:null}),t.zone||(t.zone={enable:!0,zones:[]})}const bH=[{name:&quot;Afghanistan&quot;,iso2:&quot;af&quot;,iso3:&quot;afg&quot;},{name:&quot;Afrique du Sud&quot;,iso2:&quot;za&quot;,iso3:&quot;zaf&quot;},{name:&quot;\xceles \xc5land&quot;,iso2:&quot;ax&quot;,iso3:&quot;ala&quot;},{name:&quot;Albanie&quot;,iso2:&quot;al&quot;,iso3:&quot;alb&quot;},{name:&quot;Alg\xe9rie&quot;,iso2:&quot;dz&quot;,iso3:&quot;dza&quot;},{name:&quot;Allemagne&quot;,iso2:&quot;de&quot;,iso3:&quot;deu&quot;},{name:&quot;Andorre&quot;,iso2:&quot;ad&quot;,iso3:&quot;and&quot;},{name:&quot;Angola&quot;,iso2:&quot;ao&quot;,iso3:&quot;ago&quot;},{name:&quot;Anguilla&quot;,iso2:&quot;ai&quot;,iso3:&quot;aia&quot;},{name:&quot;Antarctique&quot;,iso2:&quot;aq&quot;,iso3:&quot;ata&quot;},{name:&quot;Antigua-et-Barbuda&quot;,iso2:&quot;ag&quot;,iso3:&quot;atg&quot;},{name:&quot;Arabie saoudite&quot;,iso2:&quot;sa&quot;,iso3:&quot;sau&quot;},{name:&quot;Argentine&quot;,iso2:&quot;ar&quot;,iso3:&quot;arg&quot;},{name:&quot;Arm\xe9nie&quot;,iso2:&quot;am&quot;,iso3:&quot;arm&quot;},{name:&quot;Aruba&quot;,iso2:&quot;aw&quot;,iso3:&quot;abw&quot;},{name:&quot;Australie&quot;,iso2:&quot;au&quot;,iso3:&quot;aus&quot;},{name:&quot;Autriche&quot;,iso2:&quot;at&quot;,iso3:&quot;aut&quot;},{name:&quot;Azerba\xefdjan&quot;,iso2:&quot;az&quot;,iso3:&quot;aze&quot;},{name:&quot;Bahamas&quot;,iso2:&quot;bs&quot;,iso3:&quot;bhs&quot;},{name:&quot;Bahre\xefn&quot;,iso2:&quot;bh&quot;,iso3:&quot;bhr&quot;},{name:&quot;Bangladesh&quot;,iso2:&quot;bd&quot;,iso3:&quot;bgd&quot;},{name:&quot;Barbade&quot;,iso2:&quot;bb&quot;,iso3:&quot;brb&quot;},{name:&quot;Bi\xe9lorussie&quot;,iso2:&quot;by&quot;,iso3:&quot;blr&quot;},{name:&quot;Belgique&quot;,iso2:&quot;be&quot;,iso3:&quot;bel&quot;},{name:&quot;Belize&quot;,iso2:&quot;bz&quot;,iso3:&quot;blz&quot;},{name:&quot;B\xe9nin&quot;,iso2:&quot;bj&quot;,iso3:&quot;ben&quot;},{name:&quot;Bermudes&quot;,iso2:&quot;bm&quot;,iso3:&quot;bmu&quot;},{name:&quot;Bhoutan&quot;,iso2:&quot;bt&quot;,iso3:&quot;btn&quot;},{name:&quot;Bolivie&quot;,iso2:&quot;bo&quot;,iso3:&quot;bol&quot;},{name:&quot;Pays-Bas carib\xe9ens&quot;,iso2:&quot;bq&quot;,iso3:&quot;bes&quot;},{name:&quot;Bosnie-Herz\xe9govine&quot;,iso2:&quot;ba&quot;,iso3:&quot;bih&quot;},{name:&quot;Botswana&quot;,iso2:&quot;bw&quot;,iso3:&quot;bwa&quot;},{name:&quot;\xcele Bouvet&quot;,iso2:&quot;bv&quot;,iso3:&quot;bvt&quot;},{name:&quot;Br\xe9sil&quot;,iso2:&quot;br&quot;,iso3:&quot;bra&quot;},{name:&quot;Brunei&quot;,iso2:&quot;bn&quot;,iso3:&quot;brn&quot;},{name:&quot;Bulgarie&quot;,iso2:&quot;bg&quot;,iso3:&quot;bgr&quot;},{name:&quot;Burkina Faso&quot;,iso2:&quot;bf&quot;,iso3:&quot;bfa&quot;},{name:&quot;Burundi&quot;,iso2:&quot;bi&quot;,iso3:&quot;bdi&quot;},{name:&quot;\xceles Ca\xefmans&quot;,iso2:&quot;ky&quot;,iso3:&quot;cym&quot;},{name:&quot;Cambodge&quot;,iso2:&quot;kh&quot;,iso3:&quot;khm&quot;},{name:&quot;Cameroun&quot;,iso2:&quot;cm&quot;,iso3:&quot;cmr&quot;},{name:&quot;Canada&quot;,iso2:&quot;ca&quot;,iso3:&quot;can&quot;},{name:&quot;Cap-Vert&quot;,iso2:&quot;cv&quot;,iso3:&quot;cpv&quot;},{name:&quot;R\xe9publique centrafricaine&quot;,iso2:&quot;cf&quot;,iso3:&quot;caf&quot;},{name:&quot;Chili&quot;,iso2:&quot;cl&quot;,iso3:&quot;chl&quot;},{name:&quot;Chine&quot;,iso2:&quot;cn&quot;,iso3:&quot;chn&quot;},{name:&quot;\xcele Christmas&quot;,iso2:&quot;cx&quot;,iso3:&quot;cxr&quot;},{name:&quot;Chypre&quot;,iso2:&quot;cy&quot;,iso3:&quot;cyp&quot;},{name:&quot;\xceles Cocos&quot;,iso2:&quot;cc&quot;,iso3:&quot;cck&quot;},{name:&quot;Colombie&quot;,iso2:&quot;co&quot;,iso3:&quot;col&quot;},{name:&quot;Comores&quot;,iso2:&quot;km&quot;,iso3:&quot;com&quot;},{name:&quot;R\xe9publique du Congo&quot;,iso2:&quot;cg&quot;,iso3:&quot;cog&quot;},{name:&quot;R\xe9publique d\xe9mocratique du Congo&quot;,iso2:&quot;cd&quot;,iso3:&quot;cod&quot;},{name:&quot;\xceles Cook&quot;,iso2:&quot;ck&quot;,iso3:&quot;cok&quot;},{name:&quot;Cor\xe9e du Sud&quot;,iso2:&quot;kr&quot;,iso3:&quot;kor&quot;},{name:&quot;Cor\xe9e du Nord&quot;,iso2:&quot;kp&quot;,iso3:&quot;prk&quot;},{name:&quot;Costa Rica&quot;,iso2:&quot;cr&quot;,iso3:&quot;cri&quot;},{name:&quot;C\xf4te d&#39;Ivoire&quot;,iso2:&quot;ci&quot;,iso3:&quot;civ&quot;},{name:&quot;Croatie&quot;,iso2:&quot;hr&quot;,iso3:&quot;hrv&quot;},{name:&quot;Cuba&quot;,iso2:&quot;cu&quot;,iso3:&quot;cub&quot;},{name:&quot;Cura\xe7ao&quot;,iso2:&quot;cw&quot;,iso3:&quot;cuw&quot;},{name:&quot;Danemark&quot;,iso2:&quot;dk&quot;,iso3:&quot;dnk&quot;},{name:&quot;Djibouti&quot;,iso2:&quot;dj&quot;,iso3:&quot;dji&quot;},{name:&quot;R\xe9publique dominicaine&quot;,iso2:&quot;do&quot;,iso3:&quot;dom&quot;},{name:&quot;Dominique&quot;,iso2:&quot;dm&quot;,iso3:&quot;dma&quot;},{name:&quot;\xc9gypte&quot;,iso2:&quot;eg&quot;,iso3:&quot;egy&quot;},{name:&quot;Salvador&quot;,iso2:&quot;sv&quot;,iso3:&quot;slv&quot;},{name:&quot;\xc9mirats arabes unis&quot;,iso2:&quot;ae&quot;,iso3:&quot;are&quot;},{name:&quot;\xc9quateur&quot;,iso2:&quot;ec&quot;,iso3:&quot;ecu&quot;},{name:&quot;\xc9rythr\xe9e&quot;,iso2:&quot;er&quot;,iso3:&quot;eri&quot;},{name:&quot;Espagne&quot;,iso2:&quot;es&quot;,iso3:&quot;esp&quot;},{name:&quot;Estonie&quot;,iso2:&quot;ee&quot;,iso3:&quot;est&quot;},{name:&quot;\xc9tats-Unis&quot;,iso2:&quot;us&quot;,iso3:&quot;usa&quot;},{name:&quot;\xc9thiopie&quot;,iso2:&quot;et&quot;,iso3:&quot;eth&quot;},{name:&quot;Malouines&quot;,iso2:&quot;fk&quot;,iso3:&quot;flk&quot;},{name:&quot;\xceles F\xe9ro\xe9&quot;,iso2:&quot;fo&quot;,iso3:&quot;fro&quot;},{name:&quot;Fidji&quot;,iso2:&quot;fj&quot;,iso3:&quot;fji&quot;},{name:&quot;Finlande&quot;,iso2:&quot;fi&quot;,iso3:&quot;fin&quot;},{name:&quot;France&quot;,iso2:&quot;fr&quot;,iso3:&quot;fra&quot;},{name:&quot;Gabon&quot;,iso2:&quot;ga&quot;,iso3:&quot;gab&quot;},{name:&quot;Gambie&quot;,iso2:&quot;gm&quot;,iso3:&quot;gmb&quot;},{name:&quot;G\xe9orgie&quot;,iso2:&quot;ge&quot;,iso3:&quot;geo&quot;},{name:&quot;G\xe9orgie du Sud-et-les \xeeles Sandwich du Sud&quot;,iso2:&quot;gs&quot;,iso3:&quot;sgs&quot;},{name:&quot;Ghana&quot;,iso2:&quot;gh&quot;,iso3:&quot;gha&quot;},{name:&quot;Gibraltar&quot;,iso2:&quot;gi&quot;,iso3:&quot;gib&quot;},{name:&quot;Gr\xe8ce&quot;,iso2:&quot;gr&quot;,iso3:&quot;grc&quot;},{name:&quot;Grenade&quot;,iso2:&quot;gd&quot;,iso3:&quot;grd&quot;},{name:&quot;Groenland&quot;,iso2:&quot;gl&quot;,iso3:&quot;grl&quot;},{name:&quot;Guadeloupe&quot;,iso2:&quot;gp&quot;,iso3:&quot;glp&quot;},{name:&quot;Guam&quot;,iso2:&quot;gu&quot;,iso3:&quot;gum&quot;},{name:&quot;Guatemala&quot;,iso2:&quot;gt&quot;,iso3:&quot;gtm&quot;},{name:&quot;Guernesey&quot;,iso2:&quot;gg&quot;,iso3:&quot;ggy&quot;},{name:&quot;Guin\xe9e&quot;,iso2:&quot;gn&quot;,iso3:&quot;gin&quot;},{name:&quot;Guin\xe9e-Bissau&quot;,iso2:&quot;gw&quot;,iso3:&quot;gnb&quot;},{name:&quot;Guin\xe9e \xe9quatoriale&quot;,iso2:&quot;gq&quot;,iso3:&quot;gnq&quot;},{name:&quot;Guyana&quot;,iso2:&quot;gy&quot;,iso3:&quot;guy&quot;},{name:&quot;Guyane&quot;,iso2:&quot;gf&quot;,iso3:&quot;guf&quot;},{name:&quot;Ha\xefti&quot;,iso2:&quot;ht&quot;,iso3:&quot;hti&quot;},{name:&quot;\xceles Heard-et-MacDonald&quot;,iso2:&quot;hm&quot;,iso3:&quot;hmd&quot;},{name:&quot;Honduras&quot;,iso2:&quot;hn&quot;,iso3:&quot;hnd&quot;},{name:&quot;Hong Kong&quot;,iso2:&quot;hk&quot;,iso3:&quot;hkg&quot;},{name:&quot;Hongrie&quot;,iso2:&quot;hu&quot;,iso3:&quot;hun&quot;},{name:&quot;\xcele de Man&quot;,iso2:&quot;im&quot;,iso3:&quot;imn&quot;},{name:&quot;\xceles mineures \xe9loign\xe9es des \xc9tats-Unis&quot;,iso2:&quot;um&quot;,iso3:&quot;umi&quot;},{name:&quot;\xceles Vierges britanniques&quot;,iso2:&quot;vg&quot;,iso3:&quot;vgb&quot;},{name:&quot;\xceles Vierges des \xc9tats-Unis&quot;,iso2:&quot;vi&quot;,iso3:&quot;vir&quot;},{name:&quot;Inde&quot;,iso2:&quot;in&quot;,iso3:&quot;ind&quot;},{name:&quot;Indon\xe9sie&quot;,iso2:&quot;id&quot;,iso3:&quot;idn&quot;},{name:&quot;Iran&quot;,iso2:&quot;ir&quot;,iso3:&quot;irn&quot;},{name:&quot;Irak&quot;,iso2:&quot;iq&quot;,iso3:&quot;irq&quot;},{name:&quot;Irlande&quot;,iso2:&quot;ie&quot;,iso3:&quot;irl&quot;},{name:&quot;Islande&quot;,iso2:&quot;is&quot;,iso3:&quot;isl&quot;},{name:&quot;Isra\xebl&quot;,iso2:&quot;il&quot;,iso3:&quot;isr&quot;},{name:&quot;Italie&quot;,iso2:&quot;it&quot;,iso3:&quot;ita&quot;},{name:&quot;Jama\xefque&quot;,iso2:&quot;jm&quot;,iso3:&quot;jam&quot;},{name:&quot;Japon&quot;,iso2:&quot;jp&quot;,iso3:&quot;jpn&quot;},{name:&quot;Jersey&quot;,iso2:&quot;je&quot;,iso3:&quot;jey&quot;},{name:&quot;Jordanie&quot;,iso2:&quot;jo&quot;,iso3:&quot;jor&quot;},{name:&quot;Kazakhstan&quot;,iso2:&quot;kz&quot;,iso3:&quot;kaz&quot;},{name:&quot;Kenya&quot;,iso2:&quot;ke&quot;,iso3:&quot;ken&quot;},{name:&quot;Kirghizistan&quot;,iso2:&quot;kg&quot;,iso3:&quot;kgz&quot;},{name:&quot;Kiribati&quot;,iso2:&quot;ki&quot;,iso3:&quot;kir&quot;},{name:&quot;Kowe\xeft&quot;,iso2:&quot;kw&quot;,iso3:&quot;kwt&quot;},{name:&quot;Laos&quot;,iso2:&quot;la&quot;,iso3:&quot;lao&quot;},{name:&quot;Lesotho&quot;,iso2:&quot;ls&quot;,iso3:&quot;lso&quot;},{name:&quot;Lettonie&quot;,iso2:&quot;lv&quot;,iso3:&quot;lva&quot;},{name:&quot;Liban&quot;,iso2:&quot;lb&quot;,iso3:&quot;lbn&quot;},{name:&quot;Liberia&quot;,iso2:&quot;lr&quot;,iso3:&quot;lbr&quot;},{name:&quot;Libye&quot;,iso2:&quot;ly&quot;,iso3:&quot;lby&quot;},{name:&quot;Liechtenstein&quot;,iso2:&quot;li&quot;,iso3:&quot;lie&quot;},{name:&quot;Lituanie&quot;,iso2:&quot;lt&quot;,iso3:&quot;ltu&quot;},{name:&quot;Luxembourg&quot;,iso2:&quot;lu&quot;,iso3:&quot;lux&quot;},{name:&quot;Macao&quot;,iso2:&quot;mo&quot;,iso3:&quot;mac&quot;},{name:&quot;Mac\xe9doine du Nord&quot;,iso2:&quot;mk&quot;,iso3:&quot;mkd&quot;},{name:&quot;Madagascar&quot;,iso2:&quot;mg&quot;,iso3:&quot;mdg&quot;},{name:&quot;Malaisie&quot;,iso2:&quot;my&quot;,iso3:&quot;mys&quot;},{name:&quot;Malawi&quot;,iso2:&quot;mw&quot;,iso3:&quot;mwi&quot;},{name:&quot;Maldives&quot;,iso2:&quot;mv&quot;,iso3:&quot;mdv&quot;},{name:&quot;Mali&quot;,iso2:&quot;ml&quot;,iso3:&quot;mli&quot;},{name:&quot;Malte&quot;,iso2:&quot;mt&quot;,iso3:&quot;mlt&quot;},{name:&quot;\xceles Mariannes du Nord&quot;,iso2:&quot;mp&quot;,iso3:&quot;mnp&quot;},{name:&quot;Maroc&quot;,iso2:&quot;ma&quot;,iso3:&quot;mar&quot;},{name:&quot;\xceles Marshall&quot;,iso2:&quot;mh&quot;,iso3:&quot;mhl&quot;},{name:&quot;Martinique&quot;,iso2:&quot;mq&quot;,iso3:&quot;mtq&quot;},{name:&quot;Maurice&quot;,iso2:&quot;mu&quot;,iso3:&quot;mus&quot;},{name:&quot;Mauritanie&quot;,iso2:&quot;mr&quot;,iso3:&quot;mrt&quot;},{name:&quot;Mayotte&quot;,iso2:&quot;yt&quot;,iso3:&quot;myt&quot;},{name:&quot;Mexique&quot;,iso2:&quot;mx&quot;,iso3:&quot;mex&quot;},{name:&quot;\xc9tats f\xe9d\xe9r\xe9s de Micron\xe9sie&quot;,iso2:&quot;fm&quot;,iso3:&quot;fsm&quot;},{name:&quot;Moldavie&quot;,iso2:&quot;md&quot;,iso3:&quot;mda&quot;},{name:&quot;Monaco&quot;,iso2:&quot;mc&quot;,iso3:&quot;mco&quot;},{name:&quot;Mongolie&quot;,iso2:&quot;mn&quot;,iso3:&quot;mng&quot;},{name:&quot;Mont\xe9n\xe9gro&quot;,iso2:&quot;me&quot;,iso3:&quot;mne&quot;},{name:&quot;Montserrat&quot;,iso2:&quot;ms&quot;,iso3:&quot;msr&quot;},{name:&quot;Mozambique&quot;,iso2:&quot;mz&quot;,iso3:&quot;moz&quot;},{name:&quot;Birmanie&quot;,iso2:&quot;mm&quot;,iso3:&quot;mmr&quot;},{name:&quot;Namibie&quot;,iso2:&quot;na&quot;,iso3:&quot;nam&quot;},{name:&quot;Nauru&quot;,iso2:&quot;nr&quot;,iso3:&quot;nru&quot;},{name:&quot;N\xe9pal&quot;,iso2:&quot;np&quot;,iso3:&quot;npl&quot;},{name:&quot;Nicaragua&quot;,iso2:&quot;ni&quot;,iso3:&quot;nic&quot;},{name:&quot;Niger&quot;,iso2:&quot;ne&quot;,iso3:&quot;ner&quot;},{name:&quot;Nigeria&quot;,iso2:&quot;ng&quot;,iso3:&quot;nga&quot;},{name:&quot;Niue&quot;,iso2:&quot;nu&quot;,iso3:&quot;niu&quot;},{name:&quot;\xcele Norfolk&quot;,iso2:&quot;nf&quot;,iso3:&quot;nfk&quot;},{name:&quot;Norv\xe8ge&quot;,iso2:&quot;no&quot;,iso3:&quot;nor&quot;},{name:&quot;Nouvelle-Cal\xe9donie&quot;,iso2:&quot;nc&quot;,iso3:&quot;ncl&quot;},{name:&quot;Nouvelle-Z\xe9lande&quot;,iso2:&quot;nz&quot;,iso3:&quot;nzl&quot;},{name:&quot;Territoire britannique de l&#39;oc\xe9an Indien&quot;,iso2:&quot;io&quot;,iso3:&quot;iot&quot;},{name:&quot;Oman&quot;,iso2:&quot;om&quot;,iso3:&quot;omn&quot;},{name:&quot;Ouganda&quot;,iso2:&quot;ug&quot;,iso3:&quot;uga&quot;},{name:&quot;Ouzb\xe9kistan&quot;,iso2:&quot;uz&quot;,iso3:&quot;uzb&quot;},{name:&quot;Pakistan&quot;,iso2:&quot;pk&quot;,iso3:&quot;pak&quot;},{name:&quot;Palaos&quot;,iso2:&quot;pw&quot;,iso3:&quot;plw&quot;},{name:&quot;Palestine&quot;,iso2:&quot;ps&quot;,iso3:&quot;pse&quot;},{name:&quot;Panama&quot;,iso2:&quot;pa&quot;,iso3:&quot;pan&quot;},{name:&quot;Papouasie-Nouvelle-Guin\xe9e&quot;,iso2:&quot;pg&quot;,iso3:&quot;png&quot;},{name:&quot;Paraguay&quot;,iso2:&quot;py&quot;,iso3:&quot;pry&quot;},{name:&quot;Pays-Bas&quot;,iso2:&quot;nl&quot;,iso3:&quot;nld&quot;},{name:&quot;P\xe9rou&quot;,iso2:&quot;pe&quot;,iso3:&quot;per&quot;},{name:&quot;Philippines&quot;,iso2:&quot;ph&quot;,iso3:&quot;phl&quot;},{name:&quot;\xceles Pitcairn&quot;,iso2:&quot;pn&quot;,iso3:&quot;pcn&quot;},{name:&quot;Pologne&quot;,iso2:&quot;pl&quot;,iso3:&quot;pol&quot;},{name:&quot;Polyn\xe9sie fran\xe7aise&quot;,iso2:&quot;pf&quot;,iso3:&quot;pyf&quot;},{name:&quot;Porto Rico&quot;,iso2:&quot;pr&quot;,iso3:&quot;pri&quot;},{name:&quot;Portugal&quot;,iso2:&quot;pt&quot;,iso3:&quot;prt&quot;},{name:&quot;Qatar&quot;,iso2:&quot;qa&quot;,iso3:&quot;qat&quot;},{name:&quot;La R\xe9union&quot;,iso2:&quot;re&quot;,iso3:&quot;reu&quot;},{name:&quot;Roumanie&quot;,iso2:&quot;ro&quot;,iso3:&quot;rou&quot;},{name:&quot;Royaume-Uni&quot;,iso2:&quot;gb&quot;,iso3:&quot;gbr&quot;},{name:&quot;Russie&quot;,iso2:&quot;ru&quot;,iso3:&quot;rus&quot;},{name:&quot;Rwanda&quot;,iso2:&quot;rw&quot;,iso3:&quot;rwa&quot;},{name:&quot;R\xe9publique arabe sahraouie d\xe9mocratique&quot;,iso2:&quot;eh&quot;,iso3:&quot;esh&quot;},{name:&quot;Saint-Barth\xe9lemy&quot;,iso2:&quot;bl&quot;,iso3:&quot;blm&quot;},{name:&quot;Saint-Christophe-et-Ni\xe9v\xe8s&quot;,iso2:&quot;kn&quot;,iso3:&quot;kna&quot;},{name:&quot;Saint-Marin&quot;,iso2:&quot;sm&quot;,iso3:&quot;smr&quot;},{name:&quot;Saint-Martin&quot;,iso2:&quot;mf&quot;,iso3:&quot;maf&quot;},{name:&quot;Saint-Martin&quot;,iso2:&quot;sx&quot;,iso3:&quot;sxm&quot;},{name:&quot;Saint-Pierre-et-Miquelon&quot;,iso2:&quot;pm&quot;,iso3:&quot;spm&quot;},{name:&quot;Saint-Si\xe8ge (\xc9tat de la Cit\xe9 du Vatican)&quot;,iso2:&quot;va&quot;,iso3:&quot;vat&quot;},{name:&quot;Saint-Vincent-et-les-Grenadines&quot;,iso2:&quot;vc&quot;,iso3:&quot;vct&quot;},{name:&quot;Sainte-H\xe9l\xe8ne, Ascension et Tristan da Cunha&quot;,iso2:&quot;sh&quot;,iso3:&quot;shn&quot;},{name:&quot;Sainte-Lucie&quot;,iso2:&quot;lc&quot;,iso3:&quot;lca&quot;},{name:&quot;\xceles Salomon&quot;,iso2:&quot;sb&quot;,iso3:&quot;slb&quot;},{name:&quot;Samoa&quot;,iso2:&quot;ws&quot;,iso3:&quot;wsm&quot;},{name:&quot;Samoa am\xe9ricaines&quot;,iso2:&quot;as&quot;,iso3:&quot;asm&quot;},{name:&quot;Sao Tom\xe9-et-Principe&quot;,iso2:&quot;st&quot;,iso3:&quot;stp&quot;},{name:&quot;S\xe9n\xe9gal&quot;,iso2:&quot;sn&quot;,iso3:&quot;sen&quot;},{name:&quot;Serbie&quot;,iso2:&quot;rs&quot;,iso3:&quot;srb&quot;},{name:&quot;Seychelles&quot;,iso2:&quot;sc&quot;,iso3:&quot;syc&quot;},{name:&quot;Sierra Leone&quot;,iso2:&quot;sl&quot;,iso3:&quot;sle&quot;},{name:&quot;Singapour&quot;,iso2:&quot;sg&quot;,iso3:&quot;sgp&quot;},{name:&quot;Slovaquie&quot;,iso2:&quot;sk&quot;,iso3:&quot;svk&quot;},{name:&quot;Slov\xe9nie&quot;,iso2:&quot;si&quot;,iso3:&quot;svn&quot;},{name:&quot;Somalie&quot;,iso2:&quot;so&quot;,iso3:&quot;som&quot;},{name:&quot;Soudan&quot;,iso2:&quot;sd&quot;,iso3:&quot;sdn&quot;},{name:&quot;Soudan du Sud&quot;,iso2:&quot;ss&quot;,iso3:&quot;ssd&quot;},{name:&quot;Sri Lanka&quot;,iso2:&quot;lk&quot;,iso3:&quot;lka&quot;},{name:&quot;Su\xe8de&quot;,iso2:&quot;se&quot;,iso3:&quot;swe&quot;},{name:&quot;Suisse&quot;,iso2:&quot;ch&quot;,iso3:&quot;che&quot;},{name:&quot;Suriname&quot;,iso2:&quot;sr&quot;,iso3:&quot;sur&quot;},{name:&quot;Svalbard et ile Jan Mayen&quot;,iso2:&quot;sj&quot;,iso3:&quot;sjm&quot;},{name:&quot;Eswatini&quot;,iso2:&quot;sz&quot;,iso3:&quot;swz&quot;},{name:&quot;Syrie&quot;,iso2:&quot;sy&quot;,iso3:&quot;syr&quot;},{name:&quot;Tadjikistan&quot;,iso2:&quot;tj&quot;,iso3:&quot;tjk&quot;},{name:&quot;Ta\xefwan / (R\xe9publique de Chine (Ta\xefwan))&quot;,iso2:&quot;tw&quot;,iso3:&quot;twn&quot;},{name:&quot;Tanzanie&quot;,iso2:&quot;tz&quot;,iso3:&quot;tza&quot;},{name:&quot;Tchad&quot;,iso2:&quot;td&quot;,iso3:&quot;tcd&quot;},{name:&quot;Tch\xe9quie&quot;,iso2:&quot;cz&quot;,iso3:&quot;cze&quot;},{name:&quot;Terres australes et antarctiques fran\xe7aises&quot;,iso2:&quot;tf&quot;,iso3:&quot;atf&quot;},{name:&quot;Tha\xeflande&quot;,iso2:&quot;th&quot;,iso3:&quot;tha&quot;},{name:&quot;Timor oriental&quot;,iso2:&quot;tl&quot;,iso3:&quot;tls&quot;},{name:&quot;Togo&quot;,iso2:&quot;tg&quot;,iso3:&quot;tgo&quot;},{name:&quot;Tokelau&quot;,iso2:&quot;tk&quot;,iso3:&quot;tkl&quot;},{name:&quot;Tonga&quot;,iso2:&quot;to&quot;,iso3:&quot;ton&quot;},{name:&quot;Trinit\xe9-et-Tobago&quot;,iso2:&quot;tt&quot;,iso3:&quot;tto&quot;},{name:&quot;Tunisie&quot;,iso2:&quot;tn&quot;,iso3:&quot;tun&quot;},{name:&quot;Turkm\xe9nistan&quot;,iso2:&quot;tm&quot;,iso3:&quot;tkm&quot;},{name:&quot;\xceles Turques-et-Ca\xefques&quot;,iso2:&quot;tc&quot;,iso3:&quot;tca&quot;},{name:&quot;Turquie&quot;,iso2:&quot;tr&quot;,iso3:&quot;tur&quot;},{name:&quot;Tuvalu&quot;,iso2:&quot;tv&quot;,iso3:&quot;tuv&quot;},{name:&quot;Ukraine&quot;,iso2:&quot;ua&quot;,iso3:&quot;ukr&quot;},{name:&quot;Uruguay&quot;,iso2:&quot;uy&quot;,iso3:&quot;ury&quot;},{name:&quot;Vanuatu&quot;,iso2:&quot;vu&quot;,iso3:&quot;vut&quot;},{name:&quot;Venezuela&quot;,iso2:&quot;ve&quot;,iso3:&quot;ven&quot;},{name:&quot;Vi\xeat Nam&quot;,iso2:&quot;vn&quot;,iso3:&quot;vnm&quot;},{name:&quot;Wallis-et-Futuna&quot;,iso2:&quot;wf&quot;,iso3:&quot;wlf&quot;},{name:&quot;Y\xe9men&quot;,iso2:&quot;ye&quot;,iso3:&quot;yem&quot;},{name:&quot;Zambie&quot;,iso2:&quot;zm&quot;,iso3:&quot;zmb&quot;},{name:&quot;Zimbabwe&quot;,iso2:&quot;zw&quot;,iso3:&quot;zwe&quot;}].map(t=&gt;(t.flag=t.iso2,t.searchValue=hU(t.name),t)).sort((t,e)=&gt;Intl.Collator().compare(t.name,e.name)),yH=Object.values(bH).reduce((t,e)=&gt;(t[e.flag]=e.name,t),{});function xH(t,e){var i;const n=t;return t.criteria.zone&amp;&amp;(n.criteria.zone.zones=t.criteria.zone.zones.map(t=&gt;e[t]).filter(t=&gt;!!t)),t.criteria.passageInZone&amp;&amp;(n.criteria.passageInZone.passages=t.criteria.passageInZone.passages.map(t=&gt;e[t.zone]?{zone:e[t.zone]}:null).filter(t=&gt;!!t)),n.criteria.zone?n.criteria.zone.enable=!0:n.criteria.zone={enable:!0,zones:[]},n.validZone=(null===(i=n.criteria.zone)||void 0===i?void 0:i.zones.length)&gt;0,_H(n.criteria),n}function wH(t){const e=lU(t);return t.criteria.zone&amp;&amp;(e.criteria.zone.zones=t.criteria.zone.zones.map(t=&gt;t.id)),t.criteria.passageInZone&amp;&amp;(e.criteria.passageInZone.passages=t.criteria.passageInZone.passages.map(t=&gt;({zone:t.zone.id}))),{id:e.id,name:e.name,active:e.active,criteria:e.criteria,color:e.color,enableDailyReport:e.enableDailyReport}}function CH(t){const e=+`0x${t.substr(1)}`;return[Math.round(e/65536)/256,Math.round(e/256%256)/256,Math.round(e%256)/256]}function SH(t){const e=+`0x${t.substr(1)}`;return[Math.round(e/65536),Math.round(e/256%256),Math.round(e%256)]}function kH(t,e){const i=+`0x${t.substr(1)}`,n=Math.min(Math.max(Math.round(i/65536)-e,0),255).toString(16),s=Math.min(Math.max(Math.round(i/256%256)-e,0),255).toString(16),r=Math.min(Math.max(Math.round(i%256)-e,0),255).toString(16);return`#${[1===n.length?`0${n}`:n,1===s.length?`0${s}`:s,1===r.length?`0${r}`:r].join(&quot;&quot;)}`}let EH=(()=&gt;{class t{constructor(t,e){this.mapConfigService=t,this.workerService=e,this.zones$=new Qp([]),this.zonesById={},this.selectedZone$=new Qp(null)}setZones(t){this.zonesById=t.reduce((t,e)=&gt;(t[e.id]=e,t),{}),this.zones$.next(t)}refreshZones(){return jp(this,void 0,void 0,function*(){const t=yield this.workerService.zones.list();return this.setZones(t),t})}clear(){this.zones$.next([])}createZone(t){return jp(this,void 0,void 0,function*(){const e=Sj(t);let i;return i=t.group_id?yield this.workerService.zones.createGroupZone(t.group_id,e):yield this.workerService.zones.createPersonalZone(e),this.mapConfigService.enableWebsockets$.value||(yield this.refreshZones()),i})}updateZone(t){return jp(this,void 0,void 0,function*(){yield this.workerService.zones.update(Sj(t)),this.mapConfigService.enableWebsockets$.value||(yield this.refreshZones())})}deleteZone(t){return jp(this,void 0,void 0,function*(){yield this.workerService.zones.delete(t),this.mapConfigService.enableWebsockets$.value||(yield this.refreshZones())})}}return t.\u0275fac=function(e){return new(e||t)(Mn(HU),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const MH=[&quot;#ffffff&quot;,[255,255,255]];let TH=(()=&gt;{class t{constructor(t,e,i,n){this.mapConfigService=t,this.mapService=e,this.workerService=i,this.zonesService=n,this.alertRules$=new Qp([]),this.selectedAlertRuleId$=new Qp(null),this.selectedAlertRule$=new Qp(null),this.alertRulesNamesByZoneId={},this.alertRuleColorsById={},this.alertRules$.subscribe(t=&gt;{this.alertRulesNamesByZoneId=t.reduce((t,e)=&gt;{var i,n;const s=null===(i=e.criteria.zone)||void 0===i?void 0:i.zones;(null==s?void 0:s.length)&amp;&amp;s.forEach(i=&gt;{let n=t[i.id];n||(n=t[i.id]=[]),n.push(e.name)});const r=null===(n=e.criteria.passageInZone)||void 0===n?void 0:n.passages;return(null==r?void 0:r.length)&amp;&amp;r.forEach(i=&gt;{let n=t[i.zone.id];n||(n=t[i.zone.id]=[]),n.push(e.name)}),t},{}),this.alertRuleColorsById=t.reduce((t,e)=&gt;(t[e.id]=[e.color,SH(e.color)],t),{})})}setAlertRules(t){this.alertRules$.next(t)}refreshAlertRules(){return jp(this,void 0,void 0,function*(){const t=(yield this.workerService.alertRules.list()).map(t=&gt;xH(t,this.zonesService.zonesById));return this.setAlertRules(t),t})}clear(){this.alertRules$.next([])}selectAlertRule(t){return jp(this,void 0,void 0,function*(){this.selectedAlertRuleId$.next(t);const e=xH(yield this.workerService.alertRules.get(t),this.zonesService.zonesById);if(!this.selectedAlertRule$.value||e.id!==this.selectedAlertRule$.value.id){const t=function(t){return[].concat(t.criteria.passageInZone.enable?t.criteria.passageInZone.passages.flatMap(t=&gt;t.zone.h3indexes):[]).concat(t.criteria.zone.enable?t.criteria.zone.zones.flatMap(t=&gt;t.h3indexes):[])}(e);this.mapService.hasBooted$.value?t.length&gt;0&amp;&amp;this.mapService.fitOnHexagons(t):(this.mapService.resetToDefaultView(),t.length&gt;0&amp;&amp;setTimeout(()=&gt;{this.mapService.fitOnHexagons(t,0)},50))}return this.selectedAlertRule$.next(e),e})}deselectAlertRule(){this.selectedAlertRuleId$.next(null),this.selectedAlertRule$.next(null)}updateAlertRulesFilter(t){this.mapConfigService.updateAlertRulesFilter(t)}createAlertRule(t){return jp(this,void 0,void 0,function*(){const e=wH(t);let i;return i=t.group_id?yield this.workerService.alertRules.createGroupAlertRule(t.group_id,e):yield this.workerService.alertRules.createPersonalAlertRule(e),this.mapConfigService.enableWebsockets$.value||(yield this.refreshAlertRules()),i})}updateAlertRule(t){return jp(this,void 0,void 0,function*(){yield this.workerService.alertRules.update(wH(t)),this.mapConfigService.enableWebsockets$.value||(yield this.refreshAlertRules())})}deleteAlertRule(t){return jp(this,void 0,void 0,function*(){yield this.workerService.alertRules.delete(t),this.mapConfigService.enableWebsockets$.value||(yield this.refreshAlertRules())})}getAlertRuleColor(t){return this.alertRuleColorsById[t]||MH}}return t.\u0275fac=function(e){return new(e||t)(Mn(HU),Mn(kj),Mn(Jj),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),IH=(()=&gt;{class t{constructor(){this.alerts$=new Qp([])}updateAlerts(t){this.alerts$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const DH=[{key:&quot;LineString&quot;,name:&quot;Ligne&quot;},{key:&quot;Point&quot;,name:&quot;Point&quot;},{key:&quot;Polygon&quot;,name:&quot;Zone&quot;}];var OH=(()=&gt;(function(t){t.Aircraft=&quot;aircraft&quot;,t.AircraftPosition=&quot;aircraft-position&quot;,t.Alert=&quot;alert&quot;,t.Annotation=&quot;annotation&quot;,t.Event=&quot;event&quot;,t.PortClickEvent=&quot;port-click-event&quot;,t.Ship=&quot;ship&quot;,t.ShipPosition=&quot;ship-position&quot;,t.H3Element=&quot;h3element&quot;}(OH||(OH={})),OH))();let PH=(()=&gt;{class t{constructor(t,e){this.mapConfigService=t,this.workerService=e,this.annotations$=new Qp([]),this.editedAnnotation$=new Qp(null),this.editedAnnotationGeomType$=new Qp(&quot;Point&quot;),this.annotationsVisibilityById={},this.annotationsVisibilityById=this.mapConfigService.annotationsVisibilityById$.value,this.editedAnnotation$.pipe(Sf(1),gf(t=&gt;t&amp;&amp;!!t.geom),M(t=&gt;t.geom.type),Mf()).subscribe(t=&gt;{this.editedAnnotationGeomType$.next(t)})}setAnnotations(t){let e=!1;t.forEach(t=&gt;{let i=this.annotationsVisibilityById[t.id];void 0===i&amp;&amp;(i=this.mapConfigService.defaultAnnotationVisibility$.value,this.annotationsVisibilityById[t.id]=i,e=!0),t.visible=i}),e&amp;&amp;this.mapConfigService.updateAnnotationsVisilityById(this.annotationsVisibilityById),this.annotations$.next(t)}refreshAnnotations(){return jp(this,void 0,void 0,function*(){const t=yield this.workerService.annotations.list();return this.setAnnotations(t),t})}clear(){this.annotations$.next([])}createNewAnnotation(t,e){const i={kind:OH.Annotation,name:&quot;&quot;,description:&quot;&quot;,color:&quot;#c3267d&quot;,geom:e};e&amp;&amp;(i.lon=e.coordinates[0],i.lat=e.coordinates[1]),t&amp;&amp;(i.group_id=t),this.editedAnnotation$.next(i)}updateEditedAnnotationGeom(t){const e=this.editedAnnotation$.value;if(e.geom=t,t)switch(t.type){case&quot;Point&quot;:t.coordinates=t.coordinates.map(t=&gt;oU(t,9));break;case&quot;LineString&quot;:t.coordinates=t.coordinates.map(t=&gt;t.map(t=&gt;oU(t,9)));break;case&quot;Polygon&quot;:t.coordinates[0]=t.coordinates[0].map(t=&gt;t.map(t=&gt;oU(t,9)))}this.editedAnnotation$.next(e)}editAnnotation(t){this.editedAnnotation$.next(lU(t))}refreshEditedAnnotation(){this.editedAnnotation$.next(this.editedAnnotation$.value)}cancelEditing(){this.editedAnnotation$.next(null),this.annotations$.next(this.annotations$.value)}saveEditedAnnotation(){return jp(this,void 0,void 0,function*(){const t=this.editedAnnotation$.value,e=function(t){return{id:t.id,name:t.name,description:t.description,geom:t.geom,color:t.color}}(t);t.id?yield this.workerService.annotations.update(e):t.group_id?yield this.workerService.annotations.createGroupAnnotation(t.group_id,e):yield this.workerService.annotations.createAnnotation(e),this.mapConfigService.enableWebsockets$.value||(yield this.refreshAnnotations()),this.editedAnnotation$.next(null)})}deleteAnnotation(t){return jp(this,void 0,void 0,function*(){yield this.workerService.annotations.delete(t),this.mapConfigService.enableWebsockets$.value||(yield this.refreshAnnotations())})}toggleAnnotationVisiblity(t){t.visible=!t.visible,this.annotationsVisibilityById[t.id]=t.visible,this.mapConfigService.updateAnnotationsVisilityById(this.annotationsVisibilityById),this.annotations$.next(this.annotations$.value)}}return t.\u0275fac=function(e){return new(e||t)(Mn(HU),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),RH=(()=&gt;{class t{constructor(){this.drawingZoneMode$=new Qp(!1),this.drawingZoneHexagonsCache={},this.hexagons$=new Qp([]),this.selectHexagon$=new S,this.selectHexagon$.subscribe(t=&gt;{this.drawingZoneHexagonsCache[t]?(nz({category:&quot;app&quot;,message:&quot;drawing: unselect-hexagon&quot;}),delete this.drawingZoneHexagonsCache[t]):(nz({category:&quot;app&quot;,message:&quot;drawing: select-hexagon&quot;}),this.drawingZoneHexagonsCache[t]=!0),this.updateZones(Object.keys(this.drawingZoneHexagonsCache))})}updateZones(t){(0!==t.length||0!==this.hexagons$.value.length)&amp;&amp;this.hexagons$.next(t)}clearZones(){this.updateZones([])}editZone(t){return this.drawingZoneMode$.next(!0),this.drawingZoneHexagonsCache={},t.forEach(t=&gt;{this.drawingZoneHexagonsCache[t]=!0}),this.hexagons$.next(t),this.hexagons$}stopEditingZone(){this.drawingZoneMode$.next(!1),this.clearZones()}selectHexagon(t){this.selectHexagon$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const FH=[{label:&quot;Perte signal AIS&quot;,color:kH(&quot;#ff272d&quot;,20)},{label:&quot;Changement d&#39;informations&quot;,color:kH(&quot;#e1cf15&quot;,20)},{label:&quot;Spoofing&quot;,color:kH(&quot;#ff29ff&quot;,20)},{label:&quot;Position tr\xe8s \xe9loign\xe9e&quot;,color:kH(&quot;#0623c9&quot;,20)},{label:&quot;Position d\xe9cal\xe9e&quot;,color:kH(&quot;#a07149&quot;,20)},{label:&quot;Entr\xe9e/Sortie de zone&quot;,color:kH(&quot;#78f48b&quot;,20)},{label:&quot;Route erratique&quot;,color:kH(&quot;#f78851&quot;,20)},{label:&quot;Transbordement&quot;,color:kH(&quot;#5910d0&quot;,20)}],LH=[{key:1,label:&quot;Perte signal AIS&quot;,color:&quot;#ff272d&quot;},{key:101,label:&quot;Modification infos navire&quot;,color:&quot;#e1cf15&quot;},{key:102,label:&quot;IMO invalide&quot;,color:&quot;#ff29ff&quot;},{key:103,label:&quot;Callsign invalide&quot;,color:&quot;#ff29ff&quot;},{key:110,label:&quot;Spoofing&quot;,color:&quot;#ff29ff&quot;},{key:201,label:&quot;Modification infos voyage&quot;,color:&quot;#e1cf15&quot;},{key:301,label:&quot;Position tr\xe8s \xe9loign\xe9e&quot;,color:&quot;#0623c9&quot;},{key:302,label:&quot;Modification statut&quot;,color:&quot;#e1cf15&quot;},{key:307,label:&quot;Position d\xe9cal\xe9e&quot;,color:&quot;#a07149&quot;},{key:401,label:&quot;Entr\xe9e zone&quot;,color:&quot;#78f48b&quot;},{key:402,label:&quot;Sortie zone&quot;,color:&quot;#78f48b&quot;},{key:403,label:&quot;Route erratique&quot;,color:&quot;#f78851&quot;},{key:404,label:&quot;Transbordement&quot;,color:&quot;#5910d0&quot;}];LH.forEach(t=&gt;{t.textColor=kH(t.color,20)});const BH=LH.reduce((t,e)=&gt;(t[e.key]=e.label,t),{}),zH=LH.reduce((t,e)=&gt;(t[e.key]=e,t),{});var NH=(()=&gt;(function(t){t[t.AISCommLoss=1]=&quot;AISCommLoss&quot;,t[t.ShipIdChanged=101]=&quot;ShipIdChanged&quot;,t[t.InvalidImo=102]=&quot;InvalidImo&quot;,t[t.InvalidCallsign=103]=&quot;InvalidCallsign&quot;,t[t.Spoofing=110]=&quot;Spoofing&quot;,t[t.VoyageChanged=201]=&quot;VoyageChanged&quot;,t[t.VoyageDestination=202]=&quot;VoyageDestination&quot;,t[t.VoyageETA=203]=&quot;VoyageETA&quot;,t[t.PositionDubious=301]=&quot;PositionDubious&quot;,t[t.StatusChanged=302]=&quot;StatusChanged&quot;,t[t.VectorCheck=307]=&quot;VectorCheck&quot;,t[t.MoveZoneEntry=401]=&quot;MoveZoneEntry&quot;,t[t.MoveZoneExit=402]=&quot;MoveZoneExit&quot;,t[t.MoveErratic=403]=&quot;MoveErratic&quot;,t[t.MoveMeetingAtSea=404]=&quot;MoveMeetingAtSea&quot;}(NH||(NH={})),NH))();class VH{constructor(t,e,i,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=i,this.scheduler=n}call(t,e){return e.subscribe(new UH(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class $H{constructor(){this.buffer=[]}}class UH extends g{constructor(t,e,i,n,s){super(t),this.bufferTimeSpan=e,this.bufferCreationInterval=i,this.maxBufferSize=n,this.scheduler=s,this.contexts=[];const r=this.openContext();if(this.timespanOnly=null==i||i&lt;0,this.timespanOnly)this.add(r.closeAction=s.schedule(jH,e,{subscriber:this,context:r,bufferTimeSpan:e}));else{const t={bufferTimeSpan:e,bufferCreationInterval:i,subscriber:this,scheduler:s};this.add(r.closeAction=s.schedule(GH,e,{subscriber:this,context:r})),this.add(s.schedule(HH,i,t))}}_next(t){const e=this.contexts,i=e.length;let n;for(let s=0;s&lt;i;s++){const i=e[s],r=i.buffer;r.push(t),r.length==this.maxBufferSize&amp;&amp;(n=i)}n&amp;&amp;this.onBufferFull(n)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:e}=this;for(;t.length&gt;0;){const i=t.shift();e.next(i.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&amp;&amp;this.timespanOnly){t=this.openContext();const e=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(jH,e,{subscriber:this,context:t,bufferTimeSpan:e}))}}openContext(){const t=new $H;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const e=this.contexts;(e?e.indexOf(t):-1)&gt;=0&amp;&amp;e.splice(e.indexOf(t),1)}}function jH(t){const e=t.subscriber,i=t.context;i&amp;&amp;e.closeContext(i),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function HH(t){const{bufferCreationInterval:e,bufferTimeSpan:i,subscriber:n,scheduler:s}=t,r=n.openContext();n.closed||(n.add(r.closeAction=s.schedule(GH,i,{subscriber:n,context:r})),this.schedule(t,e))}function GH(t){const{subscriber:e,context:i}=t;e.closeContext(i)}function qH(t,e){const i=t.findIndex(e);return-1!==i?t.slice(i):[]}function WH(t){const e=t.routerState.snapshot.url;return e.startsWith(&quot;/fleets/&quot;)&amp;&amp;!e.startsWith(&quot;/fleets/new&quot;)?e.substring(0,44):&quot;&quot;}let YH=(()=&gt;{class t{constructor(){this.events$=new Qp([])}clear(){this.events$.next([])}updateEvents(t){this.events$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),ZH=(()=&gt;{class t{constructor(){this.trails$=new Qp([])}clear(){this.trails$.next([])}updateTrails(t){this.trails$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),KH=(()=&gt;{class t{constructor(){this.active$=new Qp(!1)}toggleMeasureMode(){this.active$.next(!this.active$.value)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function XH(t,e){if(e.length&lt;t)throw new TypeError(t+&quot; argument&quot;+(t&gt;1?&quot;s&quot;:&quot;&quot;)+&quot; required, but only &quot;+e.length+&quot; present&quot;)}function QH(t){return XH(1,arguments),t instanceof Date||&quot;object&quot;==typeof t&amp;&amp;&quot;[object Date]&quot;===Object.prototype.toString.call(t)}function JH(t){XH(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||&quot;object&quot;==typeof t&amp;&amp;&quot;[object Date]&quot;===e?new Date(t.getTime()):&quot;number&quot;==typeof t||&quot;[object Number]&quot;===e?new Date(t):((&quot;string&quot;==typeof t||&quot;[object String]&quot;===e)&amp;&amp;&quot;undefined&quot;!=typeof console&amp;&amp;(console.warn(&quot;Starting with v2.0.0-beta.1 date-fns doesn&#39;t accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule&quot;),console.warn((new Error).stack)),new Date(NaN))}function tG(t){if(XH(1,arguments),!QH(t)&amp;&amp;&quot;number&quot;!=typeof t)return!1;var e=JH(t);return!isNaN(Number(e))}var eG={lessThanXSeconds:{one:&quot;less than a second&quot;,other:&quot;less than {{count}} seconds&quot;},xSeconds:{one:&quot;1 second&quot;,other:&quot;{{count}} seconds&quot;},halfAMinute:&quot;half a minute&quot;,lessThanXMinutes:{one:&quot;less than a minute&quot;,other:&quot;less than {{count}} minutes&quot;},xMinutes:{one:&quot;1 minute&quot;,other:&quot;{{count}} minutes&quot;},aboutXHours:{one:&quot;about 1 hour&quot;,other:&quot;about {{count}} hours&quot;},xHours:{one:&quot;1 hour&quot;,other:&quot;{{count}} hours&quot;},xDays:{one:&quot;1 day&quot;,other:&quot;{{count}} days&quot;},aboutXWeeks:{one:&quot;about 1 week&quot;,other:&quot;about {{count}} weeks&quot;},xWeeks:{one:&quot;1 week&quot;,other:&quot;{{count}} weeks&quot;},aboutXMonths:{one:&quot;about 1 month&quot;,other:&quot;about {{count}} months&quot;},xMonths:{one:&quot;1 month&quot;,other:&quot;{{count}} months&quot;},aboutXYears:{one:&quot;about 1 year&quot;,other:&quot;about {{count}} years&quot;},xYears:{one:&quot;1 year&quot;,other:&quot;{{count}} years&quot;},overXYears:{one:&quot;over 1 year&quot;,other:&quot;over {{count}} years&quot;},almostXYears:{one:&quot;almost 1 year&quot;,other:&quot;almost {{count}} years&quot;}};function iG(t){return function(){var e=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:{},i=e.width?String(e.width):t.defaultWidth,n=t.formats[i]||t.formats[t.defaultWidth];return n}}var nG={date:iG({formats:{full:&quot;EEEE, MMMM do, y&quot;,long:&quot;MMMM do, y&quot;,medium:&quot;MMM d, y&quot;,short:&quot;MM/dd/yyyy&quot;},defaultWidth:&quot;full&quot;}),time:iG({formats:{full:&quot;h:mm:ss a zzzz&quot;,long:&quot;h:mm:ss a z&quot;,medium:&quot;h:mm:ss a&quot;,short:&quot;h:mm a&quot;},defaultWidth:&quot;full&quot;}),dateTime:iG({formats:{full:&quot;{{date}} &#39;at&#39; {{time}}&quot;,long:&quot;{{date}} &#39;at&#39; {{time}}&quot;,medium:&quot;{{date}}, {{time}}&quot;,short:&quot;{{date}}, {{time}}&quot;},defaultWidth:&quot;full&quot;})},sG={lastWeek:&quot;&#39;last&#39; eeee &#39;at&#39; p&quot;,yesterday:&quot;&#39;yesterday at&#39; p&quot;,today:&quot;&#39;today at&#39; p&quot;,tomorrow:&quot;&#39;tomorrow at&#39; p&quot;,nextWeek:&quot;eeee &#39;at&#39; p&quot;,other:&quot;P&quot;};function rG(t){return function(e,i){var n,s=i||{};if(&quot;formatting&quot;===(s.context?String(s.context):&quot;standalone&quot;)&amp;&amp;t.formattingValues){var r=t.defaultFormattingWidth||t.defaultWidth,o=s.width?String(s.width):r;n=t.formattingValues[o]||t.formattingValues[r]}else{var a=t.defaultWidth,l=s.width?String(s.width):t.defaultWidth;n=t.values[l]||t.values[a]}return n[t.argumentCallback?t.argumentCallback(e):e]}}function oG(t){return function(e){var i=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},n=i.width,s=n&amp;&amp;t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],r=e.match(s);if(!r)return null;var o,a=r[0],l=n&amp;&amp;t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?lG(l,function(t){return t.test(a)}):aG(l,function(t){return t.test(a)});o=t.valueCallback?t.valueCallback(c):c,o=i.valueCallback?i.valueCallback(o):o;var h=e.slice(a.length);return{value:o,rest:h}}}function aG(t,e){for(var i in t)if(t.hasOwnProperty(i)&amp;&amp;e(t[i]))return i}function lG(t,e){for(var i=0;i&lt;t.length;i++)if(e(t[i]))return i}function cG(t){return function(e){var i=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var s=n[0],r=e.match(t.parsePattern);if(!r)return null;var o=t.valueCallback?t.valueCallback(r[0]):r[0];o=i.valueCallback?i.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var hG={code:&quot;en-US&quot;,formatDistance:function(t,e,i){var n,s=eG[t];return n=&quot;string&quot;==typeof s?s:1===e?s.one:s.other.replace(&quot;{{count}}&quot;,e.toString()),null!=i&amp;&amp;i.addSuffix?i.comparison&amp;&amp;i.comparison&gt;0?&quot;in &quot;+n:n+&quot; ago&quot;:n},formatLong:nG,formatRelative:function(t,e,i,n){return sG[t]},localize:{ordinalNumber:function(t,e){var i=Number(t),n=i%100;if(n&gt;20||n&lt;10)switch(n%10){case 1:return i+&quot;st&quot;;case 2:return i+&quot;nd&quot;;case 3:return i+&quot;rd&quot;}return i+&quot;th&quot;},era:rG({values:{narrow:[&quot;B&quot;,&quot;A&quot;],abbreviated:[&quot;BC&quot;,&quot;AD&quot;],wide:[&quot;Before Christ&quot;,&quot;Anno Domini&quot;]},defaultWidth:&quot;wide&quot;}),quarter:rG({values:{narrow:[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;],abbreviated:[&quot;Q1&quot;,&quot;Q2&quot;,&quot;Q3&quot;,&quot;Q4&quot;],wide:[&quot;1st quarter&quot;,&quot;2nd quarter&quot;,&quot;3rd quarter&quot;,&quot;4th quarter&quot;]},defaultWidth:&quot;wide&quot;,argumentCallback:function(t){return t-1}}),month:rG({values:{narrow:[&quot;J&quot;,&quot;F&quot;,&quot;M&quot;,&quot;A&quot;,&quot;M&quot;,&quot;J&quot;,&quot;J&quot;,&quot;A&quot;,&quot;S&quot;,&quot;O&quot;,&quot;N&quot;,&quot;D&quot;],abbreviated:[&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;],wide:[&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;November&quot;,&quot;December&quot;]},defaultWidth:&quot;wide&quot;}),day:rG({values:{narrow:[&quot;S&quot;,&quot;M&quot;,&quot;T&quot;,&quot;W&quot;,&quot;T&quot;,&quot;F&quot;,&quot;S&quot;],short:[&quot;Su&quot;,&quot;Mo&quot;,&quot;Tu&quot;,&quot;We&quot;,&quot;Th&quot;,&quot;Fr&quot;,&quot;Sa&quot;],abbreviated:[&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thu&quot;,&quot;Fri&quot;,&quot;Sat&quot;],wide:[&quot;Sunday&quot;,&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;]},defaultWidth:&quot;wide&quot;}),dayPeriod:rG({values:{narrow:{am:&quot;a&quot;,pm:&quot;p&quot;,midnight:&quot;mi&quot;,noon:&quot;n&quot;,morning:&quot;morning&quot;,afternoon:&quot;afternoon&quot;,evening:&quot;evening&quot;,night:&quot;night&quot;},abbreviated:{am:&quot;AM&quot;,pm:&quot;PM&quot;,midnight:&quot;midnight&quot;,noon:&quot;noon&quot;,morning:&quot;morning&quot;,afternoon:&quot;afternoon&quot;,evening:&quot;evening&quot;,night:&quot;night&quot;},wide:{am:&quot;a.m.&quot;,pm:&quot;p.m.&quot;,midnight:&quot;midnight&quot;,noon:&quot;noon&quot;,morning:&quot;morning&quot;,afternoon:&quot;afternoon&quot;,evening:&quot;evening&quot;,night:&quot;night&quot;}},defaultWidth:&quot;wide&quot;,formattingValues:{narrow:{am:&quot;a&quot;,pm:&quot;p&quot;,midnight:&quot;mi&quot;,noon:&quot;n&quot;,morning:&quot;in the morning&quot;,afternoon:&quot;in the afternoon&quot;,evening:&quot;in the evening&quot;,night:&quot;at night&quot;},abbreviated:{am:&quot;AM&quot;,pm:&quot;PM&quot;,midnight:&quot;midnight&quot;,noon:&quot;noon&quot;,morning:&quot;in the morning&quot;,afternoon:&quot;in the afternoon&quot;,evening:&quot;in the evening&quot;,night:&quot;at night&quot;},wide:{am:&quot;a.m.&quot;,pm:&quot;p.m.&quot;,midnight:&quot;midnight&quot;,noon:&quot;noon&quot;,morning:&quot;in the morning&quot;,afternoon:&quot;in the afternoon&quot;,evening:&quot;in the evening&quot;,night:&quot;at night&quot;}},defaultFormattingWidth:&quot;wide&quot;})},match:{ordinalNumber:cG({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:oG({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:&quot;wide&quot;,parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:&quot;any&quot;}),quarter:oG({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:&quot;wide&quot;,parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:&quot;any&quot;,valueCallback:function(t){return t+1}}),month:oG({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:&quot;wide&quot;,parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:&quot;any&quot;}),day:oG({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:&quot;wide&quot;,parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:&quot;any&quot;}),dayPeriod:oG({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:&quot;any&quot;,parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:&quot;any&quot;})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function uG(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e&lt;0?Math.ceil(e):Math.floor(e)}function dG(t,e){XH(2,arguments);var i=JH(t).getTime(),n=uG(e);return new Date(i+n)}function pG(t,e){XH(2,arguments);var i=uG(e);return dG(t,-i)}function fG(t){XH(1,arguments);var e=1,i=JH(t),n=i.getUTCDay(),s=(n&lt;e?7:0)+n-e;return i.setUTCDate(i.getUTCDate()-s),i.setUTCHours(0,0,0,0),i}function mG(t){XH(1,arguments);var e=JH(t),i=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(i+1,0,4),n.setUTCHours(0,0,0,0);var s=fG(n),r=new Date(0);r.setUTCFullYear(i,0,4),r.setUTCHours(0,0,0,0);var o=fG(r);return e.getTime()&gt;=s.getTime()?i+1:e.getTime()&gt;=o.getTime()?i:i-1}function gG(t){XH(1,arguments);var e=mG(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var n=fG(i);return n}function AG(t){XH(1,arguments);var e=JH(t),i=fG(e).getTime()-gG(e).getTime();return Math.round(i/6048e5)+1}function vG(t,e){XH(1,arguments);var i=e||{},n=i.locale,s=n&amp;&amp;n.options&amp;&amp;n.options.weekStartsOn,r=null==s?0:uG(s),o=null==i.weekStartsOn?r:uG(i.weekStartsOn);if(!(o&gt;=0&amp;&amp;o&lt;=6))throw new RangeError(&quot;weekStartsOn must be between 0 and 6 inclusively&quot;);var a=JH(t),l=a.getUTCDay(),c=(l&lt;o?7:0)+l-o;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function _G(t,e){XH(1,arguments);var i=JH(t),n=i.getUTCFullYear(),s=e||{},r=s.locale,o=r&amp;&amp;r.options&amp;&amp;r.options.firstWeekContainsDate,a=null==o?1:uG(o),l=null==s.firstWeekContainsDate?a:uG(s.firstWeekContainsDate);if(!(l&gt;=1&amp;&amp;l&lt;=7))throw new RangeError(&quot;firstWeekContainsDate must be between 1 and 7 inclusively&quot;);var c=new Date(0);c.setUTCFullYear(n+1,0,l),c.setUTCHours(0,0,0,0);var h=vG(c,e),u=new Date(0);u.setUTCFullYear(n,0,l),u.setUTCHours(0,0,0,0);var d=vG(u,e);return i.getTime()&gt;=h.getTime()?n+1:i.getTime()&gt;=d.getTime()?n:n-1}function bG(t,e){XH(1,arguments);var i=e||{},n=i.locale,s=n&amp;&amp;n.options&amp;&amp;n.options.firstWeekContainsDate,r=null==s?1:uG(s),o=null==i.firstWeekContainsDate?r:uG(i.firstWeekContainsDate),a=_G(t,e),l=new Date(0);l.setUTCFullYear(a,0,o),l.setUTCHours(0,0,0,0);var c=vG(l,e);return c}function yG(t,e){XH(1,arguments);var i=JH(t),n=vG(i,e).getTime()-bG(i,e).getTime();return Math.round(n/6048e5)+1}function xG(t,e){for(var i=t&lt;0?&quot;-&quot;:&quot;&quot;,n=Math.abs(t).toString();n.length&lt;e;)n=&quot;0&quot;+n;return i+n}var wG=function(t,e){var i=t.getUTCFullYear(),n=i&gt;0?i:1-i;return xG(&quot;yy&quot;===e?n%100:n,e.length)},CG=function(t,e){var i=t.getUTCMonth();return&quot;M&quot;===e?String(i+1):xG(i+1,2)},SG=function(t,e){return xG(t.getUTCDate(),e.length)},kG=function(t,e){return xG(t.getUTCHours()%12||12,e.length)},EG=function(t,e){return xG(t.getUTCHours(),e.length)},MG=function(t,e){return xG(t.getUTCMinutes(),e.length)},TG=function(t,e){return xG(t.getUTCSeconds(),e.length)},IG=function(t,e){var i=e.length,n=t.getUTCMilliseconds();return xG(Math.floor(n*Math.pow(10,i-3)),e.length)};function DG(t,e){var i=t&gt;0?&quot;-&quot;:&quot;+&quot;,n=Math.abs(t),s=Math.floor(n/60),r=n%60;if(0===r)return i+String(s);var o=e||&quot;&quot;;return i+String(s)+o+xG(r,2)}function OG(t,e){return t%60==0?(t&gt;0?&quot;-&quot;:&quot;+&quot;)+xG(Math.abs(t)/60,2):PG(t,e)}function PG(t,e){var i=e||&quot;&quot;,n=t&gt;0?&quot;-&quot;:&quot;+&quot;,s=Math.abs(t);return n+xG(Math.floor(s/60),2)+i+xG(s%60,2)}var RG={G:function(t,e,i){var n=t.getUTCFullYear()&gt;0?1:0;switch(e){case&quot;G&quot;:case&quot;GG&quot;:case&quot;GGG&quot;:return i.era(n,{width:&quot;abbreviated&quot;});case&quot;GGGGG&quot;:return i.era(n,{width:&quot;narrow&quot;});case&quot;GGGG&quot;:default:return i.era(n,{width:&quot;wide&quot;})}},y:function(t,e,i){if(&quot;yo&quot;===e){var n=t.getUTCFullYear();return i.ordinalNumber(n&gt;0?n:1-n,{unit:&quot;year&quot;})}return wG(t,e)},Y:function(t,e,i,n){var s=_G(t,n),r=s&gt;0?s:1-s;return&quot;YY&quot;===e?xG(r%100,2):&quot;Yo&quot;===e?i.ordinalNumber(r,{unit:&quot;year&quot;}):xG(r,e.length)},R:function(t,e){return xG(mG(t),e.length)},u:function(t,e){return xG(t.getUTCFullYear(),e.length)},Q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case&quot;Q&quot;:return String(n);case&quot;QQ&quot;:return xG(n,2);case&quot;Qo&quot;:return i.ordinalNumber(n,{unit:&quot;quarter&quot;});case&quot;QQQ&quot;:return i.quarter(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;QQQQQ&quot;:return i.quarter(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;QQQQ&quot;:default:return i.quarter(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case&quot;q&quot;:return String(n);case&quot;qq&quot;:return xG(n,2);case&quot;qo&quot;:return i.ordinalNumber(n,{unit:&quot;quarter&quot;});case&quot;qqq&quot;:return i.quarter(n,{width:&quot;abbreviated&quot;,context:&quot;standalone&quot;});case&quot;qqqqq&quot;:return i.quarter(n,{width:&quot;narrow&quot;,context:&quot;standalone&quot;});case&quot;qqqq&quot;:default:return i.quarter(n,{width:&quot;wide&quot;,context:&quot;standalone&quot;})}},M:function(t,e,i){var n=t.getUTCMonth();switch(e){case&quot;M&quot;:case&quot;MM&quot;:return CG(t,e);case&quot;Mo&quot;:return i.ordinalNumber(n+1,{unit:&quot;month&quot;});case&quot;MMM&quot;:return i.month(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;MMMMM&quot;:return i.month(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;MMMM&quot;:default:return i.month(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},L:function(t,e,i){var n=t.getUTCMonth();switch(e){case&quot;L&quot;:return String(n+1);case&quot;LL&quot;:return xG(n+1,2);case&quot;Lo&quot;:return i.ordinalNumber(n+1,{unit:&quot;month&quot;});case&quot;LLL&quot;:return i.month(n,{width:&quot;abbreviated&quot;,context:&quot;standalone&quot;});case&quot;LLLLL&quot;:return i.month(n,{width:&quot;narrow&quot;,context:&quot;standalone&quot;});case&quot;LLLL&quot;:default:return i.month(n,{width:&quot;wide&quot;,context:&quot;standalone&quot;})}},w:function(t,e,i,n){var s=yG(t,n);return&quot;wo&quot;===e?i.ordinalNumber(s,{unit:&quot;week&quot;}):xG(s,e.length)},I:function(t,e,i){var n=AG(t);return&quot;Io&quot;===e?i.ordinalNumber(n,{unit:&quot;week&quot;}):xG(n,e.length)},d:function(t,e,i){return&quot;do&quot;===e?i.ordinalNumber(t.getUTCDate(),{unit:&quot;date&quot;}):SG(t,e)},D:function(t,e,i){var n=function(t){XH(1,arguments);var e=JH(t),i=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime();return Math.floor((i-n)/864e5)+1}(t);return&quot;Do&quot;===e?i.ordinalNumber(n,{unit:&quot;dayOfYear&quot;}):xG(n,e.length)},E:function(t,e,i){var n=t.getUTCDay();switch(e){case&quot;E&quot;:case&quot;EE&quot;:case&quot;EEE&quot;:return i.day(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;EEEEE&quot;:return i.day(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;EEEEEE&quot;:return i.day(n,{width:&quot;short&quot;,context:&quot;formatting&quot;});case&quot;EEEE&quot;:default:return i.day(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},e:function(t,e,i,n){var s=t.getUTCDay(),r=(s-n.weekStartsOn+8)%7||7;switch(e){case&quot;e&quot;:return String(r);case&quot;ee&quot;:return xG(r,2);case&quot;eo&quot;:return i.ordinalNumber(r,{unit:&quot;day&quot;});case&quot;eee&quot;:return i.day(s,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;eeeee&quot;:return i.day(s,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;eeeeee&quot;:return i.day(s,{width:&quot;short&quot;,context:&quot;formatting&quot;});case&quot;eeee&quot;:default:return i.day(s,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},c:function(t,e,i,n){var s=t.getUTCDay(),r=(s-n.weekStartsOn+8)%7||7;switch(e){case&quot;c&quot;:return String(r);case&quot;cc&quot;:return xG(r,e.length);case&quot;co&quot;:return i.ordinalNumber(r,{unit:&quot;day&quot;});case&quot;ccc&quot;:return i.day(s,{width:&quot;abbreviated&quot;,context:&quot;standalone&quot;});case&quot;ccccc&quot;:return i.day(s,{width:&quot;narrow&quot;,context:&quot;standalone&quot;});case&quot;cccccc&quot;:return i.day(s,{width:&quot;short&quot;,context:&quot;standalone&quot;});case&quot;cccc&quot;:default:return i.day(s,{width:&quot;wide&quot;,context:&quot;standalone&quot;})}},i:function(t,e,i){var n=t.getUTCDay(),s=0===n?7:n;switch(e){case&quot;i&quot;:return String(s);case&quot;ii&quot;:return xG(s,e.length);case&quot;io&quot;:return i.ordinalNumber(s,{unit:&quot;day&quot;});case&quot;iii&quot;:return i.day(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;iiiii&quot;:return i.day(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;iiiiii&quot;:return i.day(n,{width:&quot;short&quot;,context:&quot;formatting&quot;});case&quot;iiii&quot;:default:return i.day(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},a:function(t,e,i){var n=t.getUTCHours()/12&gt;=1?&quot;pm&quot;:&quot;am&quot;;switch(e){case&quot;a&quot;:case&quot;aa&quot;:return i.dayPeriod(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;aaa&quot;:return i.dayPeriod(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;}).toLowerCase();case&quot;aaaaa&quot;:return i.dayPeriod(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;aaaa&quot;:default:return i.dayPeriod(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},b:function(t,e,i){var n,s=t.getUTCHours();switch(n=12===s?&quot;noon&quot;:0===s?&quot;midnight&quot;:s/12&gt;=1?&quot;pm&quot;:&quot;am&quot;,e){case&quot;b&quot;:case&quot;bb&quot;:return i.dayPeriod(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;bbb&quot;:return i.dayPeriod(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;}).toLowerCase();case&quot;bbbbb&quot;:return i.dayPeriod(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;bbbb&quot;:default:return i.dayPeriod(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},B:function(t,e,i){var n,s=t.getUTCHours();switch(n=s&gt;=17?&quot;evening&quot;:s&gt;=12?&quot;afternoon&quot;:s&gt;=4?&quot;morning&quot;:&quot;night&quot;,e){case&quot;B&quot;:case&quot;BB&quot;:case&quot;BBB&quot;:return i.dayPeriod(n,{width:&quot;abbreviated&quot;,context:&quot;formatting&quot;});case&quot;BBBBB&quot;:return i.dayPeriod(n,{width:&quot;narrow&quot;,context:&quot;formatting&quot;});case&quot;BBBB&quot;:default:return i.dayPeriod(n,{width:&quot;wide&quot;,context:&quot;formatting&quot;})}},h:function(t,e,i){if(&quot;ho&quot;===e){var n=t.getUTCHours()%12;return 0===n&amp;&amp;(n=12),i.ordinalNumber(n,{unit:&quot;hour&quot;})}return kG(t,e)},H:function(t,e,i){return&quot;Ho&quot;===e?i.ordinalNumber(t.getUTCHours(),{unit:&quot;hour&quot;}):EG(t,e)},K:function(t,e,i){var n=t.getUTCHours()%12;return&quot;Ko&quot;===e?i.ordinalNumber(n,{unit:&quot;hour&quot;}):xG(n,e.length)},k:function(t,e,i){var n=t.getUTCHours();return 0===n&amp;&amp;(n=24),&quot;ko&quot;===e?i.ordinalNumber(n,{unit:&quot;hour&quot;}):xG(n,e.length)},m:function(t,e,i){return&quot;mo&quot;===e?i.ordinalNumber(t.getUTCMinutes(),{unit:&quot;minute&quot;}):MG(t,e)},s:function(t,e,i){return&quot;so&quot;===e?i.ordinalNumber(t.getUTCSeconds(),{unit:&quot;second&quot;}):TG(t,e)},S:function(t,e){return IG(t,e)},X:function(t,e,i,n){var s=(n._originalDate||t).getTimezoneOffset();if(0===s)return&quot;Z&quot;;switch(e){case&quot;X&quot;:return OG(s);case&quot;XXXX&quot;:case&quot;XX&quot;:return PG(s);case&quot;XXXXX&quot;:case&quot;XXX&quot;:default:return PG(s,&quot;:&quot;)}},x:function(t,e,i,n){var s=(n._originalDate||t).getTimezoneOffset();switch(e){case&quot;x&quot;:return OG(s);case&quot;xxxx&quot;:case&quot;xx&quot;:return PG(s);case&quot;xxxxx&quot;:case&quot;xxx&quot;:default:return PG(s,&quot;:&quot;)}},O:function(t,e,i,n){var s=(n._originalDate||t).getTimezoneOffset();switch(e){case&quot;O&quot;:case&quot;OO&quot;:case&quot;OOO&quot;:return&quot;GMT&quot;+DG(s,&quot;:&quot;);case&quot;OOOO&quot;:default:return&quot;GMT&quot;+PG(s,&quot;:&quot;)}},z:function(t,e,i,n){var s=(n._originalDate||t).getTimezoneOffset();switch(e){case&quot;z&quot;:case&quot;zz&quot;:case&quot;zzz&quot;:return&quot;GMT&quot;+DG(s,&quot;:&quot;);case&quot;zzzz&quot;:default:return&quot;GMT&quot;+PG(s,&quot;:&quot;)}},t:function(t,e,i,n){return xG(Math.floor((n._originalDate||t).getTime()/1e3),e.length)},T:function(t,e,i,n){return xG((n._originalDate||t).getTime(),e.length)}};function FG(t,e){switch(t){case&quot;P&quot;:return e.date({width:&quot;short&quot;});case&quot;PP&quot;:return e.date({width:&quot;medium&quot;});case&quot;PPP&quot;:return e.date({width:&quot;long&quot;});case&quot;PPPP&quot;:default:return e.date({width:&quot;full&quot;})}}function LG(t,e){switch(t){case&quot;p&quot;:return e.time({width:&quot;short&quot;});case&quot;pp&quot;:return e.time({width:&quot;medium&quot;});case&quot;ppp&quot;:return e.time({width:&quot;long&quot;});case&quot;pppp&quot;:default:return e.time({width:&quot;full&quot;})}}var BG={p:LG,P:function(t,e){var i,n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return FG(t,e);switch(s){case&quot;P&quot;:i=e.dateTime({width:&quot;short&quot;});break;case&quot;PP&quot;:i=e.dateTime({width:&quot;medium&quot;});break;case&quot;PPP&quot;:i=e.dateTime({width:&quot;long&quot;});break;case&quot;PPPP&quot;:default:i=e.dateTime({width:&quot;full&quot;})}return i.replace(&quot;{{date}}&quot;,FG(s,e)).replace(&quot;{{time}}&quot;,LG(r,e))}};function zG(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var NG=[&quot;D&quot;,&quot;DD&quot;],VG=[&quot;YY&quot;,&quot;YYYY&quot;];function $G(t){return-1!==NG.indexOf(t)}function UG(t){return-1!==VG.indexOf(t)}function jG(t,e,i){if(&quot;YYYY&quot;===t)throw new RangeError(&quot;Use `yyyy` instead of `YYYY` (in `&quot;.concat(e,&quot;`) for formatting years to the input `&quot;).concat(i,&quot;`; see: https://git.io/fxCyr&quot;));if(&quot;YY&quot;===t)throw new RangeError(&quot;Use `yy` instead of `YY` (in `&quot;.concat(e,&quot;`) for formatting years to the input `&quot;).concat(i,&quot;`; see: https://git.io/fxCyr&quot;));if(&quot;D&quot;===t)throw new RangeError(&quot;Use `d` instead of `D` (in `&quot;.concat(e,&quot;`) for formatting days of the month to the input `&quot;).concat(i,&quot;`; see: https://git.io/fxCyr&quot;));if(&quot;DD&quot;===t)throw new RangeError(&quot;Use `dd` instead of `DD` (in `&quot;.concat(e,&quot;`) for formatting days of the month to the input `&quot;).concat(i,&quot;`; see: https://git.io/fxCyr&quot;))}var HG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|&#39;&#39;|&#39;(&#39;&#39;|[^&#39;])+(&#39;|$)|./g,GG=/P+p+|P+|p+|&#39;&#39;|&#39;(&#39;&#39;|[^&#39;])+(&#39;|$)|./g,qG=/^&#39;([^]*?)&#39;?$/,WG=/&#39;&#39;/g,YG=/[a-zA-Z]/;function ZG(t,e,i){XH(2,arguments);var n=String(e),s=i||{},r=s.locale||hG,o=r.options&amp;&amp;r.options.firstWeekContainsDate,a=null==o?1:uG(o),l=null==s.firstWeekContainsDate?a:uG(s.firstWeekContainsDate);if(!(l&gt;=1&amp;&amp;l&lt;=7))throw new RangeError(&quot;firstWeekContainsDate must be between 1 and 7 inclusively&quot;);var c=r.options&amp;&amp;r.options.weekStartsOn,h=null==c?0:uG(c),u=null==s.weekStartsOn?h:uG(s.weekStartsOn);if(!(u&gt;=0&amp;&amp;u&lt;=6))throw new RangeError(&quot;weekStartsOn must be between 0 and 6 inclusively&quot;);if(!r.localize)throw new RangeError(&quot;locale must contain localize property&quot;);if(!r.formatLong)throw new RangeError(&quot;locale must contain formatLong property&quot;);var d=JH(t);if(!tG(d))throw new RangeError(&quot;Invalid time value&quot;);var p=zG(d),f=pG(d,p),m={firstWeekContainsDate:l,weekStartsOn:u,locale:r,_originalDate:d},g=n.match(GG).map(function(t){var e=t[0];return&quot;p&quot;===e||&quot;P&quot;===e?(0,BG[e])(t,r.formatLong,m):t}).join(&quot;&quot;).match(HG).map(function(i){if(&quot;&#39;&#39;&quot;===i)return&quot;&#39;&quot;;var n=i[0];if(&quot;&#39;&quot;===n)return KG(i);var o=RG[n];if(o)return!s.useAdditionalWeekYearTokens&amp;&amp;UG(i)&amp;&amp;jG(i,e,t),!s.useAdditionalDayOfYearTokens&amp;&amp;$G(i)&amp;&amp;jG(i,e,t),o(f,i,r.localize,m);if(n.match(YG))throw new RangeError(&quot;Format string contains an unescaped latin alphabet character `&quot;+n+&quot;`&quot;);return i}).join(&quot;&quot;);return g}function KG(t){return t.match(qG)[1].replace(WG,&quot;&#39;&quot;)}const XG=86400;let QG=function(){return new Date};function JG(t){if(t&lt;0)return`/!\\ Dur\xe9e n\xe9gative ${JG(-t)}`;if(t&lt;60)return&quot;moins d&#39;une minute&quot;;const e=Math.floor(t/XG),i=Math.floor(t%XG/3600),n=Math.floor(t%3600/60),s=[];return e&gt;=1&amp;&amp;s.push(`${e} jour${e&gt;1?&quot;s&quot;:&quot;&quot;}`),i&gt;=1&amp;&amp;s.push(`${i} heure${i&gt;1?&quot;s&quot;:&quot;&quot;}`),s.length&lt;2&amp;&amp;0!==n&amp;&amp;s.push(`${n} minute${n&gt;1?&quot;s&quot;:&quot;&quot;}`),`${s.join(&quot;, &quot;)}`}function tq(t){if(t&lt;0)return`/!\\ Dur\xe9e n\xe9gative ${tq(-t)}`;if(t&lt;60)return&quot;&lt; 1m&quot;;const e=Math.floor(t/XG),i=Math.floor(t%XG/3600),n=Math.floor(t%3600/60),s=[];return e&gt;=1&amp;&amp;s.push(`${e}j`),i&gt;=1&amp;&amp;s.push(`${i}h`),s.length&lt;2&amp;&amp;0!==n&amp;&amp;s.push(`${n}m`),`${s.join(&quot; &quot;)}`}function eq(t){return Math.floor(t.getTime()/1e3)}function iq(t){return ZG(t,&quot;dd/MM/yyyy&quot;)}function nq(t){return ZG(1e3*t,&quot;yyyy-MM-dd&#39;T&#39;HH-mm-ss&quot;)}function sq(t){return new Date(t).toISOString().substr(0,19)}let rq=(()=&gt;{class t{constructor(){this.active$=new Qp(!1),this.selectedPIM$=new Qp(null),this.nextStartDate$=new Qp(eq(new Date)),this.nextSpeed$=new Qp(10)}togglePIMMode(){this.active$.next(!this.active$.value)}selectPIM(t){this.selectedPIM$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const oq=bH.reduce((t,e)=&gt;(t[e.iso2]=e,t[e.iso3]=e,t),{}),aq={flag:&quot;undefined&quot;,iso2:&quot;undefined&quot;,iso3:&quot;undefined&quot;,name:&quot;Inconnu&quot;,searchValue:&quot;&quot;};function lq(t){var e;return null!==(e=oq[t])&amp;&amp;void 0!==e?e:aq}const cq=Object.entries({201:[&quot;AL&quot;,&quot;ALB&quot;,&quot;&quot;,&quot;Albania&quot;],202:[&quot;AD&quot;,&quot;AND&quot;,&quot;&quot;,&quot;Andorra&quot;],203:[&quot;AT&quot;,&quot;AUT&quot;,&quot;&quot;,&quot;Austria&quot;],204:[&quot;PT&quot;,&quot;PRT&quot;,&quot;PT-20&quot;,&quot;Azores&quot;],205:[&quot;BE&quot;,&quot;BEL&quot;,&quot;&quot;,&quot;Belgium&quot;],206:[&quot;BY&quot;,&quot;BLR&quot;,&quot;&quot;,&quot;Belarus&quot;],207:[&quot;BG&quot;,&quot;BGR&quot;,&quot;&quot;,&quot;Bulgaria&quot;],208:[&quot;VA&quot;,&quot;VAT&quot;,&quot;&quot;,&quot;Vatican City State&quot;],209:[&quot;CY&quot;,&quot;CYP&quot;,&quot;&quot;,&quot;Cyprus&quot;],210:[&quot;CY&quot;,&quot;CYP&quot;,&quot;&quot;,&quot;Cyprus&quot;],211:[&quot;DE&quot;,&quot;DEU&quot;,&quot;&quot;,&quot;Germany&quot;],212:[&quot;CY&quot;,&quot;CYP&quot;,&quot;&quot;,&quot;Cyprus&quot;],213:[&quot;GE&quot;,&quot;GEO&quot;,&quot;&quot;,&quot;Georgia&quot;],214:[&quot;MD&quot;,&quot;MDA&quot;,&quot;&quot;,&quot;Moldova&quot;],215:[&quot;MT&quot;,&quot;MLT&quot;,&quot;&quot;,&quot;Malta&quot;],216:[&quot;AM&quot;,&quot;ARM&quot;,&quot;&quot;,&quot;Armenia&quot;],218:[&quot;DE&quot;,&quot;DEU&quot;,&quot;&quot;,&quot;Germany&quot;],219:[&quot;DK&quot;,&quot;DNK&quot;,&quot;&quot;,&quot;Denmark&quot;],220:[&quot;DK&quot;,&quot;DNK&quot;,&quot;&quot;,&quot;Denmark&quot;],224:[&quot;ES&quot;,&quot;ESP&quot;,&quot;&quot;,&quot;Spain&quot;],225:[&quot;ES&quot;,&quot;ESP&quot;,&quot;&quot;,&quot;Spain&quot;],226:[&quot;FR&quot;,&quot;FRA&quot;,&quot;&quot;,&quot;France&quot;],227:[&quot;FR&quot;,&quot;FRA&quot;,&quot;&quot;,&quot;France&quot;],228:[&quot;FR&quot;,&quot;FRA&quot;,&quot;&quot;,&quot;France&quot;],229:[&quot;MT&quot;,&quot;MLT&quot;,&quot;&quot;,&quot;Malta&quot;],230:[&quot;FI&quot;,&quot;FIN&quot;,&quot;&quot;,&quot;Finland&quot;],231:[&quot;FO&quot;,&quot;FRO&quot;,&quot;&quot;,&quot;Faroe Islands&quot;],232:[&quot;GB&quot;,&quot;GBR&quot;,&quot;&quot;,&quot;United Kingdom&quot;],233:[&quot;GB&quot;,&quot;GBR&quot;,&quot;&quot;,&quot;United Kingdom&quot;],234:[&quot;GB&quot;,&quot;GBR&quot;,&quot;&quot;,&quot;United Kingdom&quot;],235:[&quot;GB&quot;,&quot;GBR&quot;,&quot;&quot;,&quot;United Kingdom&quot;],236:[&quot;GI&quot;,&quot;GIB&quot;,&quot;&quot;,&quot;Gibraltar&quot;],237:[&quot;GR&quot;,&quot;GRC&quot;,&quot;&quot;,&quot;Greece&quot;],238:[&quot;HR&quot;,&quot;HRV&quot;,&quot;&quot;,&quot;Croatia&quot;],239:[&quot;GR&quot;,&quot;GRC&quot;,&quot;&quot;,&quot;Greece&quot;],240:[&quot;GR&quot;,&quot;GRC&quot;,&quot;&quot;,&quot;Greece&quot;],241:[&quot;GR&quot;,&quot;GRC&quot;,&quot;&quot;,&quot;Greece&quot;],242:[&quot;MA&quot;,&quot;MAR&quot;,&quot;&quot;,&quot;Morocco&quot;],243:[&quot;HU&quot;,&quot;HUN&quot;,&quot;&quot;,&quot;Hungary&quot;],244:[&quot;NL&quot;,&quot;NLD&quot;,&quot;&quot;,&quot;Netherlands&quot;],245:[&quot;NL&quot;,&quot;NLD&quot;,&quot;&quot;,&quot;Netherlands&quot;],246:[&quot;NL&quot;,&quot;NLD&quot;,&quot;&quot;,&quot;Netherlands&quot;],247:[&quot;IT&quot;,&quot;ITA&quot;,&quot;&quot;,&quot;Italy&quot;],248:[&quot;MT&quot;,&quot;MLT&quot;,&quot;&quot;,&quot;Malta&quot;],249:[&quot;MT&quot;,&quot;MLT&quot;,&quot;&quot;,&quot;Malta&quot;],250:[&quot;IE&quot;,&quot;IRL&quot;,&quot;&quot;,&quot;Ireland&quot;],251:[&quot;IS&quot;,&quot;ISL&quot;,&quot;&quot;,&quot;Iceland&quot;],252:[&quot;LI&quot;,&quot;LIE&quot;,&quot;&quot;,&quot;Liechtenstein&quot;],253:[&quot;LU&quot;,&quot;LUX&quot;,&quot;&quot;,&quot;Luxembourg&quot;],254:[&quot;MC&quot;,&quot;MCO&quot;,&quot;&quot;,&quot;Monaco&quot;],255:[&quot;PT&quot;,&quot;PRT&quot;,&quot;PT-30&quot;,&quot;Madeira&quot;],256:[&quot;MT&quot;,&quot;MLT&quot;,&quot;&quot;,&quot;Malta&quot;],257:[&quot;NO&quot;,&quot;NOR&quot;,&quot;&quot;,&quot;Norway&quot;],258:[&quot;NO&quot;,&quot;NOR&quot;,&quot;&quot;,&quot;Norway&quot;],259:[&quot;NO&quot;,&quot;NOR&quot;,&quot;&quot;,&quot;Norway&quot;],261:[&quot;PL&quot;,&quot;POL&quot;,&quot;&quot;,&quot;Poland&quot;],262:[&quot;ME&quot;,&quot;MNE&quot;,&quot;&quot;,&quot;Montenegro&quot;],263:[&quot;PT&quot;,&quot;PRT&quot;,&quot;&quot;,&quot;Portugal&quot;],264:[&quot;RO&quot;,&quot;ROU&quot;,&quot;&quot;,&quot;Romania&quot;],265:[&quot;SE&quot;,&quot;SWE&quot;,&quot;&quot;,&quot;Sweden&quot;],266:[&quot;SE&quot;,&quot;SWE&quot;,&quot;&quot;,&quot;Sweden&quot;],267:[&quot;SK&quot;,&quot;SVK&quot;,&quot;&quot;,&quot;Slovak Republic&quot;],268:[&quot;SM&quot;,&quot;SMR&quot;,&quot;&quot;,&quot;San Marino&quot;],269:[&quot;CH&quot;,&quot;CHE&quot;,&quot;&quot;,&quot;Switzerland&quot;],270:[&quot;CZ&quot;,&quot;CZE&quot;,&quot;&quot;,&quot;Czech Republic&quot;],271:[&quot;TR&quot;,&quot;TUR&quot;,&quot;&quot;,&quot;Turkey&quot;],272:[&quot;UA&quot;,&quot;UKR&quot;,&quot;&quot;,&quot;Ukraine&quot;],273:[&quot;RU&quot;,&quot;RUS&quot;,&quot;&quot;,&quot;Russia&quot;],274:[&quot;MK&quot;,&quot;MKD&quot;,&quot;&quot;,&quot;Macedonia&quot;],275:[&quot;LV&quot;,&quot;LVA&quot;,&quot;&quot;,&quot;Latvia&quot;],276:[&quot;EE&quot;,&quot;EST&quot;,&quot;&quot;,&quot;Estonia&quot;],277:[&quot;LT&quot;,&quot;LTU&quot;,&quot;&quot;,&quot;Lithuania&quot;],278:[&quot;SI&quot;,&quot;SVN&quot;,&quot;&quot;,&quot;Slovenia&quot;],279:[&quot;RS&quot;,&quot;SRB&quot;,&quot;&quot;,&quot;Serbia&quot;],301:[&quot;AI&quot;,&quot;AIA&quot;,&quot;&quot;,&quot;Anguilla&quot;],303:[&quot;US&quot;,&quot;USA&quot;,&quot;US-AK&quot;,&quot;Alaska&quot;],304:[&quot;AG&quot;,&quot;ATG&quot;,&quot;&quot;,&quot;Antigua and Barbuda&quot;],305:[&quot;AG&quot;,&quot;ATG&quot;,&quot;&quot;,&quot;Antigua and Barbuda&quot;],306:[&quot;CW&quot;,&quot;CUW&quot;,&quot;&quot;,&quot;Antilles&quot;],307:[&quot;AW&quot;,&quot;ABW&quot;,&quot;&quot;,&quot;Aruba&quot;],308:[&quot;BS&quot;,&quot;BHS&quot;,&quot;&quot;,&quot;Bahamas&quot;],309:[&quot;BS&quot;,&quot;BHS&quot;,&quot;&quot;,&quot;Bahamas&quot;],310:[&quot;BM&quot;,&quot;BMU&quot;,&quot;&quot;,&quot;Bermuda&quot;],311:[&quot;BS&quot;,&quot;BMU&quot;,&quot;&quot;,&quot;Bahamas&quot;],312:[&quot;BZ&quot;,&quot;BLZ&quot;,&quot;&quot;,&quot;Belize&quot;],314:[&quot;BB&quot;,&quot;BRB&quot;,&quot;&quot;,&quot;Barbados&quot;],316:[&quot;CA&quot;,&quot;CAN&quot;,&quot;&quot;,&quot;Canada&quot;],319:[&quot;KY&quot;,&quot;CYM&quot;,&quot;&quot;,&quot;Cayman Islands&quot;],321:[&quot;CR&quot;,&quot;CRI&quot;,&quot;&quot;,&quot;Costa Rica&quot;],323:[&quot;CU&quot;,&quot;CUB&quot;,&quot;&quot;,&quot;Cuba&quot;],325:[&quot;DM&quot;,&quot;DMA&quot;,&quot;&quot;,&quot;Dominica&quot;],327:[&quot;DO&quot;,&quot;DOM&quot;,&quot;&quot;,&quot;Dominican Republic&quot;],329:[&quot;GP&quot;,&quot;GLP&quot;,&quot;&quot;,&quot;Guadeloupe&quot;],330:[&quot;GD&quot;,&quot;GRD&quot;,&quot;&quot;,&quot;Grenada&quot;],331:[&quot;GL&quot;,&quot;GRL&quot;,&quot;&quot;,&quot;Greenland&quot;],332:[&quot;GT&quot;,&quot;GTM&quot;,&quot;&quot;,&quot;Guatemala&quot;],335:[&quot;HN&quot;,&quot;HND&quot;,&quot;&quot;,&quot;Honduras&quot;],336:[&quot;HT&quot;,&quot;HTI&quot;,&quot;&quot;,&quot;Haiti&quot;],338:[&quot;US&quot;,&quot;USA&quot;,&quot;&quot;,&quot;United States of America&quot;],339:[&quot;JM&quot;,&quot;JAM&quot;,&quot;&quot;,&quot;Jamaica&quot;],341:[&quot;KN&quot;,&quot;KNA&quot;,&quot;&quot;,&quot;Saint Kitts and Nevis&quot;],343:[&quot;LC&quot;,&quot;LCA&quot;,&quot;&quot;,&quot;Saint Lucia&quot;],345:[&quot;MX&quot;,&quot;MEX&quot;,&quot;&quot;,&quot;Mexico&quot;],347:[&quot;MQ&quot;,&quot;MTQ&quot;,&quot;&quot;,&quot;Martinique&quot;],348:[&quot;MS&quot;,&quot;MSR&quot;,&quot;&quot;,&quot;Montserrat&quot;],350:[&quot;NI&quot;,&quot;NIC&quot;,&quot;&quot;,&quot;Nicaragua&quot;],351:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],352:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],353:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],354:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],355:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],356:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],357:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],358:[&quot;PR&quot;,&quot;PRI&quot;,&quot;&quot;,&quot;Puerto Rico&quot;],359:[&quot;SV&quot;,&quot;SLV&quot;,&quot;&quot;,&quot;El Salvador&quot;],361:[&quot;PM&quot;,&quot;SPM&quot;,&quot;&quot;,&quot;Saint Pierre and Miquelon&quot;],362:[&quot;TT&quot;,&quot;TTO&quot;,&quot;&quot;,&quot;Trinidad and Tobago&quot;],364:[&quot;TC&quot;,&quot;TCA&quot;,&quot;&quot;,&quot;Turks and Caicos Islands&quot;],366:[&quot;US&quot;,&quot;USA&quot;,&quot;&quot;,&quot;United States of America&quot;],367:[&quot;US&quot;,&quot;USA&quot;,&quot;&quot;,&quot;United States of America&quot;],368:[&quot;US&quot;,&quot;USA&quot;,&quot;&quot;,&quot;United States of America&quot;],369:[&quot;US&quot;,&quot;USA&quot;,&quot;&quot;,&quot;United States of America&quot;],370:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],371:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],372:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],373:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],374:[&quot;PA&quot;,&quot;PAN&quot;,&quot;&quot;,&quot;Panama&quot;],375:[&quot;VC&quot;,&quot;VCT&quot;,&quot;&quot;,&quot;Saint Vincent and the Grenadines&quot;],376:[&quot;VC&quot;,&quot;VCT&quot;,&quot;&quot;,&quot;Saint Vincent and the Grenadines&quot;],377:[&quot;VC&quot;,&quot;VCT&quot;,&quot;&quot;,&quot;Saint Vincent and the Grenadines&quot;],378:[&quot;VG&quot;,&quot;VGB&quot;,&quot;&quot;,&quot;British Virgin Islands&quot;],379:[&quot;VI&quot;,&quot;VIR&quot;,&quot;&quot;,&quot;United States Virgin Islands&quot;],401:[&quot;AF&quot;,&quot;AFG&quot;,&quot;&quot;,&quot;Afghanistan&quot;],403:[&quot;SA&quot;,&quot;SAU&quot;,&quot;&quot;,&quot;Saudi Arabia&quot;],405:[&quot;BD&quot;,&quot;BGD&quot;,&quot;&quot;,&quot;Bangladesh&quot;],408:[&quot;BH&quot;,&quot;BHR&quot;,&quot;&quot;,&quot;Bahrain&quot;],410:[&quot;BT&quot;,&quot;BTN&quot;,&quot;&quot;,&quot;Bhutan&quot;],412:[&quot;CN&quot;,&quot;CHN&quot;,&quot;&quot;,&quot;China&quot;],413:[&quot;CN&quot;,&quot;CHN&quot;,&quot;&quot;,&quot;China&quot;],414:[&quot;CN&quot;,&quot;CHN&quot;,&quot;&quot;,&quot;China&quot;],416:[&quot;TW&quot;,&quot;TWN&quot;,&quot;&quot;,&quot;Taiwan&quot;],417:[&quot;LK&quot;,&quot;LKA&quot;,&quot;&quot;,&quot;Sri Lanka&quot;],419:[&quot;IN&quot;,&quot;IND&quot;,&quot;&quot;,&quot;India&quot;],422:[&quot;IR&quot;,&quot;IRN&quot;,&quot;&quot;,&quot;Iran&quot;],423:[&quot;AZ&quot;,&quot;AZE&quot;,&quot;&quot;,&quot;Azerbaijan&quot;],425:[&quot;IQ&quot;,&quot;IRQ&quot;,&quot;&quot;,&quot;Iraq&quot;],428:[&quot;IL&quot;,&quot;ISR&quot;,&quot;&quot;,&quot;Israel&quot;],431:[&quot;JP&quot;,&quot;JPN&quot;,&quot;&quot;,&quot;Japan&quot;],432:[&quot;JP&quot;,&quot;JPN&quot;,&quot;&quot;,&quot;Japan&quot;],434:[&quot;TM&quot;,&quot;TKM&quot;,&quot;&quot;,&quot;Turkmenistan&quot;],436:[&quot;KZ&quot;,&quot;KAZ&quot;,&quot;&quot;,&quot;Kazakhstan&quot;],437:[&quot;UZ&quot;,&quot;UZB&quot;,&quot;&quot;,&quot;Uzbekistan&quot;],438:[&quot;JO&quot;,&quot;JOR&quot;,&quot;&quot;,&quot;Jordan&quot;],440:[&quot;KR&quot;,&quot;KOR&quot;,&quot;&quot;,&quot;Korea&quot;],441:[&quot;KR&quot;,&quot;KOR&quot;,&quot;&quot;,&quot;Korea&quot;],443:[&quot;PS&quot;,&quot;PSE&quot;,&quot;&quot;,&quot;State of Palestine&quot;],445:[&quot;KP&quot;,&quot;PRK&quot;,&quot;&quot;,&quot;Democratic People&#39;s Republic of Korea&quot;],447:[&quot;KW&quot;,&quot;KWT&quot;,&quot;&quot;,&quot;Kuwait&quot;],450:[&quot;LB&quot;,&quot;LBN&quot;,&quot;&quot;,&quot;Lebanon&quot;],451:[&quot;KG&quot;,&quot;KGZ&quot;,&quot;&quot;,&quot;Kyrgyz Republic&quot;],453:[&quot;MO&quot;,&quot;MAC&quot;,&quot;&quot;,&quot;Macao&quot;],455:[&quot;MV&quot;,&quot;MDV&quot;,&quot;&quot;,&quot;Maldives&quot;],457:[&quot;MN&quot;,&quot;MNG&quot;,&quot;&quot;,&quot;Mongolia&quot;],459:[&quot;NP&quot;,&quot;NPL&quot;,&quot;&quot;,&quot;Nepal&quot;],461:[&quot;OM&quot;,&quot;OMN&quot;,&quot;&quot;,&quot;Oman&quot;],463:[&quot;PK&quot;,&quot;PAK&quot;,&quot;&quot;,&quot;Pakistan&quot;],466:[&quot;QA&quot;,&quot;QAT&quot;,&quot;&quot;,&quot;Qatar (State of)&quot;],468:[&quot;SY&quot;,&quot;SYR&quot;,&quot;&quot;,&quot;Syrian Arab Republic&quot;],470:[&quot;AE&quot;,&quot;ARE&quot;,&quot;&quot;,&quot;United Arab Emirates&quot;],472:[&quot;TJ&quot;,&quot;TJK&quot;,&quot;&quot;,&quot;Tajikistan&quot;],473:[&quot;YE&quot;,&quot;YEM&quot;,&quot;&quot;,&quot;Yemen&quot;],475:[&quot;YE&quot;,&quot;YEM&quot;,&quot;&quot;,&quot;Yemen&quot;],477:[&quot;HK&quot;,&quot;HKG&quot;,&quot;&quot;,&quot;Hong Kong&quot;],478:[&quot;BA&quot;,&quot;BIH&quot;,&quot;&quot;,&quot;Bosnia and Herzegovina&quot;],501:[&quot;FR&quot;,&quot;FRA&quot;,&quot;AQ&quot;,&quot;Adelie Land&quot;],503:[&quot;AU&quot;,&quot;AUS&quot;,&quot;&quot;,&quot;Australia&quot;],506:[&quot;MM&quot;,&quot;MMR&quot;,&quot;&quot;,&quot;Myanmar&quot;],508:[&quot;BN&quot;,&quot;BRN&quot;,&quot;&quot;,&quot;Brunei Darussalam&quot;],510:[&quot;FM&quot;,&quot;FSM&quot;,&quot;&quot;,&quot;Micronesia&quot;],511:[&quot;PW&quot;,&quot;PLW&quot;,&quot;&quot;,&quot;Palau&quot;],512:[&quot;NZ&quot;,&quot;NZL&quot;,&quot;&quot;,&quot;New Zealand&quot;],514:[&quot;KH&quot;,&quot;KHM&quot;,&quot;&quot;,&quot;Cambodia&quot;],515:[&quot;KH&quot;,&quot;KHM&quot;,&quot;&quot;,&quot;Cambodia&quot;],516:[&quot;CX&quot;,&quot;CXR&quot;,&quot;&quot;,&quot;Christmas Island&quot;],518:[&quot;CK&quot;,&quot;COK&quot;,&quot;&quot;,&quot;Cook Islands&quot;],520:[&quot;FJ&quot;,&quot;FJI&quot;,&quot;&quot;,&quot;Fiji&quot;],523:[&quot;CC&quot;,&quot;CCK&quot;,&quot;&quot;,&quot;Cocos (Keeling) Islands&quot;],525:[&quot;ID&quot;,&quot;IDN&quot;,&quot;&quot;,&quot;Indonesia&quot;],529:[&quot;KI&quot;,&quot;KIR&quot;,&quot;&quot;,&quot;Kiribati&quot;],531:[&quot;LA&quot;,&quot;LAO&quot;,&quot;&quot;,&quot;Lao People&#39;s Democratic Republic&quot;],533:[&quot;MY&quot;,&quot;MYS&quot;,&quot;&quot;,&quot;Malaysia&quot;],536:[&quot;MP&quot;,&quot;MNP&quot;,&quot;&quot;,&quot;Northern Mariana Islands&quot;],538:[&quot;MH&quot;,&quot;MHL&quot;,&quot;&quot;,&quot;Marshall Islands&quot;],540:[&quot;NC&quot;,&quot;NCL&quot;,&quot;&quot;,&quot;New Caledonia&quot;],542:[&quot;NU&quot;,&quot;NIU&quot;,&quot;&quot;,&quot;Niue&quot;],544:[&quot;NR&quot;,&quot;NRU&quot;,&quot;&quot;,&quot;Nauru&quot;],546:[&quot;PF&quot;,&quot;PYF&quot;,&quot;&quot;,&quot;French Polynesia&quot;],548:[&quot;PH&quot;,&quot;PHL&quot;,&quot;&quot;,&quot;Philippines&quot;],553:[&quot;PG&quot;,&quot;PNG&quot;,&quot;&quot;,&quot;Papua New Guinea&quot;],555:[&quot;PN&quot;,&quot;PCN&quot;,&quot;&quot;,&quot;Pitcairn Island&quot;],557:[&quot;SB&quot;,&quot;SLB&quot;,&quot;&quot;,&quot;Solomon Islands&quot;],559:[&quot;AS&quot;,&quot;ASM&quot;,&quot;&quot;,&quot;American Samoa&quot;],561:[&quot;WS&quot;,&quot;WSM&quot;,&quot;&quot;,&quot;Samoa&quot;],563:[&quot;SG&quot;,&quot;SGP&quot;,&quot;&quot;,&quot;Singapore&quot;],564:[&quot;SG&quot;,&quot;SGP&quot;,&quot;&quot;,&quot;Singapore&quot;],565:[&quot;SG&quot;,&quot;SGP&quot;,&quot;&quot;,&quot;Singapore&quot;],566:[&quot;SG&quot;,&quot;SGP&quot;,&quot;&quot;,&quot;Singapore&quot;],567:[&quot;TH&quot;,&quot;THA&quot;,&quot;&quot;,&quot;Thailand&quot;],570:[&quot;TO&quot;,&quot;TON&quot;,&quot;&quot;,&quot;Tonga&quot;],572:[&quot;TV&quot;,&quot;TUV&quot;,&quot;&quot;,&quot;Tuvalu&quot;],574:[&quot;VN&quot;,&quot;VNM&quot;,&quot;&quot;,&quot;Viet Nam&quot;],576:[&quot;VU&quot;,&quot;VUT&quot;,&quot;&quot;,&quot;Vanuatu&quot;],577:[&quot;VU&quot;,&quot;VUT&quot;,&quot;&quot;,&quot;Vanuatu&quot;],578:[&quot;WF&quot;,&quot;WLF&quot;,&quot;&quot;,&quot;Wallis and Futuna Islands&quot;],601:[&quot;ZA&quot;,&quot;ZAF&quot;,&quot;&quot;,&quot;South Africa&quot;],603:[&quot;AO&quot;,&quot;AGO&quot;,&quot;&quot;,&quot;Angola&quot;],605:[&quot;DZ&quot;,&quot;DZA&quot;,&quot;&quot;,&quot;Algeria&quot;],607:[&quot;FR&quot;,&quot;FRA&quot;,&quot;TF&quot;,&quot;Saint Paul and Amsterdam Islands&quot;],608:[&quot;GB&quot;,&quot;GBR&quot;,&quot;AC&quot;,&quot;Ascension Island&quot;],609:[&quot;BI&quot;,&quot;BDI&quot;,&quot;&quot;,&quot;Burundi&quot;],610:[&quot;BJ&quot;,&quot;BEN&quot;,&quot;&quot;,&quot;Benin&quot;],611:[&quot;BW&quot;,&quot;BWA&quot;,&quot;&quot;,&quot;Botswana&quot;],612:[&quot;CF&quot;,&quot;CAF&quot;,&quot;&quot;,&quot;Central African Republic&quot;],613:[&quot;CM&quot;,&quot;CMR&quot;,&quot;&quot;,&quot;Cameroon&quot;],615:[&quot;CG&quot;,&quot;COG&quot;,&quot;&quot;,&quot;Congo&quot;],616:[&quot;KM&quot;,&quot;COM&quot;,&quot;&quot;,&quot;Comoros&quot;],617:[&quot;CV&quot;,&quot;CPV&quot;,&quot;&quot;,&quot;Cabo Verde&quot;],618:[&quot;FR&quot;,&quot;FRA&quot;,&quot;TF&quot;,&quot;Crozet Archipelago&quot;],619:[&quot;CI&quot;,&quot;CIV&quot;,&quot;&quot;,&quot;Ivory Coast&quot;],620:[&quot;KM&quot;,&quot;COM&quot;,&quot;&quot;,&quot;Comoros&quot;],621:[&quot;DJ&quot;,&quot;DJI&quot;,&quot;&quot;,&quot;Djibouti&quot;],622:[&quot;EG&quot;,&quot;EGY&quot;,&quot;&quot;,&quot;Egypt&quot;],624:[&quot;ET&quot;,&quot;ETH&quot;,&quot;&quot;,&quot;Ethiopia&quot;],625:[&quot;ER&quot;,&quot;ERI&quot;,&quot;&quot;,&quot;Eritrea&quot;],626:[&quot;GA&quot;,&quot;GAB&quot;,&quot;&quot;,&quot;Gabonese Republic&quot;],627:[&quot;GH&quot;,&quot;GHA&quot;,&quot;&quot;,&quot;Ghana&quot;],629:[&quot;GM&quot;,&quot;GMB&quot;,&quot;&quot;,&quot;Gambia&quot;],630:[&quot;GW&quot;,&quot;GNB&quot;,&quot;&quot;,&quot;Guinea-Bissau&quot;],631:[&quot;GQ&quot;,&quot;GNQ&quot;,&quot;&quot;,&quot;Equatorial Guinea&quot;],632:[&quot;GN&quot;,&quot;GIN&quot;,&quot;&quot;,&quot;Guinea&quot;],633:[&quot;BF&quot;,&quot;BFA&quot;,&quot;&quot;,&quot;Burkina Faso&quot;],634:[&quot;KE&quot;,&quot;KEN&quot;,&quot;&quot;,&quot;Kenya&quot;],635:[&quot;FR&quot;,&quot;FRA&quot;,&quot;TF&quot;,&quot;Kerguelen Islands&quot;],636:[&quot;LR&quot;,&quot;LBR&quot;,&quot;&quot;,&quot;Liberia&quot;],637:[&quot;LR&quot;,&quot;LBR&quot;,&quot;&quot;,&quot;Liberia&quot;],638:[&quot;SS&quot;,&quot;SSD&quot;,&quot;&quot;,&quot;South Sudan&quot;],642:[&quot;LY&quot;,&quot;LBY&quot;,&quot;&quot;,&quot;Libya&quot;],644:[&quot;LS&quot;,&quot;LSO&quot;,&quot;&quot;,&quot;Lesotho&quot;],645:[&quot;MU&quot;,&quot;MUS&quot;,&quot;&quot;,&quot;Mauritius&quot;],647:[&quot;MG&quot;,&quot;MDG&quot;,&quot;&quot;,&quot;Madagascar&quot;],649:[&quot;ML&quot;,&quot;MLI&quot;,&quot;&quot;,&quot;Mali&quot;],650:[&quot;MZ&quot;,&quot;MOZ&quot;,&quot;&quot;,&quot;Mozambique&quot;],654:[&quot;MR&quot;,&quot;MRT&quot;,&quot;&quot;,&quot;Mauritania&quot;],655:[&quot;MW&quot;,&quot;MWI&quot;,&quot;&quot;,&quot;Malawi&quot;],656:[&quot;NE&quot;,&quot;NER&quot;,&quot;&quot;,&quot;Niger&quot;],657:[&quot;NG&quot;,&quot;NGA&quot;,&quot;&quot;,&quot;Nigeria&quot;],659:[&quot;NA&quot;,&quot;NAM&quot;,&quot;&quot;,&quot;Namibia&quot;],660:[&quot;RE&quot;,&quot;REU&quot;,&quot;&quot;,&quot;Reunion&quot;],661:[&quot;RW&quot;,&quot;RWA&quot;,&quot;&quot;,&quot;Rwanda&quot;],662:[&quot;SD&quot;,&quot;SDN&quot;,&quot;&quot;,&quot;Sudan&quot;],663:[&quot;SN&quot;,&quot;SEN&quot;,&quot;&quot;,&quot;Senegal&quot;],664:[&quot;SC&quot;,&quot;SYC&quot;,&quot;&quot;,&quot;Seychelles&quot;],665:[&quot;SH&quot;,&quot;SHN&quot;,&quot;&quot;,&quot;Saint Helena&quot;],666:[&quot;SO&quot;,&quot;SOM&quot;,&quot;&quot;,&quot;Somali Democratic Republic&quot;],667:[&quot;SL&quot;,&quot;SLE&quot;,&quot;&quot;,&quot;Sierra Leone&quot;],668:[&quot;ST&quot;,&quot;STP&quot;,&quot;&quot;,&quot;Sao Tome and Principe&quot;],669:[&quot;SZ&quot;,&quot;SWZ&quot;,&quot;&quot;,&quot;Swaziland&quot;],670:[&quot;TD&quot;,&quot;TCD&quot;,&quot;&quot;,&quot;Chad&quot;],671:[&quot;TG&quot;,&quot;TGO&quot;,&quot;&quot;,&quot;Togolese Republic&quot;],672:[&quot;TN&quot;,&quot;TUN&quot;,&quot;&quot;,&quot;Tunisian Republic&quot;],674:[&quot;TZ&quot;,&quot;TZA&quot;,&quot;&quot;,&quot;Tanzania&quot;],675:[&quot;UG&quot;,&quot;UGA&quot;,&quot;&quot;,&quot;Uganda&quot;],676:[&quot;CD&quot;,&quot;COD&quot;,&quot;&quot;,&quot;Democratic Republic of the Congo&quot;],677:[&quot;TZ&quot;,&quot;TZA&quot;,&quot;&quot;,&quot;Tanzania&quot;],678:[&quot;ZM&quot;,&quot;ZMB&quot;,&quot;&quot;,&quot;Zambia&quot;],679:[&quot;ZW&quot;,&quot;ZWE&quot;,&quot;&quot;,&quot;Zimbabwe&quot;],701:[&quot;AR&quot;,&quot;ARG&quot;,&quot;&quot;,&quot;Argentine Republic&quot;],710:[&quot;BR&quot;,&quot;BRA&quot;,&quot;&quot;,&quot;Brazil&quot;],720:[&quot;BO&quot;,&quot;BOL&quot;,&quot;&quot;,&quot;Bolivia&quot;],725:[&quot;CL&quot;,&quot;CHL&quot;,&quot;&quot;,&quot;Chile&quot;],730:[&quot;CO&quot;,&quot;COL&quot;,&quot;&quot;,&quot;Colombia&quot;],735:[&quot;EC&quot;,&quot;ECU&quot;,&quot;&quot;,&quot;Ecuador&quot;],740:[&quot;FK&quot;,&quot;FLK&quot;,&quot;&quot;,&quot;Falkland Islands&quot;],745:[&quot;GF&quot;,&quot;GUF&quot;,&quot;&quot;,&quot;Guiana&quot;],750:[&quot;GY&quot;,&quot;GUY&quot;,&quot;&quot;,&quot;Guyana&quot;],755:[&quot;PY&quot;,&quot;PRY&quot;,&quot;&quot;,&quot;Paraguay&quot;],760:[&quot;PE&quot;,&quot;PER&quot;,&quot;&quot;,&quot;Peru&quot;],765:[&quot;SR&quot;,&quot;SUR&quot;,&quot;&quot;,&quot;Suriname&quot;],770:[&quot;UY&quot;,&quot;URY&quot;,&quot;&quot;,&quot;Uruguay&quot;],775:[&quot;VE&quot;,&quot;VEN&quot;,&quot;&quot;,&quot;Venezuela&quot;]}).reduce((t,[e,[i]])=&gt;(t[e]=i.toLowerCase(),t),{});Object.values(bH).reduce((t,e)=&gt;(t[e.iso3.toLocaleLowerCase()]=e.iso2,t),{});const hq=[{key:&quot;cargo&quot;,label:&quot;Marchandises&quot;,aisTypes:[&quot;cargo&quot;],color:&quot;#78f48b&quot;},{key:&quot;tanker&quot;,label:&quot;Tanker&quot;,aisTypes:[&quot;tanker&quot;],color:&quot;#ff272d&quot;},{key:&quot;passenger&quot;,label:&quot;Passagers&quot;,aisTypes:[&quot;passenger&quot;],color:&quot;#0623c9&quot;},{key:&quot;submarine&quot;,label:&quot;Op\xe9rations sous-marines&quot;,aisTypes:[&quot;towing&quot;,&quot;dredger&quot;,&quot;diving&quot;],color:&quot;#1adde5&quot;},{key:&quot;tug&quot;,label:&quot;Remorquage&quot;,aisTypes:[&quot;tug&quot;],color:&quot;#9a460f&quot;},{key:&quot;fishing&quot;,label:&quot;P\xeache&quot;,aisTypes:[&quot;fishing&quot;],color:&quot;#f78851&quot;},{key:&quot;leisure&quot;,label:&quot;Plaisance&quot;,aisTypes:[&quot;sailing&quot;,&quot;leisure&quot;],color:&quot;#ff29ff&quot;},{key:&quot;military&quot;,label:&quot;Militaire&quot;,aisTypes:[&quot;military&quot;],color:&quot;#5910d0&quot;},{key:&quot;other&quot;,label:&quot;Autre&quot;,aisTypes:[&quot;other&quot;],color:&quot;#e1cf15&quot;},{key:&quot;default&quot;,label:&quot;Non sp\xe9cifi\xe9&quot;,aisTypes:[&quot;unspecified&quot;],color:&quot;#cccccc&quot;}];hq.forEach(t=&gt;{t.rgbColor=CH(t.color),t.textColor=kH(t.color,20)}),hq.reduce((t,e)=&gt;(t[e.key]=e,t),{}),hq.flatMap(t=&gt;t.aisTypes.map(e=&gt;[e,t])).reduce((t,[e,i])=&gt;(t[e]=i,t),{});const uq=[{key:&quot;sar-aircraft&quot;,label:&quot;111xx - A\xe9ronefs SAR&quot;},{key:&quot;ship&quot;,label:&quot;2-7xx - Navires&quot;},{key:&quot;handheld&quot;,label:&quot;8xx - Appareils portatifs&quot;},{key:&quot;sart&quot;,label:&quot;970xx - Recherche et sauvetage&quot;},{key:&quot;mob&quot;,label:&quot;972xx - Personne \xe0 la mer&quot;},{key:&quot;rls&quot;,label:&quot;974xx - Radiobalises de localisation des sinistres&quot;},{key:&quot;secondary-craft&quot;,label:&quot;98xx - Engins secondaires&quot;},{key:&quot;aton&quot;,label:&quot;99xx - Aides \xe0 la navigation&quot;},{key:&quot;beacon-other&quot;,label:&quot;9x - Autres balises&quot;}];function dq(t,e){var i,n,s;let r=!1;if(t.colorResultTimestamp=0,!e.colorModeShipType)if(e.isMissingColorFilterConfiguration||e.frozenTimestamp)r=!0;else{let i=0;if(e.alertRules.length&gt;0){const n=t.lastAlerts.find(t=&gt;e.alertRules.includes(t.rule_id));n&amp;&amp;(i=n.timestamp)}let n=0;if(e.eventTypes.length&gt;0){const i=t.lastEvents.find(t=&gt;e.eventTypes.includes(t.type));i&amp;&amp;(n=i.timestamp)}t.colorResultTimestamp=Math.max(i,n),r=t.colorResultTimestamp&gt;=e.absoluteMinimumTimestamp}t.stationary=t.stationary||t.sog&amp;&amp;parseFloat(t.sog)&lt;1,t.visible=t.selected||(!e.restrictedShips.size||e.restrictedShips.has(t.mmsi))&amp;&amp;t.timestamp&gt;=e.absoluteVisibilityThresholdTimestamp&amp;&amp;(!e.shipAISTypes.length||e.shipAISTypes.includes(t.aisType))&amp;&amp;(!e.shipTypes.length||!!e.shipTypesCache[t.cargo])&amp;&amp;(!e.shipFlags.length||!!e.shipFlagsCache[t.country.flag])&amp;&amp;(!e.shipDestinations.length||t.destination&amp;&amp;e.shipDestinations.some(e=&gt;t.destination.includes(e)))&amp;&amp;(!e.shipDepartures.length||t.departure&amp;&amp;e.shipDepartures.some(e=&gt;t.departure.includes(e)))&amp;&amp;(!e.shipStatus.length||e.shipStatus.includes(t.status))&amp;&amp;(!e.shipSpeed||e.shipSpeed.min&lt;=t.numberSog&amp;&amp;t.numberSog&lt;=e.shipSpeed.max)&amp;&amp;(!e.shipLength||e.shipLength.min&lt;=t.length&amp;&amp;t.length&lt;=e.shipLength.max)&amp;&amp;(!e.shipWidth||e.shipWidth.min&lt;=t.width&amp;&amp;t.width&lt;=e.shipWidth.max)&amp;&amp;(!e.shipDraught||e.shipDraught.min&lt;=t.numberDraught&amp;&amp;t.numberDraught&lt;=e.shipDraught.max)&amp;&amp;(!e.shipYearofbuild||e.shipYearofbuild.min&lt;=t.yearofbuild&amp;&amp;t.yearofbuild&lt;=e.shipYearofbuild.max||e.shipYearofbuildIncludeNulls&amp;&amp;0===t.yearofbuild)&amp;&amp;(!e.shipCourse||(e.shipCourse.min&lt;e.shipCourse.max?e.shipCourse.min&lt;=t.numberCog&amp;&amp;t.numberCog&lt;=e.shipCourse.max:e.shipCourse.min&lt;=t.numberCog||t.numberCog&lt;=e.shipCourse.max))&amp;&amp;(!e.fleets.length||e.fleetsShipsCache.has(t.mmsi))&amp;&amp;(!e.shipIdentifier.length||(null===(i=t.name)||void 0===i?void 0:i.includes(e.shipIdentifier))||(null===(n=t.mmsi)||void 0===n?void 0:n.includes(e.shipIdentifier))||(null===(s=t.imo)||void 0===s?void 0:s.includes(e.shipIdentifier)))&amp;&amp;(e.colorModeShipType||e.colorModeAllShips||e.colorModeResultsOnly&amp;&amp;r)&amp;&amp;(0===e.selectedShips.size||e.frozenTimestamp&gt;0||!e.selectedShips.has(t.mmsi)),t.transparent=t.timestamp&lt;=e.absoluteTransparencyThresholdTimestamp}function pq(t,e,i){if(i)for(;t.positionIndex&gt;0&amp;&amp;t.positions[t.positionIndex].timestamp&gt;e;)t.positionIndex--;else for(;t.positionIndex&lt;t.positions.length-1&amp;&amp;t.positions[t.positionIndex+1].timestamp&lt;e;)t.positionIndex++;const n=t.positions[t.positionIndex],s=e&lt;=t.positions[0].timestamp||t.positionIndex===t.positions.length-1;t.visible=!s,t.position=s?[n.lon,n.lat]:function(t,e,i){const n=(i-t.timestamp)/(e.timestamp-t.timestamp);return[t.lon+(e.lon-t.lon)*n,t.lat+(e.lat-t.lat)*n]}(n,t.positions[t.positionIndex+1],e),t.course=n.course,t.speed=n.speed}const fq=[1,2,5,10,20,30];let mq=(()=&gt;{class t{constructor(t){this.workerService=t,this.active$=new Qp(!1),this.startTimestamp$=new Qp(0),this.duration$=new Qp(0),this.shipsByMMSI$=new Qp(null),this.animationTimestamp$=new Qp(0),this.paused$=new Qp(!0),this.reverseMode$=new Qp(!1),this.animationSpeed$=new Qp(10),this.lastFrameMs=0,this.viewExtent=null,this.animate=t=&gt;{const e=this.animationTimestamp$.value+(this.reverseMode$.value?-1:1)*this.animationSpeed$.value*(t-this.lastFrameMs)*.006;this.lastFrameMs=t;const i=this.reverseMode$.value;Object.values(this.shipsByMMSI$.value).forEach(t=&gt;{pq(t,e,i)}),this.animationTimestamp$.next(e),this.reverseMode$.value?e-this.minTimestamp&lt;900&amp;&amp;(this.minTimestamp=this.minTimestamp-this.duration$.value,this.loadChunk(this.minTimestamp,this.duration$.value)):this.maxTimestamp-e&lt;900&amp;&amp;(this.loadChunk(this.maxTimestamp,this.duration$.value),this.maxTimestamp=this.maxTimestamp+this.duration$.value),this.animationFrameTimeout=requestAnimationFrame(this.animate)},this.paused$.subscribe(t=&gt;{t?cancelAnimationFrame(this.animationFrameTimeout):requestAnimationFrame(t=&gt;{this.lastFrameMs=t,this.animationFrameTimeout=requestAnimationFrame(this.animate)})})}enterPlaybackMode(){this.active$.next(!0)}exitPlaybackMode(){cancelAnimationFrame(this.animationFrameTimeout),this.shipsByMMSI$.next(null),this.active$.next(!1)}loadPlayback(t,e){return jp(this,void 0,void 0,function*(){this.startTimestamp$.next(t),this.duration$.next(e),this.minTimestamp=t-e,this.maxTimestamp=t+e,this.paused$.next(!0),this.reverseMode$.next(!1),this.shipsByMMSI$.next({}),yield Promise.all([this.loadChunk(t-e,e),this.loadChunk(t,e)]),Object.values(this.shipsByMMSI$.value).forEach(e=&gt;{pq(e,t,!1)}),this.animationTimestamp$.next(t)})}reinitiate(){this.animationTimestamp$.next(this.startTimestamp$.value)}loadChunk(t,e){return jp(this,void 0,void 0,function*(){const i=yield this.workerService.ships.getShipsPlaybackAtBboxAndTimestamp(this.viewExtent,t,e),n=this.shipsByMMSI$.value;console.time(&quot;assemble chunk&quot;);const s=this.reverseMode$.value;i.forEach(t=&gt;{if(n[t.mmsi]){const e=n[t.mmsi];e.positions=e.positions.concat(t.positions).sort((t,e)=&gt;t.timestamp-e.timestamp),e.positionIndex=s?e.positions.length-1:0;const i=e.positions,r=i.length-1;for(let t=0;t&lt;r;t++)if(i[t].chunkEnd){const e=[i[t].lon,i[t].lat],n=[i[t+1].lon,i[t+1].lat];i[t].course=(2*Math.PI+Math.PI/2-BU(e,n))%(2*Math.PI),i[t].speed=Math.round(10*zU(e,n,i[t+1].timestamp-i[t].timestamp))/10}}else n[t.mmsi]=t});const r=this.animationTimestamp$.value,o=this.reverseMode$.value;Object.values(n).forEach(t=&gt;{pq(t,r,o)}),console.timeEnd(&quot;assemble chunk&quot;),this.shipsByMMSI$.next(n)})}togglePause(){this.paused$.next(!this.paused$.value)}toggleReverseMode(){this.reverseMode$.next(!this.reverseMode$.value)}updateSpeed(t){const e=fq.indexOf(this.animationSpeed$.value);&quot;-&quot;===t?e&gt;0&amp;&amp;this.animationSpeed$.next(fq[e-1]):e&lt;fq.length-1&amp;&amp;this.animationSpeed$.next(fq[e+1])}updateViewBox(t){this.viewExtent=t}}return t.\u0275fac=function(e){return new(e||t)(Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const gq=[-1165201.47,4946429.48,1168528.74,6341728.49];let Aq=(()=&gt;{class t{constructor(t,e){this.mapService=t,this.mapConfigService=e,this.isConfiguringZonex$=new Qp(!1),this.selectedZonex=[]}enterConfigurationMode(){this.isConfiguringZonex$.next(!0),this.mapService.fitOn(gq),this.selectedZonex=[...this.mapConfigService.displayedZonex$.value]}saveConfiguration(){this.mapConfigService.updateDisplayedZonex(this.selectedZonex),this.cancelConfiguration()}cancelConfiguration(){this.isConfiguringZonex$.next(!1),this.selectedZonex=[]}toggleSelection(t){const e=this.selectedZonex.indexOf(t);-1!==e?this.selectedZonex.splice(e,1):this.selectedZonex.push(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(kj),Mn(HU))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),vq=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a,l,c,h){this.alertsService=t,this.alertRulesService=e,this.annotationService=i,this.drawingService=n,this.historyService=s,this.mapConfigService=r,this.measureService=o,this.pimService=a,this.playbackService=l,this.routeService=c,this.zonexService=h,this.coordinateSystem$=new Qp($$.find(t=&gt;&quot;dms&quot;===t.key));const u=this.routeService.route$.pipe(M(t=&gt;&quot;/zones&quot;===t),Mf()),d=this.routeService.route$.pipe(M(t=&gt;&quot;/moves&quot;===t),Mf()),p=this.routeService.route$.pipe(M(t=&gt;t.startsWith(&quot;/ports&quot;)),Mf()),f=this.routeService.route$.pipe(M(t=&gt;t.startsWith(&quot;/alerts/rules/&quot;)),Mf()),m=this.routeService.route$.pipe(M(t=&gt;&quot;/annotations&quot;===t),Mf());this.mustHideEntities$=QT([u,f,this.playbackService.active$,this.zonexService.isConfiguringZonex$]).pipe(M(([t,e,i,n])=&gt;t||e||i||n),Mf()),this.minimumZoom$=QT([this.historyService.timestamp$.pipe(M(t=&gt;!!t)),this.mapConfigService.limitMinimumZoom$,this.alertRulesService.selectedAlertRuleId$,u,d]).pipe(M(([t,e,i,n,s])=&gt;t?7:i||n?2.5:s?5:e?6:2.5),Mf()),this.featuresSelectable$=QT([d,this.annotationService.editedAnnotation$.pipe(M(t=&gt;!!t)),this.drawingService.drawingZoneMode$,this.measureService.active$,this.pimService.active$,this.zonexService.isConfiguringZonex$]).pipe(M(([t,e,i,n,s,r])=&gt;!(t||e||i||n||s||r)),Mf()),this.showShipsLayer$=QT([this.mapConfigService.showShipsLayer$,this.mustHideEntities$.pipe(df(500))]).pipe(M(([t,e])=&gt;t&amp;&amp;!e),Mf()),this.showAircraftsLayer$=QT([this.mapConfigService.showAircraftsLayer$,this.mustHideEntities$.pipe(df(500))]).pipe(M(([t,e])=&gt;t&amp;&amp;!e),Mf()),this.showAnnotationsLayer$=QT([this.mapConfigService.showAnnotationsLayer$,m,this.annotationService.editedAnnotation$.pipe(M(t=&gt;!!t)),this.zonexService.isConfiguringZonex$]).pipe(M(([t,e,i,n])=&gt;(t||e||i)&amp;&amp;!n),Mf()),this.showPortsLayer$=QT([this.mapConfigService.showPortsLayer$,p]).pipe(M(([t,e])=&gt;t||e),Mf()),this.selectableHexagons$=this.drawingService.drawingZoneMode$.pipe(Mf()),this.showHexagonsLayer$=QT([this.selectableHexagons$,this.mapConfigService.showHexagonsLayer$,d]).pipe(M(([t,e,i])=&gt;t||e&amp;&amp;!i),Mf()),this.showEdgesLayer$=d.pipe(Mf()),this.showTrailsLayer$=QT([this.mapConfigService.showTrailsLayer$,this.mustHideEntities$]).pipe(M(([t,e])=&gt;t&amp;&amp;!e),Mf()),this.showSelectionMarkers$=this.mustHideEntities$.pipe(M(t=&gt;!t),Mf()),this.showEntitiesSelections$=QT([this.mapConfigService.enableMultiSelectionMode$,this.mustHideEntities$]).pipe(M(([t,e])=&gt;t&amp;&amp;!e),Mf()),this.showAlertsLayer$=QT([this.alertsService.alerts$,this.mustHideEntities$]).pipe(M(([t,e])=&gt;t.length&gt;0||!e),Mf()),this.showEventsLayer$=this.showAlertsLayer$,this.mapConfigService.coordinateSystem$.subscribe(t=&gt;{this.coordinateSystem$.next($$.find(e=&gt;e.key===t))})}}return t.\u0275fac=function(e){return new(e||t)(Mn(IH),Mn(TH),Mn(PH),Mn(RH),Mn(Dj),Mn(HU),Mn(KH),Mn(rq),Mn(mq),Mn(Oj),Mn(Aq))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function _q(t){return new Promise((e,i)=&gt;{t.oncomplete=t.onsuccess=()=&gt;e(t.result),t.onabort=t.onerror=()=&gt;i(t.error)})}let bq;function yq(){return bq||(bq=function(t,e){const i=function(){var t;return!navigator.userAgentData&amp;&amp;/Safari\//.test(navigator.userAgent)&amp;&amp;!/Chrom(e|ium)\//.test(navigator.userAgent)&amp;&amp;indexedDB.databases?new Promise(function(e){var i=function(){return indexedDB.databases().finally(e)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)}):Promise.resolve()}().then(()=&gt;{const t=indexedDB.open(&quot;keyval-store&quot;);return t.onupgradeneeded=()=&gt;t.result.createObjectStore(e),_q(t)});return(t,n)=&gt;i.then(i=&gt;n(i.transaction(e,t).objectStore(e)))}(0,&quot;keyval&quot;)),bq}function xq(t,e=yq()){return e(&quot;readonly&quot;,e=&gt;_q(e.get(t)))}function wq(t,e,i=yq()){return i(&quot;readwrite&quot;,i=&gt;(i.put(e,t),_q(i.transaction)))}class Cq{constructor(t){this.config=t,this.progress=new Qp(null),this.progress$=this.progress.asObservable(),this.incrementCounter=()=&gt;{this.progress.value.progressCounter++,this.progress.value.progressPercentage=this.progress.value.progressCounter/this.progress.value.stepTotal*100,this.progress.next(this.progress.value)}}execute(t){var e;return jp(this,void 0,void 0,function*(){this.progress.next({numberOfSteps:this.config.numberOfSteps,stepTitle:t.title,stepTotal:t.total,stepNumber:this.progress.value?(null===(e=this.progress.value)||void 0===e?void 0:e.stepNumber)+1:this.config.initialStep?this.config.initialStep:1,progressCounter:0,progressPercentage:0}),yield t.action(this.incrementCounter)})}}const Sq=&quot;offline-config&quot;,kq=&quot;offline-user-data&quot;;let Eq=(()=&gt;{class t{constructor(){this.subscriptions=[],this.eventListeners=[]}ngOnDestroy(){this.subscriptions.forEach(t=&gt;t.unsubscribe()),this.eventListeners.forEach(e$)}ensureMandatoryInputParams(...t){t.forEach(t=&gt;{if(void 0===this[t])throw new Error(`Missing input property &#39;${t}&#39;`)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t}),t})();function Mq(t=0,e=uf){return(!sg(t)||t&lt;0)&amp;&amp;(t=0),(!e||&quot;function&quot;!=typeof e.schedule)&amp;&amp;(e=uf),new b(i=&gt;(i.add(e.schedule(Tq,t,{subscriber:i,counter:0,period:t})),i))}function Tq(t){const{subscriber:e,counter:i,period:n}=t;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}let Iq=(()=&gt;{class t{constructor(){this.userAFK$=new Qp(!1),document.addEventListener(&quot;visibilitychange&quot;,()=&gt;{&quot;visible&quot;===document.visibilityState?(clearTimeout(this.afkTimeout),this.userAFK$.next(!1)):this.afkTimeout=setTimeout(()=&gt;{this.userAFK$.next(!0)},9e5)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Dq=(()=&gt;{class t{constructor(t,e,i,n,s){this.authenticationService=t,this.mapConfigService=e,this.historyService=i,this.offlineService=n,this.visibilityService=s,this.refresh$=new S,this.pause$=new Qp(!1),this.tap=()=&gt;{this.refreshTimer&amp;&amp;this.refreshTimer.unsubscribe(),this.refreshTimer=Mq(this.mapConfigService.shipRefreshInterval$.value).pipe(gf(()=&gt;this.authenticationService.isAuthenticated()),gf(()=&gt;!this.pause$.value),gf(()=&gt;!this.visibilityService.userAFK$.value),gf(()=&gt;0===this.historyService.timestamp$.value)).subscribe(()=&gt;{this.refresh$.next()})},this.offlineService.isOffline$.subscribe(t=&gt;{this.setPause(t)}),this.mapConfigService.shipRefreshInterval$.subscribe(()=&gt;{this.tap()}),this.pause$.subscribe(t=&gt;{t||(this.tap(),this.refresh$.next())})}destroy(){this.setPause(!1),this.refreshTimer.unsubscribe()}togglePause(){this.pause$.next(!this.pause$.value)}setPause(t){this.pause$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(tH),Mn(HU),Mn(Dj),Mn(hW),Mn(Iq))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Oq=(()=&gt;{class t{constructor(t,e){this.configService=t,this.refreshTimerService=e,this.timeRange$=new Qp(null),this.reset(),this.refreshTimerService.refresh$.subscribe(()=&gt;{this.refresh()})}reset(){this.timeRange$.next(OU[this.configService.defaultTimeRange].refresh())}refresh(){this.timeRange$.value.isCustom||this.timeRange$.next(this.timeRange$.value.refresh())}updateTimeRange(t){this.timeRange$.next(t.refresh())}setCustom(t,e){this.timeRange$.next(this.timeRange$.value.setCustom(t,e))}setRelative(t){this.timeRange$.next(this.timeRange$.value.setRelative(t))}goBackward(){this.timeRange$.next(this.timeRange$.value.shift(-this.timeRange$.value.value/2))}goForward(){this.timeRange$.next(this.timeRange$.value.shift(this.timeRange$.value.value/2))}extendBackward(){this.timeRange$.next(this.timeRange$.value.extend(-this.timeRange$.value.value/2))}extendForward(){this.timeRange$.next(this.timeRange$.value.extend(this.timeRange$.value.value/2))}}return t.\u0275fac=function(e){return new(e||t)(Mn(jU),Mn(Dq))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Pq=(()=&gt;{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Rf(t)}get inset(){return this._inset}set inset(t){this._inset=Rf(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-divider&quot;]],hostAttrs:[&quot;role&quot;,&quot;separator&quot;,1,&quot;mat-divider&quot;],hostVars:7,hostBindings:function(t,e){2&amp;t&amp;&amp;(ea(&quot;aria-orientation&quot;,e.vertical?&quot;vertical&quot;:&quot;horizontal&quot;),cl(&quot;mat-divider-vertical&quot;,e.vertical)(&quot;mat-divider-horizontal&quot;,!e.vertical)(&quot;mat-divider-inset&quot;,e.inset))},inputs:{vertical:&quot;vertical&quot;,inset:&quot;inset&quot;},decls:0,vars:0,template:function(t,e){},styles:[&quot;.mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n&quot;],encapsulation:2,changeDetection:0}),t})(),Rq=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[Fb],Fb]}),t})(),Fq=(()=&gt;{class t{constructor(t){this.viewContainerRef=t}ngOnInit(){const t=this.viewContainerRef.element.nativeElement;t.addEventListener(&quot;click&quot;,()=&gt;jp(this,void 0,void 0,function*(){const e=Date.now();t.disabled=!0,t.style.width=`${t.offsetWidth}px`,t.style.height=`${t.offsetHeight}px`;const i=t.children[0].innerHTML;t.children[0].innerHTML=&#39;\n&lt;mat-spinner role=&quot;progressbar&quot; mode=&quot;indeterminate&quot; class=&quot;async-button&quot;&gt;\n  &lt;svg class=&quot;async-button__svg&quot; preserveAspectRatio=&quot;xMidYMid meet&quot; focusable=&quot;false&quot; viewBox=&quot;0 0 16.4 16.4&quot;&gt;\n    &lt;circle class=&quot;async-button__circle&quot; cx=&quot;50%&quot; cy=&quot;50%&quot; r=&quot;7&quot;&gt;\n    &lt;/circle&gt;\n  &lt;/svg&gt;\n&lt;/mat-spinner&gt;&#39;;try{yield this.action()}finally{const n=Date.now()-e;n&lt;300&amp;&amp;(yield aU(300-n)),t.children[0].innerHTML=i,t.style.width=&quot;&quot;,t.style.height=&quot;&quot;,t.disabled=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;app-async-action&quot;,&quot;&quot;]],inputs:{action:[&quot;app-async-action&quot;,&quot;action&quot;]}}),t})();const Lq=[&quot;input&quot;],Bq=function(t){return{enterDuration:t}},zq=[&quot;*&quot;],Nq=new Ji(&quot;mat-checkbox-default-options&quot;,{providedIn:&quot;root&quot;,factory:Vq});function Vq(){return{color:&quot;accent&quot;,clickAction:&quot;check-indeterminate&quot;}}let $q=0;const Uq=Vq(),jq={provide:$y,useExisting:at(()=&gt;qq),multi:!0};class Hq{}const Gq=Nb(Bb(zb(Lb(class{constructor(t){this._elementRef=t}}))));let qq=(()=&gt;{class t extends Gq{constructor(t,e,i,n,s,r,o){super(t),this._changeDetectorRef=e,this._focusMonitor=i,this._ngZone=n,this._animationMode=r,this._options=o,this.ariaLabel=&quot;&quot;,this.ariaLabelledby=null,this._uniqueId=&quot;mat-checkbox-&quot;+ ++$q,this.id=this._uniqueId,this.labelPosition=&quot;after&quot;,this.name=null,this.change=new mh,this.indeterminateChange=new mh,this._onTouched=()=&gt;{},this._currentAnimationClass=&quot;&quot;,this._currentCheckState=0,this._controlValueAccessorChangeFn=()=&gt;{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Uq,this.color=this.defaultColor=this._options.color||Uq.color,this.tabIndex=parseInt(s)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=Rf(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=&gt;{t||Promise.resolve().then(()=&gt;{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&amp;&amp;(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=Rf(t);e!==this.disabled&amp;&amp;(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=Rf(t),e&amp;&amp;(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?&quot;true&quot;:this.indeterminate?&quot;mixed&quot;:&quot;false&quot;}_transitionCheckState(t){let e=this._currentCheckState,i=this._elementRef.nativeElement;if(e!==t&amp;&amp;(this._currentAnimationClass.length&gt;0&amp;&amp;i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length&gt;0)){i.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=&gt;{setTimeout(()=&gt;{i.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new Hq;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t),this._inputElement&amp;&amp;(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(t){var e;const i=null===(e=this._options)||void 0===e?void 0:e.clickAction;t.stopPropagation(),this.disabled||&quot;noop&quot;===i?!this.disabled&amp;&amp;&quot;noop&quot;===i&amp;&amp;(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&amp;&amp;&quot;check&quot;!==i&amp;&amp;Promise.resolve().then(()=&gt;{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t,e){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if(&quot;NoopAnimations&quot;===this._animationMode)return&quot;&quot;;let i=&quot;&quot;;switch(t){case 0:if(1===e)i=&quot;unchecked-checked&quot;;else{if(3!=e)return&quot;&quot;;i=&quot;unchecked-indeterminate&quot;}break;case 2:i=1===e?&quot;unchecked-checked&quot;:&quot;unchecked-indeterminate&quot;;break;case 1:i=2===e?&quot;checked-unchecked&quot;:&quot;checked-indeterminate&quot;;break;case 3:i=1===e?&quot;indeterminate-checked&quot;:&quot;indeterminate-unchecked&quot;}return`mat-checkbox-anim-${i}`}_syncIndeterminate(t){const e=this._inputElement;e&amp;&amp;(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Ec),Da(Nm),Da(iu),Yi(&quot;tabindex&quot;),Da(yb,8),Da(Nq,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-checkbox&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(Lq,5),Mh(dy,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._inputElement=t.first),Eh(t=Ih())&amp;&amp;(e.ripple=t.first)}},hostAttrs:[1,&quot;mat-checkbox&quot;],hostVars:12,hostBindings:function(t,e){2&amp;t&amp;&amp;(Tl(&quot;id&quot;,e.id),ea(&quot;tabindex&quot;,null),cl(&quot;mat-checkbox-indeterminate&quot;,e.indeterminate)(&quot;mat-checkbox-checked&quot;,e.checked)(&quot;mat-checkbox-disabled&quot;,e.disabled)(&quot;mat-checkbox-label-before&quot;,&quot;before&quot;==e.labelPosition)(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode))},inputs:{disableRipple:&quot;disableRipple&quot;,color:&quot;color&quot;,tabIndex:&quot;tabIndex&quot;,ariaLabel:[&quot;aria-label&quot;,&quot;ariaLabel&quot;],ariaLabelledby:[&quot;aria-labelledby&quot;,&quot;ariaLabelledby&quot;],id:&quot;id&quot;,labelPosition:&quot;labelPosition&quot;,name:&quot;name&quot;,required:&quot;required&quot;,checked:&quot;checked&quot;,disabled:&quot;disabled&quot;,indeterminate:&quot;indeterminate&quot;,ariaDescribedby:[&quot;aria-describedby&quot;,&quot;ariaDescribedby&quot;],value:&quot;value&quot;},outputs:{change:&quot;change&quot;,indeterminateChange:&quot;indeterminateChange&quot;},exportAs:[&quot;matCheckbox&quot;],features:[Wl([jq]),$o],ngContentSelectors:zq,decls:17,vars:21,consts:[[1,&quot;mat-checkbox-layout&quot;],[&quot;label&quot;,&quot;&quot;],[1,&quot;mat-checkbox-inner-container&quot;],[&quot;type&quot;,&quot;checkbox&quot;,1,&quot;mat-checkbox-input&quot;,&quot;cdk-visually-hidden&quot;,3,&quot;id&quot;,&quot;required&quot;,&quot;checked&quot;,&quot;disabled&quot;,&quot;tabIndex&quot;,&quot;change&quot;,&quot;click&quot;],[&quot;input&quot;,&quot;&quot;],[&quot;matRipple&quot;,&quot;&quot;,1,&quot;mat-checkbox-ripple&quot;,&quot;mat-focus-indicator&quot;,3,&quot;matRippleTrigger&quot;,&quot;matRippleDisabled&quot;,&quot;matRippleRadius&quot;,&quot;matRippleCentered&quot;,&quot;matRippleAnimation&quot;],[1,&quot;mat-ripple-element&quot;,&quot;mat-checkbox-persistent-ripple&quot;],[1,&quot;mat-checkbox-frame&quot;],[1,&quot;mat-checkbox-background&quot;],[&quot;version&quot;,&quot;1.1&quot;,&quot;focusable&quot;,&quot;false&quot;,&quot;viewBox&quot;,&quot;0 0 24 24&quot;,0,&quot;xml&quot;,&quot;space&quot;,&quot;preserve&quot;,&quot;aria-hidden&quot;,&quot;true&quot;,1,&quot;mat-checkbox-checkmark&quot;],[&quot;fill&quot;,&quot;none&quot;,&quot;stroke&quot;,&quot;white&quot;,&quot;d&quot;,&quot;M4.1,12.7 9,17.6 20.3,6.3&quot;,1,&quot;mat-checkbox-checkmark-path&quot;],[1,&quot;mat-checkbox-mixedmark&quot;],[1,&quot;mat-checkbox-label&quot;,3,&quot;cdkObserveContent&quot;],[&quot;checkboxLabel&quot;,&quot;&quot;],[2,&quot;display&quot;,&quot;none&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;label&quot;,0,1),Ra(2,&quot;span&quot;,2),Ra(3,&quot;input&quot;,3,4),Ha(&quot;change&quot;,function(t){return e._onInteractionEvent(t)})(&quot;click&quot;,function(t){return e._onInputClick(t)}),Fa(),Ra(5,&quot;span&quot;,5),La(6,&quot;span&quot;,6),Fa(),La(7,&quot;span&quot;,7),Ra(8,&quot;span&quot;,8),hi(),Ra(9,&quot;svg&quot;,9),La(10,&quot;path&quot;,10),Fa(),ui(),La(11,&quot;span&quot;,11),Fa(),Fa(),Ra(12,&quot;span&quot;,12,13),Ha(&quot;cdkObserveContent&quot;,function(){return e._onLabelTextChange()}),Ra(14,&quot;span&quot;,14),xl(15,&quot;\xa0&quot;),Fa(),Qa(16),Fa(),Fa()),2&amp;t){const t=oa(1),i=oa(13);ea(&quot;for&quot;,e.inputId),Sr(2),cl(&quot;mat-checkbox-inner-container-no-side-margin&quot;,!i.textContent||!i.textContent.trim()),Sr(1),Oa(&quot;id&quot;,e.inputId)(&quot;required&quot;,e.required)(&quot;checked&quot;,e.checked)(&quot;disabled&quot;,e.disabled)(&quot;tabIndex&quot;,e.tabIndex),ea(&quot;value&quot;,e.value)(&quot;name&quot;,e.name)(&quot;aria-label&quot;,e.ariaLabel||null)(&quot;aria-labelledby&quot;,e.ariaLabelledby)(&quot;aria-checked&quot;,e._getAriaChecked())(&quot;aria-describedby&quot;,e.ariaDescribedby),Sr(2),Oa(&quot;matRippleTrigger&quot;,t)(&quot;matRippleDisabled&quot;,e._isRippleDisabled())(&quot;matRippleRadius&quot;,20)(&quot;matRippleCentered&quot;,!0)(&quot;matRippleAnimation&quot;,eh(19,Bq,&quot;NoopAnimations&quot;===e._animationMode?0:150))}},directives:[dy,om],styles:[&quot;@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n&quot;],encapsulation:2,changeDetection:0}),t})(),Wq=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({}),t})(),Yq=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[py,Fb,am,Wq],Fb,Wq]}),t})();function Zq(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot; P\xe9riode invalide &quot;),Fa())}function Kq(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,2),Ra(1,&quot;mat-form-field&quot;),Ra(2,&quot;mat-label&quot;),xl(3,&quot;P\xe9riode&quot;),Fa(),Ra(4,&quot;mat-date-range-input&quot;,18),La(5,&quot;input&quot;,19),La(6,&quot;input&quot;,20),Fa(),La(7,&quot;mat-datepicker-toggle&quot;,21),La(8,&quot;mat-date-range-picker&quot;,null,22),ra(10,Zq,2,0,&quot;mat-error&quot;,23),Ra(11,&quot;mat-hint&quot;),xl(12,&quot;Les jours commencent \xe0 00:00 UTC&quot;),Fa(),Fa(),Fa()),2&amp;t){const t=oa(9),e=Za(2);Sr(4),Oa(&quot;rangePicker&quot;,t)(&quot;min&quot;,e.minDate)(&quot;max&quot;,e.maxDate),Sr(3),Oa(&quot;for&quot;,t),Sr(3),Oa(&quot;ngIf&quot;,e.form.controls.endTimestamp.invalid)}}function Xq(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;h5&quot;),xl(1,&quot;Donn\xe9es navire&quot;),Fa(),Ra(2,&quot;div&quot;,9),Ra(3,&quot;label&quot;),xl(4,&quot; Informations principales : &quot;),La(5,&quot;mat-checkbox&quot;,10),Fa(),Fa(),Ra(6,&quot;div&quot;,9),Ra(7,&quot;label&quot;),xl(8,&quot; Informations Lloyd&#39;s d\xe9taill\xe9es : &quot;),La(9,&quot;mat-checkbox&quot;,11),Fa(),Fa(),Ra(10,&quot;h5&quot;),xl(11,&quot;Donn\xe9es historiques&quot;),Fa(),Ra(12,&quot;div&quot;,12),Ra(13,&quot;div&quot;,2),Ra(14,&quot;div&quot;,9),Ra(15,&quot;label&quot;),xl(16,&quot; Traces : &quot;),La(17,&quot;mat-checkbox&quot;,13),Fa(),Fa(),Ra(18,&quot;div&quot;,9),Ra(19,&quot;label&quot;),xl(20,&quot; \xc9v\xe9nements : &quot;),La(21,&quot;mat-checkbox&quot;,14),Fa(),Fa(),Ra(22,&quot;div&quot;,9),Ra(23,&quot;label&quot;),xl(24,&quot; Alertes : &quot;),La(25,&quot;mat-checkbox&quot;,15),Fa(),Fa(),Ra(26,&quot;div&quot;,9),Ra(27,&quot;label&quot;),xl(28,&quot; Escales : &quot;),La(29,&quot;mat-checkbox&quot;,16),Fa(),Fa(),Fa(),ra(30,Kq,13,5,&quot;div&quot;,17),Fa()),2&amp;t){const t=Za();Sr(30),Oa(&quot;ngIf&quot;,t.includesTimeRangeData)}}function Qq(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h5&quot;),xl(1,&quot;Donn\xe9es a\xe9ronef&quot;),Fa(),Ra(2,&quot;div&quot;,9),Ra(3,&quot;label&quot;),xl(4,&quot; Informations principales : &quot;),La(5,&quot;mat-checkbox&quot;,24),Fa(),Fa(),Ra(6,&quot;div&quot;,9),Ra(7,&quot;label&quot;),xl(8,&quot; Traces (depuis le dernier d\xe9collage) : &quot;),La(9,&quot;mat-checkbox&quot;,25),Fa(),Fa())}function Jq(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,26),xl(1,&quot; Vous devez s\xe9lectionner au moins un type de donn\xe9es \xe0 exporter. &quot;),Fa())}let tW=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.formBuilder=t,this.data=e,this.exportService=i,this.timeRangeService=n,this.dialogRef=s,this.minDate=new Date(2019,4,1),this.maxDate=new Date(Date.now()+864e5),this.includesTimeRangeData=!1,this.exportData=()=&gt;jp(this,void 0,void 0,function*(){const t=this.form.value;yield this.exportService.exportData(Object.assign(Object.assign({},t),{mmsis:this.data.mmsis||[],icaos:this.data.icaos||[],startTimestamp:eq(t.startTimestamp||new Date),endTimestamp:eq(t.endTimestamp||new Date)}))})}ngOnInit(){if(!(this.data.icaos&amp;&amp;0!==this.data.icaos.length||this.data.mmsis&amp;&amp;0!==this.data.mmsis.length))throw new Error(&quot;missing params icaos or mmsis&quot;);const t=this.timeRangeService.timeRange$.value;this.form=this.formBuilder.group({includeShipInfos:[!1],includeLloydsInfos:[!1],startTimestamp:[new Date(1e3*t.start)],endTimestamp:[new Date(t.isRelative?Date.now()+864e5:1e3*t.end)],includeTrails:[!1],includeEvents:[!1],includeAlerts:[!1],includePortCalls:[!1],includeAircraftsInfos:[!1],includeAircraftsTrails:[!1]},{validators:Ky.compose([t=&gt;{const e=t.value;return e.includeAlerts||e.includeEvents||e.includeLloydsInfos||e.includePortCalls||e.includeShipInfos||e.includeTrails||e.includeAircraftsInfos||e.includeAircraftsTrails?null:{atLeastOneInclude:!0}},t=&gt;{const e=t.value;return this.includesTimeRangeData=e.includeAlerts||e.includeEvents||e.includePortCalls||e.includeTrails,t.controls.endTimestamp.setErrors(!this.includesTimeRangeData||e.startTimestamp&amp;&amp;e.endTimestamp?null:{invalidRange:!0}),null}])})}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(Da(Rw),Da(KS),Da(aW),Da(Oq),Da(YS))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-export-data-dialog&quot;]],features:[$o],decls:17,vars:7,consts:[[1,&quot;d-flex&quot;],[1,&quot;dialog-title&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;d-flex-column&quot;,&quot;pa-3&quot;,2,&quot;max-height&quot;,&quot;60vh&quot;,&quot;overflow&quot;,&quot;auto&quot;],[3,&quot;formGroup&quot;],[3,&quot;ngIf&quot;],[&quot;class&quot;,&quot;error-message mt-3&quot;,4,&quot;ngIf&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,1,&quot;d-block&quot;,&quot;mt-3&quot;,3,&quot;disabled&quot;,&quot;app-async-action&quot;],[1,&quot;my-2&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeShipInfos&quot;,1,&quot;mx-1&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeLloydsInfos&quot;,1,&quot;mx-1&quot;],[1,&quot;d-flex-center&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeTrails&quot;,1,&quot;mx-1&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeEvents&quot;,1,&quot;mx-1&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeAlerts&quot;,1,&quot;mx-1&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includePortCalls&quot;,1,&quot;mx-1&quot;],[&quot;class&quot;,&quot;u-flex&quot;,4,&quot;ngIf&quot;],[3,&quot;rangePicker&quot;,&quot;min&quot;,&quot;max&quot;],[&quot;matStartDate&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;startTimestamp&quot;,&quot;placeholder&quot;,&quot;D\xe9but&quot;],[&quot;matEndDate&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;endTimestamp&quot;,&quot;placeholder&quot;,&quot;Fin&quot;],[&quot;matSuffix&quot;,&quot;&quot;,3,&quot;for&quot;],[&quot;picker&quot;,&quot;&quot;],[4,&quot;ngIf&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeAircraftsInfos&quot;,1,&quot;mx-1&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;formControlName&quot;,&quot;includeAircraftsTrails&quot;,1,&quot;mx-1&quot;],[1,&quot;error-message&quot;,&quot;mt-3&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h1&quot;,1),xl(2,&quot; Choix des donn\xe9es \xe0 exporter &quot;),Fa(),La(3,&quot;div&quot;,2),Ra(4,&quot;button&quot;,3),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;close&quot;),Fa(),Fa(),Fa(),La(7,&quot;mat-divider&quot;),Ra(8,&quot;div&quot;,4),Ra(9,&quot;form&quot;,5),Ra(10,&quot;div&quot;),xl(11),Fa(),ra(12,Xq,31,1,&quot;ng-template&quot;,6),ra(13,Qq,10,0,&quot;ng-template&quot;,6),ra(14,Jq,2,0,&quot;div&quot;,7),Ra(15,&quot;button&quot;,8),xl(16,&quot; Exporter &quot;),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;formGroup&quot;,e.form),Sr(2),Cl(&quot;Vous vous appr\xeatez \xe0 exporter les donn\xe9es &quot;,e.data.label,&quot;.&quot;),Sr(1),Oa(&quot;ngIf&quot;,(null==e.data.mmsis?null:e.data.mmsis.length)&gt;0),Sr(1),Oa(&quot;ngIf&quot;,(null==e.data.icaos?null:e.data.icaos.length)&gt;0),Sr(1),Oa(&quot;ngIf&quot;,e.form.touched&amp;&amp;(null==e.form.errors?null:e.form.errors.atLeastOneInclude)),Sr(1),Oa(&quot;disabled&quot;,e.form.invalid)(&quot;app-async-action&quot;,e.exportData))},directives:[Ry,nk,hE,Pq,nw,Cx,uw,Nd,Fq,qq,wx,vw,gC,oC,zS,FS,Hy,LS,OS,uC,NS,rC,tC],styles:[&quot;.dialog-title[_ngcontent-%COMP%]{margin:0;padding:16px}&quot;]}),t})();var eW=i(3492);function iW(t,e,i){const n=new Blob([t],{type:i});nW(URL.createObjectURL(n),e)}function nW(t,e){const i=document.createElement(&quot;a&quot;);document.body.appendChild(i),i.type=&quot;hidden&quot;,i.href=t,i.download=e,i.target=&quot;_blank&quot;,i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}function sW(t){return&quot;&quot;+t.split(&quot;&quot;).map(Number).reduce((t,e)=&gt;t+e,0)%10}function rW(t,e,i){const n=function(t){const e=sV(t+180,360)-180,i=Math.abs(3600*e);let n=Math.floor(i/3600),s=(i-3600*n)/60;return s&gt;=60&amp;&amp;(s=0,n+=1),`${n}${z$(s,2,0)}`}(t).padStart(e,&quot;0&quot;);return`${n}${t&gt;0?i[0]:i[1]}${sW(n)}`}function oW(t){return t.length&gt;1e4&amp;&amp;(t=t.slice(0,1e4)),`MSGID/ANAIS/GOLD/0001/${QG().toLocaleString(&quot;en-US&quot;,{month:&quot;short&quot;}).toUpperCase()}\n${t.map((t,e)=&gt;function(t,e){const i=new Date(1e3*t.timestamp);let n=`${z$(i.getUTCDate(),2,0)}${z$(i.getUTCHours(),2,0)}${z$(i.getUTCMinutes(),2,0)}`;return n+=&quot;Z&quot;+sW(n),`CTC/T${z$(e,4,0)}/UNEQUATED-${(function(t){return t?null==t?void 0:t.replace(/\//g,&quot;-&quot;):&quot;&quot;}(t.name)||&quot;UNDEFINED&quot;).toUpperCase()}//UNK///${&quot;undefined&quot;!==t.country.iso2?t.country.iso2.toUpperCase():&quot;ZZ&quot;}////18///0\nPOS/${n}/${i.toLocaleString(&quot;en-US&quot;,{month:&quot;short&quot;}).toUpperCase()}/${rW(t.lat,4,&quot;NS&quot;)}/${rW(t.lon,5,&quot;EW&quot;)}/AIS////${t.numberCog.toFixed(1)}T/${t.numberSog.toFixed(1)}K/ALT000\nAIS/${t.mmsi}/${t.imo||&quot;-&quot;}`}(t,e)).join(&quot;\n&quot;)}\nENDAT`}let aW=(()=&gt;{class t{constructor(t,e,i,n,s,r){this.dialog=t,this.historyService=e,this.mapConfigService=i,this.uiService=n,this.workerService=s,this.zonesService=r}registerVisibleAircraftsCallback(t){this.getVisibleAircraftsFn=t}registerVisibleShipsCallback(t){this.getVisibleShipsFn=t}exportVisiblePositions(t){let e=this.historyService.timestamp$.value;0===e&amp;&amp;(e=eq(new Date));const i=nq(e);let n=!1;const s=this.mapConfigService.showShipsLayer$.value;if(s){const e=this.getVisibleShipsFn();e.length&amp;&amp;(n=!0,&quot;CSV&quot;===t?iW(function(t){return[[&quot;timestamp&quot;,&quot;lon&quot;,&quot;lat&quot;,&quot;hdms&quot;,&quot;mmsi&quot;,&quot;imo&quot;,&quot;callsign&quot;,&quot;name&quot;,&quot;flag&quot;,&quot;cargo&quot;,&quot;type&quot;,&quot;cog&quot;,&quot;hdg&quot;,&quot;sog&quot;,&quot;length&quot;,&quot;width&quot;,&quot;draught&quot;,&quot;destination&quot;,&quot;departure&quot;,&quot;eta&quot;].join(&quot;,&quot;),...t.map(t=&gt;function(t){return[sq(1e3*t.timestamp),t.lon,t.lat,t.hdms,t.mmsi,t.imo,t.callsign,gU(t.name),t.country.flag,t.cargo,t.shipType.key,t.cog,t.hdg,t.sog,t.length,t.width,t.draught,gU(t.destination),gU(t.departure),t.eta]}(t).join(&quot;,&quot;))].join(&quot;\n&quot;)}(e),`anais-pistes-ships-${i}.csv`,&quot;text/csv&quot;):e.length&gt;1e4?this.uiService.confirm({title:&quot;Confirmer l&#39;export&quot;,message:&quot;La vue courante contient trop de navires. Le message OTH-T-GOLD n&#39;en contiendra que 10000.&quot;,action:t=&gt;{t&amp;&amp;iW(oW(e.slice(0,1e4)),`anais-pistes-ships-${i}.gold`,&quot;text/plain&quot;)}}):iW(oW(e),`anais-pistes-ships-${i}.gold`,&quot;text/plain&quot;))}const r=this.mapConfigService.showAircraftsLayer$.value;if(r){const e=this.getVisibleAircraftsFn();e.length&amp;&amp;(n=!0,&quot;CSV&quot;===t&amp;&amp;iW(function(t){return[[&quot;icao&quot;,&quot;callsign&quot;,&quot;squawk&quot;,&quot;type&quot;,&quot;timestamp&quot;,&quot;lon&quot;,&quot;lat&quot;,&quot;hdms&quot;,&quot;altitude&quot;].join(&quot;,&quot;),...t.map(t=&gt;function(t){return[t.icao,t.callsign,t.squawk,t.type,sq(1e3*t.timestamp),t.lon,t.lat,V$([t.lon,t.lat]),t.altitude]}(t).join(&quot;,&quot;))].join(&quot;\n&quot;)}(e),`anais-pistes-aircrafts-${i}.csv`,&quot;text/csv&quot;))}if(!n){const t=[s&amp;&amp;&quot;navire&quot;,r&amp;&amp;&quot;a\xe9ronef&quot;].filter(t=&gt;!!t).join(&quot; ou &quot;)||&quot;navire ou a\xe9ronef&quot;;this.uiService.error(`La vue courante ne contient aucun ${t}`)}}getEntitiesInExtent(t){const e=[];return this.mapConfigService.showShipsLayer$.value&amp;&amp;e.push(...this.getVisibleShipsFn(t)),this.mapConfigService.showAircraftsLayer$.value&amp;&amp;e.push(...this.getVisibleAircraftsFn(t)),e}openExportDataDialog(t){this.dialog.open(tW,{panelClass:&quot;no-border-dialog&quot;,maxHeight:&quot;90vh&quot;,maxWidth:&quot;90vw&quot;,minWidth:&quot;300px&quot;,autoFocus:!1,closeOnNavigation:!0,hasBackdrop:!0,data:t})}exportData(t){return jp(this,void 0,void 0,function*(){(yield this.workerService.export.exportEntitiesData(t,{zonesById:this.zonesService.zonesById})).forEach(t=&gt;{nW(t.url,t.filename)})})}openExportDataDialogForCurrentView(){let t=!1;const e=[],i=this.mapConfigService.showShipsLayer$.value;i&amp;&amp;(e.push(...this.getVisibleShipsFn().map(t=&gt;t.mmsi)),t=e.length&gt;0);const n=[],s=this.mapConfigService.showAircraftsLayer$.value;if(s&amp;&amp;(n.push(...this.getVisibleAircraftsFn().map(t=&gt;t.icao)),t=n.length&gt;0),t)this.openExportDataDialog({icaos:n,mmsis:e,label:&quot;des entit\xe9s visibles&quot;});else{const t=[i&amp;&amp;&quot;navire&quot;,s&amp;&amp;&quot;a\xe9ronef&quot;].filter(t=&gt;!!t).join(&quot; ou &quot;)||&quot;navire ou a\xe9ronef&quot;;this.uiService.error(`La vue courante ne contient aucun ${t}`)}}}return t.\u0275fac=function(e){return new(e||t)(Mn(ek),Mn(Dj),Mn(HU),Mn(fH),Mn(Jj),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const lW=[&quot;assets/images/2016mtln170_003.jpg&quot;,&quot;assets/images/adsbexchange-icon.png&quot;,&quot;assets/images/aircraft.png&quot;,&quot;assets/images/alert-dubious-move.svg&quot;,&quot;assets/images/alert-erratic-route.svg&quot;,&quot;assets/images/alert-no-position.svg&quot;,&quot;assets/images/alert-transhipment.svg&quot;,&quot;assets/images/anchor.svg&quot;,&quot;assets/images/arrow-chevron.png&quot;,&quot;assets/images/danger.svg&quot;,&quot;assets/images/favicon_anais.png&quot;,&quot;assets/images/favicon_anais.svg&quot;,&quot;assets/images/filter.svg&quot;,&quot;assets/images/flag-undefined.svg&quot;,&quot;assets/images/fleets.svg&quot;,&quot;assets/images/flightradar24-icon.png&quot;,&quot;assets/images/glitter-star.png&quot;,&quot;assets/images/help-firefox-mixed-content-tutorial.png&quot;,&quot;assets/images/hexagon.svg&quot;,&quot;assets/images/layers.svg&quot;,&quot;assets/images/lifeline.png&quot;,&quot;assets/images/lloyds-icon.png&quot;,&quot;assets/images/login_background.jpg&quot;,&quot;assets/images/logo_anais.png&quot;,&quot;assets/images/logo_anais.svg&quot;,&quot;assets/images/logo_fabnum.png&quot;,&quot;assets/images/marinetraffic-icon.png&quot;,&quot;assets/images/point.png&quot;,&quot;assets/images/port.png&quot;,&quot;assets/images/ship.png&quot;,&quot;assets/images/tchap-logo.png&quot;,&quot;assets/images/tooltips-mini.svg&quot;,&quot;assets/images/tooltips.svg&quot;,&quot;assets/images/trail-detailed.svg&quot;,&quot;assets/images/trail-simple.svg&quot;,&quot;assets/images/zones.svg&quot;],cW=[&quot;assets/geo/Limite_3milles_peche_WGS84_EPSG4326.geojson&quot;,&quot;assets/geo/Limite_6milles_bande_cotiere_peche_WGS84_EPSG4326.geojson&quot;,&quot;assets/geo/Delim_accord_WGS84.geojson&quot;,&quot;assets/geo/Lignes_base_droites_WGS84.geojson&quot;,&quot;assets/geo/Lim_ext_MT_WGS84.geojson&quot;,&quot;assets/geo/Lim_ext_PC_WGS84.geojson&quot;,&quot;assets/geo/Lim_ext_ZC_WGS84.geojson&quot;,&quot;assets/geo/Lim_ext_ZEE_WGS84.geojson&quot;,&quot;assets/geo/Lim_sans_accord_WGS84.geojson&quot;,&quot;assets/geo/mrcc_2020-08-03.geojson&quot;,&quot;assets/geo/sar_2020-08-03.geojson&quot;,&quot;assets/geo/french-srr.geojson&quot;,&quot;assets/geo/UK_12M_Limit.geojson&quot;,&quot;assets/geo/UK_6M_Limit.geojson&quot;,&quot;assets/geo/zonex.atlan.2021.geojson&quot;,&quot;assets/geo/zonex.atlan.tirs.2021.corrected.geojson&quot;,&quot;assets/geo/zonex.med.corrected.geojson&quot;];let hW=(()=&gt;{class t{constructor(t,e,i,n,s,r,o){this.alertRulesService=t,this.authenticationService=e,this.exportService=i,this.mapConfigService=n,this.mapService=s,this.uiService=r,this.workerService=o,this.setupActive$=new Qp(!1),this.loading=!1,this.viewExtent$=new Qp(null),this.downloadProgress$=new Qp(null),this.offlineConfig$=new Qp(null),this.isOffline$=new Qp(!1),this.invalidIndexedDB=!1,this.offlineConfig$.subscribe(t=&gt;{this.isOffline$.next(!!t)})}init(){var t;return jp(this,void 0,void 0,function*(){const e=!!(null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller);let i;if(e&amp;&amp;(i=yield new Promise((t,e)=&gt;{const i=new MessageChannel;navigator.serviceWorker.controller.postMessage(&quot;state:info&quot;,[i.port2]),i.port1.onmessage=e=&gt;{t(e.data),i.port1.close()},setTimeout(e,5e3)})),e&amp;&amp;&quot;setup&quot;===i)return;try{this.offlineUserData=yield xq(kq)}catch(s){return void(this.invalidIndexedDB=!0)}const n=yield xq(Sq);if(e&amp;&amp;&quot;ready&quot;===i&amp;&amp;n&amp;&amp;this.offlineUserData)return this.offlineConfig$.next(n),this.workerService.setOffline(!0),yield this.workerService.offline.loadFromIDB(),void this.mapService.hasBooted$.pipe(Sf(1),gf(t=&gt;t),FO(),Ej(0)).subscribe(()=&gt;{this.workerService.offline.triggerShipFeed()});e||n||this.offlineUserData?(yield this.exitOfflineMode(),yield aU(5e3)):this.workerService.setOffline(!1)})}getOfflineData(){return this.offlineUserData}enterSetupMode(){this.setupActive$.next(!0),this.mapConfigService.showShipsLayer$.value||this.mapConfigService.toggleShipsLayer()}exitSetupMode(){this.setupActive$.next(!1)}loadOfflineData(t){var e,i;return jp(this,void 0,void 0,function*(){try{this.loading=!0;const e=this.mapConfigService.baseLayer$.value.source,i=e.getTileUrlFunction(),n=e.getTilePixelRatio(),s=this.mapService.view$.value.projection,r=e.getTileGrid(),o=r.getZForResolution(this.mapService.view$.value.resolution),a=LV(this.viewExtent$.value,&quot;EPSG:4326&quot;,&quot;EPSG:3857&quot;),l=this.exportService.getVisibleShipsFn(a).map(t=&gt;t.mmsi),c=yield this.workerService.ships.getLatestTimestamp(),h={extent:this.viewExtent$.value,mercatorExtent:a,minZoom:o,maxZoom:t.maxZoom,startTimestamp:c-t.timeRange,endTimestamp:c,includeAdditionalLayers:t.includeAdditionalLayers,includeTrails:t.includeTrails,includeEvents:t.includeEvents,includeAlerts:t.includeAlerts,includeLloydsInfos:t.includeLloydsInfos,includePortCalls:t.includePortCalls,shipFilter:lU(this.mapConfigService.shipFilter$.value)};if(yield this.workerService.application.logUserActivity(&quot;offline-load&quot;,Object.assign(Object.assign({},t),{zoomLevels:1+t.maxZoom-o,shipsCount:l.length})),this.mapConfigService.showAircraftsLayer$.value&amp;&amp;this.mapConfigService.toggleAircraftsLayer(),!(&quot;serviceWorker&quot;in navigator))throw new Error(&quot;Services workers non support\xe9s par votre navigateur. Mode hors-ligne non disponible.&quot;);yield navigator.serviceWorker.register(&quot;/service-worker.js&quot;,{scope:&quot;/&quot;}),yield aU(500),navigator.serviceWorker.controller.postMessage(&quot;state:setup&quot;),yield aU(50),this.workerService.setOffline(!0),this.offlineConfig$.next(h);const u=new Cq({numberOfSteps:2+(h.includeAdditionalLayers?1:0)+(h.includeTrails?1:0)+(h.includeEvents?1:0)+(h.includeAlerts?1:0)+(h.includeLloydsInfos?1:0)+(h.includePortCalls?1:0)});let d;u.progress$.subscribe(t=&gt;{this.downloadProgress$.next(t)}),yield u.execute({title:&quot;T\xe9l\xe9chargement des modules ANAIS&quot;,total:lW.length+1,action:t=&gt;jp(this,void 0,void 0,function*(){d=yield function(t){return jp(this,void 0,void 0,function*(){return new Promise((t,e)=&gt;{const i=document.createElement(&quot;iframe&quot;);i.onload=()=&gt;{t(i)},i.onerror=e,i.src=&quot;/__offline-assets&quot;,document.body.appendChild(i)})})}(),t(),yield Promise.all(lW.map(e=&gt;jp(this,void 0,void 0,function*(){yield fetch(e),t()})))})});const[p,f,m,g]=yield Promise.all([this.workerService.groups.listGroups(),this.workerService.annotations.list(),this.workerService.fleets.list(),this.workerService.zones.list()]);yield wq(kq,{groups:p,rules:this.alertRulesService.alertRules$.value,annotations:f,fleets:m,zones:g,user:this.authenticationService.user$.value});const A=[];for(let t=o;t&lt;=h.maxZoom;t++)r.forEachTileCoord(a,t,t=&gt;{const r=i.call(e,t,n,s);A.push(r)});yield u.execute({title:&quot;T\xe9l\xe9chargement des tuiles de carte&quot;,total:A.length,action:t=&gt;jp(this,void 0,void 0,function*(){yield Promise.all(A.map(e=&gt;jp(this,void 0,void 0,function*(){yield function(t){return jp(this,void 0,void 0,function*(){return new Promise((e,i)=&gt;{const n=new Image;n.crossOrigin=&quot;Anonymous&quot;,n.onload=e,n.onerror=i,n.src=t,n.remove()})})}(e),t()})))})}),h.includeAdditionalLayers&amp;&amp;(yield u.execute({title:&quot;T\xe9l\xe9chargement des couches additionnelles&quot;,total:cW.length,action:t=&gt;jp(this,void 0,void 0,function*(){yield Promise.all(cW.map(e=&gt;jp(this,void 0,void 0,function*(){yield fetch(e),t()})))})})),yield this.workerService.offline.initialize(h,l,Wj(t=&gt;{this.downloadProgress$.next(t)})),yield wq(Sq,h),d.remove(),navigator.serviceWorker.controller.postMessage(&quot;state:ready&quot;),yield aU(50)}catch(n){throw this.offlineConfig$.next(null),this.workerService.setOffline(!1),null===(i=null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller)||void 0===i||i.postMessage(&quot;state:disabled&quot;),n}finally{this.downloadProgress$.next(null),this.loading=!1}})}updateOfflineData(){return jp(this,void 0,void 0,function*(){this.loading=!0;const t=this.offlineConfig$.value,e=t.endTimestamp;t.endTimestamp=yield this.workerService.ships.getLatestTimestamp();try{yield this.workerService.application.logUserActivity(&quot;offline-update&quot;,{interval:t.endTimestamp-e}),this.offlineConfig$.next(t),yield this.workerService.offline.update(t.endTimestamp,Wj(t=&gt;{this.downloadProgress$.next(t)})),yield wq(Sq,t)}catch(i){throw t.endTimestamp=e,this.offlineConfig$.next(t),i}finally{this.downloadProgress$.next(null),this.loading=!1}})}exitOfflineMode(){var t,e;return jp(this,void 0,void 0,function*(){yield function(t=yq()){return t(&quot;readwrite&quot;,t=&gt;(t.clear(),_q(t.transaction)))}(),null===(e=null===(t=navigator.serviceWorker)||void 0===t?void 0:t.controller)||void 0===e||e.postMessage(&quot;unregister&quot;),this.workerService.setOffline(!1)})}updateViewBox(t){this.viewExtent$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(TH),Mn(tH),Mn(aW),Mn(HU),Mn(kj),Mn(fH),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),uW=(()=&gt;{class t{constructor(t,e,i,n,s,r){this.historyService=t,this.mapConfigService=e,this.offlineService=i,this.timeRangeService=n,this.workerService=s,this.zonesService=r,this.shipsInView$=new Qp([]),this.shipsInViewCount$=new Qp(0),this.shipsCount$=new Qp(0)}fetchShip(t,e){return jp(this,void 0,void 0,function*(){let i;if(this.offlineService.isOffline$.value)i=yield this.workerService.offline.getShipDetail(t);else{i=yield this.workerService.ships.getShip(t);let n=null!=e?e:this.timeRangeService.timeRange$.value;if(!n.isCustom){const t=this.historyService.timestamp$.value;n=n.setRelative(t&gt;0?t:i.timestamp)}Object.assign(i,yield this.workerService.ships.getShipDetails(t,n,+i.imo,this.mapConfigService.detailedShipTraces$.value,this.mapConfigService.debugH3Trace$.value,!!window.__anaisSettings.PORTCALLS_ENABLE,!!e))}return i.trail.forEach(t=&gt;{t.ship=i}),i.h3Trace.elements.forEach(t=&gt;{t.ship=i}),i.events=i.events.filter(t=&gt;t.type!==NH.MoveZoneEntry&amp;&amp;t.type!==NH.MoveZoneExit||!!this.zonesService.zonesById[t.data.zone]),i})}}return t.\u0275fac=function(e){return new(e||t)(Mn(Dj),Mn(HU),Mn(hW),Mn(Oq),Mn(Jj),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),dW=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a,l,c,h,u){this.ngZone=t,this.router=e,this.errorHandler=i,this.alertRulesService=n,this.eventsLayerService=s,this.h3TracesLayerService=r,this.mapConfigService=o,this.mapStateService=a,this.offlineService=l,this.shipsService=c,this.timeRangeService=h,this.workerService=u,this.entities$=new Qp([]),this.openEntity$=new Qp(null),this.alerts$=new Qp([]),this.trails$=new Qp([]),this.mustHideEntities=!1,this.shipsMaxTimestamp=0,this.mapStateService.mustHideEntities$.subscribe(t=&gt;{this.mustHideEntities=t}),this.entities$.pipe(M(t=&gt;t.filter(t=&gt;!!t.entity))).subscribe(t=&gt;{const e=[],i=[],n=[],s=[];t.forEach(t=&gt;{var r,o,a;t.type===OH.Aircraft?e.push(t.entity.trace):t.type===OH.Ship&amp;&amp;(n.push(...null!==(r=t.entity.alerts)&amp;&amp;void 0!==r?r:[]),s.push(...null!==(o=t.entity.events)&amp;&amp;void 0!==o?o:[]),e.push(t.entity.trail),i.push(null!==(a=t.entity.h3Trace)&amp;&amp;void 0!==a?a:[]))}),n.forEach(t=&gt;{const[e,i]=this.alertRulesService.getAlertRuleColor(t.rule_id);t.color=e,t.rgbVecColor=i}),this.alerts$.next(n),this.eventsLayerService.updateEvents(s),this.trails$.next(e),this.h3TracesLayerService.updateTrails(i)}),W(this.mapConfigService.detailedShipTraces$.pipe(Sf(1)),this.timeRangeService.timeRange$.pipe(hg(),gf(([t,e])=&gt;t.key!==e.key||&quot;custom&quot;===t.key))).pipe(gf(()=&gt;!this.mustHideEntities)).subscribe(()=&gt;jp(this,void 0,void 0,function*(){yield Promise.all(this.entities$.value.map(t=&gt;jp(this,void 0,void 0,function*(){yield this.fetchEntity(t.type,t.id)})))})),this.timeRangeService.timeRange$.pipe(hg(),gf(([t,e])=&gt;t.key===e.key&amp;&amp;&quot;custom&quot;!==t.key),pg(()=&gt;jp(this,void 0,void 0,function*(){return this.workerService.ships.getLatestTimestamp()})),gf(t=&gt;t!==this.shipsMaxTimestamp&amp;&amp;this.entities$.value.length&gt;0)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){const e=new TU({key:&quot;custom&quot;,isCustom:!0,start:this.shipsMaxTimestamp-900,end:t});this.shipsMaxTimestamp=t,yield Promise.all(this.entities$.value.map(t=&gt;jp(this,void 0,void 0,function*(){yield this.fetchEntity(t.type,t.id,e)})))})),this.mapConfigService.enableMultiSelectionMode$.subscribe(t=&gt;{t||(this.openEntity$.value?this.entities$.next([this.openEntity$.value]):this.entities$.value.length&gt;1&amp;&amp;this.entities$.next([this.entities$.value[0]]))})}clear(){this.entities$.next([])}selectShip(t){this.toggleSelection(OH.Ship,t)}selectAircraft(t){this.toggleSelection(OH.Aircraft,t)}openEntity(t,e){const i=this.entities$.value.find(i=&gt;i.type===t&amp;&amp;i.id===e);i?this.openEntity$.next(i):(this.toggleSelection(t,e),this.openEntity$.next(this.entities$.value[this.entities$.value.length-1]))}closeOpenEntity(){this.openEntity$.next(null),this.mapConfigService.enableMultiSelectionMode$.value||this.entities$.next([])}toggleSelection(t,e){var i;let n=this.entities$.value;const s=n.findIndex(t=&gt;t.id===e);if(-1===s){nz({category:&quot;app&quot;,message:`select-entity: ${t}`});const i={type:t,id:e,entity:null};this.mapConfigService.enableMultiSelectionMode$.value||(n=[],this.ngZone.run(()=&gt;{const i=WH(this.router);this.router.navigateByUrl(`${i}/${t}s/${e}`)})),(()=&gt;{jp(this,void 0,void 0,function*(){this.entities$.value.every(t=&gt;t.type!==OH.Ship)&amp;&amp;!this.offlineService.isOffline$.value&amp;&amp;(this.shipsMaxTimestamp=yield this.workerService.ships.getLatestTimestamp()),yield this.fetchEntity(t,e)})})(),n.push(i)}else{if(nz({category:&quot;app&quot;,message:`unselect-entity: ${t}`}),n[s].id===(null===(i=this.openEntity$.value)||void 0===i?void 0:i.id)){const t=WH(this.router)||&quot;/&quot;;this.router.navigateByUrl(t)}n.splice(s,1)}this.entities$.next(n)}addToSelection(t,e){-1===this.entities$.value.findIndex(t=&gt;t.id===e)&amp;&amp;this.toggleSelection(t,e)}fetchEntity(t,e,i){var n;return jp(this,void 0,void 0,function*(){let s=null,r=null;try{if(t===OH.Ship){s=yield this.shipsService.fetchShip(e,i);const r=null===(n=this.entities$.value.find(i=&gt;i.type===t&amp;&amp;i.id===e))||void 0===n?void 0:n.entity;i&amp;&amp;r&amp;&amp;(s.alerts=s.alerts.concat(qH(r.alerts,t=&gt;t.start&lt;i.start)),s.events=s.events.concat(qH(r.events,t=&gt;t.timestamp&lt;i.start)),s.portCallEvents=s.portCallEvents.concat(qH(r.portCallEvents,t=&gt;t.timestamp&lt;i.start)),s.trail=s.trail.concat(qH(r.trail,t=&gt;t.timestamp&lt;i.start)))}else t===OH.Aircraft&amp;&amp;(s=yield this.workerService.aircrafts.getAircraftDetails(e))}catch(o){o.name===oz.Unauthorized&amp;&amp;this.errorHandler.handleError(o),r=o.message.includes(`GetTrip ERROR : ${e} dont find`)?`L&#39;a\xe9ronef ${e} est inconnu. Il a d\xfb atterrir ou son signal n&#39;est plus capt\xe9 depuis plus de 5 minutes.`:&quot;not found&quot;===o.message?`Le navire ${e} est inconnu.`:o.message}this.updateEntity(t,e,s,r)})}updateEntity(t,e,i,n){const s=this.entities$.value.findIndex(i=&gt;i.type===t&amp;&amp;i.id===e);if(-1===s)return;const r=Object.assign(Object.assign({},this.entities$.value[s]),{entity:i,error:n});this.entities$.value[s]=r,this.entities$.next(this.entities$.value);const o=this.openEntity$.value;o&amp;&amp;o.type===t&amp;&amp;o.id===e&amp;&amp;this.openEntity$.next(r)}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu),Mn(dF),Mn(Ps),Mn(TH),Mn(YH),Mn(ZH),Mn(HU),Mn(vq),Mn(hW),Mn(uW),Mn(Oq),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();class pW{constructor(t){this.closingNotifier=t}call(t,e){return e.subscribe(new fW(t,this.closingNotifier))}}class fW extends V{constructor(t,e){super(t),this.buffer=[],this.add($(e,new N(this)))}_next(t){this.buffer.push(t)}notifyNext(){const t=this.buffer;this.buffer=[],this.destination.next(t)}}let mW=(()=&gt;{class t{constructor(t){this.mapStateService=t,this.hoveredAircraft$=new Qp(null),this.hoveredAlert$=new Qp(null),this.hoveredAnnotation$=new Qp(null),this.hoveredEvent$=new Qp(null),this.hoveredShip$=new Qp(null),this.hoveredAircraftPosition$=new Qp(null),this.hoveredShipPosition$=new Qp(null),this.hoveredPort$=new Qp(null),this.hoveredH3Element$=new Qp(null),this.pinnedEntitiesTooltips$=new Qp([]),this.pinEvents$=new S,this.displayedEntity$=QT([this.hoveredAircraft$.pipe(Mf()),this.hoveredAlert$.pipe(Mf()),this.hoveredEvent$.pipe(Mf()),this.hoveredShip$.pipe(Mf()),this.hoveredAircraftPosition$.pipe(Mf()),this.hoveredShipPosition$.pipe(Mf()),this.hoveredAnnotation$.pipe(Mf((t,e)=&gt;null===e&amp;&amp;t===e)),this.hoveredH3Element$.pipe(Mf())]).pipe(M(([t,e,i,n,s,r,o,a])=&gt;{var l,c,h,u,d,p,f;return null!==(f=null!==(p=null!==(d=null!==(u=null!==(h=null!==(c=null!==(l=null!=e?e:i)&amp;&amp;void 0!==l?l:t)&amp;&amp;void 0!==c?c:n)&amp;&amp;void 0!==h?h:s)&amp;&amp;void 0!==u?u:r)&amp;&amp;void 0!==d?d:o)&amp;&amp;void 0!==p?p:a)&amp;&amp;void 0!==f?f:null}),nf(t=&gt;{t&amp;&amp;(t.hdms=this.mapStateService.coordinateSystem$.value.format([t.lon,t.lat]))})),this.pinEvents$.pipe(function(t){return function(e){return e.lift(new pW(t))}}(this.pinEvents$.pipe(df(50))),M(t=&gt;{var e,i,n,s,r,o,a;return null!==(a=null!==(o=null!==(r=null!==(s=null!==(n=null!==(i=null!==(e=t.find(t=&gt;t.kind===OH.Alert))&amp;&amp;void 0!==e?e:t.find(t=&gt;t.kind===OH.Event))&amp;&amp;void 0!==i?i:t.find(t=&gt;t.kind===OH.Ship))&amp;&amp;void 0!==n?n:t.find(t=&gt;t.kind===OH.AircraftPosition))&amp;&amp;void 0!==s?s:t.find(t=&gt;t.kind===OH.ShipPosition))&amp;&amp;void 0!==r?r:t.find(t=&gt;t.kind===OH.PortClickEvent))&amp;&amp;void 0!==o?o:t.find(t=&gt;t.kind===OH.Annotation))&amp;&amp;void 0!==a?a:t.find(t=&gt;t.kind===OH.H3Element)}),gf(t=&gt;!!t)).subscribe(t=&gt;{t.kind===OH.Annotation?t=lU(t):t.hdms=this.mapStateService.coordinateSystem$.value.format([t.lon,t.lat]),this.pinnedEntitiesTooltips$.value.push({lon:t.lon,lat:t.lat,positioning:&quot;bottom-left&quot;,entity:t}),this.pinnedEntitiesTooltips$.next(this.pinnedEntitiesTooltips$.value)})}hoverEntity(t,e){switch(t){case OH.Aircraft:e&amp;&amp;(e.kind=OH.Aircraft),this.hoveredAircraft$.next(e);break;case OH.Alert:e&amp;&amp;(e.kind=OH.Alert),this.hoveredAlert$.next(e);break;case OH.Annotation:e&amp;&amp;(e.kind=OH.Annotation),this.hoveredAnnotation$.next(e);break;case OH.Event:e&amp;&amp;(e.kind=OH.Event),this.hoveredEvent$.next(e);break;case OH.Ship:this.hoveredShip$.next(e);break;case OH.AircraftPosition:e&amp;&amp;(e.kind=OH.AircraftPosition),this.hoveredAircraftPosition$.next(e);break;case OH.ShipPosition:e&amp;&amp;(e.kind=OH.ShipPosition),this.hoveredShipPosition$.next(e);break;case OH.H3Element:e&amp;&amp;(e.kind=OH.H3Element),this.hoveredH3Element$.next(e);break;default:throw new Error(&quot;Entit\xe9 inconnue&quot;)}}clearPinnedEntities(){this.pinnedEntitiesTooltips$.next([])}pinEntity(t){this.pinEvents$.next(t)}unpinTooltip(t){this.pinnedEntitiesTooltips$.next(this.pinnedEntitiesTooltips$.value.filter(e=&gt;e!==t))}}return t.\u0275fac=function(e){return new(e||t)(Mn(vq))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),gW=(()=&gt;{class t{constructor(t,e,i){this.ngZone=t,this.selectionService=e,this.tooltipsService=i,this.selectAlertFeature$=new S,this.selectEventFeature$=new S,this.selectEventItem$=new S,this.mapClickEvents$=new S,this.ngZone.runOutsideAngular(()=&gt;{this.mapClickEvents$.pipe(function(t){let e=arguments.length,i=uf;E(arguments[arguments.length-1])&amp;&amp;(i=arguments[arguments.length-1],e--);let n=null;e&gt;=2&amp;&amp;(n=arguments[1]);let s=Number.POSITIVE_INFINITY;return e&gt;=3&amp;&amp;(s=arguments[2]),function(e){return e.lift(new VH(t,n,s,i))}}(16),M(t=&gt;{var e,i,n,s,r,o,a,l;return null!==(l=null!==(a=null!==(o=null!==(r=null!==(s=null!==(n=null!==(i=null!==(e=t.find(t=&gt;t.kind===OH.Alert))&amp;&amp;void 0!==e?e:t.find(t=&gt;t.kind===OH.Event))&amp;&amp;void 0!==i?i:t.find(t=&gt;t.kind===OH.Aircraft))&amp;&amp;void 0!==n?n:t.find(t=&gt;t.kind===OH.Ship))&amp;&amp;void 0!==s?s:t.find(t=&gt;t.kind===OH.AircraftPosition))&amp;&amp;void 0!==r?r:t.find(t=&gt;t.kind===OH.ShipPosition))&amp;&amp;void 0!==o?o:t.find(t=&gt;t.kind===OH.PortClickEvent))&amp;&amp;void 0!==a?a:t.find(t=&gt;t.kind===OH.Annotation))&amp;&amp;void 0!==l?l:t.find(t=&gt;t.kind===OH.H3Element)}),gf(t=&gt;!!t)).subscribe(t=&gt;{switch(nz({category:&quot;app&quot;,message:`map-click: ${t.kind}`}),t.kind){case OH.Aircraft:this.selectionService.selectAircraft(t.icao);break;case OH.AircraftPosition:this.tooltipsService.pinEntity(t);break;case OH.Alert:this.selectAlertFeature$.next(t),this.tooltipsService.pinEntity(t);break;case OH.Annotation:this.tooltipsService.pinEntity(t);break;case OH.Event:this.selectEventFeature$.next(t),this.tooltipsService.pinEntity(t);break;case OH.PortClickEvent:this.tooltipsService.pinEntity(t);break;case OH.Ship:this.selectionService.selectShip(t.mmsi);break;case OH.ShipPosition:case OH.H3Element:this.tooltipsService.pinEntity(t);break;default:throw new Error(&quot;Entit\xe9 inconnue&quot;)}})})}clickOnEntity(t,e){switch(t){case OH.Aircraft:e.kind=OH.Aircraft,this.mapClickEvents$.next(e);break;case OH.AircraftPosition:e.kind=OH.AircraftPosition,this.mapClickEvents$.next(e);break;case OH.Alert:e.kind=OH.Alert,this.mapClickEvents$.next(e);break;case OH.Annotation:e.kind=OH.Annotation,this.mapClickEvents$.next(e);break;case OH.Event:e.kind=OH.Event,this.mapClickEvents$.next(e);break;case OH.PortClickEvent:case OH.Ship:this.mapClickEvents$.next(e);break;case OH.ShipPosition:e.kind=OH.ShipPosition,this.mapClickEvents$.next(e);break;case OH.H3Element:e.kind=OH.H3Element,this.mapClickEvents$.next(e);break;default:throw new Error(&quot;Entit\xe9 inconnue&quot;)}}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu),Mn(dW),Mn(mW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),AW=(()=&gt;{class t{constructor(){this.zones$=new Qp([])}clear(){this.zones$.next([])}updateZones(t){this.zones$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),vW=(()=&gt;{class t{constructor(t,e,i,n,s,r,o){this.interactionsService=t,this.mapService=e,this.offlineService=i,this.tooltipsService=n,this.workerService=s,this.zonesLayerService=r,this.zonesService=o,this.additionalShipTrail$=new Qp(null),this.interactionsService.selectEventItem$.subscribe(t=&gt;{this.mapService.pingLocation([t.lon,t.lat]),this.mapService.centerOnLonLat([t.lon,t.lat])}),this.interactionsService.selectEventFeature$.subscribe(t=&gt;{this.tooltipsService.pinEntity(t)}),W(this.interactionsService.selectEventFeature$,this.interactionsService.selectEventItem$).subscribe(t=&gt;{if(!t)return;let e=!1,i=!1;switch(t.type){case NH.PositionDubious:{this.mapService.pingLocation([t.data.lon,t.data.lat]);const i=SU.New(t.lon,t.lat,t.lon,t.lat);i.addPoint(t.data.lon,t.data.lat),this.mapService.fitOn(i.toExtent()),e=!0;break}case NH.MoveZoneEntry:case NH.MoveZoneExit:{const i=this.zonesService.zonesById[t.data.zone];this.zonesLayerService.updateZones([i]),this.mapService.fitOnHexagons(i.h3indexes),e=!0;break}case NH.MoveMeetingAtSea:this.viewAdditionalShipTrail(t.data.mmsi,t.timestamp),i=!0}i||this.hideAdditionalTrail(),e||this.zonesLayerService.clear()})}viewAdditionalShipTrail(t,e){return jp(this,void 0,void 0,function*(){if(!this.offlineService.isOffline$.value){const i=yield this.workerService.ships.getShipTrail(t,e-86400,e+86400);this.additionalShipTrail$.next(i)}})}hideAdditionalTrail(){this.additionalShipTrail$.value&amp;&amp;this.additionalShipTrail$.next(null)}}return t.\u0275fac=function(e){return new(e||t)(Mn(gW),Mn(kj),Mn(hW),Mn(mW),Mn(Jj),Mn(AW),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),_W=(()=&gt;{class t{constructor(t,e){this.configService=t,this.mapConfigService=e,this.configurations$=new Qp([]),this.activeConfigurationName$=new Qp(&quot;&quot;),this.activeConfiguration$=new Qp(null),this.dirtyActiveConfiguration$=new Qp(!1),this.loadConfig(),QT([this.configurations$,this.activeConfigurationName$]).pipe(Sf(1),df(300)).subscribe(()=&gt;{this.saveConfig()}),QT([this.configurations$,this.activeConfigurationName$]).subscribe(([t,e])=&gt;{this.activeConfiguration$.next(e?t.find(t=&gt;t.name===e):null)}),this.activeConfiguration$.pipe(Sf(1),Mf()).subscribe(t=&gt;{this.mapConfigService.updateBatch(t?t.filters:vU())}),this.activeConfiguration$.subscribe(t=&gt;{var e;this.dirtyActiveConfiguration$.next(!1),null===(e=this.dirtyWatch)||void 0===e||e.unsubscribe(),t&amp;&amp;(this.dirtyWatch=this.mapConfigService.shipFilter$.pipe(M(t=&gt;_U(t)),Mf(bU),Sf(1)).subscribe(()=&gt;{this.dirtyActiveConfiguration$.next(!0)}))})}loadConfig(){const t=this.configService.filterConfigurations;t&amp;&amp;(pU(t.configurations)&amp;&amp;(t.configurations.forEach(t=&gt;{t.filters=Object.assign({},vU(),t.filters)}),this.configurations$.next(t.configurations)),pU(t.activeConfigurationName)&amp;&amp;this.activeConfigurationName$.next(t.activeConfigurationName))}saveConfig(){this.configService.set(&quot;filterConfigurations&quot;,{configurations:this.configurations$.value,activeConfigurationName:this.activeConfigurationName$.value})}selectConfiguration(t){this.activeConfigurationName$.next(t)}importConfiguration(t){t.filters=Object.assign({},vU(),t.filters),this.configurations$.next([...this.configurations$.value,t].sort((t,e)=&gt;t.name&lt;=e.name?-1:1))}createConfiguration(t){this.configurations$.next([...this.configurations$.value,{name:t,filters:_U(this.mapConfigService.shipFilter$.value)}].sort((t,e)=&gt;t.name&lt;=e.name?-1:1))}renameConfiguration(t,e){const i=this.configurations$.value.findIndex(e=&gt;e.name===t),n=this.configurations$.value.findIndex(t=&gt;t.name===e);if(-1===i)throw new Error(&quot;Configuration non trouv\xe9e&quot;);if(-1!==n&amp;&amp;n!==i)throw new Error(&quot;La configuration existe d\xe9j\xe0&quot;);const[s]=this.configurations$.value.splice(i,1);s.name=e,this.configurations$.next([...this.configurations$.value,s].sort((t,e)=&gt;t.name&lt;=e.name?-1:1)),this.selectConfiguration(e)}updateConfiguration(t){const e=this.configurations$.value.findIndex(e=&gt;e.name===t.name);if(-1===e)throw new Error(&quot;Configuration non trouv\xe9e&quot;);this.configurations$.value.splice(e,1),this.configurations$.next([...this.configurations$.value,t].sort((t,e)=&gt;t.name&lt;=e.name?-1:1))}deleteConfiguration(t){this.configurations$.next(this.configurations$.value.filter(e=&gt;e.name!==t)),this.activeConfigurationName$.next(null)}clear(){this.configurations$.next([]),this.activeConfigurationName$.next(null)}clearMapFilters(){this.mapConfigService.resetShipFilter()}updateActiveConfigurationFilters(){if(!this.activeConfigurationName$.value)throw new Error(&quot;Aucune configuration active&quot;);this.updateConfiguration({name:this.activeConfigurationName$.value,filters:_U(this.mapConfigService.shipFilter$.value)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(jU),Mn(HU))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function bW(t){return{id:t.id,name:t.name,ships:t.ships.map(t=&gt;t.mmsi)}}let yW=(()=&gt;{class t{constructor(t,e,i,n,s,r){this.alertRulesService=t,this.mapConfigService=e,this.offlineService=i,this.timeRangeService=n,this.uiService=s,this.workerService=r,this.fleets$=new Qp([]),this.fleetsById={},this.selectedFleet$=new Qp(null),this.selectingFleet=!1,this.fleetAlerts$=new Qp([]),this.fleetTrails$=new Qp([]),this.displayFleetTrail$=new Qp(!1),this.toggleDisplayFleetTrails=()=&gt;jp(this,void 0,void 0,function*(){if(!this.displayFleetTrail$.value){let t;const e=this.timeRangeService.timeRange$.value;if(e.end-e.start&gt;=2592e3?t=&quot;L&#39;intervalle demand\xe9 est cons\xe9quent&quot;:this.selectedFleet$.value.ships.length&gt;=200&amp;&amp;(t=&quot;La flotte contient beaucoup de navires&quot;),t&amp;&amp;!(yield this.uiService.confirmAsync({title:&quot;Confirmation&quot;,message:`${t} et pourrait ralentir le serveur. \xcates-vous s\xfbr de vouloir effectuer l&#39;action ?`})))return}if(this.displayFleetTrail$.next(!this.displayFleetTrail$.value),this.displayFleetTrail$.value){const t=this.timeRangeService.timeRange$.value,e=yield this.workerService.fleets.getFleetTrails(this.selectedFleet$.value.id,t.start,t.end,this.mapConfigService.detailedShipTraces$.value),i=this.selectedFleet$.value.ships.reduce((t,e)=&gt;(t[e.mmsi]=e,t),{}),n=Object.entries(e).map(([t,e])=&gt;e.map(e=&gt;(e.ship=i[t],e)));this.fleetTrails$.next(n)}else this.fleetTrails$.next([])}),this.mapConfigService.detailedShipTraces$.subscribe(()=&gt;jp(this,void 0,void 0,function*(){this.selectedFleet$.value&amp;&amp;(yield this.selectFleet(this.selectedFleet$.value.id))})),QT([this.mapConfigService.shipFilter$.pipe(M(t=&gt;t.fleets),Mf()),this.mapConfigService.shipFilter$.pipe(M(t=&gt;t.intersectFleets),Mf()),this.fleets$]).subscribe(([t,e])=&gt;{if(e){const[e,...i]=t.map(t=&gt;{var e;return null===(e=this.fleetsById[t])||void 0===e?void 0:e.ships.map(t=&gt;t.mmsi)});if(void 0===e)return void(this.mapConfigService.shipFilter$.value.fleetsShipsCache=new Set);this.mapConfigService.shipFilter$.value.fleetsShipsCache=new Set(e.filter(t=&gt;i.every(e=&gt;e.includes(t))))}else this.mapConfigService.shipFilter$.value.fleetsShipsCache=new Set(t.flatMap(t=&gt;{var e;return null===(e=this.fleetsById[t])||void 0===e?void 0:e.ships.map(t=&gt;t.mmsi)}))})}setFleets(t){this.fleetsById=t.reduce((t,e)=&gt;(t[e.id]=e,t),{}),this.fleets$.next(t)}refreshFleets(){return jp(this,void 0,void 0,function*(){const t=yield this.workerService.fleets.list();return this.setFleets(t),t})}clear(){this.fleets$.next([])}selectFleet(t){return jp(this,void 0,void 0,function*(){this.selectingFleet=!0;const e=this.timeRangeService.timeRange$.value;let i,n;if(this.offlineService.isOffline$.value){const e=this.fleets$.value.find(e=&gt;e.id===t);if(!e)throw new Error(&quot;Flotte inconnue&quot;);[i,n]=yield Promise.all([this.workerService.offline.getFleet(e),this.workerService.offline.getFleetAlerts(e.ships.map(t=&gt;t.mmsi))])}else[i,n]=yield Promise.all([this.workerService.fleets.get(t),this.workerService.fleets.getFleetAlerts(t,e.start,e.end)]);return this.selectedFleet$.next(i),n.forEach(t=&gt;{const[e,i]=this.alertRulesService.getAlertRuleColor(t.rule_id);t.color=e,t.rgbVecColor=i}),this.fleetAlerts$.next(n),this.selectingFleet=!1,{fleet:i,trailsByMMSI:void 0,alerts:n}})}deselectFleet(){this.selectedFleet$.next(null),this.fleetAlerts$.next([]),this.fleetTrails$.next([]),this.displayFleetTrail$.next(!1)}createFleet(t){return jp(this,void 0,void 0,function*(){const e=bW(t);let i;return i=t.group_id?yield this.workerService.fleets.createGroupFleet(t.group_id,e):yield this.workerService.fleets.createPersonalFleet(e),this.mapConfigService.enableWebsockets$.value||(yield this.refreshFleets()),i})}updateFleet(t){return jp(this,void 0,void 0,function*(){yield this.workerService.fleets.update(bW(t)),this.mapConfigService.enableWebsockets$.value||(yield this.refreshFleets())})}deleteFleet(t){return jp(this,void 0,void 0,function*(){yield this.workerService.fleets.delete(t),this.mapConfigService.enableWebsockets$.value||(yield this.refreshFleets())})}resetDisplayFleetTrails(){this.displayFleetTrail$.next(!1),this.fleetTrails$.next([])}}return t.\u0275fac=function(e){return new(e||t)(Mn(TH),Mn(HU),Mn(hW),Mn(Oq),Mn(fH),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();var xW=(()=&gt;(function(t){t.Guest=&quot;guest&quot;,t.Contributor=&quot;contributor&quot;,t.Owner=&quot;owner&quot;}(xW||(xW={})),xW))();const wW=[{role:xW.Guest,label:&quot;Invit\xe9&quot;,backgroundColor:&quot;#3c94ee&quot;},{role:xW.Contributor,label:&quot;Contributeur&quot;,backgroundColor:&quot;#3c4bee&quot;},{role:xW.Owner,label:&quot;Propri\xe9taire&quot;,backgroundColor:&quot;#7329eb&quot;}];let CW=(()=&gt;{class t{constructor(t){this.workerService=t,this.groups$=new Qp([]),this.groupsById$=new Qp({}),this.groupDeletion$=new S,this.updatableGroups$=this.groups$.pipe(M(t=&gt;[...t.filter(t=&gt;t.role!==xW.Guest).map(t=&gt;({id:t.id,name:t.name})),{id:&quot;&quot;,name:&quot;Priv\xe9&quot;}])),this.groups$.subscribe(t=&gt;{this.groupsById$.next(t.reduce((t,e)=&gt;(t[e.id]=e,t),{}))}),this.groupDeletion$.subscribe(t=&gt;{this.groups$.next(this.groups$.value.filter(e=&gt;e.id!==t))})}refreshGroups(){return jp(this,void 0,void 0,function*(){const t=yield this.workerService.groups.listGroups();return this.groups$.next(t),t})}updateGroupInfos(t){const e=this.groupsById$.value[t.id];e.name=t.name,e.updated_at=t.updated_at,this.groups$.next(this.groups$.value)}removeGroup(t){this.groupDeletion$.next(t)}clear(){this.groups$.next([])}setGroups(t){this.groups$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),SW=(()=&gt;{class t{constructor(){this.initialized$=new Qp(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),kW=(()=&gt;{class t{constructor(t,e,i,n,s){this.appInitService=t,this.authenticationService=e,this.mapStateService=i,this.offlineService=n,this.workerService=s,this.ports$=new Qp(null),this.portsPanelState$=new Qp({nameFilter:&quot;&quot;,flagFilter:[],sourceFilter:[],scrollIndex:0}),this.authenticationService.user$.pipe(gf(t=&gt;!!t),FO()).subscribe(()=&gt;{this.appInitService.initialized$.pipe(gf(t=&gt;t)).subscribe(()=&gt;{this.mapStateService.showPortsLayer$.pipe(gf(t=&gt;t),FO()).subscribe(()=&gt;jp(this,void 0,void 0,function*(){this.ports$.next(this.offlineService.isOffline$.value?yield this.workerService.offline.listPorts():yield this.workerService.ports.listPorts())}))})})}updateScrollIndex(t){this.portsPanelState$.value.scrollIndex=t,this.portsPanelState$.next(this.portsPanelState$.value)}updateFlagFilter(t){this.portsPanelState$.value.flagFilter=t,this.portsPanelState$.next(this.portsPanelState$.value)}updateSourceFilter(t){this.portsPanelState$.value.sourceFilter=t,this.portsPanelState$.next(this.portsPanelState$.value)}updateNameFilter(t){this.portsPanelState$.value.nameFilter=t,this.portsPanelState$.next(this.portsPanelState$.value)}}return t.\u0275fac=function(e){return new(e||t)(Mn(SW),Mn(tH),Mn(vq),Mn(hW),Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),EW=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,m,g,A){this.alertRulesService=t,this.alertsService=e,this.annotationsService=i,this.drawingService=n,this.eventsService=s,this.filterConfigurationsService=r,this.fleetsService=o,this.groupsService=a,this.historyService=l,this.interactionsService=c,this.mapService=h,this.mapConfigService=u,this.offlineService=d,this.portsService=p,this.timeRangeService=f,this.uiService=m,this.workerService=g,this.zonesService=A,this.initialized=!1}init(){return jp(this,void 0,void 0,function*(){yield this.workerService.view.reset();const t=this.offlineService.getOfflineData();t?(this.groupsService.setGroups(t.groups),this.fleetsService.setFleets(t.fleets),this.zonesService.setZones(t.zones),this.annotationsService.setAnnotations(t.annotations),this.alertRulesService.setAlertRules(t.rules)):(yield Promise.all([this.groupsService.refreshGroups(),this.fleetsService.refreshFleets(),this.zonesService.refreshZones(),this.annotationsService.refreshAnnotations()]),yield this.alertRulesService.refreshAlertRules()),this.initialized=!0})}destroy(){this.alertRulesService.clear(),this.fleetsService.clear(),this.zonesService.clear(),this.annotationsService.clear(),this.filterConfigurationsService.clear(),this.mapConfigService.clear(),this.drawingService.clearZones(),this.zonesService.clear(),this.groupsService.clear(),this.initialized=!1}}return t.\u0275fac=function(e){return new(e||t)(Mn(TH),Mn(IH),Mn(PH),Mn(RH),Mn(vW),Mn(_W),Mn(yW),Mn(CW),Mn(Dj),Mn(gW),Mn(kj),Mn(HU),Mn(hW),Mn(kW),Mn(Oq),Mn(fH),Mn(Jj),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),MW=(()=&gt;{class t{constructor(t,e,i,n){this.authenticationService=t,this.initializationService=e,this.uiService=i,this.router=n}canActivateChild(t,e){return jp(this,void 0,void 0,function*(){return this.authenticationService.isAuthenticated()?(this.initializationService.initialized||(yield this.initializationService.init()),!0):(this.uiService.error(&quot;Vous devez \xeatre authentifi\xe9&quot;),yield this.router.navigateByUrl(`/login?redirect=${e.url}`),!1)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(tH),Mn(EW),Mn(fH),Mn(dF))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),TW=(()=&gt;{class t{constructor(t){this.offlineService=t}canDeactivate(){return!this.offlineService.loading}}return t.\u0275fac=function(e){return new(e||t)(Mn(hW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),IW=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-about-dialog&quot;]],decls:122,vars:0,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;,1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[&quot;href&quot;,&quot;https://beta.gouv.fr/startups/anais.html&quot;],[&quot;href&quot;,&quot;https://beta.gouv.fr/apropos/&quot;],[1,&quot;about-dialog__faq-title&quot;],[1,&quot;about-dialog__faq&quot;],[&quot;href&quot;,&quot;https://beta.gouv.fr/startups/sepia.html&quot;],[&quot;href&quot;,&quot;/3rdpartylicenses.txt&quot;],[&quot;href&quot;,&quot;https://www.marineregions.org/&quot;],[&quot;href&quot;,&quot;https://doi.org/10.14284/386&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot; \xc0 propos d&#39;ANAIS &quot;),La(2,&quot;div&quot;,1),Ra(3,&quot;button&quot;,2),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;),Ra(7,&quot;h3&quot;),xl(8,&quot;ANAIS comme Analyse des Incoh\xe9rences de Situation maritime&quot;),Fa(),Ra(9,&quot;p&quot;),xl(10,&quot; C&#39;est un projet men\xe9 en \xab start-up d&#39;\xc9tat \xbb, cr\xe9\xe9 par la Marine et pour la Marine, avec le soutien de l&#39;Agence de l&#39;Innovation de D\xe9fense et de la fabrique num\xe9rique. &quot;),Fa(),Ra(11,&quot;p&quot;),xl(12,&quot; La vocation premi\xe8re d&#39;ANAIS est d&#39;apporter un service op\xe9rationnel sans limite de licence, au plus proche du besoin op\xe9rationnel. &quot;),Fa(),Ra(13,&quot;p&quot;),xl(14,&quot; L&#39;objectif est d&#39;avoir la main sur les d\xe9veloppements. Il n&#39;y a pas de logique commerciale ni contractuelle, ni de licence. &quot;),Fa(),Ra(15,&quot;p&quot;),xl(16,&quot; Nous allons faire \xe9voluer ANAIS au plus pr\xe8s des besoins des utilisateurs et rajouter au fur et \xe0 mesure des id\xe9es, des donn\xe9es et des algorithmes. &quot;),Fa(),Ra(17,&quot;p&quot;),xl(18,&quot; ANAIS est \xe0 utiliser en compl\xe9ment des outils commerciaux. &quot;),Fa(),Ra(19,&quot;div&quot;),xl(20,&quot; Pour plus d&#39;informations, vous pouvez consulter la &quot;),Ra(21,&quot;a&quot;,3),xl(22,&quot;fiche produit sur beta.gouv&quot;),Fa(),xl(23,&quot; ou bien obtenir plus d&#39;informations sur la &quot;),Ra(24,&quot;a&quot;,4),xl(25,&quot;m\xe9thode de d\xe9veloppement beta.gouv&quot;),Fa(),xl(26,&quot;. &quot;),Fa(),Ra(27,&quot;h3&quot;,5),xl(28,&quot;Questions r\xe9currentes&quot;),Fa(),Ra(29,&quot;div&quot;,6),Ra(30,&quot;div&quot;),Ra(31,&quot;h4&quot;),xl(32,&quot;Quels sont les navigateurs compatibles ?&quot;),Fa(),xl(33,&quot; Nous visons \xe0 rendre ANAIS compatible avec Chrome &gt;= 56 et Firefox &gt;= 52 (version utilis\xe9e sur intradef). Il est recommand\xe9 d&#39;utiliser des versions &quot;),Ra(34,&quot;strong&quot;),xl(35,&quot;r\xe9centes&quot;),Fa(),xl(36,&quot; de navigateurs afin de profiter des derni\xe8res optimisations de performance. &quot;),La(37,&quot;br&quot;),Ra(38,&quot;strong&quot;),xl(39,&quot;Internet Explorer et Edge ne sont pas test\xe9s et ne sont probablement pas compatibles.&quot;),Fa(),Fa(),Ra(40,&quot;div&quot;),Ra(41,&quot;h4&quot;),xl(42,&quot;Compatibilit\xe9 ISPT ?&quot;),Fa(),xl(43,&quot; ANAIS fonctionne sur le r\xe9seau intradef avec les PC ISPT \xe0 condition d&#39;autoriser le d\xe9blocage des serveurs utilis\xe9s par ANAIS : &quot;),Ra(44,&quot;em&quot;),xl(45,&quot;anais.beta.gouv.fr&quot;),Fa(),xl(46,&quot; et tous les serveurs en &quot;),Ra(47,&quot;em&quot;),xl(48,&quot;*.anais.beta.gouv.fr&quot;),Fa(),xl(49,&quot;. &quot;),Fa(),Ra(50,&quot;div&quot;),Ra(51,&quot;h4&quot;),xl(52,&quot;Quelles sont les donn\xe9es utilis\xe9es ? D&#39;o\xf9 viennent-elles ?&quot;),Fa(),xl(53,&quot; Les donn\xe9es AIS proviennent de 2 fournisseurs : l&#39;agence europ\xe9enne de s\xe9curit\xe9 maritime (EMSA) avec le flux IMDATE (EMSA&#39;s Integrated Maritime Data Environment (IMDatE)) et CLS (couverture mondiale). &quot;),La(54,&quot;br&quot;),xl(55,&quot; Les donn\xe9es ADS-B des a\xe9ronefs de notre partenaire &quot;),Ra(56,&quot;a&quot;,7),xl(57,&quot;SEPIA&quot;),Fa(),xl(58,&quot; : ADSBHub, ELia-AF-Gao-1, ELia-AF-Gossi-1, ELia-AF-Niamey-2, FlightRadar24, Ghost, Glidernet, RTB. &quot;),Fa(),Ra(59,&quot;div&quot;),Ra(60,&quot;h4&quot;),xl(61,&quot;\xc0 quoi servent les r\xe8gles d&#39;alertes ?&quot;),Fa(),xl(62,&quot; Les r\xe8gles d&#39;alertes permettent de configurer des crit\xe8res et des filtres afin de lever des alertes sur des comportements bien pr\xe9cis. Par exemple, un transbordement dans une zone. Le but des alertes est de notifier l&#39;utilisateur automatiquement quand un comportement suspect est d\xe9tect\xe9. &quot;),Fa(),Ra(63,&quot;div&quot;),Ra(64,&quot;h4&quot;),xl(65,&quot;Il semble y avoir des faux-positifs sur les \xe9v\xe9nements !&quot;),Fa(),xl(66,&quot; La d\xe9tection automatique des transbordements et routes erratiques est complexe. Nous essayons d&#39;optimiser les algorithmes afin de g\xe9rer au mieux les cas particuliers. Nous pr\xe9voyons notamment d&#39;exclure les zones de port car les \xe9v\xe9nements dans les ports sont non pertinents. &quot;),Fa(),Ra(67,&quot;div&quot;),Ra(68,&quot;h4&quot;),xl(69,&quot;Les performances sont mauvaises ! Je passe mon temps \xe0 attendre...&quot;),Fa(),xl(70,&quot; Nous faisons notre maximum afin d&#39;am\xe9liorer les performances du syst\xe8me. N&#39;h\xe9sitez-pas \xe0 nous contacter pour qu&#39;on puisse trouver un moyen d&#39;adapter ANAIS \xe0 votre usage. &quot;),Fa(),Ra(71,&quot;div&quot;),Ra(72,&quot;h4&quot;),xl(73,&quot;Confidentialit\xe9&quot;),Fa(),xl(74,&quot; La connexion au serveur utilise le protocole HTTPS (TLS 1.2) et un certificat Let&#39;s Encrypt. Les serveurs et la bases de donn\xe9es sont h\xe9berg\xe9s chez OVH. &quot;),Fa(),Ra(75,&quot;div&quot;),Ra(76,&quot;h4&quot;),xl(77,&quot;J&#39;ai des id\xe9es d&#39;am\xe9liorations !&quot;),Fa(),xl(78,&quot; L&#39;\xe9quipe derri\xe8re ANAIS est ouverte \xe0 toute remarque et proposition d&#39;am\xe9lioration. Elle se r\xe9serve n\xe9anmoins le droit de prioriser et d&#39;adapter les fonctionnalit\xe9s afin de r\xe9pondre \xe0 la majorit\xe9 des utilisateurs. Vous pouvez utiliser le chat pour dialoguer directement avec l&#39;\xe9quipe. &quot;),Fa(),Ra(79,&quot;div&quot;),Ra(80,&quot;h4&quot;),xl(81,&quot;Je suis dans un navire / avion et j&#39;ai un d\xe9bit internet trop petit pour ANAIS&quot;),Fa(),xl(82,&quot; Nous avons travaill\xe9 et travaillons toujours pour optimiser au maximum l&#39;utilisation du d\xe9bit. Ainsi, nous avons ajout\xe9 des param\xe8tres afin de limiter l&#39;utilisation de la bande passante en environnement contraint. Ces param\xe8tres sont accessibles via le menu &quot;),Ra(83,&quot;em&quot;),xl(84,&quot;Param\xe8tres&quot;),Fa(),xl(85,&quot;. &quot;),Ra(86,&quot;ul&quot;),Ra(87,&quot;li&quot;),xl(88,&quot;Activer la &quot;),Ra(89,&quot;em&quot;),xl(90,&quot;Restriction de carte&quot;),Fa(),xl(91,&quot; afin de ne charger qu&#39;une zone pr\xe9d\xe9finie de la surface du globe&quot;),Fa(),Ra(92,&quot;li&quot;),xl(93,&quot;Augmenter l&#39;&quot;),Ra(94,&quot;em&quot;),xl(95,&quot;intervalle de rafraichissement des derni\xe8res positions des navires&quot;),Fa(),Fa(),Ra(96,&quot;li&quot;),xl(97,&quot;Augmenter la &quot;),Ra(98,&quot;em&quot;),xl(99,&quot;p\xe9riode de temps par d\xe9faut&quot;),Fa(),xl(100,&quot; pour les traces que l&#39;on r\xe9cup\xe8re quand on consulte une fiche navire&quot;),Fa(),Ra(101,&quot;li&quot;),xl(102,&quot;Activer la &quot;),Ra(103,&quot;em&quot;),xl(104,&quot;limite de zoom minimum&quot;),Fa(),xl(105,&quot; afin de ne pas charger trop de navires d&#39;un coup&quot;),Fa(),Fa(),Fa(),Fa(),Ra(106,&quot;h3&quot;,5),xl(107,&quot;Outils Open Source&quot;),Fa(),Ra(108,&quot;p&quot;),xl(109,&quot; Ce projet se base enti\xe8rement sur des outils open source dont les licences sont visibles \xe0 cet &quot;),Ra(110,&quot;a&quot;,8),xl(111,&quot;endroit&quot;),Fa(),xl(112,&quot;. &quot;),Fa(),Ra(113,&quot;p&quot;),xl(114,&quot; Autres cr\xe9dits :&quot;),La(115,&quot;br&quot;),xl(116,&quot; - Flanders Marine Institute (2019). Maritime Boundaries Geodatabase: Maritime Boundaries and Exclusive Economic Zones (200NM), version 11. Available online at &quot;),Ra(117,&quot;a&quot;,9),xl(118,&quot;https://www.marineregions.org/&quot;),Fa(),xl(119,&quot;. &quot;),Ra(120,&quot;a&quot;,10),xl(121,&quot;https://doi.org/10.14284/386&quot;),Fa(),Fa(),Fa())},directives:[sk,Ry,nk,hE],styles:[&quot;.about-dialog__faq-title[_ngcontent-%COMP%]{margin-top:32px}.about-dialog__faq[_ngcontent-%COMP%]{display:grid;grid-gap:1em;grid-template-columns:1fr 1fr}&quot;]}),t})(),DW=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.titleService=t,this.router=e,this.dialog=i,this.mapService=n,this.routeService=s}ngOnInit(){this.titleService.setTitle(&quot;\xc0 propos - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.dialogRef||this.createDialog()}createDialog(){this.dialogRef=this.dialog.open(IW,{height:&quot;90vh&quot;,width:&quot;90vw&quot;,maxWidth:&quot;90vw&quot;,closeOnNavigation:!0}),this.dialogRef.afterClosed().subscribe((t=!0)=&gt;jp(this,void 0,void 0,function*(){if(t){const t=this.routeService.previousUrl||&quot;&quot;;yield this.router.navigateByUrl(t)}}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(dF),Da(ek),Da(kj),Da(Oj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-about-loader&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const OW=[&quot;*&quot;,[[&quot;mat-toolbar-row&quot;]]],PW=[&quot;*&quot;,&quot;mat-toolbar-row&quot;],RW=Bb(class{constructor(t){this._elementRef=t}});let FW=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-toolbar-row&quot;]],hostAttrs:[1,&quot;mat-toolbar-row&quot;],exportAs:[&quot;matToolbarRow&quot;]}),t})(),LW=(()=&gt;{class t extends RW{constructor(t,e,i){super(t),this._platform=e,this._document=i}ngAfterViewInit(){this._platform.isBrowser&amp;&amp;(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=&gt;this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(jf),Da(Fu))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-toolbar&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,FW,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._toolbarRows=t)}},hostAttrs:[1,&quot;mat-toolbar&quot;],hostVars:4,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-toolbar-multiple-rows&quot;,e._toolbarRows.length&gt;0)(&quot;mat-toolbar-single-row&quot;,0===e._toolbarRows.length)},inputs:{color:&quot;color&quot;},exportAs:[&quot;matToolbar&quot;],features:[$o],ngContentSelectors:PW,decls:2,vars:0,template:function(t,e){1&amp;t&amp;&amp;(Xa(OW),Qa(0),Qa(1,1))},styles:[&quot;.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n&quot;],encapsulation:2,changeDetection:0}),t})(),BW=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[Fb],Fb]}),t})(),zW=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-admin-page&quot;]],decls:29,vars:3,consts:[[1,&quot;page&quot;],[&quot;color&quot;,&quot;primary&quot;],[1,&quot;mat-h1&quot;,&quot;ma-0&quot;,&quot;pr-3&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;routerLink&quot;,&quot;/&quot;],[3,&quot;vertical&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;routerLink&quot;,&quot;/admin/users&quot;],[1,&quot;mr-2&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;routerLink&quot;,&quot;/admin/groups&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;routerLink&quot;,&quot;/admin/maintenance&quot;],[1,&quot;page__content&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;mat-toolbar&quot;,1),Ra(2,&quot;div&quot;,2),xl(3,&quot;Administration ANAIS&quot;),Fa(),Ra(4,&quot;a&quot;,3),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;chevron_left&quot;),Fa(),Ra(7,&quot;span&quot;),xl(8,&quot;Retour \xe0 l&#39;interface&quot;),Fa(),Fa(),La(9,&quot;mat-divider&quot;,4),Ra(10,&quot;a&quot;,5),Ra(11,&quot;mat-icon&quot;,6),xl(12,&quot;supervisor_account&quot;),Fa(),Ra(13,&quot;span&quot;),xl(14,&quot;Utilisateurs&quot;),Fa(),Fa(),La(15,&quot;mat-divider&quot;,4),Ra(16,&quot;a&quot;,7),Ra(17,&quot;mat-icon&quot;,6),xl(18,&quot;groups&quot;),Fa(),Ra(19,&quot;span&quot;),xl(20,&quot;Groupes&quot;),Fa(),Fa(),La(21,&quot;mat-divider&quot;,4),Ra(22,&quot;a&quot;,8),Ra(23,&quot;mat-icon&quot;,6),xl(24,&quot;build&quot;),Fa(),Ra(25,&quot;span&quot;),xl(26,&quot;Maintenance&quot;),Fa(),Fa(),Fa(),Ra(27,&quot;div&quot;,9),La(28,&quot;router-outlet&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;vertical&quot;,!0),Sr(6),Oa(&quot;vertical&quot;,!0),Sr(6),Oa(&quot;vertical&quot;,!0))},directives:[LW,Fy,mF,hE,Pq,vF],styles:[&quot;.page[_ngcontent-%COMP%]{height:100%;max-height:100vh;overflow:auto}.page__content[_ngcontent-%COMP%]{max-width:960px;padding:16px;margin:0 auto}&quot;]}),t})();var NW=(()=&gt;(function(t){t.Planned=&quot;info&quot;,t.InProgress=&quot;in_progress&quot;}(NW||(NW={})),NW))();const VW=[&quot;input&quot;],$W=function(t){return{enterDuration:t}},UW=[&quot;*&quot;],jW=new Ji(&quot;mat-radio-default-options&quot;,{providedIn:&quot;root&quot;,factory:function(){return{color:&quot;accent&quot;}}});let HW=0;const GW={provide:$y,useExisting:at(()=&gt;ZW),multi:!0};class qW{constructor(t,e){this.source=t,this.value=e}}const WW=new Ji(&quot;MatRadioGroup&quot;);let YW=(()=&gt;{class t{constructor(t){this._changeDetector=t,this._value=null,this._name=&quot;mat-radio-group-&quot;+HW++,this._selected=null,this._isInitialized=!1,this._labelPosition=&quot;after&quot;,this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=&gt;{},this.onTouched=()=&gt;{},this.change=new mh}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=&quot;before&quot;===t?&quot;before&quot;:&quot;after&quot;,this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&amp;&amp;(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&amp;&amp;!this._selected.checked&amp;&amp;(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=Rf(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=Rf(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&amp;&amp;this.onTouched()}_updateRadioButtonNames(){this._radios&amp;&amp;this._radios.forEach(t=&gt;{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&amp;&amp;(null===this._selected||this._selected.value!==this._value)&amp;&amp;(this._selected=null,this._radios.forEach(t=&gt;{t.checked=this.value===t.value,t.checked&amp;&amp;(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&amp;&amp;this.change.emit(new qW(this._selected,this._value))}_markRadiosForCheck(){this._radios&amp;&amp;this._radios.forEach(t=&gt;t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec))},t.\u0275dir=Xt({type:t,inputs:{name:&quot;name&quot;,labelPosition:&quot;labelPosition&quot;,value:&quot;value&quot;,selected:&quot;selected&quot;,disabled:&quot;disabled&quot;,required:&quot;required&quot;,color:&quot;color&quot;},outputs:{change:&quot;change&quot;}}),t})(),ZW=(()=&gt;{class t extends YW{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-radio-group&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,JW,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._radios=t)}},hostAttrs:[&quot;role&quot;,&quot;radiogroup&quot;,1,&quot;mat-radio-group&quot;],exportAs:[&quot;matRadioGroup&quot;],features:[Wl([GW,{provide:WW,useExisting:t}]),$o]}),t})();class KW{constructor(t){this._elementRef=t}}const XW=zb(Nb(KW));let QW=(()=&gt;{class t extends XW{constructor(t,e,i,n,s,r,o,a){super(e),this._changeDetector=i,this._focusMonitor=n,this._radioDispatcher=s,this._providerOverride=o,this._uniqueId=&quot;mat-radio-&quot;+ ++HW,this.id=this._uniqueId,this.change=new mh,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=&gt;{},this.radioGroup=t,this._noopAnimations=&quot;NoopAnimations&quot;===r,a&amp;&amp;(this.tabIndex=Ff(a,0)),this._removeUniqueSelectionListener=s.listen((t,e)=&gt;{t!==this.id&amp;&amp;e===this.name&amp;&amp;(this.checked=!1)})}get checked(){return this._checked}set checked(t){const e=Rf(t);this._checked!==e&amp;&amp;(this._checked=e,e&amp;&amp;this.radioGroup&amp;&amp;this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&amp;&amp;this.radioGroup&amp;&amp;this.radioGroup.value===this.value&amp;&amp;(this.radioGroup.selected=null),e&amp;&amp;this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&amp;&amp;(this._value=t,null!==this.radioGroup&amp;&amp;(this.checked||(this.checked=this.radioGroup.value===t),this.checked&amp;&amp;(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&amp;&amp;this.radioGroup.labelPosition||&quot;after&quot;}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&amp;&amp;this.radioGroup.disabled}set disabled(t){this._setDisabled(Rf(t))}get required(){return this._required||this.radioGroup&amp;&amp;this.radioGroup.required}set required(t){this._required=Rf(t)}get color(){return this._color||this.radioGroup&amp;&amp;this.radioGroup.color||this._providerOverride&amp;&amp;this._providerOverride.color||&quot;accent&quot;}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&amp;&amp;(this.checked=this.radioGroup.value===this._value,this.checked&amp;&amp;(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=&gt;{!t&amp;&amp;this.radioGroup&amp;&amp;this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new qW(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&amp;&amp;!this.disabled){const t=this.radioGroup&amp;&amp;this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&amp;&amp;(this.radioGroup._controlValueAccessorChangeFn(this.value),t&amp;&amp;this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&amp;&amp;(this._disabled=t,this._changeDetector.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(Da(YW),Da(ec),Da(Ec),Da(Nm),Da(Rg),Da(String),Da(void 0),Da(String))},t.\u0275dir=Xt({type:t,viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(VW,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._inputElement=t.first)}},inputs:{id:&quot;id&quot;,checked:&quot;checked&quot;,value:&quot;value&quot;,labelPosition:&quot;labelPosition&quot;,disabled:&quot;disabled&quot;,required:&quot;required&quot;,color:&quot;color&quot;,name:&quot;name&quot;,ariaLabel:[&quot;aria-label&quot;,&quot;ariaLabel&quot;],ariaLabelledby:[&quot;aria-labelledby&quot;,&quot;ariaLabelledby&quot;],ariaDescribedby:[&quot;aria-describedby&quot;,&quot;ariaDescribedby&quot;]},outputs:{change:&quot;change&quot;},features:[$o]}),t})(),JW=(()=&gt;{class t extends QW{constructor(t,e,i,n,s,r,o,a){super(t,e,i,n,s,r,o,a)}}return t.\u0275fac=function(e){return new(e||t)(Da(WW,8),Da(ec),Da(Ec),Da(Nm),Da(Rg),Da(yb,8),Da(jW,8),Yi(&quot;tabindex&quot;))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-radio-button&quot;]],hostAttrs:[1,&quot;mat-radio-button&quot;],hostVars:17,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;focus&quot;,function(){return e._inputElement.nativeElement.focus()}),2&amp;t&amp;&amp;(ea(&quot;tabindex&quot;,null)(&quot;id&quot;,e.id)(&quot;aria-label&quot;,null)(&quot;aria-labelledby&quot;,null)(&quot;aria-describedby&quot;,null),cl(&quot;mat-radio-checked&quot;,e.checked)(&quot;mat-radio-disabled&quot;,e.disabled)(&quot;_mat-animation-noopable&quot;,e._noopAnimations)(&quot;mat-primary&quot;,&quot;primary&quot;===e.color)(&quot;mat-accent&quot;,&quot;accent&quot;===e.color)(&quot;mat-warn&quot;,&quot;warn&quot;===e.color))},inputs:{disableRipple:&quot;disableRipple&quot;,tabIndex:&quot;tabIndex&quot;},exportAs:[&quot;matRadioButton&quot;],features:[$o],ngContentSelectors:UW,decls:13,vars:20,consts:[[1,&quot;mat-radio-label&quot;],[&quot;label&quot;,&quot;&quot;],[1,&quot;mat-radio-container&quot;],[1,&quot;mat-radio-outer-circle&quot;],[1,&quot;mat-radio-inner-circle&quot;],[&quot;type&quot;,&quot;radio&quot;,1,&quot;mat-radio-input&quot;,&quot;cdk-visually-hidden&quot;,3,&quot;id&quot;,&quot;checked&quot;,&quot;disabled&quot;,&quot;tabIndex&quot;,&quot;required&quot;,&quot;change&quot;,&quot;click&quot;],[&quot;input&quot;,&quot;&quot;],[&quot;mat-ripple&quot;,&quot;&quot;,1,&quot;mat-radio-ripple&quot;,&quot;mat-focus-indicator&quot;,3,&quot;matRippleTrigger&quot;,&quot;matRippleDisabled&quot;,&quot;matRippleCentered&quot;,&quot;matRippleRadius&quot;,&quot;matRippleAnimation&quot;],[1,&quot;mat-ripple-element&quot;,&quot;mat-radio-persistent-ripple&quot;],[1,&quot;mat-radio-label-content&quot;],[2,&quot;display&quot;,&quot;none&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;label&quot;,0,1),Ra(2,&quot;span&quot;,2),La(3,&quot;span&quot;,3),La(4,&quot;span&quot;,4),Ra(5,&quot;input&quot;,5,6),Ha(&quot;change&quot;,function(t){return e._onInputInteraction(t)})(&quot;click&quot;,function(t){return e._onInputClick(t)}),Fa(),Ra(7,&quot;span&quot;,7),La(8,&quot;span&quot;,8),Fa(),Fa(),Ra(9,&quot;span&quot;,9),Ra(10,&quot;span&quot;,10),xl(11,&quot;\xa0&quot;),Fa(),Qa(12),Fa(),Fa()),2&amp;t){const t=oa(1);ea(&quot;for&quot;,e.inputId),Sr(5),Oa(&quot;id&quot;,e.inputId)(&quot;checked&quot;,e.checked)(&quot;disabled&quot;,e.disabled)(&quot;tabIndex&quot;,e.tabIndex)(&quot;required&quot;,e.required),ea(&quot;name&quot;,e.name)(&quot;value&quot;,e.value)(&quot;aria-label&quot;,e.ariaLabel)(&quot;aria-labelledby&quot;,e.ariaLabelledby)(&quot;aria-describedby&quot;,e.ariaDescribedby),Sr(2),Oa(&quot;matRippleTrigger&quot;,t)(&quot;matRippleDisabled&quot;,e._isRippleDisabled())(&quot;matRippleCentered&quot;,!0)(&quot;matRippleRadius&quot;,20)(&quot;matRippleAnimation&quot;,eh(18,$W,e._noopAnimations?0:150)),Sr(2),cl(&quot;mat-radio-label-before&quot;,&quot;before&quot;==e.labelPosition)}},directives:[dy],styles:[&quot;.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n&quot;],encapsulation:2,changeDetection:0}),t})(),tY=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[py,Fb],Fb]}),t})();const eY=[&quot;class&quot;,&quot;page&quot;];function iY(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),xl(1),Ra(2,&quot;button&quot;,11),xl(3,&quot;Terminer&quot;),Fa(),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot; Maintenance active &quot;,t.maintenance.message,&quot; - &quot;,t.maintenance.type,&quot; &quot;),Sr(1),Oa(&quot;app-async-action&quot;,t.removeMaintenance)}}function nY(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),xl(1,&quot; Aucune maintenance active\n&quot;),Fa())}function sY(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;Le message est obligatoire&quot;),Fa())}let rY=(()=&gt;{class t{constructor(t,e,i,n){this.formBuilder=t,this.title=e,this.workerService=i,this.authenticationService=n,this.AppMaintenanceType=NW,this.setMaintenance=()=&gt;jp(this,void 0,void 0,function*(){this.maintenanceForm.valid&amp;&amp;(yield this.workerService.application.enableMaintenanceMode({message:this.maintenanceForm.controls.message.value,type:this.maintenanceForm.controls.type.value}),yield this.workerService.application.refreshHealthState())}),this.removeMaintenance=()=&gt;jp(this,void 0,void 0,function*(){yield this.workerService.application.disableMaintenanceMode(),yield this.workerService.application.refreshHealthState()})}ngOnInit(){return jp(this,void 0,void 0,function*(){this.title.setTitle(&quot;Configuration - ANAIS&quot;),this.maintenanceForm=this.formBuilder.group({message:[&quot;&quot;,[Ky.required]],type:[NW.Planned,[Ky.required]]}),this.workerService.applicationHealth$.subscribe(t=&gt;{this.maintenance=null==t?void 0:t.maintenance})})}}return t.\u0275fac=function(e){return new(e||t)(Da(Rw),Da(Up),Da(Jj),Da(tH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-maintenance&quot;,8,&quot;page&quot;]],attrs:eY,decls:22,vars:8,consts:[[1,&quot;mat-h1&quot;],[4,&quot;ngIf&quot;],[1,&quot;mat-h2&quot;,&quot;mt-3&quot;],[3,&quot;formGroup&quot;],[1,&quot;d-block&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;placeholder&quot;,&quot;...&quot;,&quot;formControlName&quot;,&quot;message&quot;,&quot;required&quot;,&quot;&quot;],[1,&quot;d-flex&quot;],[1,&quot;mr-2&quot;],[&quot;formControlName&quot;,&quot;type&quot;],[&quot;color&quot;,&quot;primary&quot;,3,&quot;value&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,1,&quot;mt-2&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;app-async-action&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot;Maintenance&quot;),Fa(),ra(2,iY,4,3,&quot;div&quot;,1),ra(3,nY,2,0,&quot;div&quot;,1),Ra(4,&quot;h2&quot;,2),xl(5,&quot;D\xe9finir un message de maintenance&quot;),Fa(),Ra(6,&quot;form&quot;,3),Ra(7,&quot;mat-form-field&quot;,4),Ra(8,&quot;mat-label&quot;),xl(9,&quot;Message&quot;),Fa(),La(10,&quot;input&quot;,5),ra(11,sY,2,0,&quot;mat-error&quot;,1),Fa(),Ra(12,&quot;div&quot;,6),Ra(13,&quot;label&quot;,7),xl(14,&quot;Type :&quot;),Fa(),Ra(15,&quot;mat-radio-group&quot;,8),Ra(16,&quot;mat-radio-button&quot;,9),xl(17,&quot;Planifi\xe9e (message informatif seulement)&quot;),Fa(),Ra(18,&quot;mat-radio-button&quot;,9),xl(19,&quot;En cours (d\xe9connecte l&#39;API de la base de donn\xe9es)&quot;),Fa(),Fa(),Fa(),Ra(20,&quot;button&quot;,10),xl(21,&quot;D\xe9finir&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(2),Oa(&quot;ngIf&quot;,e.maintenance),Sr(1),Oa(&quot;ngIf&quot;,!e.maintenance),Sr(3),Oa(&quot;formGroup&quot;,e.maintenanceForm),Sr(5),Oa(&quot;ngIf&quot;,e.maintenanceForm.get(&quot;message&quot;).hasError(&quot;required&quot;)),Sr(5),Oa(&quot;value&quot;,e.AppMaintenanceType.Planned),Sr(2),Oa(&quot;value&quot;,e.AppMaintenanceType.InProgress),Sr(2),Oa(&quot;app-async-action&quot;,e.setMaintenance)(&quot;disabled&quot;,!e.maintenanceForm.valid))},directives:[Nd,nw,Cx,uw,gC,oC,kC,Hy,wx,vw,kw,ZW,JW,Ry,Fq,tC],styles:[&quot;.mat-radio-button[_ngcontent-%COMP%]{display:block;margin-bottom:.5em}&quot;]}),t})();const oY=Object.create(null);oY.open=&quot;0&quot;,oY.close=&quot;1&quot;,oY.ping=&quot;2&quot;,oY.pong=&quot;3&quot;,oY.message=&quot;4&quot;,oY.upgrade=&quot;5&quot;,oY.noop=&quot;6&quot;;const aY=Object.create(null);Object.keys(oY).forEach(t=&gt;{aY[oY[t]]=t});const lY={type:&quot;error&quot;,data:&quot;parser error&quot;},cY=&quot;function&quot;==typeof Blob||&quot;undefined&quot;!=typeof Blob&amp;&amp;&quot;[object BlobConstructor]&quot;===Object.prototype.toString.call(Blob),hY=&quot;function&quot;==typeof ArrayBuffer,uY=({type:t,data:e},i,n)=&gt;cY&amp;&amp;e instanceof Blob?i?n(e):dY(e,n):hY&amp;&amp;(e instanceof ArrayBuffer||(t=&gt;&quot;function&quot;==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&amp;&amp;t.buffer instanceof ArrayBuffer)(e))?i?n(e):dY(new Blob([e]),n):n(oY[t]+(e||&quot;&quot;)),dY=(t,e)=&gt;{const i=new FileReader;return i.onload=function(){const t=i.result.split(&quot;,&quot;)[1];e(&quot;b&quot;+t)},i.readAsDataURL(t)};for(var pY=uY,fY=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;,mY=&quot;undefined&quot;==typeof Uint8Array?[]:new Uint8Array(256),gY=0;gY&lt;fY.length;gY++)mY[fY.charCodeAt(gY)]=gY;const AY=&quot;function&quot;==typeof ArrayBuffer,vY=(t,e)=&gt;{if(AY){const i=function(t){var e,i,n,s,r,o=.75*t.length,a=t.length,l=0;&quot;=&quot;===t[t.length-1]&amp;&amp;(o--,&quot;=&quot;===t[t.length-2]&amp;&amp;o--);var c=new ArrayBuffer(o),h=new Uint8Array(c);for(e=0;e&lt;a;e+=4)i=mY[t.charCodeAt(e)],n=mY[t.charCodeAt(e+1)],s=mY[t.charCodeAt(e+2)],r=mY[t.charCodeAt(e+3)],h[l++]=i&lt;&lt;2|n&gt;&gt;4,h[l++]=(15&amp;n)&lt;&lt;4|s&gt;&gt;2,h[l++]=(3&amp;s)&lt;&lt;6|63&amp;r;return c}(t);return _Y(i,e)}return{base64:!0,data:t}},_Y=(t,e)=&gt;{switch(e){case&quot;blob&quot;:return t instanceof ArrayBuffer?new Blob([t]):t;case&quot;arraybuffer&quot;:default:return t}};var bY=(t,e)=&gt;{if(&quot;string&quot;!=typeof t)return{type:&quot;message&quot;,data:_Y(t,e)};const i=t.charAt(0);return&quot;b&quot;===i?{type:&quot;message&quot;,data:vY(t.substring(1),e)}:aY[i]?t.length&gt;1?{type:aY[i],data:t.substring(1)}:{type:aY[i]}:lY};const yY=String.fromCharCode(30);function xY(t){if(t)return function(t){for(var e in xY.prototype)t[e]=xY.prototype[e];return t}(t)}xY.prototype.on=xY.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[&quot;$&quot;+t]=this._callbacks[&quot;$&quot;+t]||[]).push(e),this},xY.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},xY.prototype.off=xY.prototype.removeListener=xY.prototype.removeAllListeners=xY.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[&quot;$&quot;+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[&quot;$&quot;+t],this;for(var n,s=0;s&lt;i.length;s++)if((n=i[s])===e||n.fn===e){i.splice(s,1);break}return 0===i.length&amp;&amp;delete this._callbacks[&quot;$&quot;+t],this},xY.prototype.emitReserved=xY.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks[&quot;$&quot;+t],n=1;n&lt;arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var s=(i=i.slice(0)).length;n&lt;s;++n)i[n].apply(this,e)}return this},xY.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[&quot;$&quot;+t]||[]},xY.prototype.hasListeners=function(t){return!!this.listeners(t).length};var wY=&quot;undefined&quot;!=typeof self?self:&quot;undefined&quot;!=typeof window?window:Function(&quot;return this&quot;)();function CY(t,...e){return e.reduce((e,i)=&gt;(t.hasOwnProperty(i)&amp;&amp;(e[i]=t[i]),e),{})}const SY=setTimeout,kY=clearTimeout;function EY(t,e){e.useNativeTimers?(t.setTimeoutFn=SY.bind(wY),t.clearTimeoutFn=kY.bind(wY)):(t.setTimeoutFn=setTimeout.bind(wY),t.clearTimeoutFn=clearTimeout.bind(wY))}function MY(t){return&quot;string&quot;==typeof t?function(t){let e=0,i=0;for(let n=0,s=t.length;n&lt;s;n++)e=t.charCodeAt(n),e&lt;128?i+=1:e&lt;2048?i+=2:e&lt;55296||e&gt;=57344?i+=3:(n++,i+=4);return i}(t):Math.ceil(1.33*(t.byteLength||t.size))}class TY extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type=&quot;TransportError&quot;}}class IY extends xY{constructor(t){super(),this.writable=!1,EY(this,t),this.opts=t,this.query=t.query,this.readyState=&quot;&quot;,this.socket=t.socket}onError(t,e,i){return super.emitReserved(&quot;error&quot;,new TY(t,e,i)),this}open(){return(&quot;closed&quot;===this.readyState||&quot;&quot;===this.readyState)&amp;&amp;(this.readyState=&quot;opening&quot;,this.doOpen()),this}close(){return(&quot;opening&quot;===this.readyState||&quot;open&quot;===this.readyState)&amp;&amp;(this.doClose(),this.onClose()),this}send(t){&quot;open&quot;===this.readyState&amp;&amp;this.write(t)}onOpen(){this.readyState=&quot;open&quot;,this.writable=!0,super.emitReserved(&quot;open&quot;)}onData(t){const e=bY(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved(&quot;packet&quot;,t)}onClose(t){this.readyState=&quot;closed&quot;,super.emitReserved(&quot;close&quot;,t)}}const DY=&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_&quot;.split(&quot;&quot;),OY={};let PY,RY=0,FY=0;function LY(t){let e=&quot;&quot;;do{e=DY[t%64]+e,t=Math.floor(t/64)}while(t&gt;0);return e}function BY(){const t=LY(+new Date);return t!==PY?(RY=0,PY=t):t+&quot;.&quot;+LY(RY++)}for(;FY&lt;64;FY++)OY[DY[FY]]=FY;function zY(t){let e=&quot;&quot;;for(let i in t)t.hasOwnProperty(i)&amp;&amp;(e.length&amp;&amp;(e+=&quot;&amp;&quot;),e+=encodeURIComponent(i)+&quot;=&quot;+encodeURIComponent(t[i]));return e}let NY=!1;try{NY=&quot;undefined&quot;!=typeof XMLHttpRequest&amp;&amp;&quot;withCredentials&quot;in new XMLHttpRequest}catch(p){}const VY=NY;function $Y(t){const e=t.xdomain;try{if(&quot;undefined&quot;!=typeof XMLHttpRequest&amp;&amp;(!e||VY))return new XMLHttpRequest}catch(i){}if(!e)try{return new(wY[[&quot;Active&quot;].concat(&quot;Object&quot;).join(&quot;X&quot;)])(&quot;Microsoft.XMLHTTP&quot;)}catch(i){}}function UY(){}const jY=null!=new $Y({xdomain:!1}).responseType;let HY=(()=&gt;{class t extends xY{constructor(t,e){super(),EY(this,e),this.opts=e,this.method=e.method||&quot;GET&quot;,this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const e=CY(this.opts,&quot;agent&quot;,&quot;pfx&quot;,&quot;key&quot;,&quot;passphrase&quot;,&quot;cert&quot;,&quot;ca&quot;,&quot;ciphers&quot;,&quot;rejectUnauthorized&quot;,&quot;autoUnref&quot;);e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const i=this.xhr=new $Y(e);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&amp;&amp;i.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&amp;&amp;i.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(n){}if(&quot;POST&quot;===this.method)try{i.setRequestHeader(&quot;Content-type&quot;,&quot;text/plain;charset=UTF-8&quot;)}catch(n){}try{i.setRequestHeader(&quot;Accept&quot;,&quot;*/*&quot;)}catch(n){}&quot;withCredentials&quot;in i&amp;&amp;(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&amp;&amp;(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=&gt;{4===i.readyState&amp;&amp;(200===i.status||1223===i.status?this.onLoad():this.setTimeoutFn(()=&gt;{this.onError(&quot;number&quot;==typeof i.status?i.status:0)},0))},i.send(this.data)}catch(n){return void this.setTimeoutFn(()=&gt;{this.onError(n)},0)}&quot;undefined&quot;!=typeof document&amp;&amp;(this.index=t.requestsCount++,t.requests[this.index]=this)}onError(t){this.emitReserved(&quot;error&quot;,t,this.xhr),this.cleanup(!0)}cleanup(e){if(null!=this.xhr){if(this.xhr.onreadystatechange=UY,e)try{this.xhr.abort()}catch(i){}&quot;undefined&quot;!=typeof document&amp;&amp;delete t.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&amp;&amp;(this.emitReserved(&quot;data&quot;,t),this.emitReserved(&quot;success&quot;),this.cleanup())}abort(){this.cleanup()}}return t.requestsCount=0,t.requests={},t})();function GY(){for(let t in HY.requests)HY.requests.hasOwnProperty(t)&amp;&amp;HY.requests[t].abort()}&quot;undefined&quot;!=typeof document&amp;&amp;(&quot;function&quot;==typeof attachEvent?attachEvent(&quot;onunload&quot;,GY):&quot;function&quot;==typeof addEventListener&amp;&amp;addEventListener(&quot;onpagehide&quot;in wY?&quot;pagehide&quot;:&quot;unload&quot;,GY,!1));const qY=&quot;function&quot;==typeof Promise&amp;&amp;&quot;function&quot;==typeof Promise.resolve?t=&gt;Promise.resolve().then(t):(t,e)=&gt;e(t,0),WY=wY.WebSocket||wY.MozWebSocket,YY=&quot;undefined&quot;!=typeof navigator&amp;&amp;&quot;string&quot;==typeof navigator.product&amp;&amp;&quot;reactnative&quot;===navigator.product.toLowerCase();class ZY extends IY{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return&quot;websocket&quot;}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=YY?{}:CY(this.opts,&quot;agent&quot;,&quot;perMessageDeflate&quot;,&quot;pfx&quot;,&quot;key&quot;,&quot;passphrase&quot;,&quot;cert&quot;,&quot;ca&quot;,&quot;ciphers&quot;,&quot;rejectUnauthorized&quot;,&quot;localAddress&quot;,&quot;protocolVersion&quot;,&quot;origin&quot;,&quot;maxPayload&quot;,&quot;family&quot;,&quot;checkServerIdentity&quot;);this.opts.extraHeaders&amp;&amp;(i.headers=this.opts.extraHeaders);try{this.ws=YY?new WY(t,e,i):e?new WY(t,e):new WY(t)}catch(n){return this.emitReserved(&quot;error&quot;,n)}this.ws.binaryType=this.socket.binaryType||&quot;arraybuffer&quot;,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=&gt;{this.opts.autoUnref&amp;&amp;this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=&gt;this.onClose({description:&quot;websocket connection closed&quot;,context:t}),this.ws.onmessage=t=&gt;this.onData(t.data),this.ws.onerror=t=&gt;this.onError(&quot;websocket error&quot;,t)}write(t){this.writable=!1;for(let e=0;e&lt;t.length;e++){const i=e===t.length-1;pY(t[e],this.supportsBinary,t=&gt;{try{this.ws.send(t)}catch(e){}i&amp;&amp;qY(()=&gt;{this.writable=!0,this.emitReserved(&quot;drain&quot;)},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&amp;&amp;(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?&quot;wss&quot;:&quot;ws&quot;;let i=&quot;&quot;;this.opts.port&amp;&amp;(&quot;wss&quot;===e&amp;&amp;443!==Number(this.opts.port)||&quot;ws&quot;===e&amp;&amp;80!==Number(this.opts.port))&amp;&amp;(i=&quot;:&quot;+this.opts.port),this.opts.timestampRequests&amp;&amp;(t[this.opts.timestampParam]=BY()),this.supportsBinary||(t.b64=1);const n=zY(t);return e+&quot;://&quot;+(-1!==this.opts.hostname.indexOf(&quot;:&quot;)?&quot;[&quot;+this.opts.hostname+&quot;]&quot;:this.opts.hostname)+i+this.opts.path+(n.length?&quot;?&quot;+n:&quot;&quot;)}check(){return!(!WY||&quot;__initialize&quot;in WY&amp;&amp;this.name===ZY.prototype.name)}}const KY={websocket:ZY,polling:class extends IY{constructor(t){if(super(t),this.polling=!1,&quot;undefined&quot;!=typeof location){const e=&quot;https:&quot;===location.protocol;let i=location.port;i||(i=e?&quot;443&quot;:&quot;80&quot;),this.xd=&quot;undefined&quot;!=typeof location&amp;&amp;t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}this.supportsBinary=jY&amp;&amp;!(t&amp;&amp;t.forceBase64)}get name(){return&quot;polling&quot;}doOpen(){this.poll()}pause(t){this.readyState=&quot;pausing&quot;;const e=()=&gt;{this.readyState=&quot;paused&quot;,t()};if(this.polling||!this.writable){let t=0;this.polling&amp;&amp;(t++,this.once(&quot;pollComplete&quot;,function(){--t||e()})),this.writable||(t++,this.once(&quot;drain&quot;,function(){--t||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved(&quot;poll&quot;)}onData(t){((t,e)=&gt;{const i=t.split(yY),n=[];for(let s=0;s&lt;i.length;s++){const t=bY(i[s],e);if(n.push(t),&quot;error&quot;===t.type)break}return n})(t,this.socket.binaryType).forEach(t=&gt;{if(&quot;opening&quot;===this.readyState&amp;&amp;&quot;open&quot;===t.type&amp;&amp;this.onOpen(),&quot;close&quot;===t.type)return this.onClose({description:&quot;transport closed by the server&quot;}),!1;this.onPacket(t)}),&quot;closed&quot;!==this.readyState&amp;&amp;(this.polling=!1,this.emitReserved(&quot;pollComplete&quot;),&quot;open&quot;===this.readyState&amp;&amp;this.poll())}doClose(){const t=()=&gt;{this.write([{type:&quot;close&quot;}])};&quot;open&quot;===this.readyState?t():this.once(&quot;open&quot;,t)}write(t){this.writable=!1,((t,e)=&gt;{const i=t.length,n=new Array(i);let s=0;t.forEach((t,r)=&gt;{pY(t,!1,t=&gt;{n[r]=t,++s===i&amp;&amp;e(n.join(yY))})})})(t,t=&gt;{this.doWrite(t,()=&gt;{this.writable=!0,this.emitReserved(&quot;drain&quot;)})})}uri(){let t=this.query||{};const e=this.opts.secure?&quot;https&quot;:&quot;http&quot;;let i=&quot;&quot;;!1!==this.opts.timestampRequests&amp;&amp;(t[this.opts.timestampParam]=BY()),!this.supportsBinary&amp;&amp;!t.sid&amp;&amp;(t.b64=1),this.opts.port&amp;&amp;(&quot;https&quot;===e&amp;&amp;443!==Number(this.opts.port)||&quot;http&quot;===e&amp;&amp;80!==Number(this.opts.port))&amp;&amp;(i=&quot;:&quot;+this.opts.port);const n=zY(t);return e+&quot;://&quot;+(-1!==this.opts.hostname.indexOf(&quot;:&quot;)?&quot;[&quot;+this.opts.hostname+&quot;]&quot;:this.opts.hostname)+i+this.opts.path+(n.length?&quot;?&quot;+n:&quot;&quot;)}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new HY(this.uri(),t)}doWrite(t,e){const i=this.request({method:&quot;POST&quot;,data:t});i.on(&quot;success&quot;,e),i.on(&quot;error&quot;,(t,e)=&gt;{this.onError(&quot;xhr post error&quot;,t,e)})}doPoll(){const t=this.request();t.on(&quot;data&quot;,this.onData.bind(this)),t.on(&quot;error&quot;,(t,e)=&gt;{this.onError(&quot;xhr poll error&quot;,t,e)}),this.pollXhr=t}}},XY=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,QY=[&quot;source&quot;,&quot;protocol&quot;,&quot;authority&quot;,&quot;userInfo&quot;,&quot;user&quot;,&quot;password&quot;,&quot;host&quot;,&quot;port&quot;,&quot;relative&quot;,&quot;path&quot;,&quot;directory&quot;,&quot;file&quot;,&quot;query&quot;,&quot;anchor&quot;];function JY(t){const e=t,i=t.indexOf(&quot;[&quot;),n=t.indexOf(&quot;]&quot;);-1!=i&amp;&amp;-1!=n&amp;&amp;(t=t.substring(0,i)+t.substring(i,n).replace(/:/g,&quot;;&quot;)+t.substring(n,t.length));let s=XY.exec(t||&quot;&quot;),r={},o=14;for(;o--;)r[QY[o]]=s[o]||&quot;&quot;;return-1!=i&amp;&amp;-1!=n&amp;&amp;(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,&quot;:&quot;),r.authority=r.authority.replace(&quot;[&quot;,&quot;&quot;).replace(&quot;]&quot;,&quot;&quot;).replace(/;/g,&quot;:&quot;),r.ipv6uri=!0),r.pathNames=function(t,e){const i=e.replace(/\/{2,9}/g,&quot;/&quot;).split(&quot;/&quot;);return(&quot;/&quot;==e.substr(0,1)||0===e.length)&amp;&amp;i.splice(0,1),&quot;/&quot;==e.substr(e.length-1,1)&amp;&amp;i.splice(i.length-1,1),i}(0,r.path),r.queryKey=function(t,e){const i={};return e.replace(/(?:^|&amp;)([^&amp;=]*)=?([^&amp;]*)/g,function(t,e,n){e&amp;&amp;(i[e]=n)}),i}(0,r.query),r}let tZ=(()=&gt;{class t extends xY{constructor(t,e={}){super(),t&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;(e=t,t=null),t?(t=JY(t),e.hostname=t.host,e.secure=&quot;https&quot;===t.protocol||&quot;wss&quot;===t.protocol,e.port=t.port,t.query&amp;&amp;(e.query=t.query)):e.host&amp;&amp;(e.hostname=JY(e.host).host),EY(this,e),this.secure=null!=e.secure?e.secure:&quot;undefined&quot;!=typeof location&amp;&amp;&quot;https:&quot;===location.protocol,e.hostname&amp;&amp;!e.port&amp;&amp;(e.port=this.secure?&quot;443&quot;:&quot;80&quot;),this.hostname=e.hostname||(&quot;undefined&quot;!=typeof location?location.hostname:&quot;localhost&quot;),this.port=e.port||(&quot;undefined&quot;!=typeof location&amp;&amp;location.port?location.port:this.secure?&quot;443&quot;:&quot;80&quot;),this.transports=e.transports||[&quot;polling&quot;,&quot;websocket&quot;],this.readyState=&quot;&quot;,this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:&quot;/engine.io&quot;,agent:!1,withCredentials:!1,upgrade:!0,timestampParam:&quot;t&quot;,rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,&quot;&quot;)+&quot;/&quot;,&quot;string&quot;==typeof this.opts.query&amp;&amp;(this.opts.query=function(t){let e={},i=t.split(&quot;&amp;&quot;);for(let n=0,s=i.length;n&lt;s;n++){let t=i[n].split(&quot;=&quot;);e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,&quot;function&quot;==typeof addEventListener&amp;&amp;(this.opts.closeOnBeforeunload&amp;&amp;addEventListener(&quot;beforeunload&quot;,()=&gt;{this.transport&amp;&amp;(this.transport.removeAllListeners(),this.transport.close())},!1),&quot;localhost&quot;!==this.hostname&amp;&amp;(this.offlineEventListener=()=&gt;{this.onClose(&quot;transport close&quot;,{description:&quot;network connection lost&quot;})},addEventListener(&quot;offline&quot;,this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&amp;&amp;(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new KY[t](i)}open(){let e;if(this.opts.rememberUpgrade&amp;&amp;t.priorWebsocketSuccess&amp;&amp;-1!==this.transports.indexOf(&quot;websocket&quot;))e=&quot;websocket&quot;;else{if(0===this.transports.length)return void this.setTimeoutFn(()=&gt;{this.emitReserved(&quot;error&quot;,&quot;No transports available&quot;)},0);e=this.transports[0]}this.readyState=&quot;opening&quot;;try{e=this.createTransport(e)}catch(i){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(t){this.transport&amp;&amp;this.transport.removeAllListeners(),this.transport=t,t.on(&quot;drain&quot;,this.onDrain.bind(this)).on(&quot;packet&quot;,this.onPacket.bind(this)).on(&quot;error&quot;,this.onError.bind(this)).on(&quot;close&quot;,t=&gt;this.onClose(&quot;transport close&quot;,t))}probe(e){let i=this.createTransport(e),n=!1;t.priorWebsocketSuccess=!1;const s=()=&gt;{n||(i.send([{type:&quot;ping&quot;,data:&quot;probe&quot;}]),i.once(&quot;packet&quot;,e=&gt;{if(!n)if(&quot;pong&quot;===e.type&amp;&amp;&quot;probe&quot;===e.data){if(this.upgrading=!0,this.emitReserved(&quot;upgrading&quot;,i),!i)return;t.priorWebsocketSuccess=&quot;websocket&quot;===i.name,this.transport.pause(()=&gt;{n||&quot;closed&quot;!==this.readyState&amp;&amp;(h(),this.setTransport(i),i.send([{type:&quot;upgrade&quot;}]),this.emitReserved(&quot;upgrade&quot;,i),i=null,this.upgrading=!1,this.flush())})}else{const t=new Error(&quot;probe error&quot;);t.transport=i.name,this.emitReserved(&quot;upgradeError&quot;,t)}}))};function r(){n||(n=!0,h(),i.close(),i=null)}const o=t=&gt;{const e=new Error(&quot;probe error: &quot;+t);e.transport=i.name,r(),this.emitReserved(&quot;upgradeError&quot;,e)};function a(){o(&quot;transport closed&quot;)}function l(){o(&quot;socket closed&quot;)}function c(t){i&amp;&amp;t.name!==i.name&amp;&amp;r()}const h=()=&gt;{i.removeListener(&quot;open&quot;,s),i.removeListener(&quot;error&quot;,o),i.removeListener(&quot;close&quot;,a),this.off(&quot;close&quot;,l),this.off(&quot;upgrading&quot;,c)};i.once(&quot;open&quot;,s),i.once(&quot;error&quot;,o),i.once(&quot;close&quot;,a),this.once(&quot;close&quot;,l),this.once(&quot;upgrading&quot;,c),i.open()}onOpen(){if(this.readyState=&quot;open&quot;,t.priorWebsocketSuccess=&quot;websocket&quot;===this.transport.name,this.emitReserved(&quot;open&quot;),this.flush(),&quot;open&quot;===this.readyState&amp;&amp;this.opts.upgrade&amp;&amp;this.transport.pause){let t=0;const e=this.upgrades.length;for(;t&lt;e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(&quot;opening&quot;===this.readyState||&quot;open&quot;===this.readyState||&quot;closing&quot;===this.readyState)switch(this.emitReserved(&quot;packet&quot;,t),this.emitReserved(&quot;heartbeat&quot;),t.type){case&quot;open&quot;:this.onHandshake(JSON.parse(t.data));break;case&quot;ping&quot;:this.resetPingTimeout(),this.sendPacket(&quot;pong&quot;),this.emitReserved(&quot;ping&quot;),this.emitReserved(&quot;pong&quot;);break;case&quot;error&quot;:const e=new Error(&quot;server error&quot;);e.code=t.data,this.onError(e);break;case&quot;message&quot;:this.emitReserved(&quot;data&quot;,t.data),this.emitReserved(&quot;message&quot;,t.data)}}onHandshake(t){this.emitReserved(&quot;handshake&quot;,t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),&quot;closed&quot;!==this.readyState&amp;&amp;this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=&gt;{this.onClose(&quot;ping timeout&quot;)},this.pingInterval+this.pingTimeout),this.opts.autoUnref&amp;&amp;this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved(&quot;drain&quot;):this.flush()}flush(){if(&quot;closed&quot;!==this.readyState&amp;&amp;this.transport.writable&amp;&amp;!this.upgrading&amp;&amp;this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved(&quot;flush&quot;)}}getWritablePackets(){if(!(this.maxPayload&amp;&amp;&quot;polling&quot;===this.transport.name&amp;&amp;this.writeBuffer.length&gt;1))return this.writeBuffer;let t=1;for(let e=0;e&lt;this.writeBuffer.length;e++){const i=this.writeBuffer[e].data;if(i&amp;&amp;(t+=MY(i)),e&gt;0&amp;&amp;t&gt;this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket(&quot;message&quot;,t,e,i),this}send(t,e,i){return this.sendPacket(&quot;message&quot;,t,e,i),this}sendPacket(t,e,i,n){if(&quot;function&quot;==typeof e&amp;&amp;(n=e,e=void 0),&quot;function&quot;==typeof i&amp;&amp;(n=i,i=null),&quot;closing&quot;===this.readyState||&quot;closed&quot;===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const s={type:t,data:e,options:i};this.emitReserved(&quot;packetCreate&quot;,s),this.writeBuffer.push(s),n&amp;&amp;this.once(&quot;flush&quot;,n),this.flush()}close(){const t=()=&gt;{this.onClose(&quot;forced close&quot;),this.transport.close()},e=()=&gt;{this.off(&quot;upgrade&quot;,e),this.off(&quot;upgradeError&quot;,e),t()},i=()=&gt;{this.once(&quot;upgrade&quot;,e),this.once(&quot;upgradeError&quot;,e)};return(&quot;opening&quot;===this.readyState||&quot;open&quot;===this.readyState)&amp;&amp;(this.readyState=&quot;closing&quot;,this.writeBuffer.length?this.once(&quot;drain&quot;,()=&gt;{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved(&quot;error&quot;,e),this.onClose(&quot;transport error&quot;,e)}onClose(t,e){(&quot;opening&quot;===this.readyState||&quot;open&quot;===this.readyState||&quot;closing&quot;===this.readyState)&amp;&amp;(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners(&quot;close&quot;),this.transport.close(),this.transport.removeAllListeners(),&quot;function&quot;==typeof removeEventListener&amp;&amp;removeEventListener(&quot;offline&quot;,this.offlineEventListener,!1),this.readyState=&quot;closed&quot;,this.id=null,this.emitReserved(&quot;close&quot;,t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const n=t.length;for(;i&lt;n;i++)~this.transports.indexOf(t[i])&amp;&amp;e.push(t[i]);return e}}return t.protocol=4,t})();const eZ=&quot;function&quot;==typeof ArrayBuffer,iZ=Object.prototype.toString,nZ=&quot;function&quot;==typeof Blob||&quot;undefined&quot;!=typeof Blob&amp;&amp;&quot;[object BlobConstructor]&quot;===iZ.call(Blob),sZ=&quot;function&quot;==typeof File||&quot;undefined&quot;!=typeof File&amp;&amp;&quot;[object FileConstructor]&quot;===iZ.call(File);function rZ(t){return eZ&amp;&amp;(t instanceof ArrayBuffer||(t=&gt;&quot;function&quot;==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||nZ&amp;&amp;t instanceof Blob||sZ&amp;&amp;t instanceof File}function oZ(t,e){if(!t||&quot;object&quot;!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,i=t.length;e&lt;i;e++)if(oZ(t[e]))return!0;return!1}if(rZ(t))return!0;if(t.toJSON&amp;&amp;&quot;function&quot;==typeof t.toJSON&amp;&amp;1===arguments.length)return oZ(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&amp;&amp;oZ(t[i]))return!0;return!1}function aZ(t){const e=[],i=t;return i.data=lZ(t.data,e),i.attachments=e.length,{packet:i,buffers:e}}function lZ(t,e){if(!t)return t;if(rZ(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let n=0;n&lt;t.length;n++)i[n]=lZ(t[n],e);return i}if(&quot;object&quot;==typeof t&amp;&amp;!(t instanceof Date)){const i={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&amp;&amp;(i[n]=lZ(t[n],e));return i}return t}function cZ(t,e){return t.data=hZ(t.data,e),t.attachments=void 0,t}function hZ(t,e){if(!t)return t;if(t&amp;&amp;t._placeholder)return e[t.num];if(Array.isArray(t))for(let i=0;i&lt;t.length;i++)t[i]=hZ(t[i],e);else if(&quot;object&quot;==typeof t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&amp;&amp;(t[i]=hZ(t[i],e));return t}const uZ=5;var dZ=(()=&gt;(function(t){t[t.CONNECT=0]=&quot;CONNECT&quot;,t[t.DISCONNECT=1]=&quot;DISCONNECT&quot;,t[t.EVENT=2]=&quot;EVENT&quot;,t[t.ACK=3]=&quot;ACK&quot;,t[t.CONNECT_ERROR=4]=&quot;CONNECT_ERROR&quot;,t[t.BINARY_EVENT=5]=&quot;BINARY_EVENT&quot;,t[t.BINARY_ACK=6]=&quot;BINARY_ACK&quot;}(dZ||(dZ={})),dZ))();class pZ{constructor(t){this.replacer=t}encode(t){return t.type!==dZ.EVENT&amp;&amp;t.type!==dZ.ACK||!oZ(t)?[this.encodeAsString(t)]:(t.type=t.type===dZ.EVENT?dZ.BINARY_EVENT:dZ.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=&quot;&quot;+t.type;return(t.type===dZ.BINARY_EVENT||t.type===dZ.BINARY_ACK)&amp;&amp;(e+=t.attachments+&quot;-&quot;),t.nsp&amp;&amp;&quot;/&quot;!==t.nsp&amp;&amp;(e+=t.nsp+&quot;,&quot;),null!=t.id&amp;&amp;(e+=t.id),null!=t.data&amp;&amp;(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=aZ(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}}class fZ extends xY{constructor(t){super(),this.reviver=t}add(t){let e;if(&quot;string&quot;==typeof t)e=this.decodeString(t),e.type===dZ.BINARY_EVENT||e.type===dZ.BINARY_ACK?(this.reconstructor=new mZ(e),0===e.attachments&amp;&amp;super.emitReserved(&quot;decoded&quot;,e)):super.emitReserved(&quot;decoded&quot;,e);else{if(!rZ(t)&amp;&amp;!t.base64)throw new Error(&quot;Unknown type: &quot;+t);if(!this.reconstructor)throw new Error(&quot;got binary data when not reconstructing a packet&quot;);e=this.reconstructor.takeBinaryData(t),e&amp;&amp;(this.reconstructor=null,super.emitReserved(&quot;decoded&quot;,e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===dZ[i.type])throw new Error(&quot;unknown packet type &quot;+i.type);if(i.type===dZ.BINARY_EVENT||i.type===dZ.BINARY_ACK){const n=e+1;for(;&quot;-&quot;!==t.charAt(++e)&amp;&amp;e!=t.length;);const s=t.substring(n,e);if(s!=Number(s)||&quot;-&quot;!==t.charAt(e))throw new Error(&quot;Illegal attachments&quot;);i.attachments=Number(s)}if(&quot;/&quot;===t.charAt(e+1)){const n=e+1;for(;++e&amp;&amp;&quot;,&quot;!==t.charAt(e)&amp;&amp;e!==t.length;);i.nsp=t.substring(n,e)}else i.nsp=&quot;/&quot;;const n=t.charAt(e+1);if(&quot;&quot;!==n&amp;&amp;Number(n)==n){const n=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!fZ.isPayloadValid(i.type,n))throw new Error(&quot;invalid payload&quot;);i.data=n}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}static isPayloadValid(t,e){switch(t){case dZ.CONNECT:return&quot;object&quot;==typeof e;case dZ.DISCONNECT:return void 0===e;case dZ.CONNECT_ERROR:return&quot;string&quot;==typeof e||&quot;object&quot;==typeof e;case dZ.EVENT:case dZ.BINARY_EVENT:return Array.isArray(e)&amp;&amp;e.length&gt;0;case dZ.ACK:case dZ.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&amp;&amp;this.reconstructor.finishedReconstruction()}}class mZ{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=cZ(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function gZ(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const AZ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vZ extends xY{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&amp;&amp;i.auth&amp;&amp;(this.auth=i.auth),this.io._autoConnect&amp;&amp;this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[gZ(t,&quot;open&quot;,this.onopen.bind(this)),gZ(t,&quot;packet&quot;,this.onpacket.bind(this)),gZ(t,&quot;error&quot;,this.onerror.bind(this)),gZ(t,&quot;close&quot;,this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),&quot;open&quot;===this.io._readyState&amp;&amp;this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift(&quot;message&quot;),this.emit.apply(this,t),this}emit(t,...e){if(AZ.hasOwnProperty(t))throw new Error(&#39;&quot;&#39;+t+&#39;&quot; is a reserved event name&#39;);e.unshift(t);const i={type:dZ.EVENT,data:e,options:{}};if(i.options.compress=!1!==this.flags.compress,&quot;function&quot;==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),i.id=t}return this.flags.volatile&amp;&amp;(!(this.io.engine&amp;&amp;this.io.engine.transport&amp;&amp;this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(void 0===i)return void(this.acks[t]=e);const n=this.io.setTimeoutFn(()=&gt;{delete this.acks[t];for(let e=0;e&lt;this.sendBuffer.length;e++)this.sendBuffer[e].id===t&amp;&amp;this.sendBuffer.splice(e,1);e.call(this,new Error(&quot;operation has timed out&quot;))},i);this.acks[t]=(...t)=&gt;{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){&quot;function&quot;==typeof this.auth?this.auth(t=&gt;{this.packet({type:dZ.CONNECT,data:t})}):this.packet({type:dZ.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved(&quot;connect_error&quot;,t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved(&quot;disconnect&quot;,t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case dZ.CONNECT:t.data&amp;&amp;t.data.sid?this.onconnect(t.data.sid):this.emitReserved(&quot;connect_error&quot;,new Error(&quot;It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)&quot;));break;case dZ.EVENT:case dZ.BINARY_EVENT:this.onevent(t);break;case dZ.ACK:case dZ.BINARY_ACK:this.onack(t);break;case dZ.DISCONNECT:this.ondisconnect();break;case dZ.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved(&quot;connect_error&quot;,e)}}onevent(t){const e=t.data||[];null!=t.id&amp;&amp;e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&amp;&amp;this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...n){i||(i=!0,e.packet({type:dZ.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];&quot;function&quot;==typeof e&amp;&amp;(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved(&quot;connect&quot;)}emitBuffered(){this.receiveBuffer.forEach(t=&gt;this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=&gt;{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose(&quot;io server disconnect&quot;)}destroy(){this.subs&amp;&amp;(this.subs.forEach(t=&gt;t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&amp;&amp;this.packet({type:dZ.DISCONNECT}),this.destroy(),this.connected&amp;&amp;this.onclose(&quot;io client disconnect&quot;),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i&lt;e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i&lt;e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&amp;&amp;this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function _Z(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter&gt;0&amp;&amp;t.jitter&lt;=1?t.jitter:0,this.attempts=0}_Z.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&amp;Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},_Z.prototype.reset=function(){this.attempts=0},_Z.prototype.setMin=function(t){this.ms=t},_Z.prototype.setMax=function(t){this.max=t},_Z.prototype.setJitter=function(t){this.jitter=t};class bZ extends xY{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;(e=t,t=void 0),(e=e||{}).path=e.path||&quot;/socket.io&quot;,this.opts=e,EY(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&amp;&amp;void 0!==i?i:.5),this.backoff=new _Z({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState=&quot;closed&quot;,this.uri=t;const s=e.parser||n;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&amp;&amp;this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&amp;&amp;this._reconnection&amp;&amp;0===this.backoff.attempts&amp;&amp;this.reconnect()}open(t){if(~this._readyState.indexOf(&quot;open&quot;))return this;this.engine=new tZ(this.uri,this.opts);const e=this.engine,i=this;this._readyState=&quot;opening&quot;,this.skipReconnect=!1;const n=gZ(e,&quot;open&quot;,function(){i.onopen(),t&amp;&amp;t()}),s=gZ(e,&quot;error&quot;,e=&gt;{i.cleanup(),i._readyState=&quot;closed&quot;,this.emitReserved(&quot;error&quot;,e),t?t(e):i.maybeReconnectOnOpen()});if(!1!==this._timeout){const t=this._timeout;0===t&amp;&amp;n();const i=this.setTimeoutFn(()=&gt;{n(),e.close(),e.emit(&quot;error&quot;,new Error(&quot;timeout&quot;))},t);this.opts.autoUnref&amp;&amp;i.unref(),this.subs.push(function(){clearTimeout(i)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState=&quot;open&quot;,this.emitReserved(&quot;open&quot;);const t=this.engine;this.subs.push(gZ(t,&quot;ping&quot;,this.onping.bind(this)),gZ(t,&quot;data&quot;,this.ondata.bind(this)),gZ(t,&quot;error&quot;,this.onerror.bind(this)),gZ(t,&quot;close&quot;,this.onclose.bind(this)),gZ(this.decoder,&quot;decoded&quot;,this.ondecoded.bind(this)))}onping(){this.emitReserved(&quot;ping&quot;)}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved(&quot;packet&quot;,t)}onerror(t){this.emitReserved(&quot;error&quot;,t)}socket(t,e){let i=this.nsps[t];return i||(i=new vZ(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i&lt;e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=&gt;t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose(&quot;forced close&quot;),this.engine&amp;&amp;this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState=&quot;closed&quot;,this.emitReserved(&quot;close&quot;,t,e),this._reconnection&amp;&amp;!this.skipReconnect&amp;&amp;this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts&gt;=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved(&quot;reconnect_failed&quot;),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=&gt;{t.skipReconnect||(this.emitReserved(&quot;reconnect_attempt&quot;,t.backoff.attempts),!t.skipReconnect&amp;&amp;t.open(e=&gt;{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved(&quot;reconnect_error&quot;,e)):t.onreconnect()}))},e);this.opts.autoUnref&amp;&amp;i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved(&quot;reconnect&quot;,t)}}const yZ={};function xZ(t,e){&quot;object&quot;==typeof t&amp;&amp;(e=t,t=void 0);const i=function(t,e=&quot;&quot;,i){let n=t;i=i||&quot;undefined&quot;!=typeof location&amp;&amp;location,null==t&amp;&amp;(t=i.protocol+&quot;//&quot;+i.host),&quot;string&quot;==typeof t&amp;&amp;(&quot;/&quot;===t.charAt(0)&amp;&amp;(t=&quot;/&quot;===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==i?i.protocol+&quot;//&quot;+t:&quot;https://&quot;+t),n=JY(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port=&quot;80&quot;:/^(http|ws)s$/.test(n.protocol)&amp;&amp;(n.port=&quot;443&quot;)),n.path=n.path||&quot;/&quot;;const s=-1!==n.host.indexOf(&quot;:&quot;)?&quot;[&quot;+n.host+&quot;]&quot;:n.host;return n.id=n.protocol+&quot;://&quot;+s+&quot;:&quot;+n.port+e,n.href=n.protocol+&quot;://&quot;+s+(i&amp;&amp;i.port===n.port?&quot;&quot;:&quot;:&quot;+n.port),n}(t,(e=e||{}).path||&quot;/socket.io&quot;),n=i.source,s=i.id;let r;return e.forceNew||e[&quot;force new connection&quot;]||!1===e.multiplex||yZ[s]&amp;&amp;i.path in yZ[s].nsps?r=new bZ(n,e):(yZ[s]||(yZ[s]=new bZ(n,e)),r=yZ[s]),i.query&amp;&amp;!e.query&amp;&amp;(e.query=i.queryKey),r.socket(i.path,e)}Object.assign(xZ,{Manager:bZ,Socket:vZ,io:xZ,connect:xZ});let wZ=(()=&gt;{class t{constructor(t,e,i){this.authenticationService=t,this.mapConfigService=e,this.offlineService=i,this.events$=new S,this.enabled$=QT([this.authenticationService.user$,this.mapConfigService.enableWebsockets$,this.offlineService.isOffline$]).pipe(M(([t,e,i])=&gt;!!t&amp;&amp;e&amp;&amp;!i),Mf()),this.connected$=new Qp(!1),this.enabled$.subscribe(t=&gt;{var e;t?this.connect():null===(e=this.socket)||void 0===e||e.disconnect()})}connect(){var t;null===(t=this.socket)||void 0===t||t.disconnect(),console.log(&quot;WS: connecting&quot;),this.socket=xZ(window.__anaisSettings.ANAIS_SERVER_URL,{path:&quot;/ws&quot;,rememberUpgrade:!0,transports:[&quot;websocket&quot;]}),this.socket.on(&quot;connect&quot;,()=&gt;{console.log(&quot;WS: connected&quot;),this.connected$.next(!0)}),this.socket.on(&quot;disconnect&quot;,t=&gt;jp(this,void 0,void 0,function*(){console.error(`WS: disconnected ${t}`),this.connected$.next(!1),&quot;io server disconnect&quot;===t&amp;&amp;this.connect()})),this.socket.on(&quot;connect_error&quot;,t=&gt;jp(this,void 0,void 0,function*(){console.error(&quot;WS: connect_error&quot;,t),&quot;websocket error&quot;!==t.message&amp;&amp;(yield aU(2e3),this.connect())})),this.socket.on(&quot;event&quot;,t=&gt;{console.log(&quot;WS: event&quot;,t),this.events$.next(t)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(tH),Mn(HU),Mn(hW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const CZ=[[[&quot;caption&quot;]],[[&quot;colgroup&quot;],[&quot;col&quot;]]],SZ=[&quot;caption&quot;,&quot;colgroup, col&quot;];function kZ(t){return class extends t{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Rf(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const EZ=new Ji(&quot;CDK_TABLE&quot;);let MZ=(()=&gt;{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkCellDef&quot;,&quot;&quot;]]}),t})(),TZ=(()=&gt;{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkHeaderCellDef&quot;,&quot;&quot;]]}),t})(),IZ=(()=&gt;{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkFooterCellDef&quot;,&quot;&quot;]]}),t})();class DZ{}const OZ=kZ(DZ);let PZ=(()=&gt;{class t extends OZ{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const e=this._stickyEnd;this._stickyEnd=Rf(t),this._hasStickyChanged=e!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&amp;&amp;(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,&quot;-&quot;),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(Da(EZ,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkColumnDef&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,MZ,5),Th(i,TZ,5),Th(i,IZ,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.cell=t.first),Eh(t=Ih())&amp;&amp;(e.headerCell=t.first),Eh(t=Ih())&amp;&amp;(e.footerCell=t.first)}},inputs:{sticky:&quot;sticky&quot;,name:[&quot;cdkColumnDef&quot;,&quot;name&quot;],stickyEnd:&quot;stickyEnd&quot;},features:[Wl([{provide:&quot;MAT_SORT_HEADER_COLUMN_DEF&quot;,useExisting:t}]),$o]}),t})();class RZ{constructor(t,e){const i=e.nativeElement.classList;for(const n of t._columnCssClassName)i.add(n)}}let FZ=(()=&gt;{class t extends RZ{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(Da(PZ),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;cdk-header-cell&quot;],[&quot;th&quot;,&quot;cdk-header-cell&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;columnheader&quot;,1,&quot;cdk-header-cell&quot;],features:[$o]}),t})(),LZ=(()=&gt;{class t extends RZ{constructor(t,e){var i;if(super(t,e),1===(null===(i=t._table)||void 0===i?void 0:i._elementRef.nativeElement.nodeType)){const i=t._table._elementRef.nativeElement.getAttribute(&quot;role&quot;);e.nativeElement.setAttribute(&quot;role&quot;,&quot;grid&quot;===i||&quot;treegrid&quot;===i?&quot;gridcell&quot;:&quot;cell&quot;)}}}return t.\u0275fac=function(e){return new(e||t)(Da(PZ),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;cdk-cell&quot;],[&quot;td&quot;,&quot;cdk-cell&quot;,&quot;&quot;]],hostAttrs:[1,&quot;cdk-cell&quot;],features:[$o]}),t})();class BZ{constructor(){this.tasks=[],this.endTasks=[]}}const zZ=new Ji(&quot;_COALESCED_STYLE_SCHEDULER&quot;);let NZ=(()=&gt;{class t{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new S}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new BZ,this._getScheduleObservable().pipe(Df(this._destroyed)).subscribe(()=&gt;{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new BZ;for(const e of t.tasks)e();for(const e of t.endTasks)e()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?z(Promise.resolve(void 0)):this._ngZone.onStable.pipe(xf(1))}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),VZ=(()=&gt;{class t{constructor(t,e){this.template=t,this._differs=e}ngOnChanges(t){if(!this._columnsDiffer){const e=t.columns&amp;&amp;t.columns.currentValue||[];this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof jZ?t.headerCell.template:this instanceof qZ?t.footerCell.template:t.cell.template}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc),Da(bc))},t.\u0275dir=Xt({type:t,features:[he]}),t})();class $Z extends VZ{}const UZ=kZ($Z);let jZ=(()=&gt;{class t extends UZ{constructor(t,e,i){super(t,e),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc),Da(bc),Da(EZ,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkHeaderRowDef&quot;,&quot;&quot;]],inputs:{columns:[&quot;cdkHeaderRowDef&quot;,&quot;columns&quot;],sticky:[&quot;cdkHeaderRowDefSticky&quot;,&quot;sticky&quot;]},features:[$o,he]}),t})();class HZ extends VZ{}const GZ=kZ(HZ);let qZ=(()=&gt;{class t extends GZ{constructor(t,e,i){super(t,e),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc),Da(bc),Da(EZ,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkFooterRowDef&quot;,&quot;&quot;]],inputs:{columns:[&quot;cdkFooterRowDef&quot;,&quot;columns&quot;],sticky:[&quot;cdkFooterRowDefSticky&quot;,&quot;sticky&quot;]},features:[$o,he]}),t})(),WZ=(()=&gt;{class t extends VZ{constructor(t,e,i){super(t,e),this._table=i}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc),Da(bc),Da(EZ,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkRowDef&quot;,&quot;&quot;]],inputs:{columns:[&quot;cdkRowDefColumns&quot;,&quot;columns&quot;],when:[&quot;cdkRowDefWhen&quot;,&quot;when&quot;]},features:[$o]}),t})(),YZ=(()=&gt;{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&amp;&amp;(t.mostRecentCellOutlet=null)}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkCellOutlet&quot;,&quot;&quot;]]}),t.mostRecentCellOutlet=null,t})(),ZZ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;cdk-header-row&quot;],[&quot;tr&quot;,&quot;cdk-header-row&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;row&quot;,1,&quot;cdk-header-row&quot;],decls:1,vars:0,consts:[[&quot;cdkCellOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;Na(0,0)},directives:[YZ],encapsulation:2}),t})(),KZ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;cdk-row&quot;],[&quot;tr&quot;,&quot;cdk-row&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;row&quot;,1,&quot;cdk-row&quot;],decls:1,vars:0,consts:[[&quot;cdkCellOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;Na(0,0)},directives:[YZ],encapsulation:2}),t})(),XZ=(()=&gt;{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;ng-template&quot;,&quot;cdkNoDataRow&quot;,&quot;&quot;]]}),t})();const QZ=[&quot;top&quot;,&quot;bottom&quot;,&quot;left&quot;,&quot;right&quot;];class JZ{constructor(t,e,i,n,s=!0,r=!0,o){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=n,this._isBrowser=s,this._needsPositionStickyOnElement=r,this._positionListener=o,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const n of t)if(n.nodeType===n.ELEMENT_NODE){i.push(n);for(let t=0;t&lt;n.children.length;t++)i.push(n.children[t])}this._coalescedStyleScheduler.schedule(()=&gt;{for(const t of i)this._removeStickyStyle(t,e)})}updateStickyColumns(t,e,i,n=!0){if(!t.length||!this._isBrowser||!e.some(t=&gt;t)&amp;&amp;!i.some(t=&gt;t))return void(this._positionListener&amp;&amp;(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],r=s.children.length,o=this._getCellWidths(s,n),a=this._getStickyStartColumnPositions(o,e),l=this._getStickyEndColumnPositions(o,i),c=e.lastIndexOf(!0),h=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=&gt;{const n=&quot;rtl&quot;===this.direction,s=n?&quot;right&quot;:&quot;left&quot;,u=n?&quot;left&quot;:&quot;right&quot;;for(const o of t)for(let t=0;t&lt;r;t++){const n=o.children[t];e[t]&amp;&amp;this._addStickyStyle(n,s,a[t],t===c),i[t]&amp;&amp;this._addStickyStyle(n,u,l[t],t===h)}this._positionListener&amp;&amp;(this._positionListener.stickyColumnsUpdated({sizes:-1===c?[]:o.slice(0,c+1).map((t,i)=&gt;e[i]?t:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===h?[]:o.slice(h).map((t,e)=&gt;i[e+h]?t:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const n=&quot;bottom&quot;===i?t.slice().reverse():t,s=&quot;bottom&quot;===i?e.slice().reverse():e,r=[],o=[],a=[];for(let c=0,h=0;c&lt;n.length;c++){if(!s[c])continue;r[c]=h;const t=n[c];a[c]=this._isNativeHtmlTable?Array.from(t.children):[t];const e=t.getBoundingClientRect().height;h+=e,o[c]=e}const l=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=&gt;{var t,e;for(let o=0;o&lt;n.length;o++){if(!s[o])continue;const t=r[o],e=o===l;for(const n of a[o])this._addStickyStyle(n,i,t,e)}&quot;top&quot;===i?null===(t=this._positionListener)||void 0===t||t.stickyHeaderRowsUpdated({sizes:o,offsets:r,elements:a}):null===(e=this._positionListener)||void 0===e||e.stickyFooterRowsUpdated({sizes:o,offsets:r,elements:a})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector(&quot;tfoot&quot;);this._coalescedStyleScheduler.schedule(()=&gt;{e.some(t=&gt;!t)?this._removeStickyStyle(i,[&quot;bottom&quot;]):this._addStickyStyle(i,&quot;bottom&quot;,0,!1)})}_removeStickyStyle(t,e){for(const i of e)t.style[i]=&quot;&quot;,t.classList.remove(this._borderCellCss[i]);QZ.some(i=&gt;-1===e.indexOf(i)&amp;&amp;t.style[i])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex=&quot;&quot;,this._needsPositionStickyOnElement&amp;&amp;(t.style.position=&quot;&quot;),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,n){t.classList.add(this._stickCellCss),n&amp;&amp;t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&amp;&amp;(t.style.cssText+=&quot;position: -webkit-sticky; position: sticky; &quot;)}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const n of QZ)t.style[n]&amp;&amp;(i+=e[n]);return i?`${i}`:&quot;&quot;}_getCellWidths(t,e=!0){if(!e&amp;&amp;this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],n=t.children;for(let s=0;s&lt;n.length;s++)i.push(n[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let n=0;for(let s=0;s&lt;t.length;s++)e[s]&amp;&amp;(i[s]=n,n+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let n=0;for(let s=t.length;s&gt;0;s--)e[s]&amp;&amp;(i[s]=n,n+=t[s]);return i}}const tK=new Ji(&quot;CDK_SPL&quot;);let eK=(()=&gt;{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;rowOutlet&quot;,&quot;&quot;]]}),t})(),iK=(()=&gt;{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;headerRowOutlet&quot;,&quot;&quot;]]}),t})(),nK=(()=&gt;{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;footerRowOutlet&quot;,&quot;&quot;]]}),t})(),sK=(()=&gt;{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Da(Nc),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;noDataRowOutlet&quot;,&quot;&quot;]]}),t})(),rK=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a,l,c,h){this._differs=t,this._changeDetectorRef=e,this._elementRef=i,this._dir=s,this._platform=o,this._viewRepeater=a,this._coalescedStyleScheduler=l,this._viewportRuler=c,this._stickyPositioningListener=h,this._onDestroy=new S,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass=&quot;cdk-table-sticky&quot;,this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new mh,this.viewChange=new Qp({start:0,end:Number.MAX_VALUE}),n||this._elementRef.nativeElement.setAttribute(&quot;role&quot;,&quot;table&quot;),this._document=r,this._isNativeHtmlTable=&quot;TABLE&quot;===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&amp;&amp;this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Rf(t),this._rowOutlet&amp;&amp;this._rowOutlet.viewContainer.length&amp;&amp;(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Rf(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&amp;&amp;this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,e)=&gt;this.trackBy?this.trackBy(e.dataIndex,e.data):e),this._viewportRuler.change().pipe(Df(this._onDestroy)).subscribe(()=&gt;{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const t=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||t,this._forceRecalculateCellWidths=t,this._headerRowDefChanged&amp;&amp;(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&amp;&amp;(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&amp;&amp;this._rowDefs.length&gt;0&amp;&amp;!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&amp;&amp;this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),Tg(this.dataSource)&amp;&amp;this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const e=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,e,(t,e,i)=&gt;this._getEmbeddedViewArgs(t.item,i),t=&gt;t.item.data,t=&gt;{1===t.operation&amp;&amp;t.context&amp;&amp;this._renderCellTemplateForItem(t.record.item.rowDef,t.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(t=&gt;{e.get(t.currentIndex).context.$implicit=t.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._elementRef.nativeElement.querySelector(&quot;thead&quot;);e&amp;&amp;(e.style.display=t.length?&quot;&quot;:&quot;none&quot;);const i=this._headerRowDefs.map(t=&gt;t.sticky);this._stickyStyler.clearStickyPositioning(t,[&quot;top&quot;]),this._stickyStyler.stickRows(t,i,&quot;top&quot;),this._headerRowDefs.forEach(t=&gt;t.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),e=this._elementRef.nativeElement.querySelector(&quot;tfoot&quot;);e&amp;&amp;(e.style.display=t.length?&quot;&quot;:&quot;none&quot;);const i=this._footerRowDefs.map(t=&gt;t.sticky);this._stickyStyler.clearStickyPositioning(t,[&quot;bottom&quot;]),this._stickyStyler.stickRows(t,i,&quot;bottom&quot;),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(t=&gt;t.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&amp;&amp;!this._fixedLayout||this._stickyColumnStylesNeedReset)&amp;&amp;(this._stickyStyler.clearStickyPositioning([...t,...e,...i],[&quot;left&quot;,&quot;right&quot;]),this._stickyColumnStylesNeedReset=!1),t.forEach((t,e)=&gt;{this._addStickyColumnStyles([t],this._headerRowDefs[e])}),this._rowDefs.forEach(t=&gt;{const i=[];for(let n=0;n&lt;e.length;n++)this._renderRows[n].rowDef===t&amp;&amp;i.push(e[n]);this._addStickyColumnStyles(i,t)}),i.forEach((t,e)=&gt;{this._addStickyColumnStyles([t],this._footerRowDefs[e])}),Array.from(this._columnDefsByName.values()).forEach(t=&gt;t.resetStickyChanged())}_getAllRenderRows(){const t=[],e=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i&lt;this._data.length;i++){let n=this._data[i];const s=this._getRenderRowsForData(n,i,e.get(n));this._cachedRenderRowsMap.has(n)||this._cachedRenderRowsMap.set(n,new WeakMap);for(let e=0;e&lt;s.length;e++){let i=s[e];const n=this._cachedRenderRowsMap.get(i.data);n.has(i.rowDef)?n.get(i.rowDef).push(i):n.set(i.rowDef,[i]),t.push(i)}}return t}_getRenderRowsForData(t,e,i){return this._getRowDefs(t,e).map(n=&gt;{const s=i&amp;&amp;i.has(n)?i.get(n):[];if(s.length){const t=s.shift();return t.dataIndex=e,t}return{data:t,rowDef:n,dataIndex:e}})}_cacheColumnDefs(){this._columnDefsByName.clear(),oK(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(t=&gt;{this._columnDefsByName.has(t.name),this._columnDefsByName.set(t.name,t)})}_cacheRowDefs(){this._headerRowDefs=oK(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=oK(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=oK(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(t=&gt;!t.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(t,e)=&gt;t||!!e.getColumnsDiff(),e=this._rowDefs.reduce(t,!1);e&amp;&amp;this._forceRenderDataRows();const i=this._headerRowDefs.reduce(t,!1);i&amp;&amp;this._forceRenderHeaderRows();const n=this._footerRowDefs.reduce(t,!1);return n&amp;&amp;this._forceRenderFooterRows(),e||i||n}_switchDataSource(t){this._data=[],Tg(this.dataSource)&amp;&amp;this.dataSource.disconnect(this),this._renderChangeSubscription&amp;&amp;(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&amp;&amp;this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;Tg(this.dataSource)?t=this.dataSource.connect(this):eg(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&amp;&amp;(t=Jp(this.dataSource)),this._renderChangeSubscription=t.pipe(Df(this._onDestroy)).subscribe(t=&gt;{this._data=t||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length&gt;0&amp;&amp;this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,e)=&gt;this._renderRow(this._headerRowOutlet,t,e)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length&gt;0&amp;&amp;this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,e)=&gt;this._renderRow(this._footerRowOutlet,t,e)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,e){const i=Array.from(e.columns||[]).map(t=&gt;this._columnDefsByName.get(t)),n=i.map(t=&gt;t.sticky),s=i.map(t=&gt;t.stickyEnd);this._stickyStyler.updateStickyColumns(t,n,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const e=[];for(let i=0;i&lt;t.viewContainer.length;i++){const n=t.viewContainer.get(i);e.push(n.rootNodes[0])}return e}_getRowDefs(t,e){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(i=&gt;!i.when||i.when(e,t));else{let n=this._rowDefs.find(i=&gt;i.when&amp;&amp;i.when(e,t))||this._defaultRowDef;n&amp;&amp;i.push(n)}return i}_getEmbeddedViewArgs(t,e){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:e}}_renderRow(t,e,i,n={}){const s=t.viewContainer.createEmbeddedView(e.template,n,i);return this._renderCellTemplateForItem(e,n),s}_renderCellTemplateForItem(t,e){for(let i of this._getCellTemplates(t))YZ.mostRecentCellOutlet&amp;&amp;YZ.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,e);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let e=0,i=t.length;e&lt;i;e++){const n=t.get(e).context;n.count=i,n.first=0===e,n.last=e===i-1,n.even=e%2==0,n.odd=!n.even,this.multiTemplateDataRows?(n.dataIndex=this._renderRows[e].dataIndex,n.renderIndex=e):n.index=this._renderRows[e].dataIndex}}_getCellTemplates(t){return t&amp;&amp;t.columns?Array.from(t.columns,e=&gt;{const i=this._columnDefsByName.get(e);return t.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),e=[{tag:&quot;thead&quot;,outlets:[this._headerRowOutlet]},{tag:&quot;tbody&quot;,outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:&quot;tfoot&quot;,outlets:[this._footerRowOutlet]}];for(const i of e){const e=this._document.createElement(i.tag);e.setAttribute(&quot;role&quot;,&quot;rowgroup&quot;);for(const t of i.outlets)e.appendChild(t.elementRef.nativeElement);t.appendChild(e)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(t,e)=&gt;t||e.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&amp;&amp;this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&amp;&amp;this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&amp;&amp;(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new JZ(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:&quot;ltr&quot;,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Jp()).pipe(Df(this._onDestroy)).subscribe(t=&gt;{this._stickyStyler.direction=t,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(t=&gt;!t._table||t._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(t){const e=0===this._rowOutlet.viewContainer.length;if(e!==this._isShowingNoDataRow){const i=this._noDataRowOutlet.viewContainer;e?i.createEmbeddedView(t.templateRef):i.clear(),this._isShowingNoDataRow=e}}}}return t.\u0275fac=function(e){return new(e||t)(Da(bc),Da(Ec),Da(ec),Yi(&quot;role&quot;),Da(kg,8),Da(Fu),Da(jf),Da(Fg),Da(zZ),Da(Hg),Da(tK,12))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;cdk-table&quot;],[&quot;table&quot;,&quot;cdk-table&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,XZ,5),Th(i,PZ,5),Th(i,WZ,5),Th(i,jZ,5),Th(i,qZ,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._noDataRow=t.first),Eh(t=Ih())&amp;&amp;(e._contentColumnDefs=t),Eh(t=Ih())&amp;&amp;(e._contentRowDefs=t),Eh(t=Ih())&amp;&amp;(e._contentHeaderRowDefs=t),Eh(t=Ih())&amp;&amp;(e._contentFooterRowDefs=t)}},viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(eK,7),Mh(iK,7),Mh(nK,7),Mh(sK,7)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._rowOutlet=t.first),Eh(t=Ih())&amp;&amp;(e._headerRowOutlet=t.first),Eh(t=Ih())&amp;&amp;(e._footerRowOutlet=t.first),Eh(t=Ih())&amp;&amp;(e._noDataRowOutlet=t.first)}},hostAttrs:[1,&quot;cdk-table&quot;],hostVars:2,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;cdk-table-fixed-layout&quot;,e.fixedLayout)},inputs:{trackBy:&quot;trackBy&quot;,dataSource:&quot;dataSource&quot;,multiTemplateDataRows:&quot;multiTemplateDataRows&quot;,fixedLayout:&quot;fixedLayout&quot;},outputs:{contentChanged:&quot;contentChanged&quot;},exportAs:[&quot;cdkTable&quot;],features:[Wl([{provide:EZ,useExisting:t},{provide:Fg,useClass:Dg},{provide:zZ,useClass:NZ},{provide:tK,useValue:null}])],ngContentSelectors:SZ,decls:6,vars:0,consts:[[&quot;headerRowOutlet&quot;,&quot;&quot;],[&quot;rowOutlet&quot;,&quot;&quot;],[&quot;noDataRowOutlet&quot;,&quot;&quot;],[&quot;footerRowOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(CZ),Qa(0),Qa(1,1),Na(2,0),Na(3,1),Na(4,2),Na(5,3))},directives:[iK,eK,sK,nK],styles:[&quot;.cdk-table-fixed-layout{table-layout:fixed}\n&quot;],encapsulation:2}),t})();function oK(t,e){return t.concat(Array.from(e))}let aK=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[Kg]]}),t})();const lK=[[[&quot;caption&quot;]],[[&quot;colgroup&quot;],[&quot;col&quot;]]],cK=[&quot;caption&quot;,&quot;colgroup, col&quot;];let hK=(()=&gt;{class t extends rK{constructor(){super(...arguments),this.stickyCssClass=&quot;mat-table-sticky&quot;,this.needsPositionStickyOnElement=!1}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-table&quot;],[&quot;table&quot;,&quot;mat-table&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-table&quot;],hostVars:2,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-table-fixed-layout&quot;,e.fixedLayout)},exportAs:[&quot;matTable&quot;],features:[Wl([{provide:Fg,useClass:Dg},{provide:rK,useExisting:t},{provide:EZ,useExisting:t},{provide:zZ,useClass:NZ},{provide:tK,useValue:null}]),$o],ngContentSelectors:cK,decls:6,vars:0,consts:[[&quot;headerRowOutlet&quot;,&quot;&quot;],[&quot;rowOutlet&quot;,&quot;&quot;],[&quot;noDataRowOutlet&quot;,&quot;&quot;],[&quot;footerRowOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(lK),Qa(0),Qa(1,1),Na(2,0),Na(3,1),Na(4,2),Na(5,3))},directives:[iK,eK,sK,nK],styles:[&#39;mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:&quot;&quot;}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n&#39;],encapsulation:2}),t})(),uK=(()=&gt;{class t extends MZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matCellDef&quot;,&quot;&quot;]],features:[Wl([{provide:MZ,useExisting:t}]),$o]}),t})(),dK=(()=&gt;{class t extends TZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matHeaderCellDef&quot;,&quot;&quot;]],features:[Wl([{provide:TZ,useExisting:t}]),$o]}),t})(),pK=(()=&gt;{class t extends PZ{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matColumnDef&quot;,&quot;&quot;]],inputs:{sticky:&quot;sticky&quot;,name:[&quot;matColumnDef&quot;,&quot;name&quot;]},features:[Wl([{provide:PZ,useExisting:t},{provide:&quot;MAT_SORT_HEADER_COLUMN_DEF&quot;,useExisting:t}]),$o]}),t})(),fK=(()=&gt;{class t extends FZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-header-cell&quot;],[&quot;th&quot;,&quot;mat-header-cell&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;columnheader&quot;,1,&quot;mat-header-cell&quot;],features:[$o]}),t})(),mK=(()=&gt;{class t extends LZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-cell&quot;],[&quot;td&quot;,&quot;mat-cell&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;gridcell&quot;,1,&quot;mat-cell&quot;],features:[$o]}),t})(),gK=(()=&gt;{class t extends jZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matHeaderRowDef&quot;,&quot;&quot;]],inputs:{columns:[&quot;matHeaderRowDef&quot;,&quot;columns&quot;],sticky:[&quot;matHeaderRowDefSticky&quot;,&quot;sticky&quot;]},features:[Wl([{provide:jZ,useExisting:t}]),$o]}),t})(),AK=(()=&gt;{class t extends WZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matRowDef&quot;,&quot;&quot;]],inputs:{columns:[&quot;matRowDefColumns&quot;,&quot;columns&quot;],when:[&quot;matRowDefWhen&quot;,&quot;when&quot;]},features:[Wl([{provide:WZ,useExisting:t}]),$o]}),t})(),vK=(()=&gt;{class t extends ZZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-header-row&quot;],[&quot;tr&quot;,&quot;mat-header-row&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;row&quot;,1,&quot;mat-header-row&quot;],exportAs:[&quot;matHeaderRow&quot;],features:[Wl([{provide:ZZ,useExisting:t}]),$o],decls:1,vars:0,consts:[[&quot;cdkCellOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;Na(0,0)},directives:[YZ],encapsulation:2}),t})(),_K=(()=&gt;{class t extends KZ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-row&quot;],[&quot;tr&quot;,&quot;mat-row&quot;,&quot;&quot;]],hostAttrs:[&quot;role&quot;,&quot;row&quot;,1,&quot;mat-row&quot;],exportAs:[&quot;matRow&quot;],features:[Wl([{provide:KZ,useExisting:t}]),$o],decls:1,vars:0,consts:[[&quot;cdkCellOutlet&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;Na(0,0)},directives:[YZ],encapsulation:2}),t})(),bK=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[aK,Fb],Fb]}),t})();class yK extends Mg{constructor(t=[]){super(),this._renderData=new Qp([]),this._filter=new Qp(&quot;&quot;),this._internalPageChanges=new S,this._renderChangesSubscription=null,this.sortingDataAccessor=(t,e)=&gt;{const i=t[e];if(Lf(i)){const t=Number(i);return t&lt;9007199254740991?t:i}return i},this.sortData=(t,e)=&gt;{const i=e.active,n=e.direction;return i&amp;&amp;&quot;&quot;!=n?t.sort((t,e)=&gt;{let s=this.sortingDataAccessor(t,i),r=this.sortingDataAccessor(e,i);const o=typeof s,a=typeof r;o!==a&amp;&amp;(&quot;number&quot;===o&amp;&amp;(s+=&quot;&quot;),&quot;number&quot;===a&amp;&amp;(r+=&quot;&quot;));let l=0;return null!=s&amp;&amp;null!=r?s&gt;r?l=1:s&lt;r&amp;&amp;(l=-1):null!=s?l=1:null!=r&amp;&amp;(l=-1),l*(&quot;asc&quot;==n?1:-1)}):t},this.filterPredicate=(t,e)=&gt;{const i=Object.keys(t).reduce((e,i)=&gt;e+t[i]+&quot;\u25ec&quot;,&quot;&quot;).toLowerCase(),n=e.trim().toLowerCase();return-1!=i.indexOf(n)},this._data=new Qp(t),this._updateChangeSubscription()}get data(){return this._data.value}set data(t){this._data.next(t),this._renderChangesSubscription||this._filterData(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}_updateChangeSubscription(){var t;const e=this._sort?W(this._sort.sortChange,this._sort.initialized):Jp(null),i=this._paginator?W(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Jp(null),n=QT([this._data,this._filter]).pipe(M(([t])=&gt;this._filterData(t))),s=QT([n,e]).pipe(M(([t])=&gt;this._orderData(t))),r=QT([s,i]).pipe(M(([t])=&gt;this._pageData(t)));null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=r.subscribe(t=&gt;this._renderData.next(t))}_filterData(t){return this.filteredData=null==this.filter||&quot;&quot;===this.filter?t:t.filter(t=&gt;this.filterPredicate(t,this.filter)),this.paginator&amp;&amp;this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;const e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(e,e+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=&gt;{const e=this.paginator;if(e&amp;&amp;(e.length=t,e.pageIndex&gt;0)){const t=Math.ceil(e.length/e.pageSize)-1||0,i=Math.min(e.pageIndex,t);i!==e.pageIndex&amp;&amp;(e.pageIndex=i,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var t;null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=null}}class xK extends yK{}function wK(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,16),xl(1,&quot;Action&quot;),Fa())}function CK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,17),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(t.action)}}function SK(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,16),xl(1,&quot;Invit\xe9&quot;),Fa())}function kK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,17),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(t.guest?&quot;\u2713&quot;:&quot;&quot;)}}function EK(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,16),xl(1,&quot;Contributeur&quot;),Fa())}function MK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,17),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(t.contributor?&quot;\u2713&quot;:&quot;&quot;)}}function TK(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,16),xl(1,&quot;Propri\xe9taire&quot;),Fa())}function IK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,17),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(t.owner?&quot;\u2713&quot;:&quot;&quot;)}}function DK(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,16),xl(1,&quot;Administrateur&quot;),Fa())}function OK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,17),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(t.admin?&quot;\u2713&quot;:&quot;&quot;)}}function PK(t,e){1&amp;t&amp;&amp;La(0,&quot;tr&quot;,18)}function RK(t,e){1&amp;t&amp;&amp;La(0,&quot;tr&quot;,19)}const FK=!0,LK=!1,BK=[{guest:FK,contributor:FK,owner:FK,admin:FK,action:&quot;Voir la liste des membres&quot;},{guest:FK,contributor:FK,owner:FK,admin:LK,action:&quot;Acc\xe9der aux donn\xe9es du groupe*&quot;},{guest:LK,contributor:FK,owner:FK,admin:LK,action:&quot;Modifier/Supprimer les donn\xe9es du groupe*&quot;},{guest:LK,contributor:LK,owner:FK,admin:FK,action:&quot;Ajouter/Supprimer des membres&quot;},{guest:LK,contributor:LK,owner:FK,admin:FK,action:&quot;Renommer le groupe&quot;},{guest:LK,contributor:LK,owner:LK,admin:FK,action:&quot;Supprimer le groupe&quot;}];let zK=(()=&gt;{class t{constructor(){this.displayedColumns=[&quot;action&quot;,&quot;guest&quot;,&quot;contributor&quot;,&quot;owner&quot;,&quot;admin&quot;],this.dataSource=BK}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-role-permissions-dialog&quot;]],decls:29,vars:3,consts:[[1,&quot;d-flex&quot;],[1,&quot;dialog-title&quot;,&quot;u-flex&quot;,&quot;px-3&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer la fen\xeatre&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;pa-3&quot;],[1,&quot;mat-body&quot;],[&quot;mat-table&quot;,&quot;&quot;,1,&quot;mt-2&quot;,2,&quot;width&quot;,&quot;100%&quot;,3,&quot;dataSource&quot;],[&quot;matColumnDef&quot;,&quot;action&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;,&quot;class&quot;,&quot;pa-3&quot;,4,&quot;matHeaderCellDef&quot;],[&quot;mat-cell&quot;,&quot;&quot;,&quot;class&quot;,&quot;pa-3&quot;,4,&quot;matCellDef&quot;],[&quot;matColumnDef&quot;,&quot;guest&quot;],[&quot;matColumnDef&quot;,&quot;contributor&quot;],[&quot;matColumnDef&quot;,&quot;owner&quot;],[&quot;matColumnDef&quot;,&quot;admin&quot;],[&quot;mat-header-row&quot;,&quot;&quot;,4,&quot;matHeaderRowDef&quot;],[&quot;mat-row&quot;,&quot;&quot;,4,&quot;matRowDef&quot;,&quot;matRowDefColumns&quot;],[1,&quot;mat-small&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;,1,&quot;pa-3&quot;],[&quot;mat-cell&quot;,&quot;&quot;,1,&quot;pa-3&quot;],[&quot;mat-header-row&quot;,&quot;&quot;],[&quot;mat-row&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h1&quot;,1),xl(2,&quot; R\xf4les et permissions &quot;),Fa(),Ra(3,&quot;button&quot;,2),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;,3),Ra(7,&quot;p&quot;,4),xl(8,&quot; Le tableau ci-dessous recense les permissions des utilisateurs membres d&#39;un groupe selon leur r\xf4le dans le groupe. &quot;),Fa(),Ra(9,&quot;table&quot;,5),Ba(10,6),ra(11,wK,2,0,&quot;th&quot;,7),ra(12,CK,2,1,&quot;td&quot;,8),za(),Ba(13,9),ra(14,SK,2,0,&quot;th&quot;,7),ra(15,kK,2,1,&quot;td&quot;,8),za(),Ba(16,10),ra(17,EK,2,0,&quot;th&quot;,7),ra(18,MK,2,1,&quot;td&quot;,8),za(),Ba(19,11),ra(20,TK,2,0,&quot;th&quot;,7),ra(21,IK,2,1,&quot;td&quot;,8),za(),Ba(22,12),ra(23,DK,2,0,&quot;th&quot;,7),ra(24,OK,2,1,&quot;td&quot;,8),za(),ra(25,PK,1,0,&quot;tr&quot;,13),ra(26,RK,1,0,&quot;tr&quot;,14),Fa(),Ra(27,&quot;p&quot;,15),xl(28,&quot; * Les donn\xe9es du groupe d\xe9signent les flottes, annotations, zones et r\xe8gles. &quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;dataSource&quot;,e.dataSource),Sr(16),Oa(&quot;matHeaderRowDef&quot;,e.displayedColumns),Sr(1),Oa(&quot;matRowDefColumns&quot;,e.displayedColumns))},directives:[Ry,nk,hE,hK,pK,dK,uK,gK,AK,fK,mK,vK,_K],encapsulation:2}),t})();var NK=(()=&gt;(function(t){t.User=&quot;user&quot;,t.Admin=&quot;admin&quot;}(NK||(NK={})),NK))();function VK(t,e){let i;const n=[];for(;null!==(i=t.exec(e));)i.index===t.lastIndex&amp;&amp;t.lastIndex++,n.push(i.slice(1));return n}const $K=/(?:\W|^)([0-9]{9})(?!\w)/g,UK=/(?:\W|^)([0-9]{7})(?!\w)/g,jK=/(([^&lt;&gt;()[\]\\.,;:\s@&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@&quot;]+)*)|(&quot;.+&quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g,HK=/([+-]?\d{1,2}(?:\.\d{1,14})?)\s*[NSns]?[, ]+([+-]?\d{1,3}(?:\.\d{1,14})?)\s*[EWew]?/g;function GK(t){return VK(HK,t).map(([t,e])=&gt;({lat:parseFloat(t),lon:parseFloat(e)})).filter(t=&gt;KK(t))}const qK=/(\d{1,2})\D+(\d{1,2}(?:\.\d*)?)\D*([NSns])[, -]+(\d{1,3})\D+(\d{1,2}(?:\.\d*)?)\D*([EWew])/g;function WK(t){return VK(qK,t).map(([t,e,i,n,s,r])=&gt;({lat:(parseFloat(t)+parseFloat(e)/60)*(&quot;Nn&quot;.includes(i)?1:-1),lon:(parseFloat(n)+parseFloat(s)/60)*(&quot;Ee&quot;.includes(r)?1:-1)})).filter(t=&gt;KK(t))}const YK=/(\d{1,2})\D+(\d{1,2})[^.0-9]+(\d{1,2}(?:\.\d*)?)\D*([NSns])[, -]+(\d{1,3})\D+(\d{1,2})[^.0-9]+(\d{1,2}(?:\.\d*)?)\D*([EWew])/g;function ZK(t){return VK(YK,t).map(([t,e,i,n,s,r,o,a])=&gt;({lat:(parseFloat(t)+parseFloat(e)/60+parseFloat(i)/3600)*(&quot;Nn&quot;.includes(n)?1:-1),lon:(parseFloat(s)+parseFloat(r)/60+parseFloat(o)/3600)*(&quot;Ee&quot;.includes(a)?1:-1)})).filter(t=&gt;KK(t))}function KK(t){return t.lat&gt;=-85.06&amp;&amp;t.lat&lt;=85.06&amp;&amp;t.lon&gt;=-180&amp;&amp;t.lon&lt;=180}function XK(t){const e=t.value.match(jK);return(null==e?void 0:e.length)&gt;0?null:{missingEmails:!0}}function QK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;,2),xl(1),Fa()),2&amp;t){const t=Za();ll(&quot;background-color&quot;,t.roleInfo.backgroundColor),Sr(1),wl(t.roleInfo.label)}}function JK(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,7),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.role),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function tX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;span&quot;,3),Ha(&quot;click&quot;,function(){return Le(t),Za().openSelect()}),xl(1),Fa(),Ra(2,&quot;mat-select&quot;,4,5),Ha(&quot;selectionChange&quot;,function(e){return Le(t),Za().updateRole(e.value)}),ra(4,JK,2,2,&quot;mat-option&quot;,6),Fa()}if(2&amp;t){const t=Za();ll(&quot;background-color&quot;,t.roleInfo.backgroundColor),Sr(1),Cl(&quot; &quot;,t.roleInfo.label,&quot; &quot;),Sr(1),Oa(&quot;value&quot;,t.role),Sr(2),Oa(&quot;ngForOf&quot;,t.RoleInfos)}}let eX=(()=&gt;{class t{constructor(){this.editable=!1,this.update$=new mh,this.RoleInfos=wW}ngOnChanges(t){t.role&amp;&amp;(this.roleInfo=wW.find(t=&gt;t.role===this.role))}openSelect(){this.select.open()}updateRole(t){this.role=t,this.roleInfo=wW.find(t=&gt;t.role===this.role),this.update$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-member-role-chip&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(qT,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.select=t.first)}},inputs:{role:&quot;role&quot;,editable:&quot;editable&quot;},outputs:{update$:&quot;update$&quot;},features:[he],decls:2,vars:2,consts:[[&quot;class&quot;,&quot;role-chip&quot;,3,&quot;backgroundColor&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[1,&quot;role-chip&quot;],[&quot;title&quot;,&quot;Cliquer pour changer&quot;,1,&quot;role-chip&quot;,&quot;role-chip--editable&quot;,3,&quot;click&quot;],[1,&quot;select&quot;,3,&quot;value&quot;,&quot;selectionChange&quot;],[&quot;select&quot;,&quot;&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;]],template:function(t,e){1&amp;t&amp;&amp;(ra(0,QK,2,3,&quot;span&quot;,0),ra(1,tX,5,5,&quot;ng-template&quot;,1)),2&amp;t&amp;&amp;(Oa(&quot;ngIf&quot;,!e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.editable))},directives:[Nd,qT,Bd,Sy],styles:[&quot;[_nghost-%COMP%]{position:relative}.role-chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:6px;line-height:1em;color:#fff}.role-chip--editable[_ngcontent-%COMP%]{cursor:pointer}.select[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:1px;width:1px;overflow:hidden;visibility:hidden}&quot;],changeDetection:0}),t})();function iX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za(2).startEdition()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;edit&quot;),Fa(),Fa()}}function nX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,15),Ha(&quot;click&quot;,function(){return Le(t),Za(2).deleteGroup()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;delete&quot;),Fa(),Fa()}}function sX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,10),Ra(1,&quot;div&quot;,11),xl(2),Fa(),ra(3,iX,3,0,&quot;button&quot;,12),ra(4,nX,3,0,&quot;button&quot;,13),Fa()),2&amp;t){const t=Za();Sr(2),Cl(&quot; &quot;,t.group.name,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,t.canEdit),Sr(1),Oa(&quot;ngIf&quot;,t.canDelete)}}function rX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;form&quot;,16),Ra(1,&quot;mat-form-field&quot;,17),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Nom du groupe&quot;),Fa(),La(4,&quot;input&quot;,18),Fa(),Ra(5,&quot;button&quot;,19),Ra(6,&quot;mat-icon&quot;),xl(7,&quot; check &quot;),Fa(),Fa(),Ra(8,&quot;button&quot;,20),Ha(&quot;click&quot;,function(){return Le(t),Za().showEditForm=!1}),Ra(9,&quot;mat-icon&quot;),xl(10,&quot; clear &quot;),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za();Oa(&quot;formGroup&quot;,t.editForm),Sr(5),Oa(&quot;app-async-action&quot;,t.saveEdition)(&quot;disabled&quot;,!t.editForm.valid)}}function oX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-hint&quot;),xl(1),Fa()),2&amp;t){const t=Za(2);Sr(1),kl(&quot;&quot;,t.extractedEmailsCount,&quot; email&quot;,t.extractedEmailsCount&gt;1?&quot;s&quot;:&quot;&quot;,&quot; reconnu&quot;,t.extractedEmailsCount&gt;1?&quot;s&quot;:&quot;&quot;,&quot;.&quot;)}}function aX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;Aucun email reconnu&quot;),Fa())}function lX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;h4&quot;,21),xl(1,&quot;Ajouter des membres&quot;),Fa(),Ra(2,&quot;form&quot;,22),Ra(3,&quot;mat-form-field&quot;,23),Ra(4,&quot;mat-label&quot;),xl(5,&quot;Email(s)&quot;),Fa(),La(6,&quot;textarea&quot;,24),ra(7,oX,2,3,&quot;mat-hint&quot;,25),ra(8,aX,2,0,&quot;mat-error&quot;,25),Fa(),Ra(9,&quot;app-member-role-chip&quot;,26),Ha(&quot;update$&quot;,function(e){return Le(t),Za().addMembersForm.controls.role.setValue(e)}),Fa(),Ra(10,&quot;button&quot;,27),xl(11),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(2),Oa(&quot;formGroup&quot;,t.addMembersForm),Sr(5),Oa(&quot;ngIf&quot;,t.extractedEmailsCount&gt;0),Sr(1),Oa(&quot;ngIf&quot;,t.addMembersForm.controls.emails.touched&amp;&amp;t.addMembersForm.controls.emails.hasError(&quot;missingEmails&quot;)),Sr(1),Oa(&quot;role&quot;,t.addMembersForm.controls.role.value)(&quot;editable&quot;,!0),Sr(1),Oa(&quot;app-async-action&quot;,t.addMembers)(&quot;disabled&quot;,!t.addMembersForm.valid),Sr(1),Cl(&quot;Ajouter &quot;,t.extractedEmailsCount&gt;1?&quot;les utilisateurs&quot;:&quot;l&#39;utilisateur&quot;,&quot;&quot;)}}function cX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,28),xl(1,&quot;Aucun membre&quot;),Fa())}function hX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,32),Ha(&quot;click&quot;,function(){Le(t);const e=Za().$implicit;return Za().removeMember(e.id)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;delete&quot;),Fa(),Fa()}}function uX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,29),Ra(1,&quot;div&quot;,30),xl(2),Fa(),Ra(3,&quot;app-member-role-chip&quot;,26),Ha(&quot;update$&quot;,function(e){const i=Le(t).$implicit;return Za().updateMemberRole(i.id,e)}),Fa(),ra(4,hX,3,0,&quot;button&quot;,31),Fa()}if(2&amp;t){const t=e.$implicit,i=Za();Sr(2),wl(t.email),Sr(1),Oa(&quot;role&quot;,t.role)(&quot;editable&quot;,i.canEdit),Sr(1),Oa(&quot;ngIf&quot;,i.canEdit)}}let dX=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.dialog=t,this.formBuilder=e,this.uiService=i,this.workerService=n,this.update$=new mh,this.delete$=new mh,this.showEditForm=!1,this.extractedEmails=[],this.extractedEmailsCount=0,this.saveEdition=()=&gt;jp(this,void 0,void 0,function*(){yield this.workerService.groups.update(this.group.id,{name:this.editForm.value.name}),this.notifyUpdate(),this.cancelEdition()}),this.addMembers=()=&gt;jp(this,void 0,void 0,function*(){const t=yield Promise.all(this.extractedEmails.map(t=&gt;jp(this,void 0,void 0,function*(){try{const e=yield this.workerService.users.getByEmail(t);return{email:t,id:null==e?void 0:e.id}}catch(e){return{email:t,id:null}}}))),e=t.filter(t=&gt;!!t.id).map(t=&gt;({user_id:t.id,role:this.addMembersForm.value.role}));if(0===e.length)throw new Error(&quot;Aucun compte ANAIS n&#39;a \xe9t\xe9 trouv\xe9 ANAIS.&quot;);if(yield this.workerService.groups.addGroupMembers(this.group.id,e),this.notifyUpdate(),t.length!==e.length){const e=t.filter(t=&gt;!t.id).map(t=&gt;t.email);this.uiService.success(`Aucun compte ANAIS n&#39;a \xe9t\xe9 trouv\xe9 pour les emails suivants : ${e.join(&quot;, &quot;)}`)}}),this.updateMemberRole=(t,e)=&gt;jp(this,void 0,void 0,function*(){yield this.workerService.groups.updateGroupMember(this.group.id,t,{role:e}),this.notifyUpdate()}),this.removeMember=t=&gt;jp(this,void 0,void 0,function*(){this.uiService.confirm({title:&quot;Suppression du membre&quot;,message:&quot;Confirmez-vous la suppression du membre de ce groupe ?&quot;,action:e=&gt;jp(this,void 0,void 0,function*(){e&amp;&amp;(yield this.workerService.groups.removeGroupMember(this.group.id,t),this.notifyUpdate())})})})}ngOnInit(){return jp(this,void 0,void 0,function*(){this.ensureMandatoryInputParams(&quot;group&quot;),this.addMembersForm=this.formBuilder.group({emails:[&quot;&quot;,[XK]],role:[xW.Guest]}),this.canEdit=[NK.Admin,xW.Owner,xW.Contributor].includes(this.permissions),this.canDelete=this.permissions===NK.Admin,this.subscriptions.push(this.addMembersForm.controls.emails.valueChanges.subscribe(t=&gt;{var e;const i=t.match(jK);this.extractedEmails=null!=i?i:[],this.extractedEmailsCount=null!==(e=null==i?void 0:i.length)&amp;&amp;void 0!==e?e:0}))})}notifyUpdate(){this.update$.emit(this.group)}startEdition(){this.editForm=this.formBuilder.group({name:[this.group.name,[Ky.required]]}),this.showEditForm=!0}cancelEdition(){this.showEditForm=!1}deleteGroup(){this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Confirmez-vous la suppression de ce groupe ?&quot;,action:t=&gt;jp(this,void 0,void 0,function*(){t&amp;&amp;(yield this.workerService.groups.delete(this.group.id),this.delete$.emit())})})}trackById(t,e){return e.id}openRolePermissionsDialog(){this.dialog.open(zK,{panelClass:&quot;no-border-dialog&quot;,autoFocus:!1,closeOnNavigation:!1})}}return t.\u0275fac=function(e){return new(e||t)(Da(ek),Da(Rw),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-group-management&quot;]],inputs:{group:&quot;group&quot;,permissions:&quot;permissions&quot;},outputs:{update$:&quot;update$&quot;,delete$:&quot;delete$&quot;},features:[$o],decls:13,vars:7,consts:[[&quot;class&quot;,&quot;d-flex&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;d-flex&quot;,3,&quot;formGroup&quot;,4,&quot;ngIf&quot;],[2,&quot;border&quot;,&quot;1px solid #dbdbdb&quot;,&quot;padding&quot;,&quot;16px&quot;],[3,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;mt-2&quot;,3,&quot;click&quot;],[1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[1,&quot;subheading-1&quot;,&quot;mx-1&quot;],[1,&quot;table&quot;],[&quot;class&quot;,&quot;no-member-message&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;d-flex-center row&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[1,&quot;d-flex&quot;],[1,&quot;pa-3&quot;,&quot;u-flex&quot;,&quot;d-flex-center&quot;,&quot;group-name&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Editer le nom du groupe&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer ce groupe&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Editer le nom du groupe&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer ce groupe&quot;,3,&quot;click&quot;],[1,&quot;d-flex&quot;,3,&quot;formGroup&quot;],[&quot;appearance&quot;,&quot;outline&quot;,1,&quot;simple-form-field&quot;,&quot;u-flex&quot;,&quot;pa-2&quot;,&quot;mr-3&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;name&quot;,&quot;required&quot;,&quot;&quot;,1,&quot;group-name&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Enregistrer les changements&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler l&#39;\xe9dition&quot;,3,&quot;click&quot;],[1,&quot;subheading-1&quot;,&quot;mx-1&quot;,&quot;mt-0&quot;,&quot;mb-1&quot;],[1,&quot;d-flex-center&quot;,3,&quot;formGroup&quot;],[&quot;appearance&quot;,&quot;outline&quot;,1,&quot;u-flex&quot;,&quot;mt-3&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;emails&quot;,&quot;cdkTextareaAutosize&quot;,&quot;&quot;,&quot;cdkAutosizeMinRows&quot;,&quot;1&quot;,&quot;cdkAutosizeMaxRows&quot;,&quot;6&quot;,&quot;required&quot;,&quot;&quot;],[4,&quot;ngIf&quot;],[1,&quot;mx-2&quot;,3,&quot;role&quot;,&quot;editable&quot;,&quot;update$&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[1,&quot;no-member-message&quot;],[1,&quot;d-flex-center&quot;,&quot;row&quot;],[1,&quot;u-flex&quot;,&quot;px-2&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Retirer ce membre&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Retirer ce membre&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(ra(0,sX,5,3,&quot;div&quot;,0),ra(1,rX,11,3,&quot;form&quot;,1),Ra(2,&quot;div&quot;,2),ra(3,lX,12,8,&quot;ng-template&quot;,3),Ra(4,&quot;a&quot;,4),Ha(&quot;click&quot;,function(){return e.openRolePermissionsDialog()}),Ra(5,&quot;mat-icon&quot;,5),xl(6,&quot;help&quot;),Fa(),xl(7,&quot; Plus d&#39;information sur les permissions &quot;),Fa(),Fa(),Ra(8,&quot;h4&quot;,6),xl(9),Fa(),Ra(10,&quot;div&quot;,7),ra(11,cX,2,0,&quot;div&quot;,8),ra(12,uX,5,4,&quot;div&quot;,9),Fa()),2&amp;t&amp;&amp;(Oa(&quot;ngIf&quot;,!e.showEditForm),Sr(1),Oa(&quot;ngIf&quot;,e.showEditForm),Sr(2),Oa(&quot;ngIf&quot;,e.canEdit),Sr(6),Cl(&quot;Membres (&quot;,e.group.members.length,&quot;)&quot;),Sr(2),Oa(&quot;ngIf&quot;,0===e.group.members.length),Sr(1),Oa(&quot;ngForOf&quot;,e.group.members)(&quot;ngForTrackBy&quot;,e.trackById))},directives:[Nd,Fy,hE,Bd,Ry,nw,Cx,uw,gC,oC,kC,Hy,wx,vw,kw,Fq,bC,eX,rC,tC],styles:[&quot;.group-name[_ngcontent-%COMP%]{font-size:1.2em}.row[_ngcontent-%COMP%]{line-height:36px}.row[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}&quot;]}),t})();function pX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,1),Ra(1,&quot;a&quot;,2),Ra(2,&quot;mat-icon&quot;),xl(3,&quot;arrow_back_ios&quot;),Fa(),xl(4,&quot; Retour aux groupes &quot;),Fa(),Fa(),Ra(5,&quot;app-group-management&quot;,3),Ha(&quot;update$&quot;,function(){return Le(t),Za().onUpdate()})(&quot;delete$&quot;,function(){return Le(t),Za().redirectToGroupsList()}),Fa()}if(2&amp;t){const t=Za();Sr(5),Oa(&quot;group&quot;,t.group)}}let fX=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.activatedRoute=t,this.title=e,this.router=i,this.mapConfigService=n,this.notificationsService=s,this.uiService=r,this.workerService=o}ngOnInit(){return jp(this,void 0,void 0,function*(){this.subscriptions.push(this.activatedRoute.paramMap.subscribe(t=&gt;jp(this,void 0,void 0,function*(){this.groupId=t.get(&quot;groupId&quot;),yield this.fetchGroup()})),this.notificationsService.events$.pipe(gf(t=&gt;&quot;group&quot;===t.kind&amp;&amp;t.id===this.groupId)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){var e,i;&quot;delete&quot;===t.type?(this.uiService.success(`Le groupe \`${(null===(e=this.group)||void 0===e?void 0:e.name)||&quot;&quot;}\` vient d&#39;\xeatre supprim\xe9.`),yield this.redirectToGroupsList()):(this.uiService.success(`Le groupe \`${(null===(i=this.group)||void 0===i?void 0:i.name)||&quot;&quot;}\` vient d&#39;\xeatre mis \xe0 jour.`),yield this.fetchGroup())})))})}fetchGroup(){return jp(this,void 0,void 0,function*(){this.group=yield this.workerService.groups.getGroup(this.groupId),this.title.setTitle(`Groupe ${this.group.name} - ANAIS`)})}onUpdate(){return jp(this,void 0,void 0,function*(){yield this.fetchGroup()})}redirectToGroupsList(){return jp(this,void 0,void 0,function*(){yield this.router.navigateByUrl(&quot;/admin/groups&quot;)})}}return t.\u0275fac=function(e){return new(e||t)(Da(HP),Da(Up),Da(dF),Da(HU),Da(wZ),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-manage-group-page&quot;]],features:[$o],decls:1,vars:1,consts:[[3,&quot;ngIf&quot;],[1,&quot;d-flex&quot;,2,&quot;background-color&quot;,&quot;#fff&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Revenir \xe0 la liste&quot;,&quot;routerLink&quot;,&quot;/admin/groups&quot;,2,&quot;line-height&quot;,&quot;36px&quot;],[&quot;permissions&quot;,&quot;admin&quot;,3,&quot;group&quot;,&quot;update$&quot;,&quot;delete$&quot;]],template:function(t,e){1&amp;t&amp;&amp;ra(0,pX,6,1,&quot;ng-template&quot;,0),2&amp;t&amp;&amp;Oa(&quot;ngIf&quot;,e.group)},directives:[Nd,Fy,mF,hE,dX],styles:[&quot;&quot;]}),t})();const mX=function(t){return[&quot;/admin/groups/&quot;,t]};function gX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,9),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;routerLink&quot;,eh(2,mX,t.id)),Sr(1),Cl(&quot; &quot;,t.name,&quot;\n&quot;)}}let AX=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.formBuilder=t,this.title=e,this.notificationsService=i,this.uiService=n,this.workerService=s,this.groups=[],this.createGroup=()=&gt;jp(this,void 0,void 0,function*(){this.createGroupForm.valid&amp;&amp;(yield this.workerService.groups.create({name:this.createGroupForm.controls.name.value}),yield this.refreshGroups(),this.createGroupForm.reset())})}ngOnInit(){return jp(this,void 0,void 0,function*(){this.title.setTitle(&quot;Gestion des groupes - ANAIS&quot;),this.createGroupForm=this.formBuilder.group({name:[&quot;&quot;,[Ky.required]]}),this.subscriptions.push(this.notificationsService.events$.pipe(gf(t=&gt;&quot;group&quot;===t.kind)).subscribe(()=&gt;jp(this,void 0,void 0,function*(){this.uiService.success(&quot;Les groupes ont \xe9t\xe9 mis \xe0 jour.&quot;),yield this.refreshGroups()}))),yield this.refreshGroups()})}refreshGroups(){return jp(this,void 0,void 0,function*(){this.groups=yield this.workerService.groups.listAllGroups()})}trackById(t,e){return e.id}}return t.\u0275fac=function(e){return new(e||t)(Da(Rw),Da(Up),Da(wZ),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-manage-groups-page&quot;]],features:[$o],decls:15,vars:6,consts:[[1,&quot;mat-h1&quot;],[2,&quot;border&quot;,&quot;1px solid #dbdbdb&quot;,&quot;padding&quot;,&quot;16px&quot;],[1,&quot;subheading-1&quot;,&quot;mx-1&quot;,&quot;mt-0&quot;,&quot;mb-1&quot;],[1,&quot;d-flex-center&quot;,3,&quot;formGroup&quot;],[&quot;appearance&quot;,&quot;outline&quot;,1,&quot;simple-form-field&quot;,&quot;u-flex&quot;,&quot;mr-3&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;name&quot;,&quot;required&quot;,&quot;&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[1,&quot;subheading-1&quot;,&quot;mx-1&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;mat-elevation-z2 pa-3 my-3 d-block u-left&quot;,&quot;style&quot;,&quot;background-color: #f9f9f9;&quot;,3,&quot;routerLink&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;mat-elevation-z2&quot;,&quot;pa-3&quot;,&quot;my-3&quot;,&quot;d-block&quot;,&quot;u-left&quot;,2,&quot;background-color&quot;,&quot;#f9f9f9&quot;,3,&quot;routerLink&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot;Gestion des groupes&quot;),Fa(),Ra(2,&quot;div&quot;,1),Ra(3,&quot;h4&quot;,2),xl(4,&quot;Nouveau groupe&quot;),Fa(),Ra(5,&quot;form&quot;,3),Ra(6,&quot;mat-form-field&quot;,4),Ra(7,&quot;mat-label&quot;),xl(8,&quot;Nom du groupe&quot;),Fa(),La(9,&quot;input&quot;,5),Fa(),Ra(10,&quot;button&quot;,6),xl(11,&quot;Cr\xe9er le groupe&quot;),Fa(),Fa(),Fa(),Ra(12,&quot;h4&quot;,7),xl(13),Fa(),ra(14,gX,2,4,&quot;a&quot;,8)),2&amp;t&amp;&amp;(Sr(5),Oa(&quot;formGroup&quot;,e.createGroupForm),Sr(5),Oa(&quot;app-async-action&quot;,e.createGroup)(&quot;disabled&quot;,!e.createGroupForm.valid),Sr(3),Cl(&quot;Groupes (&quot;,e.groups.length,&quot;)&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.groups)(&quot;ngForTrackBy&quot;,e.trackById))},directives:[nw,Cx,uw,gC,oC,kC,Hy,wx,vw,kw,Ry,Fq,Bd,Fy,mF],styles:[&quot;&quot;]}),t})();const vX=[&quot;mat-sort-header&quot;,&quot;&quot;];function _X(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,3),Ha(&quot;@arrowPosition.start&quot;,function(){return Le(t),Za()._disableViewStateAnimation=!0})(&quot;@arrowPosition.done&quot;,function(){return Le(t),Za()._disableViewStateAnimation=!1}),La(1,&quot;div&quot;,4),Ra(2,&quot;div&quot;,5),La(3,&quot;div&quot;,6),La(4,&quot;div&quot;,7),La(5,&quot;div&quot;,8),Fa(),Fa()}if(2&amp;t){const t=Za();Oa(&quot;@arrowOpacity&quot;,t._getArrowViewState())(&quot;@arrowPosition&quot;,t._getArrowViewState())(&quot;@allowChildren&quot;,t._getArrowDirectionState()),Sr(2),Oa(&quot;@indicator&quot;,t._getArrowDirectionState()),Sr(1),Oa(&quot;@leftPointer&quot;,t._getArrowDirectionState()),Sr(1),Oa(&quot;@rightPointer&quot;,t._getArrowDirectionState())}}const bX=[&quot;*&quot;],yX=new Ji(&quot;MAT_SORT_DEFAULT_OPTIONS&quot;),xX=$b(Lb(class{}));let wX=(()=&gt;{class t extends xX{constructor(t){super(),this._defaultOptions=t,this.sortables=new Map,this._stateChanges=new S,this.start=&quot;asc&quot;,this._direction=&quot;&quot;,this.sortChange=new mh}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Rf(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){var e,i,n;if(!t)return&quot;&quot;;const s=null!==(i=null!==(e=null==t?void 0:t.disableClear)&amp;&amp;void 0!==e?e:this.disableClear)&amp;&amp;void 0!==i?i:!!(null===(n=this._defaultOptions)||void 0===n?void 0:n.disableClear);let r=function(t,e){let i=[&quot;asc&quot;,&quot;desc&quot;];return&quot;desc&quot;==t&amp;&amp;i.reverse(),e||i.push(&quot;&quot;),i}(t.start||this.start,s),o=r.indexOf(this.direction)+1;return o&gt;=r.length&amp;&amp;(o=0),r[o]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Da(yX,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matSort&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-sort&quot;],inputs:{disabled:[&quot;matSortDisabled&quot;,&quot;disabled&quot;],start:[&quot;matSortStart&quot;,&quot;start&quot;],direction:[&quot;matSortDirection&quot;,&quot;direction&quot;],disableClear:[&quot;matSortDisableClear&quot;,&quot;disableClear&quot;],active:[&quot;matSortActive&quot;,&quot;active&quot;]},outputs:{sortChange:&quot;matSortChange&quot;},exportAs:[&quot;matSort&quot;],features:[$o,he]}),t})();const CX=Ob.ENTERING+&quot; &quot;+Db.STANDARD_CURVE,SX={indicator:BA(&quot;indicator&quot;,[$A(&quot;active-asc, asc&quot;,VA({transform:&quot;translateY(0px)&quot;})),$A(&quot;active-desc, desc&quot;,VA({transform:&quot;translateY(10px)&quot;})),jA(&quot;active-asc &lt;=&gt; active-desc&quot;,zA(CX))]),leftPointer:BA(&quot;leftPointer&quot;,[$A(&quot;active-asc, asc&quot;,VA({transform:&quot;rotate(-45deg)&quot;})),$A(&quot;active-desc, desc&quot;,VA({transform:&quot;rotate(45deg)&quot;})),jA(&quot;active-asc &lt;=&gt; active-desc&quot;,zA(CX))]),rightPointer:BA(&quot;rightPointer&quot;,[$A(&quot;active-asc, asc&quot;,VA({transform:&quot;rotate(45deg)&quot;})),$A(&quot;active-desc, desc&quot;,VA({transform:&quot;rotate(-45deg)&quot;})),jA(&quot;active-asc &lt;=&gt; active-desc&quot;,zA(CX))]),arrowOpacity:BA(&quot;arrowOpacity&quot;,[$A(&quot;desc-to-active, asc-to-active, active&quot;,VA({opacity:1})),$A(&quot;desc-to-hint, asc-to-hint, hint&quot;,VA({opacity:.54})),$A(&quot;hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void&quot;,VA({opacity:0})),jA(&quot;* =&gt; asc, * =&gt; desc, * =&gt; active, * =&gt; hint, * =&gt; void&quot;,zA(&quot;0ms&quot;)),jA(&quot;* &lt;=&gt; *&quot;,zA(CX))]),arrowPosition:BA(&quot;arrowPosition&quot;,[jA(&quot;* =&gt; desc-to-hint, * =&gt; desc-to-active&quot;,zA(CX,UA([VA({transform:&quot;translateY(-25%)&quot;}),VA({transform:&quot;translateY(0)&quot;})]))),jA(&quot;* =&gt; hint-to-desc, * =&gt; active-to-desc&quot;,zA(CX,UA([VA({transform:&quot;translateY(0)&quot;}),VA({transform:&quot;translateY(25%)&quot;})]))),jA(&quot;* =&gt; asc-to-hint, * =&gt; asc-to-active&quot;,zA(CX,UA([VA({transform:&quot;translateY(25%)&quot;}),VA({transform:&quot;translateY(0)&quot;})]))),jA(&quot;* =&gt; hint-to-asc, * =&gt; active-to-asc&quot;,zA(CX,UA([VA({transform:&quot;translateY(0)&quot;}),VA({transform:&quot;translateY(-25%)&quot;})]))),$A(&quot;desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active&quot;,VA({transform:&quot;translateY(0)&quot;})),$A(&quot;hint-to-desc, active-to-desc, desc&quot;,VA({transform:&quot;translateY(-25%)&quot;})),$A(&quot;hint-to-asc, active-to-asc, asc&quot;,VA({transform:&quot;translateY(25%)&quot;}))]),allowChildren:BA(&quot;allowChildren&quot;,[jA(&quot;* &lt;=&gt; *&quot;,[GA(&quot;@*&quot;,HA(),{optional:!0})])])};let kX=(()=&gt;{class t{constructor(){this.changes=new S}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({factory:function(){return new t},token:t,providedIn:&quot;root&quot;}),t})();const EX={provide:kX,deps:[[new Fn,new Bn,kX]],useFactory:function(t){return t||new kX}},MX=Lb(class{});let TX=(()=&gt;{class t extends MX{constructor(t,e,i,n,s,r,o){super(),this._intl=t,this._changeDetectorRef=e,this._sort=i,this._columnDef=n,this._focusMonitor=s,this._elementRef=r,this._ariaDescriber=o,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection=&quot;&quot;,this._disableViewStateAnimation=!1,this.arrowPosition=&quot;after&quot;,this._sortActionDescription=&quot;Sort&quot;,this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Rf(t)}ngOnInit(){!this.id&amp;&amp;this._columnDef&amp;&amp;(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?&quot;active&quot;:this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(&#39;[role=&quot;button&quot;]&#39;),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=&gt;{const e=!!t;e!==this._showIndicatorHint&amp;&amp;(this._setIndicatorHintVisible(e),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&amp;&amp;t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:&quot;hint&quot;}:{fromState:&quot;hint&quot;,toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t||{},this._disableViewStateAnimation&amp;&amp;(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),(&quot;hint&quot;===this._viewState.toState||&quot;active&quot;===this._viewState.toState)&amp;&amp;(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(t){!this._isDisabled()&amp;&amp;(32===t.keyCode||13===t.keyCode)&amp;&amp;(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&amp;&amp;(&quot;asc&quot;===this._sort.direction||&quot;desc&quot;===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?&quot;active-&quot;:&quot;&quot;}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?`${t}-to-`:&quot;&quot;)+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?&quot;asc&quot;==this._sort.direction?&quot;ascending&quot;:&quot;descending&quot;:&quot;none&quot;}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){var e,i;this._sortButton&amp;&amp;(null===(e=this._ariaDescriber)||void 0===e||e.removeDescription(this._sortButton,this._sortActionDescription),null===(i=this._ariaDescriber)||void 0===i||i.describe(this._sortButton,t)),this._sortActionDescription=t}_handleStateChanges(){this._rerenderSubscription=W(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=&gt;{this._isSorted()&amp;&amp;(this._updateArrowDirection(),(&quot;hint&quot;===this._viewState.toState||&quot;active&quot;===this._viewState.toState)&amp;&amp;(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:&quot;active&quot;}),this._showIndicatorHint=!1),!this._isSorted()&amp;&amp;this._viewState&amp;&amp;&quot;active&quot;===this._viewState.toState&amp;&amp;(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:&quot;active&quot;,toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Da(kX),Da(Ec),Da(wX,8),Da(&quot;MAT_SORT_HEADER_COLUMN_DEF&quot;,8),Da(Nm),Da(ec),Da(mm,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;&quot;,&quot;mat-sort-header&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-sort-header&quot;],hostVars:3,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;click&quot;,function(){return e._handleClick()})(&quot;keydown&quot;,function(t){return e._handleKeydown(t)})(&quot;mouseenter&quot;,function(){return e._setIndicatorHintVisible(!0)})(&quot;mouseleave&quot;,function(){return e._setIndicatorHintVisible(!1)}),2&amp;t&amp;&amp;(ea(&quot;aria-sort&quot;,e._getAriaSortAttribute()),cl(&quot;mat-sort-header-disabled&quot;,e._isDisabled()))},inputs:{disabled:&quot;disabled&quot;,arrowPosition:&quot;arrowPosition&quot;,sortActionDescription:&quot;sortActionDescription&quot;,disableClear:&quot;disableClear&quot;,id:[&quot;mat-sort-header&quot;,&quot;id&quot;],start:&quot;start&quot;},exportAs:[&quot;matSortHeader&quot;],features:[$o],attrs:vX,ngContentSelectors:bX,decls:4,vars:6,consts:[[&quot;role&quot;,&quot;button&quot;,1,&quot;mat-sort-header-container&quot;,&quot;mat-focus-indicator&quot;],[1,&quot;mat-sort-header-content&quot;],[&quot;class&quot;,&quot;mat-sort-header-arrow&quot;,4,&quot;ngIf&quot;],[1,&quot;mat-sort-header-arrow&quot;],[1,&quot;mat-sort-header-stem&quot;],[1,&quot;mat-sort-header-indicator&quot;],[1,&quot;mat-sort-header-pointer-left&quot;],[1,&quot;mat-sort-header-pointer-right&quot;],[1,&quot;mat-sort-header-pointer-middle&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Qa(2),Fa(),ra(3,_X,6,6,&quot;div&quot;,2),Fa()),2&amp;t&amp;&amp;(cl(&quot;mat-sort-header-sorted&quot;,e._isSorted())(&quot;mat-sort-header-position-before&quot;,&quot;before&quot;==e.arrowPosition),ea(&quot;tabindex&quot;,e._isDisabled()?null:0),Sr(3),Oa(&quot;ngIf&quot;,e._renderArrow()))},directives:[Nd],styles:[&quot;.mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n&quot;],encapsulation:2,data:{animation:[SX.indicator,SX.leftPointer,SX.rightPointer,SX.arrowOpacity,SX.arrowPosition,SX.allowChildren]},changeDetection:0}),t})(),IX=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({providers:[EX],imports:[[ip,Fb]]}),t})();function DX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),xl(1),Fa()),2&amp;t){const t=e.$implicit;Sr(1),Sl(&quot; &quot;,t.email,&quot; - &quot;,t.status,&quot; &quot;)}}let OX=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.data=t,this.workerService=e,this.workFinished=!1}ngOnInit(){this.accountsStatuses=this.data.emails.map(t=&gt;({email:t,status:&quot;En attente&quot;})),Promise.all(this.accountsStatuses.map(t=&gt;jp(this,void 0,void 0,function*(){try{yield this.workerService.users.create({email:t.email,profile:this.data.profile}),t.status=&quot;OK&quot;}catch(e){console.log(&quot;err&quot;,t.email,e),t.status=e.message.includes(&#39;duplicate key value violates unique constraint &quot;user_email_key&quot;&#39;)?&quot;D\xe9j\xe0 pr\xe9sent&quot;:`KO : ${null==e?void 0:e.message}`}}))).finally(()=&gt;{this.workFinished=!0})}}return t.\u0275fac=function(e){return new(e||t)(Da(KS),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-create-users-dialog&quot;]],features:[$o],decls:11,vars:3,consts:[[1,&quot;d-flex&quot;],[1,&quot;dialog-title&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer la fen\xeatre&quot;,3,&quot;disabled&quot;,&quot;mat-dialog-close&quot;],[1,&quot;dialog-content&quot;],[4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer la fen\xeatre&quot;,1,&quot;d-block-center&quot;,&quot;mt-3&quot;,3,&quot;disabled&quot;,&quot;mat-dialog-close&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h1&quot;,1),xl(2,&quot; Cr\xe9ation de comptes utilisateurs &quot;),Fa(),La(3,&quot;div&quot;,2),Ra(4,&quot;button&quot;,3),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(7,&quot;div&quot;,4),ra(8,DX,2,2,&quot;div&quot;,5),Ra(9,&quot;button&quot;,6),xl(10,&quot; Fermer la fen\xeatre &quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(4),Oa(&quot;disabled&quot;,!e.workFinished),Sr(4),Oa(&quot;ngForOf&quot;,e.accountsStatuses),Sr(1),Oa(&quot;disabled&quot;,!e.workFinished))},directives:[Ry,nk,hE,Bd],encapsulation:2}),t})();const PX=[&quot;*&quot;];let RX=(()=&gt;{class t{constructor(){this.title=&quot;&quot;,this.bgColor=&quot;#55575f&quot;,this.color=&quot;#ffffff&quot;}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-chip&quot;]],inputs:{title:&quot;title&quot;,bgColor:&quot;bgColor&quot;,color:&quot;color&quot;},ngContentSelectors:PX,decls:2,vars:5,consts:[[1,&quot;chip&quot;,3,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),Qa(1),Fa()),2&amp;t&amp;&amp;(ll(&quot;color&quot;,e.color)(&quot;background-color&quot;,e.bgColor),Oa(&quot;title&quot;,e.title))},styles:[&quot;.chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 5px;border-radius:5px;font-size:12px}&quot;],changeDetection:0}),t})();function FX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,24),Ha(&quot;click&quot;,function(){Le(t);const e=Za();return e.filterValue=&quot;&quot;,e.filterUsers(&quot;&quot;)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;close&quot;),Fa(),Fa()}}function LX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,25),xl(1,&quot;Email&quot;),Fa())}function BX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-chip&quot;,29),xl(1,&quot;Admin&quot;),Fa())}function zX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-chip&quot;,30),xl(1,&quot;C&#39;est vous !&quot;),Fa())}function NX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,26),xl(1),ra(2,BX,2,0,&quot;app-chip&quot;,27),ra(3,zX,2,0,&quot;app-chip&quot;,28),Fa()),2&amp;t){const t=e.$implicit,i=Za();Sr(1),Cl(&quot; &quot;,t.email,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,&quot;admin&quot;===t.profile),Sr(1),Oa(&quot;ngIf&quot;,t.id===i.authenticationService.getUserId())}}function VX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,25),xl(1,&quot;Date de cr\xe9ation&quot;),Fa())}function $X(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,26),xl(1),lh(2,&quot;date&quot;),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(hh(2,1,t.created_at,&quot;yyyy-MM-dd HH:mm&quot;))}}function UX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,25),xl(1,&quot;Derni\xe8re activit\xe9&quot;),Fa())}function jX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,26),xl(1),lh(2,&quot;date&quot;),Fa()),2&amp;t){const t=e.$implicit;Sr(1),wl(hh(2,1,t.last_activity,&quot;yyyy-MM-dd HH:mm&quot;))}}function HX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;th&quot;,25),xl(1,&quot;Unit\xe9&quot;),Fa())}function GX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;td&quot;,26),Ra(1,&quot;mat-form-field&quot;),Ra(2,&quot;input&quot;,31),Ha(&quot;ngModelChange&quot;,function(e){return Le(t).$implicit.note=e})(&quot;ngModelChange&quot;,function(e){const i=Le(t).$implicit;return Za().onUserNoteUpdate(i,e)}),Fa(),Fa(),Fa()}if(2&amp;t){const t=e.$implicit;Sr(2),Oa(&quot;ngModel&quot;,t.note)}}function qX(t,e){1&amp;t&amp;&amp;La(0,&quot;th&quot;,32)}function WX(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,36),Ha(&quot;click&quot;,function(){Le(t);const e=Za().$implicit;return Za().deleteUser(e.id)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;delete&quot;),Fa(),Fa()}}function YX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;td&quot;,26),Ra(1,&quot;button&quot;,33),Ra(2,&quot;mat-icon&quot;),xl(3,&quot;mail&quot;),Fa(),Fa(),Ra(4,&quot;button&quot;,34),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;link&quot;),Fa(),Fa(),ra(7,WX,3,0,&quot;button&quot;,35),Fa()),2&amp;t){const t=e.$implicit,i=Za();Sr(1),Oa(&quot;app-async-action&quot;,i.sendWelcomeEmail.bind(i,t.id)),Sr(3),Oa(&quot;app-async-action&quot;,i.retrieveInvitationLink.bind(i,t.id)),Sr(3),Oa(&quot;ngIf&quot;,t.id!==i.authenticationService.getUserId())}}function ZX(t,e){1&amp;t&amp;&amp;La(0,&quot;tr&quot;,37)}function KX(t,e){1&amp;t&amp;&amp;La(0,&quot;tr&quot;,38)}function XX(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-hint&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),kl(&quot;&quot;,t.extractedEmailsCount,&quot; email&quot;,t.extractedEmailsCount&gt;1?&quot;s&quot;:&quot;&quot;,&quot; reconnu&quot;,t.extractedEmailsCount&gt;1?&quot;s&quot;:&quot;&quot;,&quot;.&quot;)}}function QX(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;Aucun email reconnu&quot;),Fa())}const JX=function(){return[10,20,100]};let tQ=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.dialog=t,this.formBuilder=e,this.title=i,this.workerService=n,this.authenticationService=s,this.configService=r,this.uiService=o,this.displayedColumns=[&quot;email&quot;,&quot;created_at&quot;,&quot;last_activity&quot;,&quot;note&quot;,&quot;actions&quot;],this.pendingNoteUpdates=new Map,this.extractedEmails=[],this.extractedEmailsCount=0,this.createUser=()=&gt;jp(this,void 0,void 0,function*(){this.createUserForm.valid&amp;&amp;(1===this.extractedEmailsCount?(yield this.workerService.users.create({email:this.extractedEmails[0],profile:this.createUserForm.controls.admin.value?&quot;admin&quot;:&quot;user&quot;}),this.uiService.success(&quot;L&#39;utilisateur a bien \xe9t\xe9 cr\xe9\xe9. Il recevra un email avec un lien vers l&#39;application et les instructions pour d\xe9finir son mot de passe.&quot;)):yield this.openCreateUsersDialog(this.extractedEmails,this.createUserForm.controls.admin.value?&quot;admin&quot;:&quot;user&quot;),this.createUserForm.controls.emails.reset(&quot;&quot;),this.createUserForm.controls.emails.status=&quot;VALID&quot;,yield this.refreshList())}),this.refreshList=()=&gt;jp(this,void 0,void 0,function*(){this.usersDataSource.data=yield this.workerService.users.list()})}ngOnInit(){this.title.setTitle(&quot;Gestion des utilisateurs - ANAIS&quot;),this.createUserForm=this.formBuilder.group({emails:[&quot;&quot;,[XK]],admin:[!1]}),this.subscriptions.push(this.createUserForm.controls.emails.valueChanges.subscribe(t=&gt;{var e;const i=t.match(jK);this.extractedEmails=null!=i?i:[],this.extractedEmailsCount=null!==(e=null==i?void 0:i.length)&amp;&amp;void 0!==e?e:0})),this.usersDataSource=new xK([]),this.usersDataSource.filterPredicate=this.filterPredicate}ngAfterViewInit(){this.subscriptions.push(this.paginator.page.subscribe(t=&gt;{this.configService.set(&quot;adminManageUsersPageSize&quot;,t.pageSize)}),this.sort.sortChange.subscribe(t=&gt;{this.configService.set(&quot;adminManageUsersSort&quot;,{id:t.active,start:t.direction})})),this.paginator.pageSize=this.configService.adminManageUsersPageSize,this.usersDataSource.paginator=this.paginator,this.usersDataSource.sort=this.sort,setTimeout(()=&gt;jp(this,void 0,void 0,function*(){this.sort.sort(this.configService.adminManageUsersSort),yield this.refreshList()}))}deleteUser(t){this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Confirmez-vous la suppression de cet utilisateur ?&quot;,action:e=&gt;jp(this,void 0,void 0,function*(){e&amp;&amp;(yield this.workerService.users.delete(t),this.usersDataSource.data=this.usersDataSource.data.filter(e=&gt;e.id!==t))})})}sendWelcomeEmail(t){return jp(this,void 0,void 0,function*(){yield this.workerService.users.sendWelcomeEmail(t),this.uiService.success(&quot;Un email d&#39;invitation a \xe9t\xe9 envoy\xe9 \xe0 l&#39;utilisateur&quot;)})}retrieveInvitationLink(t){return jp(this,void 0,void 0,function*(){const e=yield this.workerService.users.retrieveInvitationLink(t);this.uiService.success(`Voici le lien \xe0 partager avec l&#39;utilisateur : ${e}`)})}filterUsers(t){this.usersDataSource.filter=hU(t.trim()),this.usersDataSource.paginator&amp;&amp;this.usersDataSource.paginator.firstPage()}filterPredicate(t,e){return hU(t.email).includes(e)||hU(t.note).includes(e)}onUserNoteUpdate(t,e){return jp(this,void 0,void 0,function*(){const i=this.pendingNoteUpdates.get(t.id);i&amp;&amp;clearTimeout(i),this.pendingNoteUpdates.set(t.id,window.setTimeout(()=&gt;jp(this,void 0,void 0,function*(){yield this.workerService.users.updateNote(t.id,e),this.pendingNoteUpdates.delete(t.id)}),500))})}openCreateUsersDialog(t,e){return jp(this,void 0,void 0,function*(){return new Promise(i=&gt;{this.createUsersDialogRef=this.dialog.open(OX,{data:{emails:t,profile:e},autoFocus:!0,closeOnNavigation:!1}),this.createUsersDialogRef.afterClosed().subscribe(()=&gt;{i()})})})}}return t.\u0275fac=function(e){return new(e||t)(Da(ek),Da(Rw),Da(Up),Da(Jj),Da(tH),Da(jU),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-manage-users-page&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(wX,5),Mh(TI,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.sort=t.first),Eh(t=Ih())&amp;&amp;(e.paginator=t.first)}},features:[$o],decls:45,vars:14,consts:[[1,&quot;mat-h1&quot;],[1,&quot;d-flex-center&quot;,2,&quot;justify-content&quot;,&quot;space-between&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;placeholder&quot;,&quot;utilisateur@exemple.com&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;,&quot;keyup&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;aria-label&quot;,&quot;Clear&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,3,&quot;app-async-action&quot;],[&quot;mat-table&quot;,&quot;&quot;,&quot;matSort&quot;,&quot;&quot;,&quot;matSortActive&quot;,&quot;email&quot;,&quot;matSortDirection&quot;,&quot;asc&quot;,1,&quot;table&quot;,3,&quot;dataSource&quot;],[&quot;matColumnDef&quot;,&quot;email&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;,&quot;mat-sort-header&quot;,&quot;&quot;,4,&quot;matHeaderCellDef&quot;],[&quot;mat-cell&quot;,&quot;&quot;,4,&quot;matCellDef&quot;],[&quot;matColumnDef&quot;,&quot;created_at&quot;],[&quot;matColumnDef&quot;,&quot;last_activity&quot;],[&quot;matColumnDef&quot;,&quot;note&quot;],[&quot;matColumnDef&quot;,&quot;actions&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;,4,&quot;matHeaderCellDef&quot;],[&quot;mat-header-row&quot;,&quot;&quot;,4,&quot;matHeaderRowDef&quot;],[&quot;mat-row&quot;,&quot;&quot;,4,&quot;matRowDef&quot;,&quot;matRowDefColumns&quot;],[&quot;showFirstLastButtons&quot;,&quot;&quot;,3,&quot;pageSizeOptions&quot;],[1,&quot;mat-h2&quot;],[1,&quot;d-flex-center&quot;,3,&quot;formGroup&quot;],[&quot;appearance&quot;,&quot;outline&quot;,1,&quot;u-flex&quot;,&quot;mt-3&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;emails&quot;,&quot;cdkTextareaAutosize&quot;,&quot;&quot;,&quot;cdkAutosizeMinRows&quot;,&quot;1&quot;,&quot;cdkAutosizeMaxRows&quot;,&quot;6&quot;,&quot;required&quot;,&quot;&quot;],[4,&quot;ngIf&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Un administrateur peut g\xe9rer les utilisateurs (pour l&#39;instant...)&quot;,&quot;formControlName&quot;,&quot;admin&quot;,1,&quot;mx-3&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;aria-label&quot;,&quot;Clear&quot;,3,&quot;click&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;,&quot;mat-sort-header&quot;,&quot;&quot;],[&quot;mat-cell&quot;,&quot;&quot;],[&quot;bgColor&quot;,&quot;#1aaa55&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;ml-1&quot;,&quot;bgColor&quot;,&quot;#2d60eb&quot;,4,&quot;ngIf&quot;],[&quot;bgColor&quot;,&quot;#1aaa55&quot;],[&quot;bgColor&quot;,&quot;#2d60eb&quot;,1,&quot;ml-1&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;type&quot;,&quot;text&quot;,&quot;title&quot;,&quot;Unit\xe9&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;mat-header-cell&quot;,&quot;&quot;],[&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Envoyer un email d&#39;invitation&quot;,3,&quot;app-async-action&quot;],[&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;G\xe9n\xe9rer un lien d&#39;invitation&quot;,3,&quot;app-async-action&quot;],[&quot;mat-icon-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer cet utilisateur&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-icon-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer cet utilisateur&quot;,3,&quot;click&quot;],[&quot;mat-header-row&quot;,&quot;&quot;],[&quot;mat-row&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot;Gestion des utilisateurs&quot;),Fa(),Ra(2,&quot;div&quot;),Ra(3,&quot;div&quot;,1),Ra(4,&quot;mat-form-field&quot;),Ra(5,&quot;mat-label&quot;),xl(6,&quot;Filtre&quot;),Fa(),Ra(7,&quot;input&quot;,2),Ha(&quot;ngModelChange&quot;,function(t){return e.filterValue=t})(&quot;keyup&quot;,function(t){return e.filterUsers(t.target.value)}),Fa(),ra(8,FX,3,0,&quot;button&quot;,3),Fa(),Ra(9,&quot;button&quot;,4),xl(10,&quot;Rafraichir la liste&quot;),Fa(),Fa(),Ra(11,&quot;table&quot;,5),Ba(12,6),ra(13,LX,2,0,&quot;th&quot;,7),ra(14,NX,4,3,&quot;td&quot;,8),za(),Ba(15,9),ra(16,VX,2,0,&quot;th&quot;,7),ra(17,$X,3,4,&quot;td&quot;,8),za(),Ba(18,10),ra(19,UX,2,0,&quot;th&quot;,7),ra(20,jX,3,4,&quot;td&quot;,8),za(),Ba(21,11),ra(22,HX,2,0,&quot;th&quot;,7),ra(23,GX,3,1,&quot;td&quot;,8),za(),Ba(24,12),ra(25,qX,1,0,&quot;th&quot;,13),ra(26,YX,8,3,&quot;td&quot;,8),za(),ra(27,ZX,1,0,&quot;tr&quot;,14),ra(28,KX,1,0,&quot;tr&quot;,15),Fa(),La(29,&quot;mat-paginator&quot;,16),Fa(),Ra(30,&quot;h2&quot;,17),xl(31,&quot;Cr\xe9ation de comptes utilisateur&quot;),Fa(),Ra(32,&quot;p&quot;),xl(33,&quot; Les utilisateurs cr\xe9\xe9s recevront un email avec un lien pour d\xe9finir leur mot de passe. Vous pouvez copier du texte multi-lignes contenant des emails. Ces derniers seront extraits automatiquement.\n&quot;),Fa(),Ra(34,&quot;form&quot;,18),Ra(35,&quot;mat-form-field&quot;,19),Ra(36,&quot;mat-label&quot;),xl(37,&quot;Email(s)&quot;),Fa(),La(38,&quot;textarea&quot;,20),ra(39,XX,2,3,&quot;mat-hint&quot;,21),ra(40,QX,2,0,&quot;mat-error&quot;,21),Fa(),Ra(41,&quot;mat-checkbox&quot;,22),xl(42,&quot;Administrateur&quot;),Fa(),Ra(43,&quot;button&quot;,23),xl(44),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(7),Oa(&quot;ngModel&quot;,e.filterValue),Sr(1),Oa(&quot;ngIf&quot;,e.filterValue),Sr(1),Oa(&quot;app-async-action&quot;,e.refreshList),Sr(2),Oa(&quot;dataSource&quot;,e.usersDataSource),Sr(16),Oa(&quot;matHeaderRowDef&quot;,e.displayedColumns),Sr(1),Oa(&quot;matRowDefColumns&quot;,e.displayedColumns),Sr(1),Oa(&quot;pageSizeOptions&quot;,th(13,JX)),Sr(5),Oa(&quot;formGroup&quot;,e.createUserForm),Sr(5),Oa(&quot;ngIf&quot;,e.extractedEmailsCount&gt;0),Sr(1),Oa(&quot;ngIf&quot;,e.createUserForm.get(&quot;emails&quot;).touched&amp;&amp;e.createUserForm.get(&quot;emails&quot;).hasError(&quot;missingEmails&quot;)),Sr(3),Oa(&quot;app-async-action&quot;,e.createUser)(&quot;disabled&quot;,!e.createUserForm.valid),Sr(1),Cl(&quot;Cr\xe9er &quot;,e.extractedEmailsCount&gt;1?&quot;les utilisateurs&quot;:&quot;l&#39;utilisateur&quot;,&quot;&quot;))},directives:[gC,oC,kC,Hy,wx,iw,Nd,Ry,Fq,hK,wX,pK,dK,uK,gK,AK,TI,nw,Cx,uw,bC,vw,kw,qq,uC,hE,fK,TX,mK,RX,vK,_K,rC,tC],pipes:[ep],styles:[&quot;.table[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]     td.mat-cell{padding:0 4px!important;font-size:13px}.table[_ngcontent-%COMP%]     td.mat-cell:first-of-type{padding-left:24px!important}.table[_ngcontent-%COMP%]     td.mat-cell:last-of-type{padding-right:24px!important}&quot;]}),t})();function eQ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;L&#39;email est obligatoire&quot;),Fa())}function iQ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;L&#39;email doit \xeatre valide&quot;),Fa())}function nQ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;Le mot de passe est obligatoire&quot;),Fa())}const sQ=function(){return[&quot;/reset-password&quot;]};let rQ=(()=&gt;{class t{constructor(t,e,i,n){this.formBuilder=t,this.router=e,this.authenticationService=i,this.uiService=n,this.login=()=&gt;jp(this,void 0,void 0,function*(){if(this.loginForm.valid)try{yield this.authenticationService.login(this.loginForm.value);const t=new URLSearchParams(window.location.search).get(&quot;redirect&quot;);yield this.router.navigateByUrl(null!=t?t:&quot;/&quot;)}catch(t){this.uiService.error(t.message)}})}ngOnInit(){return jp(this,void 0,void 0,function*(){if(this.loginForm=this.formBuilder.group({email:[&quot;&quot;,[Ky.required,Ky.email]],password:[&quot;&quot;,[Ky.required]]}),this.authenticationService.isAuthenticated()){const t=new URLSearchParams(window.location.search).get(&quot;redirect&quot;);yield this.router.navigateByUrl(null!=t?t:&quot;/&quot;)}else null!==new URLSearchParams(window.location.search).get(&quot;expired&quot;)&amp;&amp;this.uiService.error(&quot;Votre session a expir\xe9. Veuillez vous authentifier \xe0 nouveau.&quot;)})}}return t.\u0275fac=function(e){return new(e||t)(Da(Rw),Da(dF),Da(tH),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-login-page&quot;]],decls:23,vars:7,consts:[[1,&quot;unauthenticated-page&quot;,&quot;mat-typography&quot;],[&quot;novalidate&quot;,&quot;&quot;,1,&quot;unauthenticated-page__form&quot;,3,&quot;formGroup&quot;],[&quot;src&quot;,&quot;./assets/images/logo_anais.png&quot;,&quot;alt&quot;,&quot;Logo ANAIS&quot;,1,&quot;login-page__logo&quot;],[&quot;matPrefix&quot;,&quot;&quot;,1,&quot;login-page__prefix-icon&quot;],[&quot;type&quot;,&quot;email&quot;,&quot;matInput&quot;,&quot;&quot;,&quot;placeholder&quot;,&quot;utilisateur@exemple.com&quot;,&quot;formControlName&quot;,&quot;email&quot;,&quot;required&quot;,&quot;&quot;],[4,&quot;ngIf&quot;],[&quot;type&quot;,&quot;password&quot;,&quot;matInput&quot;,&quot;&quot;,&quot;color&quot;,&quot;white&quot;,&quot;placeholder&quot;,&quot;******&quot;,&quot;formControlName&quot;,&quot;password&quot;,&quot;required&quot;,&quot;&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,1,&quot;login-page__login-btn&quot;,3,&quot;app-async-action&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;mt-3&quot;,&quot;login-page__reset-password-button&quot;,3,&quot;routerLink&quot;],[&quot;src&quot;,&quot;./assets/images/logo_fabnum.png&quot;,&quot;alt&quot;,&quot;Logo Fabrique num\xe9rique&quot;,1,&quot;login-page__fabnumlogo&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;form&quot;,1),La(2,&quot;img&quot;,2),Ra(3,&quot;mat-form-field&quot;),Ra(4,&quot;mat-label&quot;),xl(5,&quot;Email&quot;),Fa(),Ra(6,&quot;mat-icon&quot;,3),xl(7,&quot;perm_identity&quot;),Fa(),La(8,&quot;input&quot;,4),ra(9,eQ,2,0,&quot;mat-error&quot;,5),ra(10,iQ,2,0,&quot;mat-error&quot;,5),Fa(),Ra(11,&quot;mat-form-field&quot;),Ra(12,&quot;mat-label&quot;),xl(13,&quot;Mot de passe&quot;),Fa(),Ra(14,&quot;mat-icon&quot;,3),xl(15,&quot;lock&quot;),Fa(),La(16,&quot;input&quot;,6),ra(17,nQ,2,0,&quot;mat-error&quot;,5),Fa(),Ra(18,&quot;button&quot;,7),xl(19,&quot;Se connecter&quot;),Fa(),Ra(20,&quot;button&quot;,8),xl(21,&quot; J&#39;ai perdu mon mot de passe &quot;),Fa(),Fa(),La(22,&quot;img&quot;,9),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;formGroup&quot;,e.loginForm),Sr(8),Oa(&quot;ngIf&quot;,e.loginForm.get(&quot;email&quot;).hasError(&quot;required&quot;)),Sr(1),Oa(&quot;ngIf&quot;,e.loginForm.get(&quot;email&quot;).hasError(&quot;email&quot;)),Sr(7),Oa(&quot;ngIf&quot;,e.loginForm.get(&quot;password&quot;).hasError(&quot;required&quot;)),Sr(1),Oa(&quot;app-async-action&quot;,e.login),Sr(2),Oa(&quot;routerLink&quot;,th(6,sQ)))},directives:[nw,Cx,uw,gC,oC,hE,cC,kC,Hy,wx,vw,kw,Nd,Ry,Fq,fF,tC],styles:[&quot;.login-page__login-btn[_ngcontent-%COMP%]{margin-top:2em;background-color:#fff!important}.login-page__login-btn[_ngcontent-%COMP%]:hover     .mat-button-focus-overlay{opacity:.18}.login-page__logo[_ngcontent-%COMP%]{width:350px;max-height:83px;margin-bottom:3em}.login-page__fabnumlogo[_ngcontent-%COMP%]{margin-top:3em;width:200px;max-height:86px}.login-page__prefix-icon[_ngcontent-%COMP%]{margin-right:.5em}.login-page__reset-password-button[_ngcontent-%COMP%]{color:#fff;font-weight:300;line-height:2em;height:2em}&quot;,&quot;[_nghost-%COMP%]{flex:1}.unauthenticated-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:auto;background-image:url(/assets/images/login_background.jpg);background-size:cover;background-position:70% 50%}.unauthenticated-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;color:#fff;background-color:rgba(0,55,146,.95);padding:2.5em 2.5em 1em;border-radius:2em;box-shadow:0 16px 24px 2px rgba(0,55,146,.64),0 6px 30px 5px rgba(0,55,146,.62)}.unauthenticated-page__form[_ngcontent-%COMP%]     .mat-form-field-label{color:#fff}&quot;]}),t})(),oQ=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.router=t,this.workerService=e}ngOnInit(){return jp(this,void 0,void 0,function*(){this.subscriptions.push(this.workerService.applicationHealth$.pipe(Sf(1)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){var e;(null===(e=null==t?void 0:t.maintenance)||void 0===e?void 0:e.type)!==NW.InProgress&amp;&amp;(yield this.router.navigateByUrl(&quot;/&quot;))}))),yield this.workerService.application.refreshHealthState()})}}return t.\u0275fac=function(e){return new(e||t)(Da(dF),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-maintenance-wall-page&quot;]],features:[$o],decls:4,vars:0,consts:[[1,&quot;unauthenticated-page&quot;,&quot;mat-typography&quot;],[1,&quot;unauthenticated-page__form&quot;],[1,&quot;maintenance-page__title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h3&quot;,2),xl(3,&quot;Maintenance en cours&quot;),Fa(),Fa(),Fa())},styles:[&quot;.maintenance-page__title[_ngcontent-%COMP%]{font-weight:bold;font-size:2.5em}&quot;,&quot;[_nghost-%COMP%]{flex:1}.unauthenticated-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:auto;background-image:url(/assets/images/login_background.jpg);background-size:cover;background-position:70% 50%}.unauthenticated-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;color:#fff;background-color:rgba(0,55,146,.95);padding:2.5em 2.5em 1em;border-radius:2em;box-shadow:0 16px 24px 2px rgba(0,55,146,.64),0 6px 30px 5px rgba(0,55,146,.62)}.unauthenticated-page__form[_ngcontent-%COMP%]     .mat-form-field-label{color:#fff}&quot;]}),t})(),aQ=(()=&gt;{class t{ngOnChanges(t){var e;t.flag&amp;&amp;(this.country=lq(null===(e=t.flag.currentValue)||void 0===e?void 0:e.toLowerCase())),t.mmsi&amp;&amp;(this.country=function(t){return lq(cq[t.substr(0,3)])}(`${t.mmsi.currentValue}`))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-flag&quot;]],inputs:{mmsi:&quot;mmsi&quot;,flag:&quot;flag&quot;,iso3:&quot;iso3&quot;},features:[he],decls:1,vars:2,consts:[[3,&quot;className&quot;,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;La(0,&quot;span&quot;,0),2&amp;t&amp;&amp;Oa(&quot;className&quot;,&quot;fi fi-&quot;+e.country.flag)(&quot;title&quot;,e.country.name)},styles:[&quot;[_nghost-%COMP%]{display:inline-flex;font-size:1.5em}&quot;],changeDetection:0}),t})();const lQ=function(t){return{transform:t}};function cQ(t,e){if(1&amp;t&amp;&amp;(xl(0),Ra(1,&quot;mat-icon&quot;,8),xl(2,&quot;arrow_right_alt&quot;),Fa()),2&amp;t){const t=Za(2);Cl(&quot; &quot;,t.aircraft.track,&quot;\xb0 &quot;),Sr(1),Oa(&quot;ngStyle&quot;,eh(2,lQ,&quot;rotate(&quot;+(t.aircraft.track-90)+&quot;deg)&quot;))}}function hQ(t,e){1&amp;t&amp;&amp;xl(0,&quot; ? &quot;)}function uQ(t,e){if(1&amp;t&amp;&amp;(La(0,&quot;mat-divider&quot;),Ra(1,&quot;div&quot;,0),Ra(2,&quot;div&quot;,1),Ra(3,&quot;div&quot;,2),xl(4,&quot;Squawk&quot;),Fa(),Ra(5,&quot;strong&quot;),xl(6),Fa(),Fa(),La(7,&quot;mat-divider&quot;,3),Ra(8,&quot;div&quot;,1),Ra(9,&quot;div&quot;,2),xl(10,&quot;Vitesse / Cap&quot;),Fa(),Ra(11,&quot;strong&quot;,5),xl(12),ra(13,cQ,3,4,&quot;ng-template&quot;,6),ra(14,hQ,1,0,&quot;ng-template&quot;,null,7,Rh),Fa(),Fa(),La(16,&quot;mat-divider&quot;,3),Ra(17,&quot;div&quot;,1),Ra(18,&quot;div&quot;,2),xl(19,&quot;Destination&quot;),Fa(),Ra(20,&quot;strong&quot;),xl(21),Fa(),Fa(),Fa()),2&amp;t){const t=oa(15),e=Za();Sr(6),Cl(&quot; &quot;,e.aircraft.squawk||&quot;?&quot;,&quot; &quot;),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),Cl(&quot; &quot;,e.aircraft.speed?e.aircraft.speed+&quot; kt&quot;:&quot;?&quot;,&quot; / &quot;),Sr(1),Oa(&quot;ngIf&quot;,e.aircraft.track)(&quot;ngIfElse&quot;,t),Sr(3),Oa(&quot;vertical&quot;,!0),Sr(5),Sl(&quot; &quot;,e.aircraft.fromIcao||&quot;?&quot;,&quot; \u2192 &quot;,e.aircraft.toIcao||&quot;?&quot;,&quot; &quot;)}}function dQ(t,e){if(1&amp;t&amp;&amp;(La(0,&quot;mat-divider&quot;),Ra(1,&quot;div&quot;,0),Ra(2,&quot;div&quot;,1),Ra(3,&quot;div&quot;,9),xl(4,&quot;VSI&quot;),Fa(),Ra(5,&quot;strong&quot;),xl(6),Fa(),Fa(),La(7,&quot;mat-divider&quot;,3),Ra(8,&quot;div&quot;,1),Ra(9,&quot;div&quot;,2),xl(10,&quot;Propri\xe9taire&quot;),Fa(),Ra(11,&quot;strong&quot;),xl(12),Fa(),Fa(),Fa(),La(13,&quot;mat-divider&quot;),Ra(14,&quot;div&quot;,0),Ra(15,&quot;div&quot;,1),Ra(16,&quot;div&quot;,2),xl(17,&quot;Providers&quot;),Fa(),Ra(18,&quot;strong&quot;),xl(19),Fa(),Fa(),Fa()),2&amp;t){const t=Za();Sr(6),Cl(&quot;&quot;,t.aircraft.vsi?t.aircraft.vsi:&quot;?&quot;,&quot; &quot;),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),Cl(&quot;&quot;,t.aircraft.registeredOwners||&quot;?&quot;,&quot; &quot;),Sr(7),wl((null==t.aircraft||null==t.aircraft.providers?null:t.aircraft.providers.length)&gt;0?null==t.aircraft?null:t.aircraft.providers.join(&quot;, &quot;):&quot;?&quot;)}}let pQ=(()=&gt;{class t extends Eq{constructor(t){super(),this.mapStateConfig=t,this.positionInput=null,this.full=!1,this.extensive=!1,this.position=null,this.stringPosition=&quot;&quot;}ngOnInit(){this.ensureMandatoryInputParams(&quot;aircraft&quot;)}ngOnChanges(t){t.positionInput&amp;&amp;(this.position=this.positionInput),t.aircraft&amp;&amp;!this.positionInput&amp;&amp;(this.position=this.aircraft),this.stringPosition=this.mapStateConfig.coordinateSystem$.value.format([this.position.lon,this.position.lat])}}return t.\u0275fac=function(e){return new(e||t)(Da(vq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-aircraft-infos&quot;]],inputs:{aircraft:&quot;aircraft&quot;,positionInput:[&quot;position&quot;,&quot;positionInput&quot;],full:&quot;full&quot;,extensive:&quot;extensive&quot;},features:[$o,he],decls:33,vars:10,consts:[[1,&quot;aircraft-infos__row&quot;],[1,&quot;aircraft-infos__info-cell&quot;],[1,&quot;aircraft-infos__info-label&quot;],[3,&quot;vertical&quot;],[3,&quot;ngIf&quot;],[1,&quot;d-flex-center&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;unknown&quot;,&quot;&quot;],[1,&quot;aircraft-infos__course-icon&quot;,3,&quot;ngStyle&quot;],[&quot;title&quot;,&quot;Vertical Speed Indicator&quot;,1,&quot;aircraft-infos__info-label&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;div&quot;,2),xl(3,&quot;ICAO&quot;),Fa(),Ra(4,&quot;strong&quot;),xl(5),Fa(),Fa(),La(6,&quot;mat-divider&quot;,3),Ra(7,&quot;div&quot;,1),Ra(8,&quot;div&quot;,2),xl(9,&quot;Callsign&quot;),Fa(),Ra(10,&quot;strong&quot;),xl(11),Fa(),Fa(),La(12,&quot;mat-divider&quot;,3),Ra(13,&quot;div&quot;,1),Ra(14,&quot;div&quot;,2),xl(15,&quot;Registration&quot;),Fa(),Ra(16,&quot;strong&quot;),xl(17),Fa(),Fa(),Fa(),ra(18,uQ,22,8,&quot;ng-template&quot;,4),La(19,&quot;mat-divider&quot;),Ra(20,&quot;div&quot;,0),Ra(21,&quot;div&quot;,1),Ra(22,&quot;div&quot;,2),xl(23,&quot;Altitude&quot;),Fa(),Ra(24,&quot;strong&quot;),xl(25),Fa(),Fa(),La(26,&quot;mat-divider&quot;,3),Ra(27,&quot;div&quot;,1),Ra(28,&quot;div&quot;,2),xl(29,&quot;Position&quot;),Fa(),Ra(30,&quot;strong&quot;),xl(31),Fa(),Fa(),Fa(),ra(32,dQ,20,4,&quot;ng-template&quot;,4)),2&amp;t&amp;&amp;(Sr(5),wl(e.aircraft.icao),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.aircraft.callsign||&quot;?&quot;),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.aircraft.registration||&quot;?&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.full||e.extensive),Sr(7),wl(e.position.altitude?e.position.altitude+&quot; ft&quot;:&quot;?&quot;),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.stringPosition),Sr(1),Oa(&quot;ngIf&quot;,e.full))},directives:[Pq,Nd,hE,qd],styles:[&#39;.aircraft-infos[_ngcontent-%COMP%]{background-color:#e7ecf0;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.2);border-radius:2px}.aircraft-infos[_ngcontent-%COMP%]:after{content:&quot; &quot;;position:absolute;top:100%;left:50%;margin-left:-12px;border-width:12px;border-style:solid;border-color:#cdd1d4 transparent transparent transparent}.aircraft-infos__header[_ngcontent-%COMP%]{background-color:#cdd1d4;display:flex}.aircraft-infos__link[_ngcontent-%COMP%]{flex:1;padding:0;line-height:inherit;text-align:inherit;font-size:inherit;font-weight:inherit}.aircraft-infos__link[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.aircraft-infos__flag[_ngcontent-%COMP%]{margin:5px}.aircraft-infos__title[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0;flex:1}.aircraft-infos__name[_ngcontent-%COMP%]{font-size:1.2em}.aircraft-infos__type[_ngcontent-%COMP%]{font-size:.9em;color:#555}.aircraft-infos__row[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;font-size:.9em}.aircraft-infos__info-cell[_ngcontent-%COMP%]{padding:.4em;text-align:center}.aircraft-infos__info-label[_ngcontent-%COMP%]{color:gray;font-weight:500;padding-bottom:.2em}.aircraft-infos__course-icon[_ngcontent-%COMP%]{line-height:.7em;height:.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.aircraft-infos__footer[_ngcontent-%COMP%]{background-color:#cdd1d4;padding-left:.4em;display:flex;align-items:center;font-size:.85em;line-height:36px}.aircraft-infos__signal-label[_ngcontent-%COMP%]{font-weight:500;color:#595959}&#39;],changeDetection:0}),t})();function fQ(t,e){1&amp;t&amp;&amp;La(0,&quot;div&quot;,3)}function mQ(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,19),Ra(1,&quot;img&quot;,20),Ha(&quot;load&quot;,function(t){return t.target.style.display=&quot;block&quot;})(&quot;error&quot;,function(t){return t.target.remove()}),Fa(),Fa()),2&amp;t){const t=Za(2);Oa(&quot;href&quot;,t.aircraft.photoLink,Cs),Sr(1),Oa(&quot;src&quot;,t.aircraft.photoURL,Cs)}}function gQ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,21),La(1,&quot;img&quot;,22),Fa()),2&amp;t&amp;&amp;tl(&quot;href&quot;,&quot;https://www.flightradar24.com/&quot;,Za(2).aircraft.callsign,&quot;&quot;,Cs)}function AQ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,4),Ra(1,&quot;div&quot;,5),La(2,&quot;app-flag&quot;,6),Ra(3,&quot;div&quot;,7),Ra(4,&quot;div&quot;,8),xl(5),Fa(),Ra(6,&quot;small&quot;,9),xl(7),Fa(),Fa(),Fa(),Ra(8,&quot;div&quot;,10),xl(9,&quot;R\xe9ception : &quot;),Ra(10,&quot;span&quot;,11),lh(11,&quot;timeago&quot;),xl(12),lh(13,&quot;date&quot;),Fa(),Fa(),Fa(),ra(14,mQ,2,2,&quot;a&quot;,12),lh(15,&quot;async&quot;),Ra(16,&quot;div&quot;,5),Ra(17,&quot;button&quot;,13),Ha(&quot;click&quot;,function(){return Le(t),Za().locateAircraft()})(&quot;dblclick&quot;,function(){return Le(t),Za().locateAndZoomToAircraft()}),Ra(18,&quot;mat-icon&quot;),xl(19,&quot;center_focus_strong&quot;),Fa(),Fa(),Ra(20,&quot;a&quot;,14),La(21,&quot;img&quot;,15),Fa(),ra(22,gQ,2,1,&quot;a&quot;,16),Ra(23,&quot;button&quot;,17),Ha(&quot;click&quot;,function(){return Le(t),Za().openExportDataDialog()}),Ra(24,&quot;mat-icon&quot;),xl(25,&quot;file_download&quot;),Fa(),Fa(),Fa(),La(26,&quot;mat-divider&quot;),La(27,&quot;app-aircraft-infos&quot;,18)}if(2&amp;t){const t=Za();Sr(2),Oa(&quot;flag&quot;,t.aircraft.country.flag),Sr(3),wl(t.aircraft.callsign||&quot;?&quot;),Sr(2),wl(t.aircraft.type||&quot;?&quot;),Sr(3),Ja(&quot;title&quot;,ch(11,10,1e3*t.aircraft.timestamp)),Sr(2),wl(uh(13,12,1e3*t.aircraft.timestamp,&quot;yyyy-MM-dd HH:mm:ss z&quot;,t.mapConfigService.useUTCDates$.value&amp;&amp;&quot;+00&quot;)),Sr(2),Oa(&quot;ngIf&quot;,ch(15,16,t.aircraft.photoURL&amp;&amp;t.mapConfigService.showMarineTrafficPhotos$)),Sr(6),tl(&quot;href&quot;,&quot;https://globe.adsbexchange.com/?icao=&quot;,t.aircraft.icao,&quot;&quot;,Cs),Sr(2),Oa(&quot;ngIf&quot;,t.aircraft.callsign),Sr(5),Oa(&quot;aircraft&quot;,t.aircraft)(&quot;full&quot;,!0)}}let vQ=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h){super(),this.activatedRoute=t,this.changeDetectorRef=e,this.titleService=i,this.router=n,this.configService=s,this.exportService=r,this.interactionsService=o,this.mapService=a,this.mapConfigService=l,this.selectionService=c,this.uiService=h,this.loading=!1,this.aircraft=null}ngOnInit(){this.subscriptions.push(this.selectionService.openEntity$.pipe(Sf(1),gf(t=&gt;t.type===OH.Aircraft&amp;&amp;t.id===this.icao)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){if(t.error){this.loading=!1,this.uiService.error(`L&#39;a\xe9ronef ${this.icao} est inconnu. Il a pu atterrir ou son signal n&#39;est plus capt\xe9 depuis plus de 5 minutes.`);const t=WH(this.router);return t?yield this.router.navigateByUrl(t):this.mapService.hasBooted$.value?yield this.router.navigateByUrl(`/${this.mapService.view$.value.toURL()}`):yield this.router.navigateByUrl(&quot;/&quot;),void this.changeDetectorRef.markForCheck()}if(!t.entity)return;this.loading=!1;const e=t.entity;this.mapService.hasBooted$.value||this.mapService.locate([e.lon,e.lat]),this.titleService.setTitle(`A\xe9ronef ${e.callsign||&quot;?&quot;} / ${e.icao} - ANAIS`),this.aircraft=e,this.changeDetectorRef.markForCheck()})),this.activatedRoute.paramMap.subscribe(t=&gt;{this.loading=!0,this.icao=t.get(&quot;icao&quot;),this.selectionService.openEntity(OH.Aircraft,this.icao),this.changeDetectorRef.markForCheck()}))}ngOnDestroy(){super.ngOnDestroy(),this.selectionService.closeOpenEntity()}locateAircraft(){this.mapService.centerOnLonLat([this.aircraft.lon,this.aircraft.lat])}locateAndZoomToAircraft(){this.mapService.locate([this.aircraft.lon,this.aircraft.lat])}openExportDataDialog(){this.exportService.openExportDataDialog({icaos:[this.icao],label:`de l&#39;a\xe9ronef ${this.aircraft.callsign||&quot;?&quot;} / ${this.aircraft.icao}`})}}return t.\u0275fac=function(e){return new(e||t)(Da(HP),Da(Ec),Da(Up),Da(dF),Da(jU),Da(aW),Da(gW),Da(kj),Da(HU),Da(dW),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-aircraft-details-panel&quot;]],features:[$o],decls:3,vars:2,consts:[[1,&quot;panel&quot;,&quot;aircraft-details-panel&quot;],[&quot;class&quot;,&quot;loader&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[1,&quot;loader&quot;],[1,&quot;panel__header&quot;,&quot;d-flex-column&quot;],[1,&quot;d-flex&quot;],[1,&quot;ma-1&quot;,3,&quot;flag&quot;],[1,&quot;ma-1&quot;,&quot;u-flex&quot;],[1,&quot;aircraft-details-panel__name&quot;],[1,&quot;aircraft-details-panel__type&quot;],[1,&quot;aircraft-details-panel__reception&quot;],[3,&quot;title&quot;],[&quot;target&quot;,&quot;_blank&quot;,&quot;rel&quot;,&quot;noopener&quot;,&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,&quot;title&quot;,&quot;Voir la photo&quot;,3,&quot;href&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Centrer la vue sur l&#39;a\xe9ronef&quot;,1,&quot;aircraft-details-panel__action&quot;,3,&quot;click&quot;,&quot;dblclick&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la page ADSB Exchange&quot;,&quot;target&quot;,&quot;_blank&quot;,&quot;rel&quot;,&quot;noopener&quot;,&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,1,&quot;aircraft-details-panel__action&quot;,3,&quot;href&quot;],[&quot;src&quot;,&quot;/assets/images/adsbexchange-icon.png&quot;,&quot;width&quot;,&quot;20&quot;,&quot;alt&quot;,&quot;ADSB Exchange&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;aircraft-details-panel__action&quot;,&quot;title&quot;,&quot;Ouvrir la page Flightradar24&quot;,&quot;target&quot;,&quot;_blank&quot;,&quot;rel&quot;,&quot;noopener&quot;,&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,3,&quot;href&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter les donn\xe9es de l&#39;a\xe9ronef au format CSV&quot;,1,&quot;aircraft-details-panel__action&quot;,3,&quot;click&quot;],[1,&quot;aircraft-details-panel__infos&quot;,3,&quot;aircraft&quot;,&quot;full&quot;],[&quot;target&quot;,&quot;_blank&quot;,&quot;rel&quot;,&quot;noopener&quot;,&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,&quot;title&quot;,&quot;Voir la photo&quot;,3,&quot;href&quot;],[&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,1,&quot;d-block&quot;,2,&quot;display&quot;,&quot;none&quot;,3,&quot;src&quot;,&quot;load&quot;,&quot;error&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la page Flightradar24&quot;,&quot;target&quot;,&quot;_blank&quot;,&quot;rel&quot;,&quot;noopener&quot;,&quot;referrerpolicy&quot;,&quot;no-referrer&quot;,1,&quot;aircraft-details-panel__action&quot;,3,&quot;href&quot;],[&quot;src&quot;,&quot;/assets/images/flightradar24-icon.png&quot;,&quot;width&quot;,&quot;20&quot;,&quot;alt&quot;,&quot;Flightradar24&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),ra(1,fQ,1,0,&quot;div&quot;,1),ra(2,AQ,28,18,&quot;ng-template&quot;,2),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngIf&quot;,e.loading),Sr(1),Oa(&quot;ngIf&quot;,!e.loading&amp;&amp;e.aircraft))},directives:[Nd,aQ,Ry,hE,Fy,Pq,pQ],pipes:[VL,ep,Jd],styles:[&quot;.aircraft-details-panel[_ngcontent-%COMP%]{max-width:310px}.aircraft-details-panel__name[_ngcontent-%COMP%]{font-size:1.4em;font-weight:500}.aircraft-details-panel__type[_ngcontent-%COMP%]{font-size:.9em;color:#432e2e}.aircraft-details-panel__reception[_ngcontent-%COMP%]{font-size:14px;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}.aircraft-details-panel__action[_ngcontent-%COMP%]{flex:1;min-width:inherit}.aircraft-details-panel__infos[_ngcontent-%COMP%]{font-size:.9em}.aircraft-details-panel__section[_ngcontent-%COMP%]{margin-top:.4em}.aircraft-details-panel__section--nopadding[_ngcontent-%COMP%]   .mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0}.aircraft-details-panel__section-row[_ngcontent-%COMP%]{display:flex}.aircraft-details-panel__subheader[_ngcontent-%COMP%]{background-color:#abb8cb}.aircraft-details-panel__subheader[_ngcontent-%COMP%]:focus, .aircraft-details-panel__subheader[_ngcontent-%COMP%]:hover{background-color:#bbc5d5!important}.aircraft-details-panel__label[_ngcontent-%COMP%]{font-weight:300}&quot;],changeDetection:0}),t})();function _Q(t){return[[&quot;timestamp&quot;,&quot;rule_name&quot;,&quot;mmsi&quot;,&quot;ship_name&quot;,&quot;lon&quot;,&quot;lat&quot;,&quot;hdms&quot;].join(&quot;,&quot;),...t.map(t=&gt;function(t){return[sq(1e3*t.start),gU(t.rule_name),t.mmsi,gU(t.ship_name),t.lon,t.lat,V$([t.lon,t.lat])]}(t).join(&quot;,&quot;))].join(&quot;\n&quot;)}let bQ=(()=&gt;{class t{constructor(t,e,i){this.drawingService=t,this.zonesLayerService=e,this.zonesService=i,this.editedZone$=new Qp(null),this.tooManyHexagons$=new Qp(!1),this.editedZone$.subscribe(t=&gt;{this.tooManyHexagons$.next(t&amp;&amp;t.h3indexes.length&gt;130)})}clear(){this.editedZone$.next(null)}startEditing(t){this.editedZone$.next(t),this.zonesLayerService.clear(),this.drawingSubscription=this.drawingService.editZone(t.h3indexes).subscribe(t=&gt;{this.updateZoneH3Indexes(t),this.zonesLayerService.updateZones([{name:&quot;&quot;,h3indexes:this.editedZone$.value.h3indexes}])})}updateZoneName(t){this.editedZone$.value.name=t,this.editedZone$.next(this.editedZone$.value)}updateZoneH3Indexes(t){this.editedZone$.value.h3indexes=t,this.editedZone$.next(this.editedZone$.value)}saveEditedZone(){return jp(this,void 0,void 0,function*(){const t=this.editedZone$.value;if(!t.name||0===t.h3indexes.length)throw new Error(&quot;La zone est incompl\xe8te&quot;);if(t.h3indexes.length&gt;130)throw new Error(`La zone contient trop d&#39;hexagones : ${t.h3indexes.length} / 130 maximum`);return t.id?yield this.zonesService.updateZone(t):t.id=yield this.zonesService.createZone(t),this.cancelEditing(),t})}cancelEditing(){this.drawingSubscription&amp;&amp;this.drawingSubscription.unsubscribe(),this.editedZone$.next(null),this.drawingService.stopEditingZone()}}return t.\u0275fac=function(e){return new(e||t)(Mn(RH),Mn(AW),Mn(EH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function yQ(t,e){if(1&amp;t&amp;&amp;(hi(),La(0,&quot;circle&quot;,3)),2&amp;t){const t=Za();ll(&quot;animation-name&quot;,&quot;mat-progress-spinner-stroke-rotate-&quot;+t._spinnerAnimationLabel)(&quot;stroke-dashoffset&quot;,t._getStrokeDashOffset(),&quot;px&quot;)(&quot;stroke-dasharray&quot;,t._getStrokeCircumference(),&quot;px&quot;)(&quot;stroke-width&quot;,t._getCircleStrokeWidth(),&quot;%&quot;),ea(&quot;r&quot;,t._getCircleRadius())}}function xQ(t,e){if(1&amp;t&amp;&amp;(hi(),La(0,&quot;circle&quot;,3)),2&amp;t){const t=Za();ll(&quot;stroke-dashoffset&quot;,t._getStrokeDashOffset(),&quot;px&quot;)(&quot;stroke-dasharray&quot;,t._getStrokeCircumference(),&quot;px&quot;)(&quot;stroke-width&quot;,t._getCircleStrokeWidth(),&quot;%&quot;),ea(&quot;r&quot;,t._getCircleRadius())}}function wQ(t,e){if(1&amp;t&amp;&amp;(hi(),La(0,&quot;circle&quot;,3)),2&amp;t){const t=Za();ll(&quot;animation-name&quot;,&quot;mat-progress-spinner-stroke-rotate-&quot;+t._spinnerAnimationLabel)(&quot;stroke-dashoffset&quot;,t._getStrokeDashOffset(),&quot;px&quot;)(&quot;stroke-dasharray&quot;,t._getStrokeCircumference(),&quot;px&quot;)(&quot;stroke-width&quot;,t._getCircleStrokeWidth(),&quot;%&quot;),ea(&quot;r&quot;,t._getCircleRadius())}}function CQ(t,e){if(1&amp;t&amp;&amp;(hi(),La(0,&quot;circle&quot;,3)),2&amp;t){const t=Za();ll(&quot;stroke-dashoffset&quot;,t._getStrokeDashOffset(),&quot;px&quot;)(&quot;stroke-dasharray&quot;,t._getStrokeCircumference(),&quot;px&quot;)(&quot;stroke-width&quot;,t._getCircleStrokeWidth(),&quot;%&quot;),ea(&quot;r&quot;,t._getCircleRadius())}}const SQ=&quot;.mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n&quot;,kQ=Bb(class{constructor(t){this._elementRef=t}},&quot;primary&quot;),EQ=new Ji(&quot;mat-progress-spinner-default-options&quot;,{providedIn:&quot;root&quot;,factory:function(){return{diameter:100}}});class MQ extends kQ{constructor(t,e,i,n,s){super(t),this._document=i,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode=&quot;determinate&quot;;const r=MQ._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),r.has(i.head)||r.set(i.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations=&quot;NoopAnimations&quot;===n&amp;&amp;!!s&amp;&amp;!s._forceAnimations,s&amp;&amp;(s.diameter&amp;&amp;(this.diameter=s.diameter),s.strokeWidth&amp;&amp;(this.strokeWidth=s.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ff(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&amp;&amp;this._styleRoot&amp;&amp;this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ff(t)}get value(){return&quot;determinate&quot;===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ff(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=tm(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?&quot;-fallback&quot;:&quot;&quot;}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return&quot;determinate&quot;===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&amp;&amp;&quot;indeterminate&quot;===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=MQ._diameters;let n=i.get(t);if(!n||!n.has(e)){const s=this._document.createElement(&quot;style&quot;);s.setAttribute(&quot;mat-spinner-animation&quot;,this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),n||(n=new Set,i.set(t,n)),n.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return&quot;\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n&quot;.replace(/START_VALUE/g,&quot;&quot;+.95*t).replace(/END_VALUE/g,&quot;&quot;+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(&quot;.&quot;,&quot;_&quot;)}}MQ.\u0275fac=function(t){return new(t||MQ)(Da(ec),Da(jf),Da(Fu,8),Da(yb,8),Da(EQ))},MQ.\u0275cmp=Gt({type:MQ,selectors:[[&quot;mat-progress-spinner&quot;]],hostAttrs:[&quot;role&quot;,&quot;progressbar&quot;,&quot;tabindex&quot;,&quot;-1&quot;,1,&quot;mat-progress-spinner&quot;],hostVars:10,hostBindings:function(t,e){2&amp;t&amp;&amp;(ea(&quot;aria-valuemin&quot;,&quot;determinate&quot;===e.mode?0:null)(&quot;aria-valuemax&quot;,&quot;determinate&quot;===e.mode?100:null)(&quot;aria-valuenow&quot;,&quot;determinate&quot;===e.mode?e.value:null)(&quot;mode&quot;,e.mode),ll(&quot;width&quot;,e.diameter,&quot;px&quot;)(&quot;height&quot;,e.diameter,&quot;px&quot;),cl(&quot;_mat-animation-noopable&quot;,e._noopAnimations))},inputs:{color:&quot;color&quot;,mode:&quot;mode&quot;,diameter:&quot;diameter&quot;,strokeWidth:&quot;strokeWidth&quot;,value:&quot;value&quot;},exportAs:[&quot;matProgressSpinner&quot;],features:[$o],decls:3,vars:8,consts:[[&quot;preserveAspectRatio&quot;,&quot;xMidYMid meet&quot;,&quot;focusable&quot;,&quot;false&quot;,&quot;aria-hidden&quot;,&quot;true&quot;,3,&quot;ngSwitch&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;,3,&quot;animation-name&quot;,&quot;stroke-dashoffset&quot;,&quot;stroke-dasharray&quot;,&quot;stroke-width&quot;,4,&quot;ngSwitchCase&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;,3,&quot;stroke-dashoffset&quot;,&quot;stroke-dasharray&quot;,&quot;stroke-width&quot;,4,&quot;ngSwitchCase&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;]],template:function(t,e){1&amp;t&amp;&amp;(hi(),Ra(0,&quot;svg&quot;,0),ra(1,yQ,1,9,&quot;circle&quot;,1),ra(2,xQ,1,7,&quot;circle&quot;,2),Fa()),2&amp;t&amp;&amp;(ll(&quot;width&quot;,e.diameter,&quot;px&quot;)(&quot;height&quot;,e.diameter,&quot;px&quot;),Oa(&quot;ngSwitch&quot;,&quot;indeterminate&quot;===e.mode),ea(&quot;viewBox&quot;,e._getViewBox()),Sr(1),Oa(&quot;ngSwitchCase&quot;,!0),Sr(1),Oa(&quot;ngSwitchCase&quot;,!1))},directives:[jd,Hd],styles:[SQ],encapsulation:2,changeDetection:0}),MQ._diameters=new WeakMap;let TQ=(()=&gt;{class t extends MQ{constructor(t,e,i,n,s){super(t,e,i,n,s),this.mode=&quot;indeterminate&quot;}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(jf),Da(Fu,8),Da(yb,8),Da(EQ))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-spinner&quot;]],hostAttrs:[&quot;role&quot;,&quot;progressbar&quot;,&quot;mode&quot;,&quot;indeterminate&quot;,1,&quot;mat-spinner&quot;,&quot;mat-progress-spinner&quot;],hostVars:6,hostBindings:function(t,e){2&amp;t&amp;&amp;(ll(&quot;width&quot;,e.diameter,&quot;px&quot;)(&quot;height&quot;,e.diameter,&quot;px&quot;),cl(&quot;_mat-animation-noopable&quot;,e._noopAnimations))},inputs:{color:&quot;color&quot;},features:[$o],decls:3,vars:8,consts:[[&quot;preserveAspectRatio&quot;,&quot;xMidYMid meet&quot;,&quot;focusable&quot;,&quot;false&quot;,&quot;aria-hidden&quot;,&quot;true&quot;,3,&quot;ngSwitch&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;,3,&quot;animation-name&quot;,&quot;stroke-dashoffset&quot;,&quot;stroke-dasharray&quot;,&quot;stroke-width&quot;,4,&quot;ngSwitchCase&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;,3,&quot;stroke-dashoffset&quot;,&quot;stroke-dasharray&quot;,&quot;stroke-width&quot;,4,&quot;ngSwitchCase&quot;],[&quot;cx&quot;,&quot;50%&quot;,&quot;cy&quot;,&quot;50%&quot;]],template:function(t,e){1&amp;t&amp;&amp;(hi(),Ra(0,&quot;svg&quot;,0),ra(1,wQ,1,9,&quot;circle&quot;,1),ra(2,CQ,1,7,&quot;circle&quot;,2),Fa()),2&amp;t&amp;&amp;(ll(&quot;width&quot;,e.diameter,&quot;px&quot;)(&quot;height&quot;,e.diameter,&quot;px&quot;),Oa(&quot;ngSwitch&quot;,&quot;indeterminate&quot;===e.mode),ea(&quot;viewBox&quot;,e._getViewBox()),Sr(1),Oa(&quot;ngSwitchCase&quot;,!0),Sr(1),Oa(&quot;ngSwitchCase&quot;,!1))},directives:[jd,Hd],styles:[SQ],encapsulation:2,changeDetection:0}),t})(),IQ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[Fb,ip],Fb]}),t})(),DQ=(()=&gt;{class t{validate(t){return(t=&gt;{var e;const i=t.get(&quot;aisInterruption&quot;),n=t.get(&quot;transhipment&quot;),s=t.get(&quot;erraticRoute&quot;),r=t.get(&quot;speed&quot;),o=t.get(&quot;passageInZone&quot;),a=t.get(&quot;spoofing&quot;),l=t.get(&quot;zone&quot;);if(!(i&amp;&amp;n&amp;&amp;s&amp;&amp;r&amp;&amp;o&amp;&amp;a))return null;const c=[i,n,s,r,o,a];if(c.some(t=&gt;!t.value))return null;const h={};return c.every(t=&gt;!t.value.enable)&amp;&amp;(h.missingCriterion=!0),(null===(e=l.value)||void 0===e?void 0:e.zones.length)&gt;0||(h.missingZone=!0),h})(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;appAlertRule&quot;,&quot;&quot;]],features:[Wl([{provide:Wy,useExisting:t,multi:!0}])]}),t})();const OQ=[&quot;*&quot;],PQ=new Ji(&quot;MatChipRemove&quot;),RQ=new Ji(&quot;MatChipAvatar&quot;),FQ=new Ji(&quot;MatChipTrailingIcon&quot;);class LQ{constructor(t){this._elementRef=t}}const BQ=Nb(Bb(zb(LQ),&quot;primary&quot;),-1);let zQ=(()=&gt;{class t extends BQ{constructor(t,e,i,n,s,r,o,a){super(t),this._ngZone=e,this._changeDetectorRef=s,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new S,this._onBlur=new S,this.selectionChange=new mh,this.destroyed=new mh,this.removed=new mh,this._addHostClassName(),this._chipRippleTarget=r.createElement(&quot;div&quot;),this._chipRippleTarget.classList.add(&quot;mat-chip-ripple&quot;),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new hy(this,e,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=n||{},this._animationsDisabled=&quot;NoopAnimations&quot;===o,this.tabIndex=null!=a&amp;&amp;parseInt(a)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Rf(t);e!==this._selected&amp;&amp;(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&amp;&amp;this.chipListSelectable}set selectable(t){this._selectable=Rf(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Rf(t)}get removable(){return this._removable}set removable(t){this._removable=Rf(t)}get ariaSelected(){return this.selectable&amp;&amp;(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=&quot;mat-basic-chip&quot;,e=this._elementRef.nativeElement;e.hasAttribute(t)||e.tagName.toLowerCase()===t?e.classList.add(t):e.classList.add(&quot;mat-standard-chip&quot;)}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&amp;&amp;(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&amp;&amp;this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&amp;&amp;this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(xf(1)).subscribe(()=&gt;{this._ngZone.run(()=&gt;{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(iu),Da(jf),Da(uy,8),Da(Ec),Da(Fu),Da(yb,8),Yi(&quot;tabindex&quot;))},t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-basic-chip&quot;],[&quot;&quot;,&quot;mat-basic-chip&quot;,&quot;&quot;],[&quot;mat-chip&quot;],[&quot;&quot;,&quot;mat-chip&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,RQ,5),Th(i,FQ,5),Th(i,PQ,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.avatar=t.first),Eh(t=Ih())&amp;&amp;(e.trailingIcon=t.first),Eh(t=Ih())&amp;&amp;(e.removeIcon=t.first)}},hostAttrs:[&quot;role&quot;,&quot;option&quot;,1,&quot;mat-chip&quot;,&quot;mat-focus-indicator&quot;],hostVars:14,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;click&quot;,function(t){return e._handleClick(t)})(&quot;keydown&quot;,function(t){return e._handleKeydown(t)})(&quot;focus&quot;,function(){return e.focus()})(&quot;blur&quot;,function(){return e._blur()}),2&amp;t&amp;&amp;(ea(&quot;tabindex&quot;,e.disabled?null:e.tabIndex)(&quot;disabled&quot;,e.disabled||null)(&quot;aria-disabled&quot;,e.disabled.toString())(&quot;aria-selected&quot;,e.ariaSelected),cl(&quot;mat-chip-selected&quot;,e.selected)(&quot;mat-chip-with-avatar&quot;,e.avatar)(&quot;mat-chip-with-trailing-icon&quot;,e.trailingIcon||e.removeIcon)(&quot;mat-chip-disabled&quot;,e.disabled)(&quot;_mat-animation-noopable&quot;,e._animationsDisabled))},inputs:{color:&quot;color&quot;,disableRipple:&quot;disableRipple&quot;,tabIndex:&quot;tabIndex&quot;,selected:&quot;selected&quot;,value:&quot;value&quot;,selectable:&quot;selectable&quot;,disabled:&quot;disabled&quot;,removable:&quot;removable&quot;},outputs:{selectionChange:&quot;selectionChange&quot;,destroyed:&quot;destroyed&quot;,removed:&quot;removed&quot;},exportAs:[&quot;matChip&quot;],features:[$o]}),t})(),NQ=(()=&gt;{class t{constructor(t,e){this._parentChip=t,&quot;BUTTON&quot;===e.nativeElement.nodeName&amp;&amp;e.nativeElement.setAttribute(&quot;type&quot;,&quot;button&quot;)}_handleClick(t){const e=this._parentChip;e.removable&amp;&amp;!e.disabled&amp;&amp;e.remove(),t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(Da(zQ),Da(ec))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matChipRemove&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-chip-remove&quot;,&quot;mat-chip-trailing-icon&quot;],hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;click&quot;,function(t){return e._handleClick(t)})},features:[Wl([{provide:PQ,useExisting:t}])]}),t})();const VQ=new Ji(&quot;mat-chips-default-options&quot;),$Q=Vb(class{constructor(t,e,i,n){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=n}});let UQ=0;class jQ{constructor(t,e){this.source=t,this.value=e}}let HQ=(()=&gt;{class t extends $Q{constructor(t,e,i,n,s,r,o){super(r,n,s,o),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.controlType=&quot;mat-chip-list&quot;,this._lastDestroyedChipIndex=null,this._destroyed=new S,this._uid=&quot;mat-chip-list-&quot;+UQ++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=&gt;{},this._onChange=()=&gt;{},this._multiple=!1,this._compareWith=(t,e)=&gt;t===e,this._required=!1,this._disabled=!1,this.ariaOrientation=&quot;horizontal&quot;,this._selectable=!0,this.change=new mh,this.valueChange=new mh,this.ngControl&amp;&amp;(this.ngControl.valueAccessor=this)}get selected(){var t,e;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(e=this._selectionModel)||void 0===e?void 0:e.selected[0]}get role(){return this.empty?null:&quot;listbox&quot;}get multiple(){return this._multiple}set multiple(t){this._multiple=Rf(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&amp;&amp;this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Rf(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&amp;&amp;this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&amp;&amp;(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Rf(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Rf(t),this.chips&amp;&amp;this.chips.forEach(t=&gt;t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return W(...this.chips.map(t=&gt;t.selectionChange))}get chipFocusChanges(){return W(...this.chips.map(t=&gt;t._onFocus))}get chipBlurChanges(){return W(...this.chips.map(t=&gt;t._onBlur))}get chipRemoveChanges(){return W(...this.chips.map(t=&gt;t.destroyed))}ngAfterContentInit(){this._keyManager=new bm(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:&quot;ltr&quot;),this._dir&amp;&amp;this._dir.change.pipe(Df(this._destroyed)).subscribe(t=&gt;this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Df(this._destroyed)).subscribe(()=&gt;{this._allowFocusEscape()}),this.chips.changes.pipe(cg(null),Df(this._destroyed)).subscribe(()=&gt;{this.disabled&amp;&amp;Promise.resolve().then(()=&gt;{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new Pg(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&amp;&amp;(this.updateErrorState(),this.ngControl.disabled!==this._disabled&amp;&amp;(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute(&quot;data-mat-chip-input&quot;,t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(&quot; &quot;)}writeValue(t){this.chips&amp;&amp;this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&amp;&amp;this._chipInput.focused||(this.chips.length&gt;0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&amp;&amp;this._chipInput.focus(t)}_keydown(t){const e=t.target;e&amp;&amp;e.classList.contains(&quot;mat-chip&quot;)&amp;&amp;(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t&gt;=0&amp;&amp;t&lt;this.chips.length}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=&gt;t.deselect()),Array.isArray(t))t.forEach(t=&gt;this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&amp;&amp;e&amp;&amp;this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=&gt;null!=e.value&amp;&amp;this._compareWith(e.value,t));return i&amp;&amp;(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=&gt;{(this.ngControl||this._value)&amp;&amp;(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=&gt;{e!==t&amp;&amp;e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&amp;&amp;(this._selectionModel.clear(),this.chips.forEach(t=&gt;{t.selected&amp;&amp;this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=&gt;t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new jQ(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=&gt;{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&amp;&amp;(this._tabIndex=-1,setTimeout(()=&gt;{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&amp;&amp;(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&amp;&amp;(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&amp;&amp;(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&amp;&amp;(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=&gt;{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=&gt;{!this._selectionModel.isSelected(t)&amp;&amp;t.selected&amp;&amp;t.deselect()}),t.isUserInput&amp;&amp;this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=&gt;{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&amp;&amp;this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=&gt;{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=&gt;{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&amp;&amp;e._hasFocus&amp;&amp;(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&amp;&amp;e!==this._elementRef.nativeElement;){if(e.classList.contains(&quot;mat-chip&quot;))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&amp;&amp;this.chips.some(t=&gt;t._hasFocus)}_syncChipsState(){this.chips&amp;&amp;this.chips.forEach(t=&gt;{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Ec),Da(kg,8),Da(Qx,8),Da(uw,8),Da(ey),Da(yx,10))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-chip-list&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,zQ,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.chips=t)}},hostAttrs:[1,&quot;mat-chip-list&quot;],hostVars:15,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;focus&quot;,function(){return e.focus()})(&quot;blur&quot;,function(){return e._blur()})(&quot;keydown&quot;,function(t){return e._keydown(t)}),2&amp;t&amp;&amp;(Tl(&quot;id&quot;,e._uid),ea(&quot;tabindex&quot;,e.disabled?null:e._tabIndex)(&quot;aria-describedby&quot;,e._ariaDescribedby||null)(&quot;aria-required&quot;,e.role?e.required:null)(&quot;aria-disabled&quot;,e.disabled.toString())(&quot;aria-invalid&quot;,e.errorState)(&quot;aria-multiselectable&quot;,e.multiple)(&quot;role&quot;,e.role)(&quot;aria-orientation&quot;,e.ariaOrientation),cl(&quot;mat-chip-list-disabled&quot;,e.disabled)(&quot;mat-chip-list-invalid&quot;,e.errorState)(&quot;mat-chip-list-required&quot;,e.required))},inputs:{ariaOrientation:[&quot;aria-orientation&quot;,&quot;ariaOrientation&quot;],multiple:&quot;multiple&quot;,compareWith:&quot;compareWith&quot;,value:&quot;value&quot;,required:&quot;required&quot;,placeholder:&quot;placeholder&quot;,disabled:&quot;disabled&quot;,selectable:&quot;selectable&quot;,tabIndex:&quot;tabIndex&quot;,errorStateMatcher:&quot;errorStateMatcher&quot;},outputs:{change:&quot;change&quot;,valueChange:&quot;valueChange&quot;},exportAs:[&quot;matChipList&quot;],features:[Wl([{provide:iC,useExisting:t}]),$o],ngContentSelectors:OQ,decls:2,vars:0,consts:[[1,&quot;mat-chip-list-wrapper&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),Qa(1),Fa())},styles:[&#39;.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:&quot;&quot;;pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n&#39;],encapsulation:2,changeDetection:0}),t})();const GQ={separatorKeyCodes:[13]};let qQ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({providers:[ey,{provide:VQ,useValue:GQ}],imports:[[Fb]]}),t})();const WQ=[&quot;mat-menu-item&quot;,&quot;&quot;];function YQ(t,e){1&amp;t&amp;&amp;(hi(),Ra(0,&quot;svg&quot;,2),La(1,&quot;polygon&quot;,3),Fa())}const ZQ=[&quot;*&quot;];function KQ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,0),Ha(&quot;keydown&quot;,function(e){return Le(t),Za()._handleKeydown(e)})(&quot;click&quot;,function(){return Le(t),Za().closed.emit(&quot;click&quot;)})(&quot;@transformMenu.start&quot;,function(e){return Le(t),Za()._onAnimationStart(e)})(&quot;@transformMenu.done&quot;,function(e){return Le(t),Za()._onAnimationDone(e)}),Ra(1,&quot;div&quot;,1),Qa(2),Fa(),Fa()}if(2&amp;t){const t=Za();Oa(&quot;id&quot;,t.panelId)(&quot;ngClass&quot;,t._classList)(&quot;@transformMenu&quot;,t._panelAnimationState),ea(&quot;aria-label&quot;,t.ariaLabel||null)(&quot;aria-labelledby&quot;,t.ariaLabelledby||null)(&quot;aria-describedby&quot;,t.ariaDescribedby||null)}}const XQ={transformMenu:BA(&quot;transformMenu&quot;,[$A(&quot;void&quot;,VA({opacity:0,transform:&quot;scale(0.8)&quot;})),jA(&quot;void =&gt; enter&quot;,zA(&quot;120ms cubic-bezier(0, 0, 0.2, 1)&quot;,VA({opacity:1,transform:&quot;scale(1)&quot;}))),jA(&quot;* =&gt; void&quot;,zA(&quot;100ms 25ms linear&quot;,VA({opacity:0})))]),fadeInItems:BA(&quot;fadeInItems&quot;,[$A(&quot;showing&quot;,VA({opacity:1})),jA(&quot;void =&gt; *&quot;,[VA({opacity:0}),zA(&quot;400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)&quot;)])])},QQ=new Ji(&quot;MatMenuContent&quot;);let JQ=(()=&gt;{class t{constructor(t,e,i,n,s,r,o){this._template=t,this._componentFactoryResolver=e,this._appRef=i,this._injector=n,this._viewContainerRef=s,this._document=r,this._changeDetectorRef=o,this._attached=new S}attach(t={}){this._portal||(this._portal=new qp(this._template,this._viewContainerRef)),this.detach(),this._outlet||(this._outlet=new Zp(this._document.createElement(&quot;div&quot;),this._componentFactoryResolver,this._appRef,this._injector));const e=this._template.elementRef.nativeElement;e.parentNode.insertBefore(this._outlet.outletElement,e),this._changeDetectorRef&amp;&amp;this._changeDetectorRef.markForCheck(),this._portal.attach(this._outlet,t),this._attached.next()}detach(){this._portal.isAttached&amp;&amp;this._portal.detach()}ngOnDestroy(){this._outlet&amp;&amp;this._outlet.dispose()}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc),Da(Xl),Da(wu),Da(No),Da(Nc),Da(Fu),Da(Ec))},t.\u0275dir=Xt({type:t}),t})(),tJ=(()=&gt;{class t extends JQ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;ng-template&quot;,&quot;matMenuContent&quot;,&quot;&quot;]],features:[Wl([{provide:QQ,useExisting:t}]),$o]}),t})();const eJ=new Ji(&quot;MAT_MENU_PANEL&quot;),iJ=zb(Lb(class{}));let nJ=(()=&gt;{class t extends iJ{constructor(t,e,i,n,s){super(),this._elementRef=t,this._focusMonitor=i,this._parentMenu=n,this._changeDetectorRef=s,this.role=&quot;menuitem&quot;,this._hovered=new S,this._focused=new S,this._highlighted=!1,this._triggersSubmenu=!1,n&amp;&amp;n.addItem&amp;&amp;n.addItem(this)}focus(t,e){this._focusMonitor&amp;&amp;t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&amp;&amp;this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&amp;&amp;this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&amp;&amp;this._parentMenu.removeItem&amp;&amp;this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?&quot;-1&quot;:&quot;0&quot;}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&amp;&amp;(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t,e;const i=this._elementRef.nativeElement.cloneNode(!0),n=i.querySelectorAll(&quot;mat-icon, .material-icons&quot;);for(let s=0;s&lt;n.length;s++){const e=n[s];null===(t=e.parentNode)||void 0===t||t.removeChild(e)}return(null===(e=i.textContent)||void 0===e?void 0:e.trim())||&quot;&quot;}_setHighlighted(t){var e;this._highlighted=t,null===(e=this._changeDetectorRef)||void 0===e||e.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Fu),Da(Nm),Da(eJ,8),Da(Ec))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;&quot;,&quot;mat-menu-item&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-focus-indicator&quot;],hostVars:10,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;click&quot;,function(t){return e._checkDisabled(t)})(&quot;mouseenter&quot;,function(){return e._handleMouseEnter()}),2&amp;t&amp;&amp;(ea(&quot;role&quot;,e.role)(&quot;tabindex&quot;,e._getTabIndex())(&quot;aria-disabled&quot;,e.disabled.toString())(&quot;disabled&quot;,e.disabled||null),cl(&quot;mat-menu-item&quot;,!0)(&quot;mat-menu-item-highlighted&quot;,e._highlighted)(&quot;mat-menu-item-submenu-trigger&quot;,e._triggersSubmenu))},inputs:{disabled:&quot;disabled&quot;,disableRipple:&quot;disableRipple&quot;,role:&quot;role&quot;},exportAs:[&quot;matMenuItem&quot;],features:[$o],attrs:WQ,ngContentSelectors:ZQ,decls:3,vars:3,consts:[[&quot;matRipple&quot;,&quot;&quot;,1,&quot;mat-menu-ripple&quot;,3,&quot;matRippleDisabled&quot;,&quot;matRippleTrigger&quot;],[&quot;class&quot;,&quot;mat-menu-submenu-icon&quot;,&quot;viewBox&quot;,&quot;0 0 5 10&quot;,&quot;focusable&quot;,&quot;false&quot;,4,&quot;ngIf&quot;],[&quot;viewBox&quot;,&quot;0 0 5 10&quot;,&quot;focusable&quot;,&quot;false&quot;,1,&quot;mat-menu-submenu-icon&quot;],[&quot;points&quot;,&quot;0,0 5,5 0,10&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Qa(0),La(1,&quot;div&quot;,0),ra(2,YQ,2,0,&quot;svg&quot;,1)),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;matRippleDisabled&quot;,e.disableRipple||e.disabled)(&quot;matRippleTrigger&quot;,e._getHostElement()),Sr(1),Oa(&quot;ngIf&quot;,e._triggersSubmenu))},directives:[dy,Nd],encapsulation:2,changeDetection:0}),t})();const sJ=new Ji(&quot;mat-menu-default-options&quot;,{providedIn:&quot;root&quot;,factory:function(){return{overlapTrigger:!1,xPosition:&quot;after&quot;,yPosition:&quot;below&quot;,backdropClass:&quot;cdk-overlay-transparent-backdrop&quot;}}});let rJ=0,oJ=(()=&gt;{class t{constructor(t,e,i){this._elementRef=t,this._ngZone=e,this._defaultOptions=i,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Ah,this._tabSubscription=d.EMPTY,this._classList={},this._panelAnimationState=&quot;void&quot;,this._animationDone=new S,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||&quot;&quot;,this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new mh,this.close=this.closed,this.panelId=&quot;mat-menu-panel-&quot;+rJ++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Rf(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Rf(t)}set panelClass(t){const e=this._previousPanelClass;e&amp;&amp;e.length&amp;&amp;e.split(&quot; &quot;).forEach(t=&gt;{this._classList[t]=!1}),this._previousPanelClass=t,t&amp;&amp;t.length&amp;&amp;(t.split(&quot; &quot;).forEach(t=&gt;{this._classList[t]=!0}),this._elementRef.nativeElement.className=&quot;&quot;)}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new bm(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=&gt;this.closed.emit(&quot;tab&quot;)),this._directDescendantItems.changes.pipe(cg(this._directDescendantItems),pg(t=&gt;W(...t.map(t=&gt;t._focused)))).subscribe(t=&gt;this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(cg(this._directDescendantItems),pg(t=&gt;W(...t.map(t=&gt;t._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const e=t.keyCode,i=this._keyManager;switch(e){case 27:tf(t)||(t.preventDefault(),this.closed.emit(&quot;keydown&quot;));break;case 37:this.parentMenu&amp;&amp;&quot;ltr&quot;===this.direction&amp;&amp;this.closed.emit(&quot;keydown&quot;);break;case 39:this.parentMenu&amp;&amp;&quot;rtl&quot;===this.direction&amp;&amp;this.closed.emit(&quot;keydown&quot;);break;default:(38===e||40===e)&amp;&amp;i.setFocusOrigin(&quot;keyboard&quot;),i.onKeydown(t)}}focusFirstItem(t=&quot;program&quot;){this.lazyContent?this._ngZone.onStable.pipe(xf(1)).subscribe(()=&gt;this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&amp;&amp;this._directDescendantItems.length){let t=this._directDescendantItems.first._getHostElement().parentElement;for(;t;){if(&quot;menu&quot;===t.getAttribute(&quot;role&quot;)){t.focus();break}t=t.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const e=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${e}`,n=Object.keys(this._classList).find(t=&gt;t.startsWith(this._elevationPrefix));(!n||n===this._previousElevation)&amp;&amp;(this._previousElevation&amp;&amp;(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,e=this.yPosition){const i=this._classList;i[&quot;mat-menu-before&quot;]=&quot;before&quot;===t,i[&quot;mat-menu-after&quot;]=&quot;after&quot;===t,i[&quot;mat-menu-above&quot;]=&quot;above&quot;===e,i[&quot;mat-menu-below&quot;]=&quot;below&quot;===e}_startAnimation(){this._panelAnimationState=&quot;enter&quot;}_resetAnimation(){this._panelAnimationState=&quot;void&quot;}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,&quot;enter&quot;===t.toState&amp;&amp;0===this._keyManager.activeItemIndex&amp;&amp;(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(cg(this._allItems)).subscribe(t=&gt;{this._directDescendantItems.reset(t.filter(t=&gt;t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(iu),Da(sJ))},t.\u0275dir=Xt({type:t,contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,QQ,5),Th(i,nJ,5),Th(i,nJ,4)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.lazyContent=t.first),Eh(t=Ih())&amp;&amp;(e._allItems=t),Eh(t=Ih())&amp;&amp;(e.items=t)}},viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(Oc,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.templateRef=t.first)}},inputs:{backdropClass:&quot;backdropClass&quot;,xPosition:&quot;xPosition&quot;,yPosition:&quot;yPosition&quot;,overlapTrigger:&quot;overlapTrigger&quot;,hasBackdrop:&quot;hasBackdrop&quot;,panelClass:[&quot;class&quot;,&quot;panelClass&quot;],classList:&quot;classList&quot;,ariaLabel:[&quot;aria-label&quot;,&quot;ariaLabel&quot;],ariaLabelledby:[&quot;aria-labelledby&quot;,&quot;ariaLabelledby&quot;],ariaDescribedby:[&quot;aria-describedby&quot;,&quot;ariaDescribedby&quot;]},outputs:{closed:&quot;closed&quot;,close:&quot;close&quot;}}),t})(),aJ=(()=&gt;{class t extends oJ{constructor(t,e,i){super(t,e,i),this._elevationPrefix=&quot;mat-elevation-z&quot;,this._baseElevation=4}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(iu),Da(sJ))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-menu&quot;]],hostVars:3,hostBindings:function(t,e){2&amp;t&amp;&amp;ea(&quot;aria-label&quot;,null)(&quot;aria-labelledby&quot;,null)(&quot;aria-describedby&quot;,null)},exportAs:[&quot;matMenu&quot;],features:[Wl([{provide:eJ,useExisting:t}]),$o],ngContentSelectors:ZQ,decls:1,vars:0,consts:[[&quot;tabindex&quot;,&quot;-1&quot;,&quot;role&quot;,&quot;menu&quot;,1,&quot;mat-menu-panel&quot;,3,&quot;id&quot;,&quot;ngClass&quot;,&quot;keydown&quot;,&quot;click&quot;],[1,&quot;mat-menu-content&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),ra(0,KQ,3,6,&quot;ng-template&quot;))},directives:[Fd],styles:[&quot;mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n&quot;],encapsulation:2,data:{animation:[XQ.transformMenu,XQ.fadeInItems]},changeDetection:0}),t})();const lJ=new Ji(&quot;mat-menu-scroll-strategy&quot;),cJ={provide:lJ,deps:[EA],useFactory:function(t){return()=&gt;t.scrollStrategies.reposition()}},hJ=Xf({passive:!0});let uJ=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a){this._overlay=t,this._element=e,this._viewContainerRef=i,this._menuItemInstance=r,this._dir=o,this._focusMonitor=a,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=d.EMPTY,this._hoverSubscription=d.EMPTY,this._menuCloseSubscription=d.EMPTY,this._handleTouchStart=t=&gt;{Mm(t)||(this._openedBy=&quot;touch&quot;)},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new mh,this.onMenuOpen=this.menuOpened,this.menuClosed=new mh,this.onMenuClose=this.menuClosed,this._scrollStrategy=n,this._parentMaterialMenu=s instanceof oJ?s:void 0,e.nativeElement.addEventListener(&quot;touchstart&quot;,this._handleTouchStart,hJ),r&amp;&amp;(r._triggersSubmenu=this.triggersSubmenu())}get _ariaExpanded(){return this.menuOpen||null}get _ariaControl(){return this.menuOpen?this.menu.panelId:null}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&amp;&amp;(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&amp;&amp;(this._menuCloseSubscription=t.close.subscribe(t=&gt;{this._destroyMenu(t),(&quot;click&quot;===t||&quot;tab&quot;===t)&amp;&amp;this._parentMaterialMenu&amp;&amp;this._parentMaterialMenu.closed.emit(t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&amp;&amp;(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener(&quot;touchstart&quot;,this._handleTouchStart,hJ),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&amp;&amp;&quot;rtl&quot;===this._dir.value?&quot;rtl&quot;:&quot;ltr&quot;}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),e=t.getConfig();this._setPosition(e.positionStrategy),e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&amp;&amp;this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=&gt;this.closeMenu()),this._initMenu(),this.menu instanceof oJ&amp;&amp;this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(t,e){this._focusMonitor&amp;&amp;t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&amp;&amp;(&quot;keydown&quot;===t||!this._openedBy||!this.triggersSubmenu())&amp;&amp;this.focus(this._openedBy),this._openedBy=void 0,e instanceof oJ?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(gf(t=&gt;&quot;void&quot;===t.toState),xf(1),Df(e.lazyContent._attached)).subscribe({next:()=&gt;e.lazyContent.detach(),complete:()=&gt;this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&amp;&amp;e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||&quot;program&quot;),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,e=this.menu.parentMenu;for(;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&amp;&amp;this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new lA({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(&quot;.mat-menu-panel, .mat-mdc-menu-panel&quot;),backdropClass:this.menu.backdropClass||&quot;cdk-overlay-transparent-backdrop&quot;,panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&amp;&amp;t.positionChanges.subscribe(t=&gt;{this.menu.setPositionClasses(&quot;start&quot;===t.connectionPair.overlayX?&quot;after&quot;:&quot;before&quot;,&quot;top&quot;===t.connectionPair.overlayY?&quot;below&quot;:&quot;above&quot;)})}_setPosition(t){let[e,i]=&quot;before&quot;===this.menu.xPosition?[&quot;end&quot;,&quot;start&quot;]:[&quot;start&quot;,&quot;end&quot;],[n,s]=&quot;above&quot;===this.menu.yPosition?[&quot;bottom&quot;,&quot;top&quot;]:[&quot;top&quot;,&quot;bottom&quot;],[r,o]=[n,s],[a,l]=[e,i],c=0;this.triggersSubmenu()?(l=e=&quot;before&quot;===this.menu.xPosition?&quot;start&quot;:&quot;end&quot;,i=a=&quot;end&quot;===e?&quot;start&quot;:&quot;end&quot;,c=&quot;bottom&quot;===n?8:-8):this.menu.overlapTrigger||(r=&quot;top&quot;===n?&quot;bottom&quot;:&quot;top&quot;,o=&quot;top&quot;===s?&quot;bottom&quot;:&quot;top&quot;),t.withPositions([{originX:e,originY:r,overlayX:a,overlayY:n,offsetY:c},{originX:i,originY:r,overlayX:l,overlayY:n,offsetY:c},{originX:e,originY:o,overlayX:a,overlayY:s,offsetY:-c},{originX:i,originY:o,overlayX:l,overlayY:s,offsetY:-c}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments();return W(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:Jp(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(gf(t=&gt;t!==this._menuItemInstance),gf(()=&gt;this._menuOpen)):Jp(),e)}_handleMousedown(t){Em(t)||(this._openedBy=0===t.button?&quot;mouse&quot;:void 0,this.triggersSubmenu()&amp;&amp;t.preventDefault())}_handleKeydown(t){const e=t.keyCode;(13===e||32===e)&amp;&amp;(this._openedBy=&quot;keyboard&quot;),this.triggersSubmenu()&amp;&amp;(39===e&amp;&amp;&quot;ltr&quot;===this.dir||37===e&amp;&amp;&quot;rtl&quot;===this.dir)&amp;&amp;(this._openedBy=&quot;keyboard&quot;,this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(gf(t=&gt;t===this._menuItemInstance&amp;&amp;!t.disabled),Ej(0,tg)).subscribe(()=&gt;{this._openedBy=&quot;mouse&quot;,this.menu instanceof oJ&amp;&amp;this.menu._isAnimating?this.menu._animationDone.pipe(xf(1),Ej(0,tg),Df(this._parentMaterialMenu._hovered())).subscribe(()=&gt;this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&amp;&amp;(this._portal=new qp(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(Da(EA),Da(ec),Da(Nc),Da(lJ),Da(eJ,8),Da(nJ,10),Da(kg,8),Da(Nm))},t.\u0275dir=Xt({type:t,hostVars:3,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;mousedown&quot;,function(t){return e._handleMousedown(t)})(&quot;keydown&quot;,function(t){return e._handleKeydown(t)})(&quot;click&quot;,function(t){return e._handleClick(t)}),2&amp;t&amp;&amp;ea(&quot;aria-haspopup&quot;,e._ariaHaspopup)(&quot;aria-expanded&quot;,e._ariaExpanded)(&quot;aria-controls&quot;,e._ariaControl)},inputs:{restoreFocus:[&quot;matMenuTriggerRestoreFocus&quot;,&quot;restoreFocus&quot;],_deprecatedMatMenuTriggerFor:[&quot;mat-menu-trigger-for&quot;,&quot;_deprecatedMatMenuTriggerFor&quot;],menu:[&quot;matMenuTriggerFor&quot;,&quot;menu&quot;],menuData:[&quot;matMenuTriggerData&quot;,&quot;menuData&quot;]},outputs:{menuOpened:&quot;menuOpened&quot;,onMenuOpen:&quot;onMenuOpen&quot;,menuClosed:&quot;menuClosed&quot;,onMenuClose:&quot;onMenuClose&quot;}}),t})(),dJ=(()=&gt;{class t extends uJ{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;mat-menu-trigger-for&quot;,&quot;&quot;],[&quot;&quot;,&quot;matMenuTriggerFor&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-menu-trigger&quot;],exportAs:[&quot;matMenuTrigger&quot;],features:[$o]}),t})(),pJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({providers:[cJ],imports:[[ip,Fb,py,PA],Zg,Fb]}),t})(),fJ=(()=&gt;{class t extends Eq{constructor(t){super(),this.editZoneService=t,this.saveEmitter=new mh,this.cancelEmitter=new mh,this.isZoneValid=!1,this.save=()=&gt;jp(this,void 0,void 0,function*(){if(this.isZoneValid){const t=yield this.editZoneService.saveEditedZone();this.saveEmitter.next(t)}})}ngOnInit(){this.editZoneService.startEditing(this.initialZone?lU(this.initialZone):function(t={}){var e,i,n;return Object.assign(Object.assign({},t),{name:null!==(e=t.name)&amp;&amp;void 0!==e?e:&quot;&quot;,h3indexes:null!==(i=t.h3indexes)&amp;&amp;void 0!==i?i:[],group_id:null!==(n=t.group_id)&amp;&amp;void 0!==n?n:&quot;&quot;})}({group_id:this.groupId})),this.subscriptions.push(this.editZoneService.editedZone$.subscribe(t=&gt;{this.zone=t,this.isZoneValid=function(t){return!!t&amp;&amp;t.name&amp;&amp;t.h3indexes.length&gt;0&amp;&amp;t.h3indexes.length&lt;=130}(t)}))}updateZoneName(t){this.editZoneService.updateZoneName(t)}cancel(){this.editZoneService.cancelEditing(),this.cancelEmitter.next()}}return t.\u0275fac=function(e){return new(e||t)(Da(bQ))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-zone-form&quot;]],inputs:{initialZone:&quot;initialZone&quot;,groupId:&quot;groupId&quot;},outputs:{saveEmitter:&quot;save&quot;,cancelEmitter:&quot;cancel&quot;},features:[$o],decls:8,vars:3,consts:[[1,&quot;u-flex&quot;,&quot;ml-2&quot;,&quot;auto-width&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;placeholder&quot;,&quot;Nom de la zone&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;,&quot;keyup.enter&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Enregistrer&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-form-field&quot;,0),Ra(1,&quot;input&quot;,1),Ha(&quot;ngModelChange&quot;,function(t){return e.updateZoneName(t)})(&quot;keyup.enter&quot;,function(){return e.save()}),Fa(),Fa(),Ra(2,&quot;button&quot;,2),Ra(3,&quot;mat-icon&quot;),xl(4,&quot;check&quot;),Fa(),Fa(),Ra(5,&quot;button&quot;,3),Ha(&quot;click&quot;,function(){return e.cancel()}),Ra(6,&quot;mat-icon&quot;),xl(7,&quot;cancel&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngModel&quot;,e.zone.name),Sr(1),Oa(&quot;app-async-action&quot;,e.save)(&quot;disabled&quot;,!e.isZoneValid))},directives:[gC,kC,Hy,wx,iw,Ry,Fq,hE],styles:[&quot;[_nghost-%COMP%]{display:flex}&quot;]}),t})();function mJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-zone-form&quot;,2),Ha(&quot;save&quot;,function(e){return Le(t),Za().updateZone(e)})(&quot;cancel&quot;,function(){return Le(t),Za().hideEditForm()}),Fa()}2&amp;t&amp;&amp;Oa(&quot;initialZone&quot;,Za().zone)}function gJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,5),Ha(&quot;click&quot;,function(){return Le(t),Za(2).showEditForm()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;edit&quot;),Fa(),Fa(),Ra(3,&quot;button&quot;,6),Ha(&quot;click&quot;,function(){return Le(t),Za(2).deleteZone()}),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;delete&quot;),Fa(),Fa()}if(2&amp;t){const t=Za(2);Oa(&quot;disabled&quot;,t.disableEdition),Sr(3),Oa(&quot;disabled&quot;,t.disableEdition||!!t.mustDeleteAssociatedAlertRulesErrorMessage)(&quot;title&quot;,t.mustDeleteAssociatedAlertRulesErrorMessage)}}function AJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,3),Ha(&quot;click&quot;,function(){return Le(t),Za().locate()}),xl(1),Fa(),ra(2,gJ,6,3,&quot;ng-template&quot;,4)}if(2&amp;t){const t=Za();Sr(1),Cl(&quot; &quot;,t.zone.name,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,t.editable)}}let vJ=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.alertRulesService=t,this.mapService=e,this.uiService=i,this.zonesService=n,this.editable=!1,this.disableEdition=!1,this.trueDeletion=!1,this.deleteEmitter=new mh,this.editMode=!1,this.editedZoneSubscription=new d}ngOnInit(){this.ensureMandatoryInputParams(&quot;zone&quot;);const t=this.alertRulesService.alertRulesNamesByZoneId[this.zone.id]||[];this.mustDeleteAssociatedAlertRulesErrorMessage=this.trueDeletion&amp;&amp;t.length&gt;0?`Cette zone est utilis\xe9e par les r\xe8gles suivantes : ${t.join(&quot;, &quot;)}. Veuillez supprimer la zone de ces r\xe8gles avant de pouvoir supprimer cette zone.`:&quot;&quot;}locate(){this.mapService.fitOnHexagons(this.zone.h3indexes)}showEditForm(){this.editMode=!0,this.locate()}hideEditForm(){this.editMode=!1}updateZone(t){Object.assign(this.zone,t),this.hideEditForm()}deleteZone(){this.trueDeletion?this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Une fois supprim\xe9e, cette zone ne sera plus accessible et sera supprim\xe9e de toute les r\xe8gles qui l&#39;utilisent. Confirmez-vous la suppression de cette zone ?&quot;,action:t=&gt;jp(this,void 0,void 0,function*(){t&amp;&amp;(yield this.zonesService.deleteZone(this.zone.id),this.deleteEmitter.next(null))})}):this.deleteEmitter.next(null)}}return t.\u0275fac=function(e){return new(e||t)(Da(TH),Da(kj),Da(fH),Da(EH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-zone-item&quot;]],inputs:{zone:&quot;zone&quot;,editable:&quot;editable&quot;,disableEdition:&quot;disableEdition&quot;,trueDeletion:&quot;trueDeletion&quot;},outputs:{deleteEmitter:&quot;delete&quot;},features:[$o],decls:3,vars:2,consts:[[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;u-flex&quot;,3,&quot;initialZone&quot;,&quot;save&quot;,&quot;cancel&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Visualiser la zone&quot;,1,&quot;u-flex&quot;,3,&quot;click&quot;],[3,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;\xc9diter la zone&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Supprimer la zone&quot;,3,&quot;disabled&quot;,&quot;title&quot;,&quot;click&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(ra(0,mJ,1,1,&quot;ng-template&quot;,0),ra(1,AJ,3,2,&quot;ng-template&quot;,null,1,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,e.editMode)(&quot;ngIfElse&quot;,t)}},directives:[Nd,fJ,Ry,hE],styles:[&quot;[_nghost-%COMP%]{display:flex}&quot;]}),t})();const _J=[&quot;*&quot;],bJ=[[[&quot;&quot;,&quot;mat-list-avatar&quot;,&quot;&quot;],[&quot;&quot;,&quot;mat-list-icon&quot;,&quot;&quot;],[&quot;&quot;,&quot;matListAvatar&quot;,&quot;&quot;],[&quot;&quot;,&quot;matListIcon&quot;,&quot;&quot;]],[[&quot;&quot;,&quot;mat-line&quot;,&quot;&quot;],[&quot;&quot;,&quot;matLine&quot;,&quot;&quot;]],&quot;*&quot;],yJ=[&quot;[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]&quot;,&quot;[mat-line], [matLine]&quot;,&quot;*&quot;],xJ=Lb(zb(class{})),wJ=zb(class{}),CJ=new Ji(&quot;MatList&quot;),SJ=new Ji(&quot;MatNavList&quot;);let kJ=(()=&gt;{class t extends xJ{constructor(t){super(),this._elementRef=t,this._stateChanges=new S,&quot;action-list&quot;===this._getListType()&amp;&amp;t.nativeElement.classList.add(&quot;mat-action-list&quot;)}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return&quot;mat-list&quot;===t?&quot;list&quot;:&quot;mat-action-list&quot;===t?&quot;action-list&quot;:null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Da(ec))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-list&quot;],[&quot;mat-action-list&quot;]],hostAttrs:[1,&quot;mat-list&quot;,&quot;mat-list-base&quot;],inputs:{disableRipple:&quot;disableRipple&quot;,disabled:&quot;disabled&quot;},exportAs:[&quot;matList&quot;],features:[Wl([{provide:CJ,useExisting:t}]),$o,he],ngContentSelectors:_J,decls:1,vars:0,template:function(t,e){1&amp;t&amp;&amp;(Xa(),Qa(0))},styles:[&#39;.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text&gt;*,.mat-list-base .mat-list-option .mat-list-text&gt;*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text&gt;*,.mat-list-base[dense] .mat-list-option .mat-list-text&gt;*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:&quot;&quot;;position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n&#39;],encapsulation:2,changeDetection:0}),t})(),EJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;mat-list-avatar&quot;,&quot;&quot;],[&quot;&quot;,&quot;matListAvatar&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-list-avatar&quot;]}),t})(),MJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;mat-list-icon&quot;,&quot;&quot;],[&quot;&quot;,&quot;matListIcon&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-list-icon&quot;]}),t})(),TJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;mat-subheader&quot;,&quot;&quot;],[&quot;&quot;,&quot;matSubheader&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-subheader&quot;]}),t})(),IJ=(()=&gt;{class t extends wJ{constructor(t,e,i,n){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new S,this._disabled=!1,this._isInteractiveList=!!(i||n&amp;&amp;&quot;action-list&quot;===n._getListType()),this._list=i||n;const s=this._getHostElement();&quot;button&quot;===s.nodeName.toLowerCase()&amp;&amp;!s.hasAttribute(&quot;type&quot;)&amp;&amp;s.setAttribute(&quot;type&quot;,&quot;button&quot;),this._list&amp;&amp;this._list._stateChanges.pipe(Df(this._destroyed)).subscribe(()=&gt;{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Rf(t)}ngAfterContentInit(){!function(t,e,i=&quot;mat&quot;){t.changes.pipe(cg(t)).subscribe(({length:t})=&gt;{ny(e,`${i}-2-line`,!1),ny(e,`${i}-3-line`,!1),ny(e,`${i}-multi-line`,!1),2===t||3===t?ny(e,`${i}-${t}-line`,!0):t&gt;3&amp;&amp;ny(e,`${i}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Ec),Da(SJ,8),Da(CJ,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-list-item&quot;],[&quot;a&quot;,&quot;mat-list-item&quot;,&quot;&quot;],[&quot;button&quot;,&quot;mat-list-item&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,EJ,5),Th(i,MJ,5),Th(i,iy,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._avatar=t.first),Eh(t=Ih())&amp;&amp;(e._icon=t.first),Eh(t=Ih())&amp;&amp;(e._lines=t)}},hostAttrs:[1,&quot;mat-list-item&quot;,&quot;mat-focus-indicator&quot;],hostVars:6,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-list-item-disabled&quot;,e.disabled)(&quot;mat-list-item-avatar&quot;,e._avatar||e._icon)(&quot;mat-list-item-with-avatar&quot;,e._avatar||e._icon)},inputs:{disableRipple:&quot;disableRipple&quot;,disabled:&quot;disabled&quot;},exportAs:[&quot;matListItem&quot;],features:[$o],ngContentSelectors:yJ,decls:6,vars:2,consts:[[1,&quot;mat-list-item-content&quot;],[&quot;mat-ripple&quot;,&quot;&quot;,1,&quot;mat-list-item-ripple&quot;,3,&quot;matRippleTrigger&quot;,&quot;matRippleDisabled&quot;],[1,&quot;mat-list-text&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(bJ),Ra(0,&quot;div&quot;,0),La(1,&quot;div&quot;,1),Qa(2),Ra(3,&quot;div&quot;,2),Qa(4,1),Fa(),Qa(5,2),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;matRippleTrigger&quot;,e._getHostElement())(&quot;matRippleDisabled&quot;,e._isRippleDisabled()))},directives:[dy],encapsulation:2,changeDetection:0}),t})(),DJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[sy,py,Fb,my,ip],sy,Fb,my,Rq]}),t})();function OJ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,4),xl(1,&quot; Ce filtre restreint les alertes \xe0 certaines zones. &quot;),Fa())}function PJ(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,13),xl(1,&quot; Au moins une zone est n\xe9cessaire pour d\xe9finir la r\xe8gle. &quot;),Fa())}function RJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-zone-item&quot;,14),Ha(&quot;delete&quot;,function(){const e=Le(t).$implicit;return Za(2).deleteZone(e)}),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(2);Oa(&quot;zone&quot;,t)(&quot;editable&quot;,!0)(&quot;disableEdition&quot;,!i.zonesEditable)}}function FJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-zone-form&quot;,15),Ha(&quot;save&quot;,function(e){return Le(t),Za(2).addCreatedZone(e)})(&quot;cancel&quot;,function(){return Le(t),Za(2).hideCreateZoneForm()}),Fa()}2&amp;t&amp;&amp;Oa(&quot;groupId&quot;,Za(2).groupId)}function LJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,16),Ra(1,&quot;span&quot;),xl(2,&quot;\xa0Ajouter une zone&quot;),Fa(),Fa(),Ra(3,&quot;button&quot;,17),Ha(&quot;click&quot;,function(){return Le(t),Za(2).displayCreateZoneForm()}),xl(4,&quot; Cr\xe9er une zone &quot;),Fa()}if(2&amp;t){Za();const t=oa(6),e=Za();Oa(&quot;matMenuTriggerFor&quot;,t)(&quot;disabled&quot;,!e.zonesEditable),Sr(3),Oa(&quot;disabled&quot;,!e.zonesEditable)}}function BJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,18),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(2).addZone(e)}),xl(1),Fa()}if(2&amp;t){const t=e.$implicit;Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function zJ(t,e){if(1&amp;t&amp;&amp;(ra(0,PJ,2,0,&quot;div&quot;,5),ra(1,RJ,1,3,&quot;app-zone-item&quot;,6),Ra(2,&quot;div&quot;,7),ra(3,FJ,1,1,&quot;app-zone-form&quot;,8),ra(4,LJ,5,3,&quot;ng-template&quot;,9),Fa(),Ra(5,&quot;mat-menu&quot;,10,11),ra(7,BJ,2,1,&quot;button&quot;,12),Fa()),2&amp;t){const t=Za();Oa(&quot;ngIf&quot;,0===t.criterion.zones.length),Sr(1),Oa(&quot;ngForOf&quot;,t.criterion.zones)(&quot;ngForTrackBy&quot;,t.trackById),Sr(2),Oa(&quot;ngIf&quot;,t.showCreateZoneForm),Sr(1),Oa(&quot;ngIf&quot;,!t.showCreateZoneForm),Sr(3),Oa(&quot;ngForOf&quot;,t.availableZones)}}function NJ(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-list-item&quot;),Ra(1,&quot;button&quot;,21),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(2).viewZone(e)}),xl(2),Fa(),Fa()}if(2&amp;t){const t=e.$implicit;Sr(2),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function VJ(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-list&quot;,19),ra(1,NJ,3,1,&quot;mat-list-item&quot;,20),Fa()),2&amp;t){const t=Za();Sr(1),Oa(&quot;ngForOf&quot;,t.criterion.zones)(&quot;ngForTrackBy&quot;,t.trackById)}}let $J=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.editZoneService=t,this.mapService=e,this.zonesService=i,this.updateZones=new mh,this.availableZones=[],this.showCreateZoneForm=!1,this.zonesEditable=!0,this.usedZonesIds$=new Qp([]),this.groupId$=new Qp(null)}ngOnInit(){this.usedZonesIds$.next(this.criterion.zones.map(t=&gt;t.id)),this.subscriptions.push(QT([this.zonesService.zones$,this.usedZonesIds$,this.groupId$]).subscribe(([t,e,i])=&gt;{this.availableZones=t.filter(t=&gt;t.group_id===i&amp;&amp;!e.includes(t.id))}),this.usedZonesIds$.pipe(Sf(1)).subscribe(()=&gt;{this.updateZones.next(null)}),this.editZoneService.editedZone$.pipe(Mf(),Ej(0)).subscribe(t=&gt;{this.zonesEditable=!t}))}ngOnChanges(t){t.groupId&amp;&amp;(this.groupId$.next(t.groupId.currentValue),t.groupId.firstChange||(this.criterion.zones=[],this.usedZonesIds$.next([])))}displayCreateZoneForm(){this.showCreateZoneForm=!0}hideCreateZoneForm(){this.showCreateZoneForm=!1}addCreatedZone(t){this.criterion.zones.push(t),this.hideCreateZoneForm(),this.onChange(this.criterion)}viewZone(t){this.mapService.fitOnHexagons(t.h3indexes)}deleteZone(t){this.criterion.zones.splice(this.criterion.zones.findIndex(e=&gt;e===t),1),this.usedZonesIds$.next(this.usedZonesIds$.value.filter(e=&gt;e!==t.id)),this.onChange(this.criterion)}addZone(t){this.criterion.zones.push(t),this.usedZonesIds$.next(this.usedZonesIds$.value.concat(t.id)),this.onChange(this.criterion)}trackById(t,e){return e.id}writeValue(t){this.criterion=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){}}return t.\u0275fac=function(e){return new(e||t)(Da(bQ),Da(kj),Da(EH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-zone-filter&quot;]],inputs:{criterion:[&quot;ngModel&quot;,&quot;criterion&quot;],editable:&quot;editable&quot;,groupId:&quot;groupId&quot;},outputs:{updateZones:&quot;updateZones&quot;},features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o,he],decls:5,vars:4,consts:[[1,&quot;alert-rule-criterion&quot;],[&quot;class&quot;,&quot;alert-rule-criterion__description&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;alert-rule-criterion__description&quot;],[&quot;class&quot;,&quot;alert-rule-criterion__description error-message&quot;,4,&quot;ngIf&quot;],[3,&quot;zone&quot;,&quot;editable&quot;,&quot;disableEdition&quot;,&quot;delete&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[1,&quot;criterion-content&quot;],[&quot;class&quot;,&quot;u-flex&quot;,3,&quot;groupId&quot;,&quot;save&quot;,&quot;cancel&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[1,&quot;add-zones-menu&quot;],[&quot;addZonesMenu&quot;,&quot;matMenu&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;alert-rule-criterion__description&quot;,&quot;error-message&quot;],[3,&quot;zone&quot;,&quot;editable&quot;,&quot;disableEdition&quot;,&quot;delete&quot;],[1,&quot;u-flex&quot;,3,&quot;groupId&quot;,&quot;save&quot;,&quot;cancel&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ajouter une zone existante&quot;,3,&quot;matMenuTriggerFor&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Cr\xe9er une nouvelle zone&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;],[&quot;dense&quot;,&quot;&quot;],[4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Visualiser la zone&quot;,1,&quot;u-flex&quot;,3,&quot;click&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),ra(1,OJ,2,0,&quot;div&quot;,1),ra(2,zJ,8,6,&quot;ng-template&quot;,2),ra(3,VJ,2,2,&quot;ng-template&quot;,null,3,Rh),Fa()),2&amp;t){const t=oa(4);ea(&quot;data-test&quot;,&quot;criterion-zone&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.editable)(&quot;ngIfElse&quot;,t)}},directives:[Nd,Bd,aJ,vJ,fJ,Ry,dJ,nJ,kJ,IJ],styles:[&quot;.alert-rule-criterion[_ngcontent-%COMP%]{padding:.5em}.alert-rule-criterion__description[_ngcontent-%COMP%]{margin-bottom:.5em;font-size:14px}.add-zones-menu[_ngcontent-%COMP%]{max-height:256px}&quot;]}),t})();const UJ=[&quot;thumbContainer&quot;],jJ=[&quot;toggleBar&quot;],HJ=[&quot;input&quot;],GJ=function(t){return{enterDuration:t}},qJ=[&quot;*&quot;],WJ=new Ji(&quot;mat-slide-toggle-default-options&quot;,{providedIn:&quot;root&quot;,factory:()=&gt;({disableToggleValue:!1})});let YJ=0;const ZJ={provide:$y,useExisting:at(()=&gt;QJ),multi:!0};class KJ{constructor(t,e){this.source=t,this.checked=e}}const XJ=Nb(Bb(zb(Lb(class{constructor(t){this._elementRef=t}}))));let QJ=(()=&gt;{class t extends XJ{constructor(t,e,i,n,s,r){super(t),this._focusMonitor=e,this._changeDetectorRef=i,this.defaults=s,this._onChange=t=&gt;{},this._onTouched=()=&gt;{},this._uniqueId=&quot;mat-slide-toggle-&quot;+ ++YJ,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition=&quot;after&quot;,this.ariaLabel=null,this.ariaLabelledby=null,this.change=new mh,this.toggleChange=new mh,this.tabIndex=parseInt(n)||0,this.color=this.defaultColor=s.color||&quot;accent&quot;,this._noopAnimations=&quot;NoopAnimations&quot;===r}get required(){return this._required}set required(t){this._required=Rf(t)}get checked(){return this._checked}set checked(t){this._checked=Rf(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=&gt;{&quot;keyboard&quot;===t||&quot;program&quot;===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=&gt;this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new KJ(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Nm),Da(Ec),Yi(&quot;tabindex&quot;),Da(WJ),Da(yb,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-slide-toggle&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(UJ,5),Mh(jJ,5),Mh(HJ,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._thumbEl=t.first),Eh(t=Ih())&amp;&amp;(e._thumbBarEl=t.first),Eh(t=Ih())&amp;&amp;(e._inputElement=t.first)}},hostAttrs:[1,&quot;mat-slide-toggle&quot;],hostVars:12,hostBindings:function(t,e){2&amp;t&amp;&amp;(Tl(&quot;id&quot;,e.id),ea(&quot;tabindex&quot;,e.disabled?null:-1)(&quot;aria-label&quot;,null)(&quot;aria-labelledby&quot;,null),cl(&quot;mat-checked&quot;,e.checked)(&quot;mat-disabled&quot;,e.disabled)(&quot;mat-slide-toggle-label-before&quot;,&quot;before&quot;==e.labelPosition)(&quot;_mat-animation-noopable&quot;,e._noopAnimations))},inputs:{disabled:&quot;disabled&quot;,disableRipple:&quot;disableRipple&quot;,color:&quot;color&quot;,tabIndex:&quot;tabIndex&quot;,name:&quot;name&quot;,id:&quot;id&quot;,labelPosition:&quot;labelPosition&quot;,ariaLabel:[&quot;aria-label&quot;,&quot;ariaLabel&quot;],ariaLabelledby:[&quot;aria-labelledby&quot;,&quot;ariaLabelledby&quot;],required:&quot;required&quot;,checked:&quot;checked&quot;,ariaDescribedby:[&quot;aria-describedby&quot;,&quot;ariaDescribedby&quot;]},outputs:{change:&quot;change&quot;,toggleChange:&quot;toggleChange&quot;},exportAs:[&quot;matSlideToggle&quot;],features:[Wl([ZJ]),$o],ngContentSelectors:qJ,decls:16,vars:20,consts:[[1,&quot;mat-slide-toggle-label&quot;],[&quot;label&quot;,&quot;&quot;],[1,&quot;mat-slide-toggle-bar&quot;],[&quot;toggleBar&quot;,&quot;&quot;],[&quot;type&quot;,&quot;checkbox&quot;,&quot;role&quot;,&quot;switch&quot;,1,&quot;mat-slide-toggle-input&quot;,&quot;cdk-visually-hidden&quot;,3,&quot;id&quot;,&quot;required&quot;,&quot;tabIndex&quot;,&quot;checked&quot;,&quot;disabled&quot;,&quot;change&quot;,&quot;click&quot;],[&quot;input&quot;,&quot;&quot;],[1,&quot;mat-slide-toggle-thumb-container&quot;],[&quot;thumbContainer&quot;,&quot;&quot;],[1,&quot;mat-slide-toggle-thumb&quot;],[&quot;mat-ripple&quot;,&quot;&quot;,1,&quot;mat-slide-toggle-ripple&quot;,&quot;mat-focus-indicator&quot;,3,&quot;matRippleTrigger&quot;,&quot;matRippleDisabled&quot;,&quot;matRippleCentered&quot;,&quot;matRippleRadius&quot;,&quot;matRippleAnimation&quot;],[1,&quot;mat-ripple-element&quot;,&quot;mat-slide-toggle-persistent-ripple&quot;],[1,&quot;mat-slide-toggle-content&quot;,3,&quot;cdkObserveContent&quot;],[&quot;labelContent&quot;,&quot;&quot;],[2,&quot;display&quot;,&quot;none&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;label&quot;,0,1),Ra(2,&quot;div&quot;,2,3),Ra(4,&quot;input&quot;,4,5),Ha(&quot;change&quot;,function(t){return e._onChangeEvent(t)})(&quot;click&quot;,function(t){return e._onInputClick(t)}),Fa(),Ra(6,&quot;div&quot;,6,7),La(8,&quot;div&quot;,8),Ra(9,&quot;div&quot;,9),La(10,&quot;div&quot;,10),Fa(),Fa(),Fa(),Ra(11,&quot;span&quot;,11,12),Ha(&quot;cdkObserveContent&quot;,function(){return e._onLabelTextChange()}),Ra(13,&quot;span&quot;,13),xl(14,&quot;\xa0&quot;),Fa(),Qa(15),Fa(),Fa()),2&amp;t){const t=oa(1),i=oa(12);ea(&quot;for&quot;,e.inputId),Sr(2),cl(&quot;mat-slide-toggle-bar-no-side-margin&quot;,!i.textContent||!i.textContent.trim()),Sr(2),Oa(&quot;id&quot;,e.inputId)(&quot;required&quot;,e.required)(&quot;tabIndex&quot;,e.tabIndex)(&quot;checked&quot;,e.checked)(&quot;disabled&quot;,e.disabled),ea(&quot;name&quot;,e.name)(&quot;aria-checked&quot;,e.checked.toString())(&quot;aria-label&quot;,e.ariaLabel)(&quot;aria-labelledby&quot;,e.ariaLabelledby)(&quot;aria-describedby&quot;,e.ariaDescribedby),Sr(5),Oa(&quot;matRippleTrigger&quot;,t)(&quot;matRippleDisabled&quot;,e.disableRipple||e.disabled)(&quot;matRippleCentered&quot;,!0)(&quot;matRippleRadius&quot;,20)(&quot;matRippleAnimation&quot;,eh(18,GJ,e._noopAnimations?0:150))}},directives:[dy,om],styles:[&quot;.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n&quot;],encapsulation:2,changeDetection:0}),t})(),JJ=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({}),t})(),t0=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[JJ,py,Fb,am],JJ,Fb]}),t})();const e0={speed:{key:&quot;speed&quot;,title:&quot;Vitesse&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte si la vitesse du navire est comprise dans un intervalle.&quot;},erraticRoute:{key:&quot;erraticRoute&quot;,title:&quot;Route erratique&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte quand un navire change plusieurs fois de direction dans un intervalle de temps court.&quot;},transhipment:{key:&quot;transhipment&quot;,title:&quot;Transbordement&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte quand deux navires ont des positions tr\xe8s proches et une vitesse r\xe9duite pendant un intervalle de temps prolong\xe9.&quot;},aisInterruption:{key:&quot;aisInterruption&quot;,title:&quot;Coupure AIS&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte si un navire n&#39;\xe9met plus de donn\xe9es AIS pendant un intervalle de temps.&quot;},passageInZone:{key:&quot;passageInZone&quot;,title:&quot;Passage dans des zones&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte si un navire passe dans certaines zones. Si plusieurs zones sont choisies, un navire doit \xeatre pass\xe9 dans toutes les zones pour d\xe9clencher une alerte.&quot;},spoofing:{key:&quot;spoofing&quot;,title:&quot;Spoofing AIS&quot;,description:&quot;Ce crit\xe8re d\xe9clenche une alerte si un navire change de nom ou de MMSI en conservant le m\xeame IMO.&quot;},identifier:{key:&quot;identifier&quot;,title:&quot;Identifiant&quot;,description:&quot;Ce filtre restreint les alertes aux navires dont les identifiants (nom, MMSI, IMO) correspondent \xe0 ceux recherch\xe9s.&quot;},fleet:{key:&quot;fleet&quot;,title:&quot;Flotte&quot;,description:&quot;Ce filtre restreint les alertes aux navires faisant partie des flottes s\xe9lectionn\xe9es.&quot;},flag:{key:&quot;flag&quot;,title:&quot;Pavillon&quot;,description:&quot;Ce filtre restreint les alertes aux navires dont le pavillon correspond \xe0 ceux recherch\xe9s.&quot;},type:{key:&quot;type&quot;,title:&quot;Type de navire&quot;,description:&quot;Ce filtre restreint les alertes aux navires dont le type du navire correspond \xe0 ceux recherch\xe9s.&quot;},time:{key:&quot;time&quot;,title:&quot;P\xe9riode d&#39;analyse&quot;,soon:!0,description:&quot;Ce filtre restreint l&#39;analyse \xe0 une p\xe9riode de temps.&quot;},zone:{key:&quot;zone&quot;,title:&quot;Zone&quot;,description:&quot;Ce filtre restreint les alertes \xe0 certaines zones.&quot;}};let i0=(()=&gt;{class t extends Eq{constructor(){super(...arguments),this.editable=!1,this.criteriaLabels=e0}get enable(){var t;return null===(t=this.criterion)||void 0===t?void 0:t.enable}set enable(t){this.criterion.enable=t,this.onChange(this.criterion)}writeValue(t){this.criterion=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,inputs:{criterion:[&quot;ngModel&quot;,&quot;criterion&quot;],editable:&quot;editable&quot;},features:[$o]}),t})(),n0=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-chip-coming-soon&quot;]],decls:2,vars:0,consts:[[&quot;title&quot;,&quot;Cette fonctionnalit\xe9 n&#39;est pas encore impl\xe9ment\xe9e mais le sera tr\xe8s bient\xf4t !&quot;,1,&quot;chip&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),xl(1,&quot;Bient\xf4t&quot;),Fa())},styles:[&quot;.chip[_ngcontent-%COMP%]{display:inline-block;padding:3px 6px;border-radius:8px;font-size:.7em;line-height:1.5em;background-color:#55575f;color:#fff}&quot;],changeDetection:0}),t})();function s0(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-slide-toggle&quot;,6),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().enableChange.next(e)}),Fa()}if(2&amp;t){const t=Za();Oa(&quot;name&quot;,t.type.key)(&quot;title&quot;,t.enable?&quot;D\xe9sactiver&quot;:&quot;Activer&quot;)(&quot;ngModel&quot;,t.enable)(&quot;disabled&quot;,!t.editable)}}function r0(t,e){1&amp;t&amp;&amp;La(0,&quot;app-chip-coming-soon&quot;)}function o0(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,7),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Cl(&quot; &quot;,t.type.description,&quot; &quot;)}}function a0(t,e){1&amp;t&amp;&amp;Qa(0,0,[&quot;*ngIf&quot;,&quot;enable || enable === undefined&quot;])}const l0=[&quot;*&quot;];let c0=(()=&gt;{class t extends Eq{constructor(){super(...arguments),this.enableChange=new mh}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alert-rule-criterion&quot;]],inputs:{type:&quot;type&quot;,enable:&quot;enable&quot;,editable:&quot;editable&quot;},outputs:{enableChange:&quot;enableChange&quot;},features:[$o],ngContentSelectors:l0,decls:8,vars:8,consts:[[1,&quot;alert-rule-criterion&quot;],[1,&quot;alert-rule-criterion__title&quot;],[&quot;class&quot;,&quot;alert-rule-criterion__toggle&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;name&quot;,&quot;title&quot;,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;,4,&quot;ngIf&quot;],[1,&quot;u-flex&quot;],[4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;alert-rule-criterion__description&quot;,4,&quot;ngIf&quot;],[&quot;color&quot;,&quot;primary&quot;,1,&quot;alert-rule-criterion__toggle&quot;,3,&quot;name&quot;,&quot;title&quot;,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[1,&quot;alert-rule-criterion__description&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),xl(2),ra(3,s0,1,4,&quot;mat-slide-toggle&quot;,2),La(4,&quot;div&quot;,3),ra(5,r0,1,0,&quot;app-chip-coming-soon&quot;,4),Fa(),ra(6,o0,2,1,&quot;div&quot;,5),ra(7,a0,1,0,&quot;ng-content&quot;,4),Fa()),2&amp;t&amp;&amp;(cl(&quot;alert-rule-criterion--active&quot;,e.enable),ea(&quot;data-test&quot;,&quot;criterion-&quot;+e.type.key),Sr(2),Cl(&quot; &quot;,e.type.title,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,void 0!==e.enable),Sr(2),Oa(&quot;ngIf&quot;,e.type.soon),Sr(1),Oa(&quot;ngIf&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.enable||void 0===e.enable))},directives:[Nd,QJ,wx,iw,n0],styles:[&quot;.alert-rule-criterion[_ngcontent-%COMP%]{padding:.5em}.alert-rule-criterion--active[_ngcontent-%COMP%]{background-color:#e6e9f7}.alert-rule-criterion__title[_ngcontent-%COMP%]{display:flex;margin:0;padding:.5em;color:#1515a6;font-size:18px}.alert-rule-criterion__toggle[_ngcontent-%COMP%]{margin-left:.5em}.alert-rule-criterion__description[_ngcontent-%COMP%]{margin-bottom:.5em;font-size:14px}&quot;],changeDetection:0}),t})(),h0=(()=&gt;{class t extends i0{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ais-interruption-criterion&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:1,vars:3,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),Fa()),2&amp;t&amp;&amp;Oa(&quot;type&quot;,e.criteriaLabels.aisInterruption)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable)},directives:[c0],encapsulation:2,changeDetection:0}),t})(),u0=(()=&gt;{class t extends i0{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-transhipment-criterion&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:1,vars:3,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),Fa()),2&amp;t&amp;&amp;Oa(&quot;type&quot;,e.criteriaLabels.transhipment)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable)},directives:[c0],encapsulation:2,changeDetection:0}),t})(),d0=(()=&gt;{class t extends i0{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-erratic-route-criterion&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:1,vars:3,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),Fa()),2&amp;t&amp;&amp;Oa(&quot;type&quot;,e.criteriaLabels.erraticRoute)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable)},directives:[c0],encapsulation:2,changeDetection:0}),t})();function p0(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,4),Ra(1,&quot;ngx-slider&quot;,5),Ha(&quot;valueChange&quot;,function(e){return Le(t),Za(2).criterion.min=e})(&quot;highValueChange&quot;,function(e){return Le(t),Za(2).criterion.max=e}),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;value&quot;,t.criterion.min)(&quot;highValue&quot;,t.criterion.max)(&quot;options&quot;,t.speedSliderOptions)}}function f0(t,e){if(1&amp;t&amp;&amp;xl(0),2&amp;t){const t=Za(2);Sl(&quot; Vitesse : entre &quot;,t.criterion.min,&quot; et &quot;,t.criterion.max,&quot; &quot;)}}function m0(t,e){if(1&amp;t&amp;&amp;(ra(0,p0,2,3,&quot;ng-template&quot;,2),ra(1,f0,1,2,&quot;ng-template&quot;,null,3,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,Za().editable)(&quot;ngIfElse&quot;,t)}}let g0=(()=&gt;{class t extends i0{constructor(){super(...arguments),this.speedSliderOptions={floor:0,ceil:100,animate:!1}}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-speed-criterion&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;criterion-content&quot;,&quot;app-slider&quot;],[&quot;name&quot;,&quot;speed&quot;,3,&quot;value&quot;,&quot;highValue&quot;,&quot;options&quot;,&quot;valueChange&quot;,&quot;highValueChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,m0,3,2,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.speed)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,ST],encapsulation:2,changeDetection:0}),t})();function A0(t,e,i){for(let n in e)if(e.hasOwnProperty(n)){const s=e[n];s?t.setProperty(n,s,(null==i?void 0:i.has(n))?&quot;important&quot;:&quot;&quot;):t.removeProperty(n)}return t}function v0(t,e){const i=e?&quot;&quot;:&quot;none&quot;;A0(t.style,{&quot;touch-action&quot;:e?&quot;&quot;:&quot;none&quot;,&quot;-webkit-user-drag&quot;:e?&quot;&quot;:&quot;none&quot;,&quot;-webkit-tap-highlight-color&quot;:e?&quot;&quot;:&quot;transparent&quot;,&quot;user-select&quot;:i,&quot;-ms-user-select&quot;:i,&quot;-webkit-user-select&quot;:i,&quot;-moz-user-select&quot;:i})}function _0(t,e,i){A0(t.style,{position:e?&quot;&quot;:&quot;fixed&quot;,top:e?&quot;&quot;:&quot;0&quot;,opacity:e?&quot;&quot;:&quot;0&quot;,left:e?&quot;&quot;:&quot;-999em&quot;},i)}function b0(t,e){return e&amp;&amp;&quot;none&quot;!=e?t+&quot; &quot;+e:t}function y0(t){const e=t.toLowerCase().indexOf(&quot;ms&quot;)&gt;-1?1:1e3;return parseFloat(t)*e}function x0(t,e){return t.getPropertyValue(e).split(&quot;,&quot;).map(t=&gt;t.trim())}function w0(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function C0(t,e,i){const{top:n,bottom:s,left:r,right:o}=t;return i&gt;=n&amp;&amp;i&lt;=s&amp;&amp;e&gt;=r&amp;&amp;e&lt;=o}function S0(t,e,i){t.top+=e,t.bottom=t.top+t.height,t.left+=i,t.right=t.left+t.width}function k0(t,e,i,n){const{top:s,right:r,bottom:o,left:a,width:l,height:c}=t,h=l*e,u=c*e;return n&gt;s-u&amp;&amp;n&lt;o+u&amp;&amp;i&gt;a-h&amp;&amp;i&lt;r+h}class E0{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(t=&gt;{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:w0(t)})})}handleScroll(t){const e=im(t),i=this.positions.get(e);if(!i)return null;const n=e===this._document?e.documentElement:e,s=i.scrollPosition;let r,o;if(e===this._document){const t=this._viewportRuler.getViewportScrollPosition();r=t.top,o=t.left}else r=e.scrollTop,o=e.scrollLeft;const a=s.top-r,l=s.left-o;return this.positions.forEach((t,i)=&gt;{t.clientRect&amp;&amp;e!==i&amp;&amp;n.contains(i)&amp;&amp;S0(t.clientRect,a,l)}),s.top=r,s.left=o,{top:a,left:l}}}function M0(t){const e=t.cloneNode(!0),i=e.querySelectorAll(&quot;[id]&quot;),n=t.nodeName.toLowerCase();e.removeAttribute(&quot;id&quot;);for(let s=0;s&lt;i.length;s++)i[s].removeAttribute(&quot;id&quot;);return&quot;canvas&quot;===n?O0(t,e):(&quot;input&quot;===n||&quot;select&quot;===n||&quot;textarea&quot;===n)&amp;&amp;D0(t,e),T0(&quot;canvas&quot;,t,e,O0),T0(&quot;input, textarea, select&quot;,t,e,D0),e}function T0(t,e,i,n){const s=e.querySelectorAll(t);if(s.length){const e=i.querySelectorAll(t);for(let t=0;t&lt;s.length;t++)n(s[t],e[t])}}let I0=0;function D0(t,e){&quot;file&quot;!==e.type&amp;&amp;(e.value=t.value),&quot;radio&quot;===e.type&amp;&amp;e.name&amp;&amp;(e.name=`mat-clone-${e.name}-${I0++}`)}function O0(t,e){const i=e.getContext(&quot;2d&quot;);if(i)try{i.drawImage(t,0,0)}catch(n){}}const P0=Xf({passive:!0}),R0=Xf({passive:!1}),F0=new Set([&quot;position&quot;]);class L0{constructor(t,e,i,n,s,r){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new S,this._pointerMoveSubscription=d.EMPTY,this._pointerUpSubscription=d.EMPTY,this._scrollSubscription=d.EMPTY,this._resizeSubscription=d.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction=&quot;ltr&quot;,this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S,this.started=new S,this.released=new S,this.ended=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.moved=this._moveEvents,this._pointerDown=t=&gt;{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=&gt;{const i=im(t);return!!i&amp;&amp;(i===e||e.contains(i))});e&amp;&amp;!this._disabledHandles.has(e)&amp;&amp;!this.disabled&amp;&amp;this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=&gt;{const e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)&gt;=this._config.dragStartThreshold){const e=Date.now()&gt;=this._dragStartTime+this._getDragStartDelay(t),i=this._dropContainer;if(!e)return void this._endDragSequence(t);(!i||!i.isDragging()&amp;&amp;!i.isReceiving())&amp;&amp;(t.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=&gt;this._startDragSequence(t)))}return}this._boundaryElement&amp;&amp;(!this._previewRect||!this._previewRect.width&amp;&amp;!this._previewRect.height)&amp;&amp;(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),t.preventDefault();const i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{const t=this._activeTransform;t.x=i.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=i.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),&quot;undefined&quot;!=typeof SVGElement&amp;&amp;this._rootElement instanceof SVGElement&amp;&amp;this._rootElement.setAttribute(&quot;transform&quot;,`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&amp;&amp;this._ngZone.run(()=&gt;{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})},this._pointerUp=t=&gt;{this._endDragSequence(t)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new E0(i,s),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Rf(t);e!==this._disabled&amp;&amp;(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=&gt;v0(t,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(t=&gt;Nf(t)),this._handles.forEach(t=&gt;v0(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=&gt;{this._handles.indexOf(t)&gt;-1&amp;&amp;e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Nf(t);return e!==this._rootElement&amp;&amp;(this._rootElement&amp;&amp;this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=&gt;{e.addEventListener(&quot;mousedown&quot;,this._pointerDown,R0),e.addEventListener(&quot;touchstart&quot;,this._pointerDown,P0)}),this._initialTransform=void 0,this._rootElement=e),&quot;undefined&quot;!=typeof SVGElement&amp;&amp;this._rootElement instanceof SVGElement&amp;&amp;(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Nf(t):null,this._resizeSubscription.unsubscribe(),t&amp;&amp;(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=&gt;this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&amp;&amp;N0(this._rootElement),N0(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&amp;&amp;this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||&quot;&quot;,this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&amp;&amp;this._handles.indexOf(t)&gt;-1&amp;&amp;(this._disabledHandles.add(t),v0(t,!0))}enableHandle(t){this._disabledHandles.has(t)&amp;&amp;(this._disabledHandles.delete(t),v0(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&amp;&amp;this._dropContainer&amp;&amp;this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&amp;&amp;N0(this._preview),this._previewRef&amp;&amp;this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&amp;&amp;N0(this._placeholder),this._placeholderRef&amp;&amp;this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&amp;&amp;(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&amp;&amp;(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=&gt;{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=&gt;{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){V0(t)&amp;&amp;(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,i=t.parentNode,n=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(&quot;&quot;),r=this._getShadowRoot();i.insertBefore(s,t),this._initialTransform=t.style.transform||&quot;&quot;,this._preview=this._createPreviewElement(),_0(t,!1,F0),this._document.body.appendChild(i.replaceChild(n,t)),this._getPreviewInsertionPoint(i,r).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&amp;&amp;e.stopPropagation();const i=this.isDragging(),n=V0(e),s=!n&amp;&amp;0!==e.button,r=this._rootElement,o=im(e),a=!n&amp;&amp;this._lastTouchEventTime&amp;&amp;this._lastTouchEventTime+800&gt;Date.now(),l=n?Mm(e):Em(e);if(o&amp;&amp;o.draggable&amp;&amp;&quot;mousedown&quot;===e.type&amp;&amp;e.preventDefault(),i||s||a||l)return;this._handles.length&amp;&amp;(this._rootElementTapHighlight=r.style.webkitTapHighlightColor||&quot;&quot;,r.style.webkitTapHighlightColor=&quot;transparent&quot;),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=&gt;this._updateOnScroll(t)),this._boundaryElement&amp;&amp;(this._boundaryRect=w0(this._boundaryElement));const c=this._previewTemplate;this._pickupPositionInElement=c&amp;&amp;c.template&amp;&amp;!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){_0(this._rootElement,!0,F0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=&gt;{const e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),s=this._getDragDistance(n),r=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s,dropPoint:n}),e.drop(this,i,this._initialIndex,this._initialContainer,r,s,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&amp;&amp;this._dropContainer!==this._initialContainer&amp;&amp;this._initialContainer._isOverContainer(t,e)&amp;&amp;(s=this._initialContainer),s&amp;&amp;s!==this._dropContainer&amp;&amp;this._ngZone.run(()=&gt;{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&amp;&amp;s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&amp;&amp;(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let n;if(i&amp;&amp;t){const e=t.matchSize?this._rootElement.getBoundingClientRect():null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),n=$0(s,this._document),this._previewRef=s,t.matchSize?U0(n,e):n.style.transform=B0(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement;n=M0(t),U0(n,t.getBoundingClientRect()),this._initialTransform&amp;&amp;(n.style.transform=this._initialTransform)}return A0(n.style,{&quot;pointer-events&quot;:&quot;none&quot;,margin:&quot;0&quot;,position:&quot;fixed&quot;,top:&quot;0&quot;,left:&quot;0&quot;,&quot;z-index&quot;:`${this._config.zIndex||1e3}`},F0),v0(n,!1),n.classList.add(&quot;cdk-drag-preview&quot;),n.setAttribute(&quot;dir&quot;,this._direction),e&amp;&amp;(Array.isArray(e)?e.forEach(t=&gt;n.classList.add(t)):n.classList.add(e)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add(&quot;cdk-drag-animating&quot;),this._applyPreviewTransform(t.left,t.top);const e=function(t){const e=getComputedStyle(t),i=x0(e,&quot;transition-property&quot;),n=i.find(t=&gt;&quot;transform&quot;===t||&quot;all&quot;===t);if(!n)return 0;const s=i.indexOf(n),r=x0(e,&quot;transition-duration&quot;),o=x0(e,&quot;transition-delay&quot;);return y0(r[s])+y0(o[s])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=&gt;new Promise(t=&gt;{const i=e=&gt;{var s;(!e||im(e)===this._preview&amp;&amp;&quot;transform&quot;===e.propertyName)&amp;&amp;(null===(s=this._preview)||void 0===s||s.removeEventListener(&quot;transitionend&quot;,i),t(),clearTimeout(n))},n=setTimeout(i,1.5*e);this._preview.addEventListener(&quot;transitionend&quot;,i)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=$0(this._placeholderRef,this._document)):i=M0(this._rootElement),i.classList.add(&quot;cdk-drag-placeholder&quot;),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),n=t===this._rootElement?null:t,s=n?n.getBoundingClientRect():i,r=V0(e)?e.targetTouches[0]:e,o=this._getViewportScrollPosition();return{x:s.left-i.left+(r.pageX-s.left-o.left),y:s.top-i.top+(r.pageY-s.top-o.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=V0(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,n=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const t=this._ownerSVGElement.getScreenCTM();if(t){const e=this._ownerSVGElement.createSVGPoint();return e.x=n,e.y=s,e.matrixTransform(t.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:n}=this.constrainPosition?this.constrainPosition(t,this):t;if(&quot;x&quot;===this.lockAxis||&quot;x&quot;===e?n=this._pickupPositionOnPage.y:(&quot;y&quot;===this.lockAxis||&quot;y&quot;===e)&amp;&amp;(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,s=this._boundaryRect,r=this._previewRect,o=s.top+e,a=s.bottom-(r.height-e);i=z0(i,s.left+t,s.right-(r.width-t)),n=z0(n,o,a)}return{x:i,y:n}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(e-s.x),o=Math.abs(i-s.y);return r&gt;this._config.pointerDirectionChangeThreshold&amp;&amp;(n.x=e&gt;s.x?1:-1,s.x=e),o&gt;this._config.pointerDirectionChangeThreshold&amp;&amp;(n.y=i&gt;s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length&gt;0||!this.isDragging();t!==this._nativeInteractionsEnabled&amp;&amp;(this._nativeInteractionsEnabled=t,v0(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener(&quot;mousedown&quot;,this._pointerDown,R0),t.removeEventListener(&quot;touchstart&quot;,this._pointerDown,P0)}_applyRootElementTransform(t,e){const i=B0(t,e);null==this._initialTransform&amp;&amp;(this._initialTransform=this._rootElement.style.transform&amp;&amp;&quot;none&quot;!=this._rootElement.style.transform?this._rootElement.style.transform:&quot;&quot;),this._rootElement.style.transform=b0(i,this._initialTransform)}_applyPreviewTransform(t,e){var i;const n=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,s=B0(t,e);this._preview.style.transform=b0(s,n)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&amp;&amp;0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),n=this._rootElement.getBoundingClientRect();if(0===i.width&amp;&amp;0===i.height||0===n.width&amp;&amp;0===n.height)return;const s=i.left-n.left,r=n.right-i.right,o=i.top-n.top,a=n.bottom-i.bottom;i.width&gt;n.width?(s&gt;0&amp;&amp;(t+=s),r&gt;0&amp;&amp;(t-=r)):t=0,i.height&gt;n.height?(o&gt;0&amp;&amp;(e+=o),a&gt;0&amp;&amp;(e-=a)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&amp;&amp;this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return&quot;number&quot;==typeof e?e:V0(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=im(t);this._boundaryRect&amp;&amp;(i===this._document||i!==this._boundaryElement&amp;&amp;i.contains(this._boundaryElement))&amp;&amp;S0(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&amp;&amp;(this._cachedShadowRoot=tm(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||&quot;global&quot;;if(&quot;parent&quot;===i)return t;if(&quot;global&quot;===i){const t=this._document;return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}return Nf(i)}}function B0(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function z0(t,e,i){return Math.max(e,Math.min(i,t))}function N0(t){t&amp;&amp;t.parentNode&amp;&amp;t.parentNode.removeChild(t)}function V0(t){return&quot;t&quot;===t.type[0]}function $0(t,e){const i=t.rootNodes;if(1===i.length&amp;&amp;i[0].nodeType===e.ELEMENT_NODE)return i[0];const n=e.createElement(&quot;div&quot;);return i.forEach(t=&gt;n.appendChild(t)),n}function U0(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=B0(e.left,e.top)}function j0(t,e,i){const n=H0(e,t.length-1),s=H0(i,t.length-1);if(n===s)return;const r=t[n],o=s&lt;n?-1:1;for(let a=n;a!==s;a+=o)t[a]=t[a+o];t[s]=r}function H0(t,e){return Math.max(0,Math.min(e,t))}class G0{constructor(t,e,i,n,s){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=&gt;!0,this.sortPredicate=()=&gt;!0,this.beforeStarted=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.sorted=new S,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation=&quot;vertical&quot;,this._activeSiblings=new Set,this._direction=&quot;ltr&quot;,this._viewportScrollSubscription=d.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new S,this._cachedShadowRoot=null,this._startScrollInterval=()=&gt;{this._stopScrolling(),Mq(0,Ym).pipe(Df(this._stopScrollTimers)).subscribe(()=&gt;{const t=this._scrollNode,e=this.autoScrollStep;1===this._verticalScrollDirection?W0(t,-e):2===this._verticalScrollDirection&amp;&amp;W0(t,e),1===this._horizontalScrollDirection?Y0(t,-e):2===this._horizontalScrollDirection&amp;&amp;Y0(t,e)})},this.element=Nf(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new E0(i,s)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,n){let s;this._draggingStarted(),null==n?(s=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===s&amp;&amp;(s=this._getItemIndexFromPointerPosition(t,e,i))):s=n;const r=this._activeDraggables,o=r.indexOf(t),a=t.getPlaceholderElement();let l=r[s];if(l===t&amp;&amp;(l=r[s+1]),o&gt;-1&amp;&amp;r.splice(o,1),l&amp;&amp;!this._dragDropRegistry.isDragging(l)){const e=l.getRootElement();e.parentElement.insertBefore(a,e),r.splice(s,0,t)}else if(this._shouldEnterAsFirstChild(e,i)){const e=r[0].getRootElement();e.parentNode.insertBefore(a,e),r.unshift(t)}else Nf(this.element).appendChild(a),r.push(t);a.style.transform=&quot;&quot;,this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,s,r,o){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:r,dropPoint:o})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(t=&gt;t._withDropContainer(this)),this.isDragging()&amp;&amp;(e.filter(t=&gt;t.isDragging()).every(e=&gt;-1===t.indexOf(e))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Nf(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?q0(&quot;horizontal&quot;===this._orientation&amp;&amp;&quot;rtl&quot;===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=&gt;e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size&gt;0}_sortItem(t,e,i,n){if(this.sortingDisabled||!this._clientRect||!k0(this._clientRect,.05,e,i))return;const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(t,e,i,n);if(-1===r&amp;&amp;s.length&gt;0)return;const o=&quot;horizontal&quot;===this._orientation,a=q0(s,e=&gt;e.drag===t),l=s[r],c=l.clientRect,h=a&gt;r?1:-1,u=this._getItemOffsetPx(s[a].clientRect,c,h),d=this._getSiblingOffsetPx(a,s,h),p=s.slice();j0(s,a,r),this.sorted.next({previousIndex:a,currentIndex:r,container:this,item:t}),s.forEach((e,i)=&gt;{if(p[i]===e)return;const n=e.drag===t,s=n?u:d,r=n?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=s,o?(r.style.transform=b0(`translate3d(${Math.round(e.offset)}px, 0, 0)`,e.initialTransform),S0(e.clientRect,0,s)):(r.style.transform=b0(`translate3d(0, ${Math.round(e.offset)}px, 0)`,e.initialTransform),S0(e.clientRect,s,0))}),this._previousSwap.overlaps=C0(c,e,i),this._previousSwap.drag=l.drag,this._previousSwap.delta=o?n.x:n.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=0,s=0;if(this._parentPositions.positions.forEach((r,o)=&gt;{o===this._document||!r.clientRect||i||k0(r.clientRect,.05,t,e)&amp;&amp;([n,s]=function(t,e,i,n){const s=Z0(e,n),r=K0(e,i);let o=0,a=0;if(s){const e=t.scrollTop;1===s?e&gt;0&amp;&amp;(o=1):t.scrollHeight-e&gt;t.clientHeight&amp;&amp;(o=2)}if(r){const e=t.scrollLeft;1===r?e&gt;0&amp;&amp;(a=1):t.scrollWidth-e&gt;t.clientWidth&amp;&amp;(a=2)}return[o,a]}(o,r.clientRect,t,e),(n||s)&amp;&amp;(i=o))}),!n&amp;&amp;!s){const{width:r,height:o}=this._viewportRuler.getViewportSize(),a={width:r,height:o,top:0,right:r,bottom:o,left:0};n=Z0(a,e),s=K0(a,t),i=window}i&amp;&amp;(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&amp;&amp;(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&amp;&amp;i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Nf(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||&quot;&quot;,t.scrollSnapType=t.msScrollSnapType=&quot;none&quot;,this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Nf(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t=&quot;horizontal&quot;===this._orientation;this._itemPositions=this._activeDraggables.map(t=&gt;{const e=t.getVisibleElement();return{drag:t,offset:0,initialTransform:e.style.transform||&quot;&quot;,clientRect:w0(e)}}).sort((e,i)=&gt;t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const t=Nf(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=&gt;{var e;const i=t.getRootElement();if(i){const n=null===(e=this._itemPositions.find(e=&gt;e.drag===t))||void 0===e?void 0:e.initialTransform;i.style.transform=n||&quot;&quot;}}),this._siblings.forEach(t=&gt;t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,i){const n=&quot;horizontal&quot;===this._orientation,s=e[t].clientRect,r=e[t+-1*i];let o=s[n?&quot;width&quot;:&quot;height&quot;]*i;if(r){const t=n?&quot;left&quot;:&quot;top&quot;,e=n?&quot;right&quot;:&quot;bottom&quot;;-1===i?o-=r.clientRect[t]-s[e]:o+=s[t]-r.clientRect[e]}return o}_getItemOffsetPx(t,e,i){const n=&quot;horizontal&quot;===this._orientation;let s=n?e.left-t.left:e.top-t.top;return-1===i&amp;&amp;(s+=n?e.width-t.width:e.height-t.height),s}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,n=&quot;horizontal&quot;===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const s=i[i.length-1].clientRect;return n?t&gt;=s.right:e&gt;=s.bottom}{const s=i[0].clientRect;return n?t&lt;=s.left:e&lt;=s.top}}_getItemIndexFromPointerPosition(t,e,i,n){const s=&quot;horizontal&quot;===this._orientation,r=q0(this._itemPositions,({drag:r,clientRect:o},a,l)=&gt;{if(r===t)return l.length&lt;2;if(n){const t=s?n.x:n.y;if(r===this._previousSwap.drag&amp;&amp;this._previousSwap.overlaps&amp;&amp;t===this._previousSwap.delta)return!1}return s?e&gt;=Math.floor(o.left)&amp;&amp;e&lt;Math.floor(o.right):i&gt;=Math.floor(o.top)&amp;&amp;i&lt;Math.floor(o.bottom)});return-1!==r&amp;&amp;this.sortPredicate(r,t,this)?r:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&amp;&amp;C0(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=&gt;n._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!C0(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const n=this._getShadowRoot().elementFromPoint(e,i);if(!n)return!1;const s=Nf(this.element);return n===s||s.contains(n)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&amp;&amp;e.every(t=&gt;this.enterPredicate(t,this)||this._draggables.indexOf(t)&gt;-1)&amp;&amp;(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=&gt;{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&amp;&amp;(this._itemPositions.forEach(({clientRect:t})=&gt;{S0(t,e.top,e.left)}),this._itemPositions.forEach(({drag:t})=&gt;{this._dragDropRegistry.isDragging(t)&amp;&amp;t._sortFromLastPointerPosition()}))}else this.isReceiving()&amp;&amp;this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=tm(Nf(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(t=&gt;t.isDragging());this._siblings.forEach(e=&gt;e._startReceiving(this,t))}}function q0(t,e){for(let i=0;i&lt;t.length;i++)if(e(t[i],i,t))return i;return-1}function W0(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function Y0(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function Z0(t,e){const{top:i,bottom:n,height:s}=t,r=.05*s;return e&gt;=i-r&amp;&amp;e&lt;=i+r?1:e&gt;=n-r&amp;&amp;e&lt;=n+r?2:0}function K0(t,e){const{left:i,right:n,width:s}=t,r=.05*s;return e&gt;=i-r&amp;&amp;e&lt;=i+r?1:e&gt;=n-r&amp;&amp;e&lt;=n+r?2:0}const X0=Xf({passive:!1,capture:!0});let Q0=(()=&gt;{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=t=&gt;t.isDragging(),this.pointerMove=new S,this.pointerUp=new S,this.scroll=new S,this._preventDefaultWhileDragging=t=&gt;{this._activeDragInstances.length&gt;0&amp;&amp;t.preventDefault()},this._persistentTouchmoveListener=t=&gt;{this._activeDragInstances.length&gt;0&amp;&amp;(this._activeDragInstances.some(this._draggingPredicate)&amp;&amp;t.preventDefault(),this.pointerMove.next(t))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&amp;&amp;this._ngZone.runOutsideAngular(()=&gt;{this._document.addEventListener(&quot;touchmove&quot;,this._persistentTouchmoveListener,X0)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&amp;&amp;this._document.removeEventListener(&quot;touchmove&quot;,this._persistentTouchmoveListener,X0)}startDragging(t,e){if(!(this._activeDragInstances.indexOf(t)&gt;-1)&amp;&amp;(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const t=e.type.startsWith(&quot;touch&quot;);this._globalListeners.set(t?&quot;touchend&quot;:&quot;mouseup&quot;,{handler:t=&gt;this.pointerUp.next(t),options:!0}).set(&quot;scroll&quot;,{handler:t=&gt;this.scroll.next(t),options:!0}).set(&quot;selectstart&quot;,{handler:this._preventDefaultWhileDragging,options:X0}),t||this._globalListeners.set(&quot;mousemove&quot;,{handler:t=&gt;this.pointerMove.next(t),options:X0}),this._ngZone.runOutsideAngular(()=&gt;{this._globalListeners.forEach((t,e)=&gt;{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){const e=this._activeDragInstances.indexOf(t);e&gt;-1&amp;&amp;(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&amp;&amp;this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)&gt;-1}scrolled(t){const e=[this.scroll];return t&amp;&amp;t!==this._document&amp;&amp;e.push(new b(e=&gt;this._ngZone.runOutsideAngular(()=&gt;{const i=t=&gt;{this._activeDragInstances.length&amp;&amp;e.next(t)};return t.addEventListener(&quot;scroll&quot;,i,!0),()=&gt;{t.removeEventListener(&quot;scroll&quot;,i,!0)}}))),W(...e)}ngOnDestroy(){this._dragInstances.forEach(t=&gt;this.removeDragItem(t)),this._dropInstances.forEach(t=&gt;this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=&gt;{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(Mn(iu),Mn(Fu))},t.\u0275prov=mt({factory:function(){return new t(Mn(iu),Mn(Fu))},token:t,providedIn:&quot;root&quot;}),t})();const J0={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let t1=(()=&gt;{class t{constructor(t,e,i,n){this._document=t,this._ngZone=e,this._viewportRuler=i,this._dragDropRegistry=n}createDrag(t,e=J0){return new L0(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new G0(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(Mn(Fu),Mn(iu),Mn(Hg),Mn(Q0))},t.\u0275prov=mt({factory:function(){return new t(Mn(Fu),Mn(iu),Mn(Hg),Mn(Q0))},token:t,providedIn:&quot;root&quot;}),t})();const e1=new Ji(&quot;CDK_DRAG_PARENT&quot;),i1=new Ji(&quot;CdkDropListGroup&quot;),n1=new Ji(&quot;CDK_DRAG_CONFIG&quot;);let s1=0;const r1=new Ji(&quot;CdkDropList&quot;);let o1=(()=&gt;{class t{constructor(e,i,n,s,r,o,a){this.element=e,this._changeDetectorRef=n,this._scrollDispatcher=s,this._dir=r,this._group=o,this._destroyed=new S,this.connectedTo=[],this.id=&quot;cdk-drop-list-&quot;+s1++,this.enterPredicate=()=&gt;!0,this.sortPredicate=()=&gt;!0,this.dropped=new mh,this.entered=new mh,this.exited=new mh,this.sorted=new mh,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,a&amp;&amp;this._assignDefaults(a),this._dropListRef.enterPredicate=(t,e)=&gt;this.enterPredicate(t.data,e.data),this._dropListRef.sortPredicate=(t,e,i)=&gt;this.sortPredicate(t,e.data,i.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),o&amp;&amp;o._items.add(this)}get disabled(){return this._disabled||!!this._group&amp;&amp;this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=Rf(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&amp;&amp;this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&amp;&amp;this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,e)=&gt;t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&amp;Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=t._dropLists.indexOf(this);e&gt;-1&amp;&amp;t._dropLists.splice(e,1),this._group&amp;&amp;this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&amp;&amp;this._dir.change.pipe(cg(this._dir.value),Df(this._destroyed)).subscribe(t=&gt;e.withDirection(t)),e.beforeStarted.subscribe(()=&gt;{const i=Bf(this.connectedTo).map(e=&gt;&quot;string&quot;==typeof e?t._dropLists.find(t=&gt;t.id===e):e);if(this._group&amp;&amp;this._group._items.forEach(t=&gt;{-1===i.indexOf(t)&amp;&amp;i.push(t)}),!this._scrollableParentsResolved){const t=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(t=&gt;t.getElementRef().nativeElement);this._dropListRef.withScrollableParents(t),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=Rf(this.sortingDisabled),e.autoScrollDisabled=Rf(this.autoScrollDisabled),e.autoScrollStep=Ff(this.autoScrollStep,2),e.connectedTo(i.filter(t=&gt;t&amp;&amp;t!==this).map(t=&gt;t._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=&gt;{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=&gt;{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),t.exited.subscribe(t=&gt;{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(t=&gt;{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),t.dropped.subscribe(t=&gt;{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:e,draggingDisabled:i,sortingDisabled:n,listAutoScrollDisabled:s,listOrientation:r}=t;this.disabled=null!=i&amp;&amp;i,this.sortingDisabled=null!=n&amp;&amp;n,this.autoScrollDisabled=null!=s&amp;&amp;s,this.orientation=r||&quot;vertical&quot;,e&amp;&amp;(this.lockAxis=e)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=&gt;t._dragRef))}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(t1),Da(Ec),Da(Ug),Da(kg,8),Da(i1,12),Da(n1,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkDropList&quot;,&quot;&quot;],[&quot;cdk-drop-list&quot;]],hostAttrs:[1,&quot;cdk-drop-list&quot;],hostVars:7,hostBindings:function(t,e){2&amp;t&amp;&amp;(ea(&quot;id&quot;,e.id),cl(&quot;cdk-drop-list-disabled&quot;,e.disabled)(&quot;cdk-drop-list-dragging&quot;,e._dropListRef.isDragging())(&quot;cdk-drop-list-receiving&quot;,e._dropListRef.isReceiving()))},inputs:{connectedTo:[&quot;cdkDropListConnectedTo&quot;,&quot;connectedTo&quot;],id:&quot;id&quot;,enterPredicate:[&quot;cdkDropListEnterPredicate&quot;,&quot;enterPredicate&quot;],sortPredicate:[&quot;cdkDropListSortPredicate&quot;,&quot;sortPredicate&quot;],disabled:[&quot;cdkDropListDisabled&quot;,&quot;disabled&quot;],sortingDisabled:[&quot;cdkDropListSortingDisabled&quot;,&quot;sortingDisabled&quot;],autoScrollDisabled:[&quot;cdkDropListAutoScrollDisabled&quot;,&quot;autoScrollDisabled&quot;],orientation:[&quot;cdkDropListOrientation&quot;,&quot;orientation&quot;],lockAxis:[&quot;cdkDropListLockAxis&quot;,&quot;lockAxis&quot;],data:[&quot;cdkDropListData&quot;,&quot;data&quot;],autoScrollStep:[&quot;cdkDropListAutoScrollStep&quot;,&quot;autoScrollStep&quot;]},outputs:{dropped:&quot;cdkDropListDropped&quot;,entered:&quot;cdkDropListEntered&quot;,exited:&quot;cdkDropListExited&quot;,sorted:&quot;cdkDropListSorted&quot;},exportAs:[&quot;cdkDropList&quot;],features:[Wl([{provide:i1,useValue:void 0},{provide:r1,useExisting:t}])]}),t._dropLists=[],t})();const a1=new Ji(&quot;CdkDragHandle&quot;);let l1=(()=&gt;{class t{constructor(t,e){this.element=t,this._stateChanges=new S,this._disabled=!1,this._parentDrag=e}get disabled(){return this._disabled}set disabled(t){this._disabled=Rf(t),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(e1,12))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkDragHandle&quot;,&quot;&quot;]],hostAttrs:[1,&quot;cdk-drag-handle&quot;],inputs:{disabled:[&quot;cdkDragHandleDisabled&quot;,&quot;disabled&quot;]},features:[Wl([{provide:a1,useExisting:t}])]}),t})();const c1=new Ji(&quot;CdkDragPlaceholder&quot;),h1=new Ji(&quot;CdkDragPreview&quot;);let u1=(()=&gt;{class t{constructor(e,i,n,s,r,o,a,l,c,h,u){this.element=e,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=r,this._dir=a,this._changeDetectorRef=c,this._selfHandle=h,this._parentDrag=u,this._destroyed=new S,this.started=new mh,this.released=new mh,this.ended=new mh,this.entered=new mh,this.exited=new mh,this.dropped=new mh,this.moved=new b(t=&gt;{const e=this._dragRef.moved.pipe(M(t=&gt;({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}))).subscribe(t);return()=&gt;{e.unsubscribe()}}),this._dragRef=l.createDrag(e,{dragStartThreshold:o&amp;&amp;null!=o.dragStartThreshold?o.dragStartThreshold:5,pointerDirectionChangeThreshold:o&amp;&amp;null!=o.pointerDirectionChangeThreshold?o.pointerDirectionChangeThreshold:5,zIndex:null==o?void 0:o.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),o&amp;&amp;this._assignDefaults(o),i&amp;&amp;(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&amp;&amp;this.dropContainer.disabled}set disabled(t){this._disabled=Rf(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=&gt;{this._ngZone.onStable.pipe(xf(1),Df(this._destroyed)).subscribe(()=&gt;{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&amp;&amp;this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const e=t.rootElementSelector,i=t.freeDragPosition;e&amp;&amp;!e.firstChange&amp;&amp;this._updateRootElement(),i&amp;&amp;!i.firstChange&amp;&amp;this.freeDragPosition&amp;&amp;this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&amp;&amp;this.dropContainer.removeItem(this);const e=t._dragInstances.indexOf(this);e&gt;-1&amp;&amp;t._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=&gt;{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement,e=this.rootElementSelector?d1(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?&quot;string&quot;==typeof t?d1(this.element.nativeElement,t):Nf(t):null}_syncInputs(e){e.beforeStarted.subscribe(()=&gt;{if(!e.isDragging()){const t=this._dir,i=this.dragStartDelay,n=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay=&quot;object&quot;==typeof i&amp;&amp;i?i:Ff(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(n).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||&quot;global&quot;),t&amp;&amp;e.withDirection(t.value)}}),e.beforeStarted.pipe(xf(1)).subscribe(()=&gt;{var i,n;if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let s=this.element.nativeElement.parentElement;for(;s;){if(null===(i=s.classList)||void 0===i?void 0:i.contains(&quot;cdk-drag&quot;)){e.withParent((null===(n=t._dragInstances.find(t=&gt;t.element.nativeElement===s))||void 0===n?void 0:n._dragRef)||null);break}s=s.parentElement}})}_handleEvents(t){t.started.subscribe(()=&gt;{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=&gt;{this.released.emit({source:this})}),t.ended.subscribe(t=&gt;{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=&gt;{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),t.exited.subscribe(t=&gt;{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=&gt;{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint})})}_assignDefaults(t){const{lockAxis:e,dragStartDelay:i,constrainPosition:n,previewClass:s,boundaryElement:r,draggingDisabled:o,rootElementSelector:a,previewContainer:l}=t;this.disabled=null!=o&amp;&amp;o,this.dragStartDelay=i||0,e&amp;&amp;(this.lockAxis=e),n&amp;&amp;(this.constrainPosition=n),s&amp;&amp;(this.previewClass=s),r&amp;&amp;(this.boundaryElement=r),a&amp;&amp;(this.rootElementSelector=a),l&amp;&amp;(this.previewContainer=l)}_setupHandlesListener(){this._handles.changes.pipe(cg(this._handles),nf(t=&gt;{const e=t.filter(t=&gt;t._parentDrag===this).map(t=&gt;t.element);this._selfHandle&amp;&amp;this.rootElementSelector&amp;&amp;e.push(this.element),this._dragRef.withHandles(e)}),pg(t=&gt;W(...t.map(t=&gt;t._stateChanges.pipe(cg(t))))),Df(this._destroyed)).subscribe(t=&gt;{const e=this._dragRef,i=t.element.nativeElement;t.disabled?e.disableHandle(i):e.enableHandle(i)})}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(r1,12),Da(Fu),Da(iu),Da(Nc),Da(n1,8),Da(kg,8),Da(t1),Da(Ec),Da(a1,10),Da(e1,12))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;cdkDrag&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,h1,5),Th(i,c1,5),Th(i,a1,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._previewTemplate=t.first),Eh(t=Ih())&amp;&amp;(e._placeholderTemplate=t.first),Eh(t=Ih())&amp;&amp;(e._handles=t)}},hostAttrs:[1,&quot;cdk-drag&quot;],hostVars:4,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;cdk-drag-disabled&quot;,e.disabled)(&quot;cdk-drag-dragging&quot;,e._dragRef.isDragging())},inputs:{disabled:[&quot;cdkDragDisabled&quot;,&quot;disabled&quot;],dragStartDelay:[&quot;cdkDragStartDelay&quot;,&quot;dragStartDelay&quot;],lockAxis:[&quot;cdkDragLockAxis&quot;,&quot;lockAxis&quot;],constrainPosition:[&quot;cdkDragConstrainPosition&quot;,&quot;constrainPosition&quot;],previewClass:[&quot;cdkDragPreviewClass&quot;,&quot;previewClass&quot;],boundaryElement:[&quot;cdkDragBoundary&quot;,&quot;boundaryElement&quot;],rootElementSelector:[&quot;cdkDragRootElement&quot;,&quot;rootElementSelector&quot;],previewContainer:[&quot;cdkDragPreviewContainer&quot;,&quot;previewContainer&quot;],data:[&quot;cdkDragData&quot;,&quot;data&quot;],freeDragPosition:[&quot;cdkDragFreeDragPosition&quot;,&quot;freeDragPosition&quot;]},outputs:{started:&quot;cdkDragStarted&quot;,released:&quot;cdkDragReleased&quot;,ended:&quot;cdkDragEnded&quot;,entered:&quot;cdkDragEntered&quot;,exited:&quot;cdkDragExited&quot;,dropped:&quot;cdkDragDropped&quot;,moved:&quot;cdkDragMoved&quot;},exportAs:[&quot;cdkDrag&quot;],features:[Wl([{provide:e1,useExisting:t}]),he]}),t._dragInstances=[],t})();function d1(t,e){let i=t.parentElement;for(;i;){if(i.matches?i.matches(e):i.msMatchesSelector(e))return i;i=i.parentElement}return null}let p1=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({providers:[t1],imports:[Zg]}),t})();function f1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,9),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.value),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function m1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;),Ra(1,&quot;mat-form-field&quot;,5),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Intervalle de temps&quot;),Fa(),Ra(4,&quot;mat-select&quot;,6),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.timeWindow=e}),ra(5,f1,2,2,&quot;mat-option&quot;,7),Fa(),Fa(),Ra(6,&quot;mat-checkbox&quot;,8),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.sequential=e}),xl(7,&quot; Passages ordonn\xe9s &quot;),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(4),Oa(&quot;ngModel&quot;,t.criterion.timeWindow)(&quot;disabled&quot;,!t.editable),Sr(1),Oa(&quot;ngForOf&quot;,t.timeWindows),Sr(1),Oa(&quot;ngModel&quot;,t.criterion.sequential)(&quot;disabled&quot;,!t.editable)}}function g1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,21),xl(1),Fa()),2&amp;t){const t=Za().index;Sr(1),wl(t+1)}}function A1(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-icon&quot;,22),xl(1,&quot;drag_handle&quot;),Fa())}function v1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-list-item&quot;,17),Ha(&quot;cdkDragStarted&quot;,function(){return Le(t),Za(3).startReorderingPassages()}),ra(1,g1,2,1,&quot;div&quot;,18),ra(2,A1,2,0,&quot;mat-icon&quot;,19),Ra(3,&quot;app-zone-item&quot;,20),Ha(&quot;delete&quot;,function(){const e=Le(t).$implicit;return Za(3).deleteZone(e.zone)}),Fa(),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(3);Sr(1),Oa(&quot;ngIf&quot;,i.criterion.sequential),Sr(1),Oa(&quot;ngIf&quot;,i.zonesEditable),Sr(1),Oa(&quot;zone&quot;,t.zone)(&quot;editable&quot;,!0)(&quot;disableEdition&quot;,!i.zonesEditable)}}function _1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-zone-form&quot;,23),Ha(&quot;save&quot;,function(e){return Le(t),Za(3).addCreatedZone(e)})(&quot;cancel&quot;,function(){return Le(t),Za(3).hideCreateZoneForm()}),Fa()}2&amp;t&amp;&amp;Oa(&quot;groupId&quot;,Za(3).groupId)}function b1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,24),Ra(1,&quot;span&quot;),xl(2,&quot;\xa0Ajouter une zone&quot;),Fa(),Fa(),Ra(3,&quot;button&quot;,25),Ha(&quot;click&quot;,function(){return Le(t),Za(3).displayCreateZoneForm()}),xl(4,&quot; Cr\xe9er une zone &quot;),Fa()}if(2&amp;t){Za();const t=oa(6),e=Za(2);Oa(&quot;matMenuTriggerFor&quot;,t)(&quot;disabled&quot;,!e.zonesEditable),Sr(3),Oa(&quot;disabled&quot;,!e.zonesEditable)}}function y1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,26),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(3).addZone(e)}),xl(1),Fa()}if(2&amp;t){const t=e.$implicit;Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function x1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-list&quot;,10),Ha(&quot;cdkDropListDropped&quot;,function(e){return Le(t),Za(2).reorderPassage(e)}),ra(1,v1,4,5,&quot;mat-list-item&quot;,11),Fa(),Ra(2,&quot;div&quot;,12),ra(3,_1,1,1,&quot;app-zone-form&quot;,13),ra(4,b1,5,3,&quot;ng-template&quot;,1),Fa(),Ra(5,&quot;mat-menu&quot;,14,15),ra(7,y1,2,1,&quot;button&quot;,16),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;ngForOf&quot;,t.criterion.passages)(&quot;ngForTrackBy&quot;,t.trackById),Sr(2),Oa(&quot;ngIf&quot;,t.showCreateZoneForm),Sr(1),Oa(&quot;ngIf&quot;,!t.showCreateZoneForm),Sr(3),Oa(&quot;ngForOf&quot;,t.availableZones)}}function w1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,21),xl(1),Fa()),2&amp;t){const t=Za().index;Sr(1),wl(t+1)}}function C1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-list-item&quot;),ra(1,w1,2,1,&quot;div&quot;,18),Ra(2,&quot;button&quot;,29),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(3).viewZone(e.zone)}),xl(3),Fa(),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(3);Sr(1),Oa(&quot;ngIf&quot;,i.criterion.sequential),Sr(2),Cl(&quot; &quot;,t.zone.name,&quot; &quot;)}}function S1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-list&quot;,27),ra(1,C1,4,2,&quot;mat-list-item&quot;,28),Fa()),2&amp;t){const t=Za(2);Sr(1),Oa(&quot;ngForOf&quot;,t.criterion.passages)}}function k1(t,e){if(1&amp;t&amp;&amp;(ra(0,m1,8,5,&quot;div&quot;,2),ra(1,x1,8,5,&quot;ng-template&quot;,3),ra(2,S1,2,1,&quot;ng-template&quot;,null,4,Rh)),2&amp;t){const t=oa(3),e=Za();Oa(&quot;ngIf&quot;,e.criterion.passages.length&gt;1),Sr(1),Oa(&quot;ngIf&quot;,e.editable)(&quot;ngIfElse&quot;,t)}}let E1=(()=&gt;{class t extends i0{constructor(t,e,i){super(),this.editZoneService=t,this.mapService=e,this.zonesService=i,this.updateZones=new mh,this.timeWindows=gH,this.reorderingPassages=!1,this.availableZones=[],this.showCreateZoneForm=!1,this.zonesEditable=!0,this.usedZonesIds$=new Qp([]),this.groupId$=new Qp(null)}ngOnInit(){this.usedZonesIds$.next(this.criterion.passages.map(t=&gt;t.zone.id)),this.subscriptions.push(QT([this.zonesService.zones$,this.usedZonesIds$,this.groupId$]).subscribe(([t,e,i])=&gt;{this.availableZones=t.filter(t=&gt;t.group_id===i&amp;&amp;!e.includes(t.id))}),this.usedZonesIds$.pipe(Sf(1)).subscribe(()=&gt;{this.updateZones.next(null)}),this.editZoneService.editedZone$.pipe(Mf(),Ej(0)).subscribe(t=&gt;{this.zonesEditable=!t}))}ngOnChanges(t){t.groupId&amp;&amp;(this.groupId$.next(t.groupId.currentValue),t.groupId.firstChange||(this.criterion.passages=[],this.usedZonesIds$.next([])))}get passages(){return this.criterion.passages.map(t=&gt;t.zone.name).join(&quot;, &quot;)}displayCreateZoneForm(){this.showCreateZoneForm=!0}hideCreateZoneForm(){this.showCreateZoneForm=!1}addCreatedZone(t){this.criterion.passages.push({zone:t}),this.hideCreateZoneForm()}viewZone(t){this.mapService.fitOnHexagons(t.h3indexes)}deleteZone(t){this.criterion.passages.splice(this.criterion.passages.findIndex(e=&gt;e.zone===t),1),this.usedZonesIds$.next(this.usedZonesIds$.value.filter(e=&gt;e!==t.id))}addZone(t){this.criterion.passages.push({zone:t}),this.usedZonesIds$.next(this.usedZonesIds$.value.concat(t.id))}trackById(t,e){return e.zone.id}startReorderingPassages(){this.reorderingPassages=!0}reorderPassage(t){this.reorderingPassages=!1,j0(this.criterion.passages,t.previousIndex,t.currentIndex)}}return t.\u0275fac=function(e){return new(e||t)(Da(bQ),Da(kj),Da(EH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-passage-in-zone-criterion&quot;]],inputs:{groupId:&quot;groupId&quot;},outputs:{updateZones:&quot;updateZones&quot;},features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o,he],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;mr-2&quot;],[3,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;matTooltip&quot;,&quot;Cette option active le passage des zones dans l&#39;ordre d\xe9fini&quot;,3,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;],[&quot;dense&quot;,&quot;&quot;,&quot;cdkDropList&quot;,&quot;&quot;,3,&quot;cdkDropListDropped&quot;],[&quot;cdkDrag&quot;,&quot;&quot;,3,&quot;cdkDragStarted&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[1,&quot;criterion-content&quot;],[&quot;class&quot;,&quot;u-flex&quot;,3,&quot;groupId&quot;,&quot;save&quot;,&quot;cancel&quot;,4,&quot;ngIf&quot;],[1,&quot;add-zones-menu&quot;],[&quot;addZonesMenu&quot;,&quot;matMenu&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;cdkDrag&quot;,&quot;&quot;,3,&quot;cdkDragStarted&quot;],[&quot;class&quot;,&quot;criterion__sequence-number&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;criterion__drag-handle&quot;,&quot;cdkDragHandle&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9ordonner&quot;,4,&quot;ngIf&quot;],[1,&quot;u-flex&quot;,3,&quot;zone&quot;,&quot;editable&quot;,&quot;disableEdition&quot;,&quot;delete&quot;],[1,&quot;criterion__sequence-number&quot;],[&quot;cdkDragHandle&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9ordonner&quot;,1,&quot;criterion__drag-handle&quot;],[1,&quot;u-flex&quot;,3,&quot;groupId&quot;,&quot;save&quot;,&quot;cancel&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ajouter une zone existante&quot;,3,&quot;matMenuTriggerFor&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Cr\xe9er une nouvelle zone&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;],[&quot;dense&quot;,&quot;&quot;],[4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Visualiser la zone&quot;,1,&quot;u-flex&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,k1,4,3,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.passageInZone)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,gC,oC,qT,wx,iw,Bd,qq,fI,Sy,kJ,o1,aJ,IJ,u1,vJ,hE,l1,fJ,Ry,dJ,nJ],styles:[&quot;.criterion__sequence-number[_ngcontent-%COMP%]{font-size:1.2em;font-weight:bold;margin-right:.5em}.criterion__drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:.5em}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);background-color:#e6e9f7;font-size:12px}.cdk-drag-preview[_ngcontent-%COMP%]    &gt;.mat-list-item-content{display:flex;align-items:center;padding:0 16px;height:inherit}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}&quot;]}),t})(),M1=(()=&gt;{class t extends i0{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-spoofing-criterion&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:1,vars:3,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),Fa()),2&amp;t&amp;&amp;Oa(&quot;type&quot;,e.criteriaLabels.spoofing)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable)},directives:[c0],encapsulation:2,changeDetection:0}),t})();const T1=[&quot;panel&quot;];function I1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0,1),Qa(2),Fa()),2&amp;t){const t=e.id,i=Za();Oa(&quot;id&quot;,i.id)(&quot;ngClass&quot;,i._classList),ea(&quot;aria-label&quot;,i.ariaLabel||null)(&quot;aria-labelledby&quot;,i._getPanelAriaLabelledby(t))}}const D1=[&quot;*&quot;];let O1=0;class P1{constructor(t,e){this.source=t,this.option=e}}const R1=zb(class{}),F1=new Ji(&quot;mat-autocomplete-default-options&quot;,{providedIn:&quot;root&quot;,factory:function(){return{autoActiveFirstOption:!1}}});let L1=(()=&gt;{class t extends R1{constructor(t,e,i,n){super(),this._changeDetectorRef=t,this._elementRef=e,this._activeOptionChanges=d.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new mh,this.opened=new mh,this.closed=new mh,this.optionActivated=new mh,this._classList={},this.id=&quot;mat-autocomplete-&quot;+O1++,this.inertGroups=(null==n?void 0:n.SAFARI)||!1,this._autoActiveFirstOption=!!i.autoActiveFirstOption}get isOpen(){return this._isOpen&amp;&amp;this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(t){this._autoActiveFirstOption=Rf(t)}set classList(t){this._classList=t&amp;&amp;t.length?Vf(t).reduce((t,e)=&gt;(t[e]=!0,t),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=&quot;&quot;}ngAfterContentInit(){this._keyManager=new _m(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(t=&gt;{this.isOpen&amp;&amp;this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(t){this.panel&amp;&amp;(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const e=new P1(this,t);this.optionSelected.emit(e)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+&quot; &quot;:&quot;&quot;)+this.ariaLabelledby:t}_setVisibilityClasses(t){t[this._visibleClass]=this.showPanel,t[this._hiddenClass]=!this.showPanel}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(ec),Da(F1),Da(jf))},t.\u0275dir=Xt({type:t,viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(Oc,7),Mh(T1,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.template=t.first),Eh(t=Ih())&amp;&amp;(e.panel=t.first)}},inputs:{displayWith:&quot;displayWith&quot;,autoActiveFirstOption:&quot;autoActiveFirstOption&quot;,classList:[&quot;class&quot;,&quot;classList&quot;],ariaLabel:[&quot;aria-label&quot;,&quot;ariaLabel&quot;],ariaLabelledby:[&quot;aria-labelledby&quot;,&quot;ariaLabelledby&quot;],panelWidth:&quot;panelWidth&quot;},outputs:{optionSelected:&quot;optionSelected&quot;,opened:&quot;opened&quot;,closed:&quot;closed&quot;,optionActivated:&quot;optionActivated&quot;},features:[$o]}),t})(),B1=(()=&gt;{class t extends L1{constructor(){super(...arguments),this._visibleClass=&quot;mat-autocomplete-visible&quot;,this._hiddenClass=&quot;mat-autocomplete-hidden&quot;}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-autocomplete&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,by,5),Th(i,Sy,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.optionGroups=t),Eh(t=Ih())&amp;&amp;(e.options=t)}},hostAttrs:[1,&quot;mat-autocomplete&quot;],inputs:{disableRipple:&quot;disableRipple&quot;},exportAs:[&quot;matAutocomplete&quot;],features:[Wl([{provide:gy,useExisting:t}]),$o],ngContentSelectors:D1,decls:1,vars:0,consts:[[&quot;role&quot;,&quot;listbox&quot;,1,&quot;mat-autocomplete-panel&quot;,3,&quot;id&quot;,&quot;ngClass&quot;],[&quot;panel&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),ra(0,I1,3,4,&quot;ng-template&quot;))},directives:[Fd],styles:[&quot;.mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n&quot;],encapsulation:2,changeDetection:0}),t})(),z1=(()=&gt;{class t{constructor(t){this.elementRef=t}}return t.\u0275fac=function(e){return new(e||t)(Da(ec))},t.\u0275dir=Xt({type:t}),t})(),N1=(()=&gt;{class t extends z1{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;matAutocompleteOrigin&quot;,&quot;&quot;]],exportAs:[&quot;matAutocompleteOrigin&quot;],features:[$o]}),t})();const V1=new Ji(&quot;mat-autocomplete-scroll-strategy&quot;),$1={provide:V1,deps:[EA],useFactory:function(t){return()=&gt;t.scrollStrategies.reposition()}},U1={provide:$y,useExisting:at(()=&gt;H1),multi:!0};let j1=(()=&gt;{class t{constructor(t,e,i,n,s,r,o,a,l,c,h){this._element=t,this._overlay=e,this._viewContainerRef=i,this._zone=n,this._changeDetectorRef=s,this._dir=o,this._formField=a,this._document=l,this._viewportRuler=c,this._defaults=h,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=d.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new S,this._windowBlurHandler=()=&gt;{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=&gt;{},this._onTouched=()=&gt;{},this.position=&quot;auto&quot;,this.autocompleteAttribute=&quot;off&quot;,this._overlayAttached=!1,this.optionSelections=$S(()=&gt;this.autocomplete&amp;&amp;this.autocomplete.options?W(...this.autocomplete.options.map(t=&gt;t.onSelectionChange)):this._zone.onStable.pipe(xf(1),pg(()=&gt;this.optionSelections))),this._scrollStrategy=r}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(t){this._autocompleteDisabled=Rf(t)}ngAfterViewInit(){const t=this._getWindow();void 0!==t&amp;&amp;this._zone.runOutsideAngular(()=&gt;t.addEventListener(&quot;blur&quot;,this._windowBlurHandler))}ngOnChanges(t){t.position&amp;&amp;this._positionStrategy&amp;&amp;(this._setStrategyPositions(this._positionStrategy),this.panelOpen&amp;&amp;this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();void 0!==t&amp;&amp;t.removeEventListener(&quot;blur&quot;,this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&amp;&amp;this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&amp;&amp;(this.panelOpen&amp;&amp;this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&amp;&amp;this._overlayRef.hasAttached()&amp;&amp;(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&amp;&amp;this._overlayRef.updatePosition()}get panelClosingActions(){return W(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(gf(()=&gt;this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(gf(()=&gt;this._overlayAttached)):Jp()).pipe(M(t=&gt;t instanceof wy?t:null))}get activeOption(){return this.autocomplete&amp;&amp;this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return W(qm(this._document,&quot;click&quot;),qm(this._document,&quot;auxclick&quot;),qm(this._document,&quot;touchend&quot;)).pipe(gf(t=&gt;{const e=im(t),i=this._formField?this._formField._elementRef.nativeElement:null,n=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&amp;&amp;e!==this._element.nativeElement&amp;&amp;(!i||!i.contains(e))&amp;&amp;(!n||!n.contains(e))&amp;&amp;!!this._overlayRef&amp;&amp;!this._overlayRef.overlayElement.contains(e)}))}writeValue(t){Promise.resolve(null).then(()=&gt;this._setTriggerValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const e=t.keyCode;if(27===e&amp;&amp;!tf(t)&amp;&amp;t.preventDefault(),this.activeOption&amp;&amp;13===e&amp;&amp;this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const i=this.autocomplete._keyManager.activeItem,n=38===e||40===e;this.panelOpen||9===e?this.autocomplete._keyManager.onKeydown(t):n&amp;&amp;this._canOpen()&amp;&amp;this.openPanel(),(n||this.autocomplete._keyManager.activeItem!==i)&amp;&amp;this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(t){let e=t.target,i=e.value;&quot;number&quot;===e.type&amp;&amp;(i=&quot;&quot;==i?null:parseFloat(i)),this._previousValue!==i&amp;&amp;(this._previousValue=i,this._onChange(i),this._canOpen()&amp;&amp;this._document.activeElement===t.target&amp;&amp;this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&amp;&amp;(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(t=!1){this._formField&amp;&amp;&quot;auto&quot;===this._formField.floatLabel&amp;&amp;(t?this._formField._animateAndLockLabel():this._formField.floatLabel=&quot;always&quot;,this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&amp;&amp;(this._formField.floatLabel=&quot;auto&quot;,this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return W(this._zone.onStable.pipe(xf(1)),this.autocomplete.options.changes.pipe(nf(()=&gt;this._positionStrategy.reapplyLastPosition()),Ej(0))).pipe(pg(()=&gt;{const t=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&amp;&amp;(this._overlayRef.updatePosition(),t!==this.panelOpen&amp;&amp;this.autocomplete.opened.emit()),this.panelClosingActions}),xf(1)).subscribe(t=&gt;this._setValueAndClose(t))}_destroyPanel(){this._overlayRef&amp;&amp;(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(t){const e=this.autocomplete&amp;&amp;this.autocomplete.displayWith?this.autocomplete.displayWith(t):t,i=null!=e?e:&quot;&quot;;this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i}_setValueAndClose(t){t&amp;&amp;t.source&amp;&amp;(this._clearPreviousSelectedOption(t.source),this._setTriggerValue(t.source.value),this._onChange(t.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(t.source)),this.closePanel()}_clearPreviousSelectedOption(t){this.autocomplete.options.forEach(e=&gt;{e!==t&amp;&amp;e.selected&amp;&amp;e.deselect()})}_attachOverlay(){var t;let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new qp(this.autocomplete.template,this._viewContainerRef,{id:null===(t=this._formField)||void 0===t?void 0:t.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,e.keydownEvents().subscribe(t=&gt;{(27===t.keyCode&amp;&amp;!tf(t)||38===t.keyCode&amp;&amp;tf(t,&quot;altKey&quot;))&amp;&amp;(this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=&gt;{this.panelOpen&amp;&amp;e&amp;&amp;e.updateSize({width:this._getPanelWidth()})})),e&amp;&amp;!e.hasAttached()&amp;&amp;(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&amp;&amp;i!==this.panelOpen&amp;&amp;this.autocomplete.opened.emit()}_getOverlayConfig(){var t;return new lA({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(t=this._defaults)||void 0===t?void 0:t.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const e=[{originX:&quot;start&quot;,originY:&quot;bottom&quot;,overlayX:&quot;start&quot;,overlayY:&quot;top&quot;},{originX:&quot;end&quot;,originY:&quot;bottom&quot;,overlayX:&quot;end&quot;,overlayY:&quot;top&quot;}],i=this._aboveClass,n=[{originX:&quot;start&quot;,originY:&quot;top&quot;,overlayX:&quot;start&quot;,overlayY:&quot;bottom&quot;,panelClass:i},{originX:&quot;end&quot;,originY:&quot;top&quot;,overlayX:&quot;end&quot;,overlayY:&quot;bottom&quot;,panelClass:i}];let s;s=&quot;above&quot;===this.position?n:&quot;below&quot;===this.position?e:[...e,...n],t.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;t.autoActiveFirstOption?t._keyManager.setFirstItemActive():t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&amp;&amp;!t.disabled&amp;&amp;!this._autocompleteDisabled}_getWindow(){var t;return(null===(t=this._document)||void 0===t?void 0:t.defaultView)||window}_scrollToOption(t){const e=this.autocomplete,i=ky(t,e.options,e.optionGroups);if(0===t&amp;&amp;1===i)e._setScrollTop(0);else if(e.panel){const i=e.options.toArray()[t];if(i){const t=i._getHostElement(),n=Ey(t.offsetTop,t.offsetHeight,e._getScrollTop(),e.panel.nativeElement.offsetHeight);e._setScrollTop(n)}}}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(EA),Da(Nc),Da(iu),Da(Ec),Da(V1),Da(kg,8),Da(mC,9),Da(Fu,8),Da(Hg),Da(F1,8))},t.\u0275dir=Xt({type:t,inputs:{position:[&quot;matAutocompletePosition&quot;,&quot;position&quot;],autocompleteAttribute:[&quot;autocomplete&quot;,&quot;autocompleteAttribute&quot;],autocompleteDisabled:[&quot;matAutocompleteDisabled&quot;,&quot;autocompleteDisabled&quot;],autocomplete:[&quot;matAutocomplete&quot;,&quot;autocomplete&quot;],connectedTo:[&quot;matAutocompleteConnectedTo&quot;,&quot;connectedTo&quot;]},features:[he]}),t})(),H1=(()=&gt;{class t extends j1{constructor(){super(...arguments),this._aboveClass=&quot;mat-autocomplete-panel-above&quot;}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;input&quot;,&quot;matAutocomplete&quot;,&quot;&quot;],[&quot;textarea&quot;,&quot;matAutocomplete&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-autocomplete-trigger&quot;],hostVars:7,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;focusin&quot;,function(){return e._handleFocus()})(&quot;blur&quot;,function(){return e._onTouched()})(&quot;input&quot;,function(t){return e._handleInput(t)})(&quot;keydown&quot;,function(t){return e._handleKeydown(t)}),2&amp;t&amp;&amp;ea(&quot;autocomplete&quot;,e.autocompleteAttribute)(&quot;role&quot;,e.autocompleteDisabled?null:&quot;combobox&quot;)(&quot;aria-autocomplete&quot;,e.autocompleteDisabled?null:&quot;list&quot;)(&quot;aria-activedescendant&quot;,e.panelOpen&amp;&amp;e.activeOption?e.activeOption.id:null)(&quot;aria-expanded&quot;,e.autocompleteDisabled?null:e.panelOpen.toString())(&quot;aria-owns&quot;,e.autocompleteDisabled||!e.panelOpen||null==e.autocomplete?null:e.autocomplete.id)(&quot;aria-haspopup&quot;,!e.autocompleteDisabled)},exportAs:[&quot;matAutocompleteTrigger&quot;],features:[Wl([U1]),$o]}),t})(),G1=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({providers:[$1],imports:[[PA,My,Fb,ip],Zg,My,Fb]}),t})();const q1=[&quot;searchInput&quot;];function W1(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-icon&quot;,10),xl(1,&quot;cached&quot;),Fa())}function Y1(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,11),xl(1,&quot; Aucun r\xe9sultat &quot;),Fa())}function Z1(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,12),Ra(1,&quot;div&quot;,13),Ra(2,&quot;div&quot;,14),Ra(3,&quot;div&quot;,15),La(4,&quot;app-flag&quot;,16),Ra(5,&quot;div&quot;,17),Ra(6,&quot;div&quot;,18),xl(7),Fa(),Ra(8,&quot;small&quot;,19),xl(9),Fa(),Fa(),Fa(),Ra(10,&quot;div&quot;,20),Ra(11,&quot;mat-icon&quot;,21),xl(12,&quot;access_time&quot;),Fa(),Ra(13,&quot;div&quot;,22),lh(14,&quot;timeago&quot;),xl(15),lh(16,&quot;date&quot;),Fa(),Fa(),Fa(),Ra(17,&quot;div&quot;,23),Ra(18,&quot;div&quot;),xl(19),Fa(),Ra(20,&quot;div&quot;),xl(21),Fa(),Ra(22,&quot;div&quot;),xl(23),Fa(),Fa(),Fa(),Fa()),2&amp;t){const t=e.$implicit,i=Za();Oa(&quot;value&quot;,t)(&quot;disabled&quot;,t.alreadyExists)(&quot;title&quot;,t.alreadyExists?&quot;Ce navire est d\xe9j\xe0 dans la flotte&quot;:&quot;Ajouter ce navire&quot;),Sr(4),Oa(&quot;flag&quot;,t.country.flag),Sr(3),wl(t.name||&quot;?&quot;),Sr(2),wl(t.cargo?i.vesselTypeLabelsByType[t.cargo]:&quot;?&quot;),Sr(4),Ja(&quot;title&quot;,ch(14,11,1e3*t.timestamp)),Sr(2),wl(uh(16,13,1e3*t.timestamp,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.mapConfigService.useUTCDates$.value&amp;&amp;&quot;+00&quot;)),Sr(4),Cl(&quot;MMSI &quot;,t.mmsi,&quot;&quot;),Sr(2),Cl(&quot;IMO &quot;,t.imo||&quot;?&quot;,&quot;&quot;),Sr(2),Cl(&quot;Callsign &quot;,t.callsign||&quot;?&quot;,&quot;&quot;)}}let K1=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.errorHandler=t,this.mapConfigService=e,this.workerService=i,this.allowTextValue=!1,this.existingItems=[],this.selectItem=new mh,this.searchFormControl=new Wx,this.noResults=!1,this.loadingResults=!1,this.vesselTypeLabelsByType=nU,this.existingMMSIs={}}ngOnInit(){this.subscriptions.push(this.searchFormControl.valueChanges.pipe(df(300),M(t=&gt;&quot;string&quot;==typeof t?t:void 0===t?&quot;&quot;:&quot;object&quot;==typeof t&amp;&amp;(null==t?void 0:t.name)||&quot;&quot;),M(t=&gt;t.trim()),Mf(),nf(()=&gt;{this.loadingResults=!0,this.noResults=!1}),pg(t=&gt;&quot;&quot;===t?Jp(null):$S(()=&gt;jp(this,void 0,void 0,function*(){try{return yield this.workerService.ships.findShips(t.toUpperCase())}catch(e){return e.name===oz.Unauthorized&amp;&amp;this.errorHandler.handleError(e),[]}})))).subscribe(t=&gt;{var e;this.loadingResults=!1,this.noResults=0===(null==t?void 0:t.length),this.searchResults=t,null===(e=this.searchResults)||void 0===e||e.forEach(t=&gt;{t.alreadyExists=this.existingMMSIs[t.mmsi]})}))}ngOnChanges(t){t.existingItems&amp;&amp;(this.existingMMSIs=this.existingItems.reduce((t,e)=&gt;(t[e]=!0,t),{}))}selectShip(t){t&amp;&amp;(this.selectItem.emit(t),this.searchFormControl.reset(&quot;&quot;),this.inputElement.nativeElement.focus())}selectValue(){this.allowTextValue&amp;&amp;this.searchFormControl.value&amp;&amp;(this.selectItem.emit(this.searchFormControl.value),this.searchFormControl.reset(&quot;&quot;))}}return t.\u0275fac=function(e){return new(e||t)(Da(Ps),Da(HU),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ship-identifier-input&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(q1,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.inputElement=t.first)}},inputs:{allowTextValue:&quot;allowTextValue&quot;,existingItems:&quot;existingItems&quot;},outputs:{selectItem:&quot;selectItem&quot;},features:[$o,he],decls:10,vars:6,consts:[[&quot;matAutocompleteOrigin&quot;,&quot;&quot;,1,&quot;ship-identifier-input&quot;],[&quot;origin&quot;,&quot;matAutocompleteOrigin&quot;],[1,&quot;d-block&quot;],[&quot;type&quot;,&quot;search&quot;,&quot;placeholder&quot;,&quot;Nom, MMSI, IMO...&quot;,&quot;matInput&quot;,&quot;&quot;,1,&quot;simple-form-field&quot;,3,&quot;formControl&quot;,&quot;matAutocomplete&quot;,&quot;matAutocompleteConnectedTo&quot;,&quot;keyup.enter&quot;],[&quot;searchInput&quot;,&quot;&quot;],[&quot;class&quot;,&quot;spin&quot;,&quot;matSuffix&quot;,&quot;&quot;,4,&quot;ngIf&quot;],[3,&quot;optionSelected&quot;],[&quot;autocomplete&quot;,&quot;matAutocomplete&quot;],[&quot;class&quot;,&quot;ship-identifier-input__no-results&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;ship-identifier-input__result-item-wrapper&quot;,3,&quot;value&quot;,&quot;disabled&quot;,&quot;title&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;matSuffix&quot;,&quot;&quot;,1,&quot;spin&quot;],[1,&quot;ship-identifier-input__no-results&quot;],[1,&quot;ship-identifier-input__result-item-wrapper&quot;,3,&quot;value&quot;,&quot;disabled&quot;,&quot;title&quot;],[1,&quot;result-item&quot;],[1,&quot;result-item__col1&quot;],[1,&quot;u-flex&quot;,&quot;d-flex-center&quot;],[1,&quot;result-item__flag&quot;,3,&quot;flag&quot;],[1,&quot;d-flex-column&quot;],[1,&quot;result-item__name&quot;],[1,&quot;result-item__type&quot;],[1,&quot;result-item__timestamp&quot;],[&quot;title&quot;,&quot;R\xe9ception&quot;],[3,&quot;title&quot;],[1,&quot;result-item__col2&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0,1),Ra(2,&quot;mat-form-field&quot;,2),Ra(3,&quot;input&quot;,3,4),Ha(&quot;keyup.enter&quot;,function(){return e.selectValue()}),Fa(),ra(5,W1,2,0,&quot;mat-icon&quot;,5),Ra(6,&quot;mat-autocomplete&quot;,6,7),Ha(&quot;optionSelected&quot;,function(){return e.selectShip(e.searchFormControl.value)}),ra(8,Y1,2,0,&quot;mat-option&quot;,8),ra(9,Z1,24,17,&quot;mat-option&quot;,9),Fa(),Fa(),Fa()),2&amp;t){const t=oa(1),i=oa(7);Sr(3),Oa(&quot;formControl&quot;,e.searchFormControl)(&quot;matAutocomplete&quot;,i)(&quot;matAutocompleteConnectedTo&quot;,t),Sr(2),Oa(&quot;ngIf&quot;,e.loadingResults),Sr(3),Oa(&quot;ngIf&quot;,e.noResults),Sr(1),Oa(&quot;ngForOf&quot;,e.searchResults)}},directives:[N1,gC,kC,Hy,H1,wx,cw,Nd,B1,Bd,hE,uC,Sy,aQ],pipes:[VL,ep],styles:[&quot;.ship-identifier-input[_ngcontent-%COMP%]{flex:1;display:flex;color:#50647f}.ship-identifier-input__no-results[_ngcontent-%COMP%]{pointer-events:none}.ship-identifier-input__result-item-wrapper[_ngcontent-%COMP%]{line-height:16px;padding:0;height:56px}.ship-identifier-input__result-item-wrapper[aria-disabled=true][_ngcontent-%COMP%]{cursor:not-allowed}.result-item[_ngcontent-%COMP%]{padding:0 4px;font-size:12px;display:flex}.result-item__col1[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.result-item__col2[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:right}.result-item__flag[_ngcontent-%COMP%]{margin-right:4px}.result-item__name[_ngcontent-%COMP%]{font-size:14px}.result-item__type[_ngcontent-%COMP%]{line-height:1em;font-size:11px}.result-item__timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;color:gray}.result-item__timestamp[_ngcontent-%COMP%] &gt; .mat-icon[_ngcontent-%COMP%]{font-size:1em;height:1em;width:1em;margin-right:.3em;margin-left:.3em}&quot;,&quot;[_nghost-%COMP%]{flex:1;display:flex}&quot;]}),t})();function X1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-chip&quot;,7),Ha(&quot;removed&quot;,function(){const e=Le(t).index;return Za(3).criterion.identifiers.splice(e,1)}),xl(1),Ra(2,&quot;mat-icon&quot;,8),xl(3,&quot;cancel&quot;),Fa(),Fa()}if(2&amp;t){const t=e.$implicit;Oa(&quot;selectable&quot;,!1),Sr(1),Cl(&quot; &quot;,t,&quot; &quot;)}}function Q1(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-chip-list&quot;),ra(1,X1,4,2,&quot;mat-chip&quot;,4),Fa(),Ra(2,&quot;div&quot;,5),Ra(3,&quot;app-ship-identifier-input&quot;,6),Ha(&quot;selectItem&quot;,function(e){return Le(t),Za(2).addIdentifier(e)}),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;ngForOf&quot;,t.criterion.identifiers),Sr(2),Oa(&quot;allowTextValue&quot;,!0)}}function J1(t,e){1&amp;t&amp;&amp;xl(0),2&amp;t&amp;&amp;Cl(&quot; Identifiants : &quot;,Za(2).criterion.identifiers.join(&quot;, &quot;),&quot; &quot;)}function t2(t,e){if(1&amp;t&amp;&amp;(ra(0,Q1,4,2,&quot;ng-template&quot;,2),ra(1,J1,1,1,&quot;ng-template&quot;,null,3,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,Za().editable)(&quot;ngIfElse&quot;,t)}}let e2=(()=&gt;{class t extends i0{addIdentifier(t){t&amp;&amp;this.criterion.identifiers.push(t instanceof String?t:t.name)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-identifier-filter&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[&quot;disableRipple&quot;,&quot;&quot;,&quot;removable&quot;,&quot;&quot;,3,&quot;selectable&quot;,&quot;removed&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;criterion-content&quot;],[3,&quot;allowTextValue&quot;,&quot;selectItem&quot;],[&quot;disableRipple&quot;,&quot;&quot;,&quot;removable&quot;,&quot;&quot;,3,&quot;selectable&quot;,&quot;removed&quot;],[&quot;matChipRemove&quot;,&quot;&quot;,&quot;title&quot;,&quot;Retirer ce filtre&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,t2,3,2,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.identifier)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,HQ,Bd,K1,zQ,hE,NQ],encapsulation:2,changeDetection:0}),t})(),i2=(()=&gt;{class t{constructor(){this.values=[],this.key=&quot;&quot;,this.text=&quot;Tout s\xe9lectionner&quot;}isChecked(){return this.model.value&amp;&amp;this.values.length&amp;&amp;this.model.value.length===this.values.length}isIndeterminate(){return this.model.value&amp;&amp;this.values.length&amp;&amp;this.model.value.length&amp;&amp;this.model.value.length&lt;this.values.length}toggleSelection(t){this.model.update.emit(t.checked?this.key?this.values.map(t=&gt;t[this.key]):this.values:[])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-select-check-all&quot;]],inputs:{model:&quot;model&quot;,values:&quot;values&quot;,key:&quot;key&quot;,text:&quot;text&quot;},decls:2,vars:4,consts:[[&quot;color&quot;,&quot;primary&quot;,1,&quot;mat-option&quot;,3,&quot;disableRipple&quot;,&quot;indeterminate&quot;,&quot;checked&quot;,&quot;click&quot;,&quot;change&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-checkbox&quot;,0),Ha(&quot;click&quot;,function(t){return t.stopPropagation()})(&quot;change&quot;,function(t){return e.toggleSelection(t)}),xl(1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;disableRipple&quot;,!0)(&quot;indeterminate&quot;,e.isIndeterminate())(&quot;checked&quot;,e.isChecked()),Sr(1),Cl(&quot; &quot;,e.text,&quot; &quot;))},directives:[qq],styles:[&quot;&quot;]}),t})();function n2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,10),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.id),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function s2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,4),Ra(1,&quot;mat-form-field&quot;,5),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Flottes&quot;),Fa(),Ra(4,&quot;mat-select&quot;,6,7),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.fleets=e}),La(6,&quot;app-select-check-all&quot;,8),ra(7,n2,2,2,&quot;mat-option&quot;,9),Fa(),Fa(),Fa()}if(2&amp;t){const t=oa(5),e=Za(2);Sr(4),Oa(&quot;ngModel&quot;,e.criterion.fleets),Sr(2),Oa(&quot;model&quot;,t)(&quot;values&quot;,e.availableFleets)(&quot;key&quot;,&quot;id&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.availableFleets)}}function r2(t,e){1&amp;t&amp;&amp;xl(0),2&amp;t&amp;&amp;Cl(&quot; Flottes : &quot;,Za(2).fleetNames.join(&quot;, &quot;),&quot; &quot;)}function o2(t,e){if(1&amp;t&amp;&amp;(ra(0,s2,8,5,&quot;ng-template&quot;,2),ra(1,r2,1,1,&quot;ng-template&quot;,null,3,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,Za().editable)(&quot;ngIfElse&quot;,t)}}let a2=(()=&gt;{class t extends i0{constructor(t){super(),this.fleetsService=t,this.availableFleets=[],this.groupId$=new Qp(null)}ngOnInit(){this.subscriptions.push(QT([this.fleetsService.fleets$,this.groupId$]).subscribe(([t,e])=&gt;{this.availableFleets=t.filter(t=&gt;t.group_id===e)}))}ngOnChanges(t){t.groupId&amp;&amp;(this.groupId$.next(t.groupId.currentValue),t.groupId.firstChange||(this.criterion.fleets=[]))}get fleetNames(){return this.criterion.fleets.map(t=&gt;{var e;return(null!==(e=this.fleetsService.fleetsById[t])&amp;&amp;void 0!==e?e:{}).name}).filter(t=&gt;!!t)}}return t.\u0275fac=function(e){return new(e||t)(Da(yW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-fleet-filter&quot;]],inputs:{groupId:&quot;groupId&quot;},features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o,he],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;criterion-content&quot;],[1,&quot;d-block&quot;],[&quot;multiple&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;fleetSelection&quot;,&quot;ngModel&quot;],[3,&quot;model&quot;,&quot;values&quot;,&quot;key&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,o2,3,2,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.fleet)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,gC,oC,qT,wx,iw,i2,Bd,Sy],encapsulation:2,changeDetection:0}),t})();function l2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,10),La(1,&quot;app-flag&quot;,11),xl(2),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.flag),Sr(1),Oa(&quot;flag&quot;,t.flag),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function c2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,4),Ra(1,&quot;mat-form-field&quot;,5),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Pavillon&quot;),Fa(),Ra(4,&quot;mat-select&quot;,6,7),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.flags=e}),La(6,&quot;app-select-check-all&quot;,8),ra(7,l2,3,3,&quot;mat-option&quot;,9),Fa(),Fa(),Fa()}if(2&amp;t){const t=oa(5),e=Za(2);Sr(4),Oa(&quot;ngModel&quot;,e.criterion.flags),Sr(2),Oa(&quot;model&quot;,t)(&quot;values&quot;,e.countries)(&quot;key&quot;,&quot;flag&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.countries)}}function h2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,10),La(1,&quot;app-flag&quot;,11),xl(2),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.flag),Sr(1),Oa(&quot;flag&quot;,t.flag),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function u2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-select&quot;,12,7),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.flags=e}),La(2,&quot;app-select-check-all&quot;,8),ra(3,h2,3,3,&quot;mat-option&quot;,9),Fa()}if(2&amp;t){const t=oa(1),e=Za(2);Oa(&quot;ngModel&quot;,e.criterion.flags),Sr(2),Oa(&quot;model&quot;,t)(&quot;values&quot;,e.countries)(&quot;key&quot;,&quot;flag&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.countries)}}function d2(t,e){if(1&amp;t&amp;&amp;(ra(0,c2,8,5,&quot;ng-template&quot;,2),ra(1,u2,4,5,&quot;ng-template&quot;,null,3,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,Za().editable)(&quot;ngIfElse&quot;,t)}}let p2=(()=&gt;{class t extends i0{constructor(){super(...arguments),this.countries=bH}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-flag-filter&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;criterion-content&quot;],[1,&quot;d-block&quot;,&quot;px-3&quot;],[&quot;multiple&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;countrySelection&quot;,&quot;ngModel&quot;],[3,&quot;model&quot;,&quot;values&quot;,&quot;key&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;],[3,&quot;flag&quot;],[&quot;multiple&quot;,&quot;&quot;,&quot;disabled&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,d2,3,2,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.flag)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,gC,oC,qT,wx,iw,i2,Bd,Sy,aQ],encapsulation:2,changeDetection:0}),t})();function f2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,10),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.key),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function m2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,4),Ra(1,&quot;mat-form-field&quot;,5),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Types&quot;),Fa(),Ra(4,&quot;mat-select&quot;,6,7),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).criterion.types=e}),La(6,&quot;app-select-check-all&quot;,8),ra(7,f2,2,2,&quot;mat-option&quot;,9),Fa(),Fa(),Fa()}if(2&amp;t){const t=oa(5),e=Za(2);Sr(4),Oa(&quot;ngModel&quot;,e.criterion.types),Sr(2),Oa(&quot;model&quot;,t)(&quot;values&quot;,e.vesselTypes)(&quot;key&quot;,&quot;key&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.vesselTypes)}}function g2(t,e){1&amp;t&amp;&amp;xl(0),2&amp;t&amp;&amp;Cl(&quot; &quot;,Za(2).criteriaTypes.join(&quot;, &quot;),&quot; &quot;)}function A2(t,e){if(1&amp;t&amp;&amp;(ra(0,m2,8,5,&quot;ng-template&quot;,2),ra(1,g2,1,1,&quot;ng-template&quot;,null,3,Rh)),2&amp;t){const t=oa(2);Oa(&quot;ngIf&quot;,Za().editable)(&quot;ngIfElse&quot;,t)}}let v2=(()=&gt;{class t extends i0{constructor(){super(...arguments),this.typesControl=new Wx,this.vesselTypes=iU,this.vesselTypeLabelsByType=nU}get criteriaTypes(){return this.criterion.types.map(t=&gt;sU[t].name)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-type-filter&quot;]],features:[Wl([{provide:$y,useExisting:t,multi:!0}]),$o],decls:2,vars:4,consts:[[3,&quot;type&quot;,&quot;enable&quot;,&quot;editable&quot;,&quot;enableChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;readonly&quot;,&quot;&quot;],[1,&quot;criterion-content&quot;],[1,&quot;d-block&quot;],[&quot;multiple&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;typeSelection&quot;,&quot;ngModel&quot;],[3,&quot;model&quot;,&quot;values&quot;,&quot;key&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;app-alert-rule-criterion&quot;,0),Ha(&quot;enableChange&quot;,function(t){return e.enable=t}),ra(1,A2,3,2,&quot;ng-template&quot;,1),Fa()),2&amp;t&amp;&amp;(Oa(&quot;type&quot;,e.criteriaLabels.type)(&quot;enable&quot;,e.enable)(&quot;editable&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,e.criterion.enable))},directives:[c0,Nd,gC,oC,qT,wx,iw,i2,Bd,Sy],encapsulation:2,changeDetection:0}),t})();function _2(t,e){1&amp;t&amp;&amp;Na(0)}const b2=function(t){return{alert:t}};function y2(t,e){if(1&amp;t&amp;&amp;ra(0,_2,1,0,&quot;ng-container&quot;,6),2&amp;t){const t=Za();Oa(&quot;ngTemplateOutlet&quot;,t.titleRef)(&quot;ngTemplateOutletContext&quot;,eh(2,b2,t.alert))}}function x2(t,e){1&amp;t&amp;&amp;Na(0)}function w2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,10),ra(1,x2,1,0,&quot;ng-container&quot;,6),Fa(),Ra(2,&quot;div&quot;,11),lh(3,&quot;timeago&quot;),Ra(4,&quot;mat-icon&quot;,12),xl(5,&quot;access_time&quot;),Fa(),xl(6),lh(7,&quot;date&quot;),Fa()),2&amp;t){const t=Za();Sr(1),Oa(&quot;ngTemplateOutlet&quot;,t.titleRef)(&quot;ngTemplateOutletContext&quot;,eh(10,b2,t.alert)),Sr(1),Ja(&quot;title&quot;,ch(3,4,1e3*t.alert.start)),Sr(4),Cl(&quot; &quot;,uh(7,6,1e3*t.alert.start,&quot;yyyy-MM-dd HH:mm:ss z&quot;,t.mapConfigService.useUTCDates$.value&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}function C2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,13),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;more_vert&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Za(),Oa(&quot;matMenuTriggerFor&quot;,oa(6)))}function S2(t,e){1&amp;t&amp;&amp;Na(0)}function k2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za().unreadAlert()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;markunread&quot;),Fa(),xl(3,&quot; Marquer comme non-lu &quot;),Fa()}}function E2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,15),Ha(&quot;click&quot;,function(){return Le(t),Za().readAlert()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;drafts&quot;),Fa(),xl(3,&quot; Marquer comme lu &quot;),Fa()}}let M2=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.configService=t,this.historyService=e,this.mapConfigService=i,this.offlineService=n,this.mapService=s,this.workerService=r,this.highlight=!1,this.simple=!0,this.update=new mh}ngOnInit(){this.ensureMandatoryInputParams(&quot;alert&quot;)}locateAlert(){return jp(this,void 0,void 0,function*(){this.configService.devMode&amp;&amp;console.log(&quot;locate-alert&quot;,JSON.stringify(this.alert,null,2)),this.mapService.pingLocation([this.alert.lon,this.alert.lat]),this.mapService.centerOnLonLat([this.alert.lon,this.alert.lat]),this.alert.read||(yield this.readAlert())})}locateAndZoom(){this.mapService.locate([this.alert.lon,this.alert.lat])}readAlert(){return jp(this,void 0,void 0,function*(){yield this.workerService.alerts.markAlertAsRead(this.alert.id),this.alert.read=!0,this.emitUpdate()})}unreadAlert(){return jp(this,void 0,void 0,function*(){yield this.workerService.alerts.markAlertAsUnread(this.alert.id),this.alert.read=!1,this.emitUpdate()})}emitUpdate(){this.update.emit(this.alert)}}return t.\u0275fac=function(e){return new(e||t)(Da(jU),Da(Dj),Da(HU),Da(hW),Da(kj),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alert-item&quot;]],inputs:{alert:&quot;alert&quot;,titleRef:&quot;titleRef&quot;,menuItemsRef:&quot;menuItemsRef&quot;,highlight:&quot;highlight&quot;,simple:&quot;simple&quot;},outputs:{update:&quot;update&quot;},features:[$o],decls:14,vars:13,consts:[[1,&quot;alert-item&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Localiser l&#39;alerte (double-clic = zoom)&quot;,1,&quot;alert-item__content&quot;,3,&quot;click&quot;,&quot;dblclick&quot;],[3,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;alert-item__actions-button&quot;,&quot;title&quot;,&quot;Actions&quot;,3,&quot;matMenuTriggerFor&quot;,4,&quot;ngIf&quot;],[1,&quot;u-wide-menu&quot;],[&quot;alertActionsMenu&quot;,&quot;matMenu&quot;],[4,&quot;ngTemplateOutlet&quot;,&quot;ngTemplateOutletContext&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Marquer comme non-lu&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Marquer comme lu&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Visualiser la situation des navires&quot;,3,&quot;click&quot;],[1,&quot;alert-item__title&quot;],[1,&quot;alert-item__timestamp&quot;,3,&quot;title&quot;],[&quot;title&quot;,&quot;R\xe9ception&quot;,1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Actions&quot;,1,&quot;alert-item__actions-button&quot;,3,&quot;matMenuTriggerFor&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Marquer comme non-lu&quot;,3,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Marquer comme lu&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;button&quot;,1),Ha(&quot;click&quot;,function(){return e.locateAlert()})(&quot;dblclick&quot;,function(){return e.locateAndZoom()}),ra(2,y2,1,4,&quot;ng-template&quot;,2),ra(3,w2,8,12,&quot;ng-template&quot;,2),Fa(),ra(4,C2,3,1,&quot;button&quot;,3),Ra(5,&quot;mat-menu&quot;,4,5),ra(7,S2,1,0,&quot;ng-container&quot;,6),ra(8,k2,4,0,&quot;button&quot;,7),ra(9,E2,4,0,&quot;button&quot;,8),Ra(10,&quot;button&quot;,9),Ha(&quot;click&quot;,function(){return e.historyService.setTimestamp(e.alert.start)}),Ra(11,&quot;mat-icon&quot;),xl(12,&quot;history&quot;),Fa(),xl(13,&quot; Visualiser la situation des navires &quot;),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(cl(&quot;alert-item--unread&quot;,!e.alert.read)(&quot;alert-item--highlighted&quot;,e.highlight),Sr(2),Oa(&quot;ngIf&quot;,!e.simple),Sr(1),Oa(&quot;ngIf&quot;,e.simple),Sr(1),Oa(&quot;ngIf&quot;,!e.offlineService.isOffline$.value),Sr(3),Oa(&quot;ngTemplateOutlet&quot;,e.menuItemsRef)(&quot;ngTemplateOutletContext&quot;,eh(11,b2,e.alert)),Sr(1),Oa(&quot;ngIf&quot;,e.alert.read),Sr(1),Oa(&quot;ngIf&quot;,!e.alert.read))},directives:[Ry,Nd,aJ,Wd,nJ,hE,dJ],pipes:[VL,ep],styles:[&quot;.alert-item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:stretch;justify-content:stretch;transition:2s ease-out background-color;min-height:82px;padding-left:6px}.alert-item--unread[_ngcontent-%COMP%]{font-weight:600;border-left:6px solid #3778ff;padding-left:0}.alert-item--highlighted[_ngcontent-%COMP%]{background-color:#f32121;transition:0s}.alert-item__content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:stretch;justify-content:center;line-height:24px;padding:.5em;font-weight:inherit!important;text-align:left}.alert-item__title[_ngcontent-%COMP%]{padding:0;width:100%;display:flex;justify-content:space-between;align-items:center;font-size:1.1em}.alert-item__actions-button[_ngcontent-%COMP%]{min-width:inherit!important}.alert-item__timestamp[_ngcontent-%COMP%]{color:#424242;font-weight:500;display:flex;align-items:center}&quot;],changeDetection:0}),t})();const T2=[&quot;alertElements&quot;];function I2(t,e){if(1&amp;t&amp;&amp;xl(0),2&amp;t){const t=Za();Cl(&quot; &quot;,t.activeRulesFiltersCount&gt;0?t.activeRulesFiltersCount+&quot; filtre(s) de r\xe8gles actif(s)&quot;:&quot;Aucun filtre de r\xe8gles actif&quot;,&quot; &quot;)}}function D2(t,e){1&amp;t&amp;&amp;xl(0,&quot; Afficher les filtres &quot;)}function O2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,15),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.id),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function P2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;h3&quot;,6),xl(1,&quot; R\xe8gles d&#39;alertes &quot;),Ra(2,&quot;button&quot;,12),Ha(&quot;click&quot;,function(){return Le(t),Za().resetRulesFilters()}),xl(3,&quot; R\xe9initialiser &quot;),Fa(),Fa(),Ra(4,&quot;mat-list-item&quot;),Ra(5,&quot;mat-form-field&quot;),Ra(6,&quot;mat-label&quot;),xl(7,&quot;R\xe8gles&quot;),Fa(),Ra(8,&quot;mat-select&quot;,13),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().updateAlertRulesFilter(e)}),ra(9,O2,2,2,&quot;mat-option&quot;,14),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(8),Oa(&quot;ngModel&quot;,t.alertsFilter.rules),Sr(1),Oa(&quot;ngForOf&quot;,t.alertRules)}}function R2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-alert-item&quot;,18,19),Ha(&quot;update&quot;,function(e){const i=Le(t).$implicit;return Za(2).updateAlert(i.id,e)}),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(2);Oa(&quot;titleRef&quot;,i.alertTitleRef)(&quot;simple&quot;,i.simpleItems)(&quot;menuItemsRef&quot;,i.alertMenuItemsRef)(&quot;alert&quot;,t)(&quot;highlight&quot;,t.id===i.highlightedAlertId),ea(&quot;data-id&quot;,t.id)}}function F2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,16),ra(1,R2,2,6,&quot;app-alert-item&quot;,17),Fa()),2&amp;t){const t=Za();Sr(1),Oa(&quot;ngForOf&quot;,t.displayedAlerts)(&quot;ngForTrackBy&quot;,t.trackByIndex)}}function L2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,20),xl(1,&quot; Aucune alerte ne correspond aux filtres\n&quot;),Fa())}function B2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,20),xl(1,&quot; Aucune alerte pour cette p\xe9riode\n&quot;),Fa())}let z2=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.changeDetectorRef=t,this.ngZone=e,this.alertRulesService=i,this.configService=n,this.interactionsService=s,this.enableRuleFilters=!1,this.simpleItems=!0,this.alertRules=[],this.alertsFilter=new wU,this.filteredAlerts=[],this.displayedAlerts=[],this.currentAlertsPageIndex=0,this.alertsPageSize=30,this.highlightedAlertId=null,this.alertsFilter$=new Qp(new wU),this.currentAlertsPageIndex$=new Qp(0),this.filteredAlerts$=new Qp([])}ngOnInit(){if(this.ensureMandatoryInputParams(&quot;alerts$&quot;),this.subscriptions.push(this.alertRulesService.alertRules$.pipe(FO()).subscribe(t=&gt;{this.alertRules=t,this.alertRules.map(t=&gt;t.id)})),this.configService.alertsFilter){const t=this.alertRules.map(t=&gt;t.id);this.configService.alertsFilter.rules=this.configService.alertsFilter.rules.filter(e=&gt;t.includes(e)),this.alertsFilter$.next(this.configService.alertsFilter)}else this.resetRulesFilters();this.subscriptions.push(this.alerts$.subscribe(t=&gt;{this.alerts=t})),this.subscriptions.push(QT([this.alerts$,this.alertsFilter$]).pipe(M(([t,e])=&gt;t.filter(t=&gt;(0===e.rules.length||e.rules.includes(t.rule_id))&amp;&amp;(e.showReadAlerts||!t.read)&amp;&amp;(e.showFalsePositiveAlerts||!t.false_positive)))).subscribe(t=&gt;{this.filteredAlerts=t,this.filteredAlerts$.next(t)})),this.subscriptions.push(QT([this.filteredAlerts$,this.currentAlertsPageIndex$]).pipe(gf(([t,e])=&gt;{if(0===t.length&amp;&amp;0!==e)return this.showAlertsPage(0),!1;const i=e*this.alertsPageSize;if(0===t.slice(i,i+this.alertsPageSize).length&amp;&amp;t.length&gt;0){const e=Math.ceil(t.length/this.alertsPageSize)-1;return this.showAlertsPage(-1===e?0:e),!1}return!0}),M(([t,e])=&gt;{const i=e*this.alertsPageSize;return t.slice(i,i+this.alertsPageSize)})).subscribe(t=&gt;{this.displayedAlerts=t,this.changeDetectorRef.markForCheck()})),this.subscriptions.push(this.alertsFilter$.subscribe(t=&gt;{this.alertsFilter=t,this.configService.set(&quot;alertsFilter&quot;,t),this.showAlertsPage(0)})),this.subscriptions.push(this.interactionsService.selectAlertFeature$.subscribe(t=&gt;{const e=this.getPageIndexForAlertId(t.id);-1!==e&amp;&amp;this.currentAlertsPageIndex!==e&amp;&amp;this.showAlertsPage(e),setTimeout(()=&gt;{const e=this.alertElements.find(e=&gt;e.nativeElement.dataset.id===t.id);e&amp;&amp;e.nativeElement.scrollIntoView({behavior:&quot;smooth&quot;})},225),this.highlightedAlertId=t.id,this.ngZone.run(()=&gt;{setTimeout(()=&gt;{this.highlightedAlertId=null,this.changeDetectorRef.markForCheck()},16),this.changeDetectorRef.markForCheck()})}))}get activeRulesFiltersCount(){const t=this.alertsFilter.rules.length;return t===this.alertRules.length?0:t}updateShowReadAlerts(t){this.alertsFilter.showReadAlerts=t,this.triggerAlertsFilterUpdate()}updateShowFalsePositiveAlerts(t){this.alertsFilter.showFalsePositiveAlerts=t,this.triggerAlertsFilterUpdate()}updateAlertRulesFilter(t){this.alertsFilter.rules=t,this.triggerAlertsFilterUpdate()}resetRulesFilters(){this.updateAlertRulesFilter(this.alertRules.map(t=&gt;t.id))}triggerAlertsFilterUpdate(){this.alertsFilter$.next(this.alertsFilter)}showAlertsPage(t){this.currentAlertsPageIndex$.next(t),this.currentAlertsPageIndex=t}trackByIndex(t){return t}updateAlert(t,e){const i=this.alerts.find(e=&gt;e.id===t);if(!i)throw new Error(`Missing alert with id &#39;${t}&#39;`);Object.assign(i,e),this.alerts$.next(this.alerts)}getPageIndexForAlertId(t){const e=this.filteredAlerts.findIndex(e=&gt;e.id===t);if(-1===e)return-1;const i=Math.ceil((e+1)/this.alertsPageSize)-1;return-1===i?0:i}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(iu),Da(TH),Da(jU),Da(gW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alerts-list&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(T2,5,ec),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.alertElements=t)}},inputs:{alerts$:&quot;alerts$&quot;,enableRuleFilters:&quot;enableRuleFilters&quot;,alertTitleRef:&quot;alertTitleRef&quot;,alertMenuItemsRef:&quot;alertMenuItemsRef&quot;,simpleItems:&quot;simpleItems&quot;},features:[$o],decls:19,vars:12,consts:[[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Filtrer les alertes&quot;,1,&quot;alerts-list__filters&quot;,3,&quot;color&quot;,&quot;matMenuTriggerFor&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;disabledRuleFilters&quot;,&quot;&quot;],[1,&quot;u-wide-menu&quot;],[&quot;alertsFilterMenu&quot;,&quot;matMenu&quot;],[3,&quot;click&quot;],[&quot;mat-subheader&quot;,&quot;&quot;],[&quot;color&quot;,&quot;primary&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;ngIf&quot;],[&quot;class&quot;,&quot;scrollable&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;panel__content u-center&quot;,4,&quot;ngIf&quot;],[&quot;showFirstLastButtons&quot;,&quot;&quot;,&quot;hidePageSize&quot;,&quot;&quot;,3,&quot;pageIndex&quot;,&quot;length&quot;,&quot;pageSize&quot;,&quot;page&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9initialiser les filtres&quot;,1,&quot;alerts-list__reset-filters-btn&quot;,3,&quot;click&quot;],[&quot;multiple&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;],[1,&quot;scrollable&quot;],[3,&quot;titleRef&quot;,&quot;simple&quot;,&quot;menuItemsRef&quot;,&quot;alert&quot;,&quot;highlight&quot;,&quot;update&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[3,&quot;titleRef&quot;,&quot;simple&quot;,&quot;menuItemsRef&quot;,&quot;alert&quot;,&quot;highlight&quot;,&quot;update&quot;],[&quot;alertElements&quot;,&quot;&quot;],[1,&quot;panel__content&quot;,&quot;u-center&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,0),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;filter_list&quot;),Fa(),ra(3,I2,1,1,&quot;ng-template&quot;,1),ra(4,D2,1,0,&quot;ng-template&quot;,null,2,Rh),Fa(),Ra(6,&quot;mat-menu&quot;,3,4),Ra(8,&quot;mat-list&quot;,5),Ha(&quot;click&quot;,function(t){return t.stopPropagation()}),Ra(9,&quot;h2&quot;,6),xl(10,&quot;Filtres&quot;),Fa(),Ra(11,&quot;mat-list-item&quot;),Ra(12,&quot;mat-checkbox&quot;,7),Ha(&quot;ngModelChange&quot;,function(t){return e.updateShowReadAlerts(t)}),xl(13,&quot;Afficher les alertes lues&quot;),Fa(),Fa(),ra(14,P2,10,2,&quot;ng-template&quot;,8),Fa(),Fa(),ra(15,F2,2,2,&quot;div&quot;,9),ra(16,L2,2,0,&quot;div&quot;,10),ra(17,B2,2,0,&quot;div&quot;,10),Ra(18,&quot;mat-paginator&quot;,11),Ha(&quot;page&quot;,function(t){return e.showAlertsPage(t.pageIndex)}),Fa()),2&amp;t){const t=oa(5),i=oa(7);Oa(&quot;color&quot;,e.activeRulesFiltersCount?&quot;primary&quot;:&quot;default&quot;)(&quot;matMenuTriggerFor&quot;,i),Sr(3),Oa(&quot;ngIf&quot;,e.enableRuleFilters)(&quot;ngIfElse&quot;,t),Sr(9),Oa(&quot;ngModel&quot;,e.alertsFilter.showReadAlerts),Sr(2),Oa(&quot;ngIf&quot;,e.enableRuleFilters),Sr(1),Oa(&quot;ngIf&quot;,e.displayedAlerts.length),Sr(1),Oa(&quot;ngIf&quot;,!e.filteredAlerts.length&amp;&amp;e.alerts.length),Sr(1),Oa(&quot;ngIf&quot;,!e.alerts.length),Sr(1),Oa(&quot;pageIndex&quot;,e.currentAlertsPageIndex)(&quot;length&quot;,e.filteredAlerts.length)(&quot;pageSize&quot;,e.alertsPageSize)}},directives:[Ry,dJ,hE,Nd,aJ,kJ,TJ,IJ,qq,wx,iw,TI,gC,oC,qT,Bd,Sy,M2],styles:[&quot;[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.alerts-list__filters[_ngcontent-%COMP%]{background-color:#e4e7ec;width:100%}.alerts-list__reset-filters-btn[_ngcontent-%COMP%]{margin-left:2em}&quot;],changeDetection:0}),t})();function N2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,10),Ra(1,&quot;mat-icon&quot;,11),xl(2,&quot;access_time&quot;),Fa(),Ra(3,&quot;div&quot;,12),lh(4,&quot;timeago&quot;),xl(5),lh(6,&quot;date&quot;),Fa(),Fa()),2&amp;t){const t=Za();Sr(3),Ja(&quot;title&quot;,ch(4,2,1e3*t.ship.timestamp)),Sr(2),Cl(&quot; &quot;,uh(6,4,1e3*t.ship.timestamp,&quot;yyyy-MM-dd HH:mm:ss z&quot;,t.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}let V2=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.changeDetectorRef=t,this.mapConfigService=e,this.showTimestamp=!1,this.useUTCDates=!1,this.vesselTypeLabelsByType=nU}ngOnInit(){this.ensureMandatoryInputParams(&quot;ship&quot;),this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t,this.changeDetectorRef.markForCheck()}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(HU))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ship-item-small&quot;]],inputs:{ship:&quot;ship&quot;,showTimestamp:&quot;showTimestamp&quot;},features:[$o],decls:23,vars:7,consts:[[1,&quot;ship-item&quot;],[1,&quot;ship-item__col1&quot;],[1,&quot;u-flex&quot;,&quot;d-flex-center&quot;],[1,&quot;ship-item__flag&quot;,3,&quot;mmsi&quot;],[1,&quot;d-flex-column&quot;],[1,&quot;ship-item__name&quot;],[1,&quot;ship-item__type&quot;],[&quot;class&quot;,&quot;ship-item__timestamp&quot;,&quot;title&quot;,&quot;Derni\xe8re r\xe9ception&quot;,4,&quot;ngIf&quot;],[1,&quot;ship-item__col2&quot;],[1,&quot;ship-item__label&quot;],[&quot;title&quot;,&quot;Derni\xe8re r\xe9ception&quot;,1,&quot;ship-item__timestamp&quot;],[1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[3,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;div&quot;,2),La(3,&quot;app-flag&quot;,3),Ra(4,&quot;div&quot;,4),Ra(5,&quot;div&quot;,5),xl(6),Fa(),Ra(7,&quot;small&quot;,6),xl(8),Fa(),Fa(),Fa(),ra(9,N2,7,8,&quot;div&quot;,7),Fa(),Ra(10,&quot;div&quot;,8),Ra(11,&quot;div&quot;),Ra(12,&quot;span&quot;,9),xl(13,&quot;MMSI&quot;),Fa(),xl(14),Fa(),Ra(15,&quot;div&quot;),Ra(16,&quot;span&quot;,9),xl(17,&quot;IMO&quot;),Fa(),xl(18),Fa(),Ra(19,&quot;div&quot;),Ra(20,&quot;span&quot;,9),xl(21,&quot;Callsign&quot;),Fa(),xl(22),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(3),Oa(&quot;mmsi&quot;,e.ship.mmsi),Sr(3),wl(e.ship.name||&quot;?&quot;),Sr(2),wl(e.ship.cargo?e.vesselTypeLabelsByType[e.ship.cargo]:&quot;?&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.showTimestamp),Sr(5),Cl(&quot; &quot;,e.ship.mmsi,&quot;&quot;),Sr(4),Cl(&quot; &quot;,e.ship.imo||&quot;?&quot;,&quot;&quot;),Sr(4),Cl(&quot; &quot;,e.ship.callsign||&quot;?&quot;,&quot;&quot;))},directives:[aQ,Nd,hE],pipes:[VL,ep],styles:[&quot;[_nghost-%COMP%]{flex:1;display:block;position:relative}.ship-item[_ngcontent-%COMP%]{font-size:12px;line-height:16px;display:flex}.ship-item__col1[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.ship-item__col2[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:right}.ship-item__flag[_ngcontent-%COMP%]{margin-right:4px}.ship-item__name[_ngcontent-%COMP%]{font-size:14px}.ship-item__type[_ngcontent-%COMP%]{line-height:1em;font-size:11px}.ship-item__timestamp[_ngcontent-%COMP%]{margin-top:4px;display:flex;align-items:center;color:gray}.ship-item__timestamp[_ngcontent-%COMP%] &gt; .mat-icon[_ngcontent-%COMP%]{font-size:1em;height:1em;width:1em;margin-right:.3em;margin-left:.3em}.ship-item__label[_ngcontent-%COMP%]{color:gray;font-size:10px}&quot;],changeDetection:0}),t})();function $2(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,5)}function U2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;,31),xl(1,&quot; Ce champ ne peut \xeatre vide. &quot;),Fa())}function j2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-form-field&quot;,25),Ra(1,&quot;input&quot;,26,27),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.name=e}),Fa(),ra(3,U2,2,0,&quot;mat-error&quot;,28),Fa(),Ra(4,&quot;button&quot;,29),Ha(&quot;click&quot;,function(){return Le(t),Za(2).save()}),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;check&quot;),Fa(),Fa(),Ra(7,&quot;button&quot;,30),Ra(8,&quot;mat-icon&quot;),xl(9,&quot;clear&quot;),Fa(),Fa()}if(2&amp;t){const t=oa(2);Za();const e=oa(1),i=Za();Sr(1),Oa(&quot;ngModel&quot;,i.alertRule.name),Sr(2),Oa(&quot;ngIf&quot;,null==t.errors?null:t.errors.required),Sr(1),Oa(&quot;disabled&quot;,!e.form.valid),Sr(3),Oa(&quot;routerLink&quot;,i.newRule?&quot;/alerts/rules&quot;:&quot;/alerts/rules/&quot;+i.alertRule.id)}}function H2(t,e){if(1&amp;t){const t=Va();La(0,&quot;div&quot;,15),Ra(1,&quot;button&quot;,33),Ra(2,&quot;mat-icon&quot;),xl(3,&quot;create&quot;),Fa(),Fa(),Ra(4,&quot;button&quot;,34),Ha(&quot;click&quot;,function(){return Le(t),Za(3).delete()}),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;delete&quot;),Fa(),Fa()}if(2&amp;t){const t=Za(3);Sr(1),Oa(&quot;routerLink&quot;,&quot;/alerts/rules/&quot;+t.alertRule.id+&quot;/edit&quot;)}}function G2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;h2&quot;,32),xl(1),Fa(),ra(2,H2,7,1,&quot;ng-template&quot;,4)),2&amp;t){const t=Za(2);Sr(1),Cl(&quot; &quot;,t.alertRule.name,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,t.canEdit)}}function q2(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,39),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.id),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function W2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,35),Ra(1,&quot;mat-form-field&quot;,36),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Groupe&quot;),Fa(),Ra(4,&quot;mat-select&quot;,37),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.group_id=e}),ra(5,q2,2,2,&quot;mat-option&quot;,38),Fa(),Ra(6,&quot;mat-hint&quot;),xl(7,&quot; Attention, changer le groupe r\xe9initialisera les zones et flottes utilis\xe9es &quot;),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(4),Oa(&quot;ngModel&quot;,t.alertRule.group_id),Sr(1),Oa(&quot;ngForOf&quot;,t.updatableGroups)}}function Y2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,18),Ra(1,&quot;mat-chip-list&quot;,13),Ra(2,&quot;mat-chip&quot;,40),xl(3,&quot; Configuration incorrecte &quot;),Fa(),Fa(),Fa())}function Z2(t,e){if(1&amp;t){const t=Va();xl(0,&quot; \xa0 &quot;),Ra(1,&quot;mat-slide-toggle&quot;,41),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.active=e}),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;title&quot;,t.alertRule.active?&quot;D\xe9sactiver&quot;:&quot;Activer&quot;)(&quot;ngModel&quot;,t.alertRule.active)}}function K2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,42),xl(1,&quot; Une r\xe8gle active va permettre au serveur d&#39;analyser les donn\xe9es en temps r\xe9el et remonter des alertes en fonction des crit\xe8res choisis. &quot;),Fa(),Ra(2,&quot;div&quot;,42),xl(3,&quot; Une r\xe8gle d\xe9sactiv\xe9e ne remontera aucune nouvelle alerte. &quot;),Fa(),La(4,&quot;br&quot;))}function X2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;),xl(1,&quot; Rapport quotidien &quot;),Ra(2,&quot;mat-icon&quot;,43),xl(3,&quot;help&quot;),Fa(),xl(4,&quot; :\xa0 &quot;),Ra(5,&quot;mat-slide-toggle&quot;,44),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.enableDailyReport=e}),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(5),Oa(&quot;title&quot;,t.alertRule.enableDailyReport?&quot;D\xe9sactiver le rapport&quot;:&quot;Activer le rapport&quot;)(&quot;ngModel&quot;,t.alertRule.enableDailyReport)(&quot;disabled&quot;,!t.editMode)}}function Q2(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,45),xl(1,&quot; Au moins un crit\xe8re est n\xe9cessaire pour d\xe9clencher les alertes. &quot;),Fa())}function J2(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-ais-interruption-criterion&quot;,46),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.aisInterruption=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.aisInterruption)(&quot;editable&quot;,t.editMode)}}function t3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-transhipment-criterion&quot;,47),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.transhipment=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.transhipment)(&quot;editable&quot;,t.editMode)}}function e3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-erratic-route-criterion&quot;,48),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.erraticRoute=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.erraticRoute)(&quot;editable&quot;,t.editMode)}}function i3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-speed-criterion&quot;,49),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.speed=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.speed)(&quot;editable&quot;,t.editMode)}}function n3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-passage-in-zone-criterion&quot;,50),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.passageInZone=e})(&quot;updateZones&quot;,function(){return Le(t),Za(2).refreshAlertRulesZones()}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.passageInZone)(&quot;editable&quot;,t.editMode)(&quot;groupId&quot;,t.alertRule.group_id?t.alertRule.group_id:null)}}function s3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-spoofing-criterion&quot;,51),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.spoofing=e}),Fa()}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.spoofing)(&quot;editable&quot;,t.editMode)}}function r3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-identifier-filter&quot;,52),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.identifier=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.identifier)(&quot;editable&quot;,t.editMode)}}function o3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-fleet-filter&quot;,53),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.fleet=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.fleet)(&quot;editable&quot;,t.editMode)(&quot;groupId&quot;,t.alertRule.group_id?t.alertRule.group_id:null)}}function a3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-flag-filter&quot;,54),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.flag=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.flag)(&quot;editable&quot;,t.editMode)}}function l3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-type-filter&quot;,55),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).alertRule.criteria.type=e}),Fa(),La(1,&quot;mat-divider&quot;)}if(2&amp;t){const t=Za(2);Oa(&quot;ngModel&quot;,t.alertRule.criteria.type)(&quot;editable&quot;,t.editMode)}}function c3(t,e){if(1&amp;t&amp;&amp;(La(0,&quot;app-ship-item-small&quot;,62),Ra(1,&quot;div&quot;,63),lh(2,&quot;timeago&quot;),Ra(3,&quot;mat-icon&quot;,64),xl(4,&quot;access_time&quot;),Fa(),xl(5),lh(6,&quot;date&quot;),Fa()),2&amp;t){const t=e.alert,i=Za(3);Oa(&quot;ship&quot;,t.ship),Sr(1),Ja(&quot;title&quot;,ch(2,3,1e3*t.start)),Sr(4),Cl(&quot; &quot;,uh(6,5,1e3*t.start,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}const h3=function(t){return[&quot;/ships/&quot;,t]};function u3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,65),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;info&quot;),Fa(),xl(3,&quot; Voir d\xe9tail Navire &quot;),Fa(),Ra(4,&quot;button&quot;,66),Ha(&quot;click&quot;,function(){const e=Le(t).alert;return Za(3).locateShip(e.mmsi)}),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;center_focus_strong&quot;),Fa(),xl(7,&quot; Voir position Navire &quot;),Fa()}2&amp;t&amp;&amp;Oa(&quot;routerLink&quot;,eh(1,h3,e.alert.mmsi))}function d3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,56),Ra(1,&quot;h4&quot;,57),xl(2,&quot;Alertes&quot;),Fa(),Ra(3,&quot;button&quot;,58),Ha(&quot;click&quot;,function(){return Le(t),Za(2).exportAlertsAsCSV()}),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;file_download&quot;),Fa(),Fa(),Fa(),La(6,&quot;app-alerts-list&quot;,59),ra(7,c3,7,9,&quot;ng-template&quot;,null,60,Rh),ra(9,u3,8,3,&quot;ng-template&quot;,null,61,Rh)}if(2&amp;t){const t=oa(8),e=oa(10),i=Za(2);Sr(3),Oa(&quot;disabled&quot;,0===i.alerts$.value.length),Sr(3),Oa(&quot;alerts$&quot;,i.alerts$)(&quot;simpleItems&quot;,!1)(&quot;alertTitleRef&quot;,t)(&quot;alertMenuItemsRef&quot;,e)}}function p3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;ng-form&quot;,6,7),Ra(2,&quot;div&quot;,8),ra(3,j2,10,4,&quot;ng-template&quot;,4),ra(4,G2,3,2,&quot;ng-template&quot;,4),Fa(),Ra(5,&quot;div&quot;,9),ra(6,W2,8,2,&quot;div&quot;,10),ra(7,Y2,4,0,&quot;div&quot;,11),Ra(8,&quot;div&quot;,12),xl(9,&quot; \xc9tat :\xa0 &quot;),Ra(10,&quot;mat-chip-list&quot;,13),Ra(11,&quot;mat-chip&quot;,14),xl(12),Fa(),Fa(),ra(13,Z2,2,2,&quot;ng-template&quot;,4),La(14,&quot;div&quot;,15),Ra(15,&quot;button&quot;,16),Ha(&quot;click&quot;,function(){Le(t);const e=Za();return e.showColorPicker=!e.showColorPicker}),Fa(),Ra(16,&quot;input&quot;,17),Ha(&quot;colorPickerChange&quot;,function(e){return Le(t),Za().alertRule.color=e})(&quot;cpToggleChange&quot;,function(e){return Le(t),Za().showColorPicker=e}),Fa(),Fa(),Ra(17,&quot;div&quot;,18),ra(18,K2,5,0,&quot;ng-template&quot;,4),ra(19,X2,6,3,&quot;div&quot;,19),La(20,&quot;br&quot;),xl(21,&quot; R\xe9sum\xe9 : &quot;),La(22,&quot;div&quot;,20),Fa(),La(23,&quot;mat-divider&quot;),Ra(24,&quot;h3&quot;,21),xl(25,&quot;Zone&quot;),Fa(),Ra(26,&quot;app-zone-filter&quot;,22),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().alertRule.criteria.zone=e})(&quot;updateZones&quot;,function(){return Le(t),Za().refreshAlertRulesZones()}),Fa(),La(27,&quot;mat-divider&quot;),Ra(28,&quot;h3&quot;,21),xl(29,&quot;Crit\xe8res&quot;),Fa(),ra(30,Q2,2,0,&quot;div&quot;,23),ra(31,J2,2,2,&quot;ng-template&quot;,4),ra(32,t3,2,2,&quot;ng-template&quot;,4),ra(33,e3,2,2,&quot;ng-template&quot;,4),ra(34,i3,2,2,&quot;ng-template&quot;,4),ra(35,n3,2,3,&quot;ng-template&quot;,4),ra(36,s3,1,2,&quot;ng-template&quot;,4),Ra(37,&quot;h3&quot;,21),xl(38,&quot;Filtres&quot;),Fa(),Ra(39,&quot;div&quot;,24),xl(40,&quot; L&#39;ajout de filtres \xe0 une r\xe8gle permet de diminuer le nombre d&#39;alertes. &quot;),Fa(),Ra(41,&quot;h4&quot;,21),xl(42,&quot;Sur navire&quot;),Fa(),ra(43,r3,2,2,&quot;ng-template&quot;,4),ra(44,o3,2,3,&quot;ng-template&quot;,4),ra(45,a3,2,2,&quot;ng-template&quot;,4),ra(46,l3,2,2,&quot;ng-template&quot;,4),ra(47,d3,11,5,&quot;ng-template&quot;,4),Fa(),Fa()}if(2&amp;t){const t=oa(1),e=Za();Sr(3),Oa(&quot;ngIf&quot;,e.editMode),Sr(1),Oa(&quot;ngIf&quot;,!e.editMode),Sr(2),Oa(&quot;ngIf&quot;,e.editMode&amp;&amp;e.newRule&amp;&amp;e.updatableGroups.length&gt;1),Sr(1),Oa(&quot;ngIf&quot;,!e.editMode&amp;&amp;!e.alertRule.validZone),Sr(4),Oa(&quot;disabled&quot;,!e.alertRule.active),Sr(1),Cl(&quot; &quot;,e.alertRule.active?&quot;Active&quot;:&quot;D\xe9sactiv\xe9e&quot;,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,e.editMode),Sr(2),ll(&quot;background-color&quot;,e.alertRule.color),Oa(&quot;disabled&quot;,!e.editMode)(&quot;title&quot;,e.editMode?&quot;Changer la couleur des alertes de la r\xe8gle&quot;:&quot;Couleur des alertes de la r\xe8gle&quot;),Sr(1),Oa(&quot;colorPicker&quot;,e.alertRule.color)(&quot;cpAlphaChannel&quot;,&quot;disabled&quot;)(&quot;cpOutputFormat&quot;,&quot;hex&quot;)(&quot;cpToggle&quot;,e.showColorPicker),Sr(2),Oa(&quot;ngIf&quot;,e.editMode),Sr(1),Oa(&quot;ngIf&quot;,&quot;&quot;===e.alertRule.group_id),Sr(3),Oa(&quot;innerHTML&quot;,e.summaryHtml,ws),Sr(4),Oa(&quot;ngModel&quot;,e.alertRule.criteria.zone)(&quot;editable&quot;,e.editMode)(&quot;groupId&quot;,e.alertRule.group_id?e.alertRule.group_id:null),Sr(4),Oa(&quot;ngIf&quot;,null==t.errors?null:t.errors.missingCriterion),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.aisInterruption.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.transhipment.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.erraticRoute.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.speed.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.passageInZone.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.spoofing.enable),Sr(7),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.identifier.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.fleet.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.flag.enable),Sr(1),Oa(&quot;ngIf&quot;,e.editMode||e.alertRule.criteria.type.enable),Sr(1),Oa(&quot;ngIf&quot;,!e.editMode)}}let f3=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,m){super(),this.activatedRoute=t,this.domSanitizer=e,this.router=i,this.titleService=n,this.alertsService=s,this.alertRulesService=r,this.configService=o,this.editZoneService=a,this.fleetsService=l,this.groupsService=c,this.mapConfigService=h,this.mapService=u,this.timeRangeService=d,this.zonesLayerService=p,this.uiService=f,this.workerService=m,this.alertRuleId$=new Qp(null),this.alertRule$=new Qp(null),this.alerts$=new Qp([]),this.editMode=!1,this.newRule=!1,this.showColorPicker=!1,this.canEdit=!1,this.useUTCDates=!1,this.summary=&quot;&quot;,this.summaryHtml=&quot;&quot;,this.updatableGroups=[],this.save=()=&gt;jp(this,void 0,void 0,function*(){if(this.newRule){const t=yield this.alertRulesService.createAlertRule(this.alertRule);yield this.router.navigateByUrl(`/alerts/rules/${t}`)}else yield this.alertRulesService.updateAlertRule(this.alertRule),yield this.router.navigateByUrl(`/alerts/rules/${this.alertRule.id}`)})}ngOnInit(){this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t}),this.activatedRoute.data.subscribe(t=&gt;{this.editMode=!!t.edit,this.newRule=!!t.new}),this.alertRuleId$.pipe(Sf(1)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){this.editMode?yield this.editAlertRule(t):yield this.viewAlertRule(t)})),QT([this.activatedRoute.paramMap,this.activatedRoute.queryParams]).subscribe(([t,e])=&gt;jp(this,void 0,void 0,function*(){this.newRule?(this.alertRule=function(t){const e={name:&quot;&quot;,active:!0,criteria:{},color:&quot;#5e12e2&quot;,enableDailyReport:!1,validZone:!1,group_id:null!=t?t:&quot;&quot;};return _H(e.criteria),e}(e.groupId),this.titleService.setTitle(&quot;Nouvelle r\xe8gle - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView()):this.alertRuleId$.next(t.get(&quot;alertRuleId&quot;))})),this.groupsService.updatableGroups$.subscribe(t=&gt;{this.updatableGroups=t}),this.alertRule$.pipe(Sf(1)).subscribe(t=&gt;{this.titleService.setTitle(`R\xe8gle ${t.name} - ANAIS`),this.alertRule=t,this.refreshAlertRulesSummary(),this.refreshAlertRulesZones()}),QT([this.alertRule$.pipe(Sf(1)),this.groupsService.updatableGroups$]).subscribe(([t,e])=&gt;{this.canEdit=null===t.group_id||e.some(e=&gt;e.id===t.group_id)})),this.subscriptions.push(this.editMode?this.editZoneService.editedZone$.pipe(Sf(1),Mf(),Ej(0)).subscribe(t=&gt;{t||(this.refreshAlertRulesZones(),this.refreshAlertRulesSummary())}):QT([this.alertRuleId$,this.timeRangeService.timeRange$]).subscribe(([t,e])=&gt;jp(this,void 0,void 0,function*(){if(t){const i=yield this.workerService.alertRules.getAlertRuleAlerts(t,e.start,e.end),[n,s]=this.alertRulesService.getAlertRuleColor(t);i.forEach(t=&gt;{t.color=n,t.rgbVecColor=s}),this.alertsService.updateAlerts(i),this.alerts$.next(i)}})))}ngOnDestroy(){super.ngOnDestroy(),this.zonesLayerService.clear(),this.editZoneService.cancelEditing(),this.alertsService.updateAlerts([]),this.alertRulesService.deselectAlertRule()}ngDoCheck(){this.refreshAlertRulesSummary()}editAlertRule(t){return jp(this,void 0,void 0,function*(){yield this.fetchAlertRule(t)})}viewAlertRule(t){return jp(this,void 0,void 0,function*(){this.alertRuleId!==t&amp;&amp;(this.alertRuleId=t),yield this.fetchAlertRule(t)})}refreshAlertRulesZones(){this.zonesLayerService.updateZones(function(t){return[].concat(t.criteria.passageInZone.enable?t.criteria.passageInZone.passages.flatMap(t=&gt;t.zone):[]).concat(t.criteria.zone.enable?t.criteria.zone.zones:[])}(this.alertRule))}refreshAlertRulesSummary(){if(this.alertRule){const t=function(t,e){var i,n,s,r,o,a,l,c,h,u,d;const p=[&quot;Tous les navires &quot;],f=[];if((null===(i=t.criteria.identifier)||void 0===i?void 0:i.enable)&amp;&amp;f.push(`&lt;br&gt;- dont les identifiants sont ${t.criteria.identifier.identifiers.map(t=&gt;`&lt;em&gt;${mU(t)}&lt;/em&gt;`).join(&quot; OU &quot;)}`),null===(n=t.criteria.fleet)||void 0===n?void 0:n.enable){const i=t.criteria.fleet.fleets.map(t=&gt;{var i,n;return null===(n=null!==(i=e.find(e=&gt;e.id===t))&amp;&amp;void 0!==i?i:{})||void 0===n?void 0:n.name}).filter(t=&gt;!!t);f.push(`&lt;br&gt;- faisant partie ${t.criteria.fleet.fleets.length&gt;1?&quot;des flottes&quot;:&quot;de la flotte&quot;} ${i.map(t=&gt;`&lt;em&gt;${mU(t)}&lt;/em&gt;`).join(&quot; OU &quot;)}`)}(null===(s=t.criteria.flag)||void 0===s?void 0:s.enable)&amp;&amp;f.push(t.criteria.flag.flags.length&lt;5?`&lt;br&gt;- de pavillon ${t.criteria.flag.flags.map(t=&gt;`&lt;span class=&quot;fi fi-${mU(t)}&quot; style=&quot;margin-right: 5px&quot;&gt;&lt;/span&gt;&lt;em&gt;${yH[t]}&lt;/em&gt;`).join(&quot; OU &quot;)}`:`&lt;br&gt;- de ${t.criteria.flag.flags.length} pavillons`),(null===(r=t.criteria.type)||void 0===r?void 0:r.enable)&amp;&amp;f.push(`&lt;br&gt;- de type ${t.criteria.type.types.map(t=&gt;`&lt;em&gt;${sU[t].name}&lt;/em&gt;`).join(&quot; OU &quot;)}`),f.length&gt;0&amp;&amp;(p.push(&quot;:&quot;),p.push(f.join(&quot;&quot;)),p.push(&quot;&lt;br&gt;&quot;));const m=[];if((null===(o=t.criteria.aisInterruption)||void 0===o?void 0:o.enable)&amp;&amp;m.push(&quot;&lt;br&gt;- coup\xe9 leur transmission AIS&quot;),(null===(a=t.criteria.transhipment)||void 0===a?void 0:a.enable)&amp;&amp;m.push(&quot;&lt;br&gt;- particip\xe9 \xe0 un transbordement&quot;),(null===(l=t.criteria.erraticRoute)||void 0===l?void 0:l.enable)&amp;&amp;m.push(&quot;&lt;br&gt;- navigu\xe9 de fa\xe7on erratique&quot;),(null===(c=t.criteria.speed)||void 0===c?void 0:c.enable)&amp;&amp;m.push(`&lt;br&gt;- eu une vitesse entre &lt;em&gt;${t.criteria.speed.min}&lt;/em&gt; et &lt;em&gt;${t.criteria.speed.max}&lt;/em&gt; noeuds`),null===(h=t.criteria.passageInZone)||void 0===h?void 0:h.enable){const e=t.criteria.passageInZone.sequential?&quot; PUIS &quot;:&quot; ET &quot;;m.push(`&lt;br&gt;- navigu\xe9 dans ${t.criteria.passageInZone.passages.length&gt;1?&quot;les zones&quot;:&quot;la zone&quot;} ${t.criteria.passageInZone.passages.map(t=&gt;`&lt;em&gt;${mU(t.zone.name)}&lt;/em&gt;`).join(e)}`),t.criteria.passageInZone.passages.length&gt;1&amp;&amp;m.push(` dans un intervalle de ${AH[t.criteria.passageInZone.timeWindow]}`)}return(null===(u=t.criteria.spoofing)||void 0===u?void 0:u.enable)&amp;&amp;m.push(&quot;&lt;br&gt;- modifi\xe9 ses identifiants AIS&quot;),0===m.length?&quot;Il faut s\xe9lectionner au moins un crit\xe8re avant d&#39;avoir une r\xe8gle applicable&quot;:(p.push(&quot;ayant :&quot;),p.push(m.join(&quot;&quot;)),(null===(d=t.criteria.zone)||void 0===d?void 0:d.enable)&amp;&amp;p.push(`&lt;br&gt;dans ${t.criteria.zone.zones.length&gt;1?&quot;les zones&quot;:&quot;la zone&quot;} ${t.criteria.zone.zones.map(t=&gt;`&lt;em&gt;${mU(t.name)}&lt;/em&gt;`).join(&quot; OU &quot;)}`),p.push(&quot;.&quot;),p.join(&quot;&quot;))}(this.alertRule,this.fleetsService.fleets$.value);t!==this.summary&amp;&amp;(this.summary=t,this.summaryHtml=this.domSanitizer.bypassSecurityTrustHtml(t))}}delete(){this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Une fois supprim\xe9e, cette r\xe8gle ne sera plus accessible. Confirmez-vous la suppression de cette r\xe8gle ?&quot;,action:t=&gt;jp(this,void 0,void 0,function*(){t&amp;&amp;(yield this.alertRulesService.deleteAlertRule(this.alertRule.id),yield this.router.navigateByUrl(&quot;/alerts/rules&quot;))})})}locateShip(t){return jp(this,void 0,void 0,function*(){const e=yield this.workerService.ships.getShip(t);this.mapService.centerOnLonLat([e.lon,e.lat])})}fetchAlertRule(t){return jp(this,void 0,void 0,function*(){try{this.alertRule$.next(yield this.alertRulesService.selectAlertRule(t))}catch(e){throw e.notfound?(this.router.navigateByUrl(&quot;/alerts/rules&quot;).catch(()=&gt;{}),new Error(`La r\xe8gle &lt;${t}&gt; n&#39;existe pas.`)):e}})}exportAlertsAsCSV(){const t=this.timeRangeService.timeRange$.value,e=nq(t.start),i=nq(t.end);this.alerts$.value.forEach(t=&gt;{t.rule_name=this.alertRule.name}),iW(_Q(this.alerts$.value),`anais-alerts-${this.alertRule.name}-${e}-${i}.csv`,&quot;text/csv&quot;)}}return t.\u0275fac=function(e){return new(e||t)(Da(HP),Da(Lp),Da(dF),Da(Up),Da(IH),Da(TH),Da(jU),Da(bQ),Da(yW),Da(CW),Da(HU),Da(kj),Da(Oq),Da(AW),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alert-rule-panel&quot;]],features:[$o],decls:8,vars:2,consts:[[1,&quot;panel&quot;],[1,&quot;d-flex&quot;,2,&quot;background-color&quot;,&quot;#fff&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Revenir \xe0 la liste&quot;,&quot;routerLink&quot;,&quot;/alerts/rules&quot;,1,&quot;back-button&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[&quot;name&quot;,&quot;form&quot;,&quot;appAlertRule&quot;,&quot;&quot;,1,&quot;alert-rule-panel&quot;,&quot;panel&quot;,&quot;unscrollable&quot;],[&quot;form&quot;,&quot;ngForm&quot;],[1,&quot;panel__header&quot;],[1,&quot;scrollable&quot;],[&quot;class&quot;,&quot;d-flex-baseline&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;panel__content&quot;,4,&quot;ngIf&quot;],[1,&quot;panel__content&quot;,&quot;alert-rule-panel__header&quot;],[1,&quot;d-inline&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,3,&quot;disabled&quot;],[1,&quot;u-flex&quot;],[&quot;mat-mini-fab&quot;,&quot;&quot;,1,&quot;alert-rule-panel__color-picker-button&quot;,3,&quot;disabled&quot;,&quot;title&quot;,&quot;click&quot;],[&quot;name&quot;,&quot;color&quot;,1,&quot;alert-rule-panel__color-picker-attach&quot;,3,&quot;colorPicker&quot;,&quot;cpAlphaChannel&quot;,&quot;cpOutputFormat&quot;,&quot;cpToggle&quot;,&quot;colorPickerChange&quot;,&quot;cpToggleChange&quot;],[1,&quot;panel__content&quot;],[4,&quot;ngIf&quot;],[1,&quot;alert-rule-panel__summary&quot;,3,&quot;innerHTML&quot;],[1,&quot;panel__subtitle&quot;],[&quot;name&quot;,&quot;zone&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;groupId&quot;,&quot;ngModelChange&quot;,&quot;updateZones&quot;],[&quot;class&quot;,&quot;criterion-content alert-rule-panel__error-msg&quot;,4,&quot;ngIf&quot;],[1,&quot;criterion-content&quot;],[1,&quot;alert-rule-panel__name-input&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;name&quot;,&quot;name&quot;,&quot;placeholder&quot;,&quot;Nom de la r\xe8gle&quot;,&quot;required&quot;,&quot;&quot;,&quot;maxlength&quot;,&quot;64&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;ngModel&quot;],[&quot;class&quot;,&quot;input-error&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Enregistrer les changements&quot;,&quot;data-test&quot;,&quot;save-rule&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler l&#39;\xe9dition&quot;,3,&quot;routerLink&quot;],[1,&quot;input-error&quot;],[1,&quot;panel__title&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Modifier&quot;,3,&quot;routerLink&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer la r\xe8gle&quot;,3,&quot;click&quot;],[1,&quot;d-flex-baseline&quot;],[1,&quot;pa-2&quot;,&quot;u-flex&quot;],[&quot;name&quot;,&quot;group_id&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;],[&quot;color&quot;,&quot;warn&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,&quot;title&quot;,&quot;La configuration de cette r\xe8gle est incorrecte. Elle doit contenir au moins une zone de filtrage.&quot;],[&quot;name&quot;,&quot;active&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;title&quot;,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[1,&quot;alert-rule-panel__description&quot;],[&quot;matTooltip&quot;,&quot;Recevoir par email un rapport quotidien des alertes de la veille (jours UTC)&quot;,&quot;matTooltipPosition&quot;,&quot;above&quot;,1,&quot;help-icon&quot;],[&quot;name&quot;,&quot;enableDailyReport&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;title&quot;,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[1,&quot;criterion-content&quot;,&quot;alert-rule-panel__error-msg&quot;],[&quot;name&quot;,&quot;aisInterruption&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;transhipment&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;erraticRoute&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;speed&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;passageInZone&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;groupId&quot;,&quot;ngModelChange&quot;,&quot;updateZones&quot;],[&quot;name&quot;,&quot;spoofing&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;identifier&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;fleet&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;groupId&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;flag&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;type&quot;,3,&quot;ngModel&quot;,&quot;editable&quot;,&quot;ngModelChange&quot;],[1,&quot;d-flex-center&quot;],[1,&quot;u-flex&quot;,&quot;my-0&quot;,&quot;pa-2&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter les alertes au format CSV&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[3,&quot;alerts$&quot;,&quot;simpleItems&quot;,&quot;alertTitleRef&quot;,&quot;alertMenuItemsRef&quot;],[&quot;alertTitleRef&quot;,&quot;&quot;],[&quot;alertMenuItemsRef&quot;,&quot;&quot;],[1,&quot;alert__ship&quot;,3,&quot;ship&quot;],[1,&quot;alert__timestamp&quot;,3,&quot;title&quot;],[&quot;title&quot;,&quot;Date de l&#39;alerte&quot;,1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;routerLink&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;a&quot;,2),Ra(3,&quot;mat-icon&quot;),xl(4,&quot;arrow_back_ios&quot;),Fa(),xl(5,&quot; R\xe8gles d&#39;alerte &quot;),Fa(),Fa(),ra(6,$2,1,0,&quot;mat-spinner&quot;,3),ra(7,p3,48,33,&quot;ng-template&quot;,4),Fa()),2&amp;t&amp;&amp;(Sr(6),Oa(&quot;ngIf&quot;,!e.alertRule),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule))},directives:[Fy,mF,hE,Nd,TQ,Qx,DQ,HQ,zQ,Ry,_O,Pq,$J,wx,iw,gC,kC,Hy,kw,Iw,fF,tC,oC,qT,Bd,rC,Sy,QJ,fI,h0,u0,d0,g0,E1,M1,e2,a2,p2,v2,z2,V2,nJ],pipes:[VL,ep],styles:[&quot;[_nghost-%COMP%]{display:flex;overflow:hidden}.back-button[_ngcontent-%COMP%]{line-height:36px}.alert-rule-panel__name-input[_ngcontent-%COMP%]{margin:.5em;flex:1;font-size:20px}.alert-rule-panel__header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.alert-rule-panel__color-picker-button[_ngcontent-%COMP%]{margin-left:16px;margin-right:8px;height:30px;width:30px}  .alert-rule-panel__color-picker-button.mat-fab:not(.mat-button-disabled):active:not([class*=mat-elevation-z]),   .alert-rule-panel__color-picker-button.mat-mini-fab:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0 5px 7px -2px rgba(0,0,0,.2),0 8px 14px 2px rgba(0,0,0,.14),0 4px 20px 2px rgba(0,0,0,.12)!important}.alert-rule-panel__color-picker-attach[_ngcontent-%COMP%]{opacity:0;width:1px;height:1px;pointer-events:none}.alert-rule-panel__description[_ngcontent-%COMP%]{margin-top:.5em;font-size:14px}.alert-rule-panel__summary[_ngcontent-%COMP%]     em{font-size:1.1em;font-weight:500;font-style:normal;color:#1515a6}.alert-rule-panel__error-msg[_ngcontent-%COMP%]{color:#ce1d1d}.alert__timestamp[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center}&quot;]}),t})(),m3=0;const g3=new Ji(&quot;CdkAccordion&quot;);let A3=(()=&gt;{class t{constructor(){this._stateChanges=new S,this._openCloseAllActions=new S,this.id=&quot;cdk-accordion-&quot;+m3++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=Rf(t)}openAll(){this._multi&amp;&amp;this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;cdk-accordion&quot;],[&quot;&quot;,&quot;cdkAccordion&quot;,&quot;&quot;]],inputs:{multi:&quot;multi&quot;},exportAs:[&quot;cdkAccordion&quot;],features:[Wl([{provide:g3,useExisting:t}]),he]}),t})(),v3=0,_3=(()=&gt;{class t{constructor(t,e,i){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=i,this._openCloseAllSubscription=d.EMPTY,this.closed=new mh,this.opened=new mh,this.destroyed=new mh,this.expandedChange=new mh,this.id=&quot;cdk-accordion-child-&quot;+v3++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=&gt;{},this._removeUniqueSelectionListener=i.listen((t,e)=&gt;{this.accordion&amp;&amp;!this.accordion.multi&amp;&amp;this.accordion.id===e&amp;&amp;this.id!==t&amp;&amp;(this.expanded=!1)}),this.accordion&amp;&amp;(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Rf(t),this._expanded!==t&amp;&amp;(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Rf(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=&gt;{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(Da(g3,12),Da(Ec),Da(Rg))},t.\u0275dir=Xt({type:t,selectors:[[&quot;cdk-accordion-item&quot;],[&quot;&quot;,&quot;cdkAccordionItem&quot;,&quot;&quot;]],inputs:{expanded:&quot;expanded&quot;,disabled:&quot;disabled&quot;},outputs:{closed:&quot;closed&quot;,opened:&quot;opened&quot;,destroyed:&quot;destroyed&quot;,expandedChange:&quot;expandedChange&quot;},exportAs:[&quot;cdkAccordionItem&quot;],features:[Wl([{provide:g3,useValue:void 0}])]}),t})(),b3=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({}),t})();const y3=[&quot;body&quot;];function x3(t,e){}const w3=[[[&quot;mat-expansion-panel-header&quot;]],&quot;*&quot;,[[&quot;mat-action-row&quot;]]],C3=[&quot;mat-expansion-panel-header&quot;,&quot;*&quot;,&quot;mat-action-row&quot;];function S3(t,e){1&amp;t&amp;&amp;La(0,&quot;span&quot;,2),2&amp;t&amp;&amp;Oa(&quot;@indicatorRotate&quot;,Za()._getExpandedState())}const k3=[[[&quot;mat-panel-title&quot;]],[[&quot;mat-panel-description&quot;]],&quot;*&quot;],E3=[&quot;mat-panel-title&quot;,&quot;mat-panel-description&quot;,&quot;*&quot;],M3=new Ji(&quot;MAT_ACCORDION&quot;),T3=&quot;225ms cubic-bezier(0.4,0.0,0.2,1)&quot;,I3={indicatorRotate:BA(&quot;indicatorRotate&quot;,[$A(&quot;collapsed, void&quot;,VA({transform:&quot;rotate(0deg)&quot;})),$A(&quot;expanded&quot;,VA({transform:&quot;rotate(180deg)&quot;})),jA(&quot;expanded &lt;=&gt; collapsed, void =&gt; collapsed&quot;,zA(T3))]),bodyExpansion:BA(&quot;bodyExpansion&quot;,[$A(&quot;collapsed, void&quot;,VA({height:&quot;0px&quot;,visibility:&quot;hidden&quot;})),$A(&quot;expanded&quot;,VA({height:&quot;*&quot;,visibility:&quot;visible&quot;})),jA(&quot;expanded &lt;=&gt; collapsed, void =&gt; collapsed&quot;,zA(T3))])};let D3=(()=&gt;{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(Da(Oc))},t.\u0275dir=Xt({type:t,selectors:[[&quot;ng-template&quot;,&quot;matExpansionPanelContent&quot;,&quot;&quot;]]}),t})(),O3=0;const P3=new Ji(&quot;MAT_EXPANSION_PANEL_DEFAULT_OPTIONS&quot;);let R3=(()=&gt;{class t extends _3{constructor(t,e,i,n,s,r,o){super(t,e,i),this._viewContainerRef=n,this._animationMode=r,this._hideToggle=!1,this.afterExpand=new mh,this.afterCollapse=new mh,this._inputChanges=new S,this._headerId=&quot;mat-expansion-panel-header-&quot;+O3++,this._bodyAnimationDone=new S,this.accordion=t,this._document=s,this._bodyAnimationDone.pipe(Mf((t,e)=&gt;t.fromState===e.fromState&amp;&amp;t.toState===e.toState)).subscribe(t=&gt;{&quot;void&quot;!==t.fromState&amp;&amp;(&quot;expanded&quot;===t.toState?this.afterExpand.emit():&quot;collapsed&quot;===t.toState&amp;&amp;this.afterCollapse.emit())}),o&amp;&amp;(this.hideToggle=o.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&amp;&amp;this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Rf(t)}get togglePosition(){return this._togglePosition||this.accordion&amp;&amp;this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&amp;&amp;this.expanded&amp;&amp;&quot;default&quot;===this.accordion.displayMode}_getExpandedState(){return this.expanded?&quot;expanded&quot;:&quot;collapsed&quot;}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&amp;&amp;this.opened.pipe(cg(null),gf(()=&gt;this.expanded&amp;&amp;!this._portal),xf(1)).subscribe(()=&gt;{this._portal=new qp(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(Da(M3,12),Da(Ec),Da(Rg),Da(Nc),Da(Fu),Da(yb,8),Da(P3,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-expansion-panel&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,D3,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._lazyContent=t.first)}},viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(y3,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._body=t.first)}},hostAttrs:[1,&quot;mat-expansion-panel&quot;],hostVars:6,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-expanded&quot;,e.expanded)(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode)(&quot;mat-expansion-panel-spacing&quot;,e._hasSpacing())},inputs:{disabled:&quot;disabled&quot;,expanded:&quot;expanded&quot;,hideToggle:&quot;hideToggle&quot;,togglePosition:&quot;togglePosition&quot;},outputs:{opened:&quot;opened&quot;,closed:&quot;closed&quot;,expandedChange:&quot;expandedChange&quot;,afterExpand:&quot;afterExpand&quot;,afterCollapse:&quot;afterCollapse&quot;},exportAs:[&quot;matExpansionPanel&quot;],features:[Wl([{provide:M3,useValue:void 0}]),$o,he],ngContentSelectors:C3,decls:7,vars:4,consts:[[&quot;role&quot;,&quot;region&quot;,1,&quot;mat-expansion-panel-content&quot;,3,&quot;id&quot;],[&quot;body&quot;,&quot;&quot;],[1,&quot;mat-expansion-panel-body&quot;],[3,&quot;cdkPortalOutlet&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(w3),Qa(0),Ra(1,&quot;div&quot;,0,1),Ha(&quot;@bodyExpansion.done&quot;,function(t){return e._bodyAnimationDone.next(t)}),Ra(3,&quot;div&quot;,2),Qa(4,1),ra(5,x3,0,0,&quot;ng-template&quot;,3),Fa(),Qa(6,2),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;@bodyExpansion&quot;,e._getExpandedState())(&quot;id&quot;,e.id),ea(&quot;aria-labelledby&quot;,e._headerId),Sr(4),Oa(&quot;cdkPortalOutlet&quot;,e._portal))},directives:[Kp],styles:[&quot;.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion&gt;.mat-expansion-panel-spacing:first-child,.mat-accordion&gt;*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion&gt;.mat-expansion-panel-spacing:last-child,.mat-accordion&gt;*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n&quot;],encapsulation:2,data:{animation:[I3.bodyExpansion]},changeDetection:0}),t})();class F3{}const L3=Nb(F3);let B3=(()=&gt;{class t extends L3{constructor(t,e,i,n,s,r,o){super(),this.panel=t,this._element=e,this._focusMonitor=i,this._changeDetectorRef=n,this._animationMode=r,this._parentChangeSubscription=d.EMPTY;const a=t.accordion?t.accordion._stateChanges.pipe(gf(t=&gt;!(!t.hideToggle&amp;&amp;!t.togglePosition))):bf;this.tabIndex=parseInt(o||&quot;&quot;)||0,this._parentChangeSubscription=W(t.opened,t.closed,a,t._inputChanges.pipe(gf(t=&gt;!!(t.hideToggle||t.disabled||t.togglePosition)))).subscribe(()=&gt;this._changeDetectorRef.markForCheck()),t.closed.pipe(gf(()=&gt;t._containsFocus())).subscribe(()=&gt;i.focusVia(e,&quot;program&quot;)),s&amp;&amp;(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&amp;&amp;!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&amp;&amp;this.expandedHeight?this.expandedHeight:!t&amp;&amp;this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:tf(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&amp;&amp;this.panel.accordion._handleHeaderKeydown(t))}}focus(t,e){t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=&gt;{t&amp;&amp;this.panel.accordion&amp;&amp;this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return t.\u0275fac=function(e){return new(e||t)(Da(R3,1),Da(ec),Da(Nm),Da(Ec),Da(P3,8),Da(yb,8),Yi(&quot;tabindex&quot;))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-expansion-panel-header&quot;]],hostAttrs:[&quot;role&quot;,&quot;button&quot;,1,&quot;mat-expansion-panel-header&quot;,&quot;mat-focus-indicator&quot;],hostVars:15,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;click&quot;,function(){return e._toggle()})(&quot;keydown&quot;,function(t){return e._keydown(t)}),2&amp;t&amp;&amp;(ea(&quot;id&quot;,e.panel._headerId)(&quot;tabindex&quot;,e.tabIndex)(&quot;aria-controls&quot;,e._getPanelId())(&quot;aria-expanded&quot;,e._isExpanded())(&quot;aria-disabled&quot;,e.panel.disabled),ll(&quot;height&quot;,e._getHeaderHeight()),cl(&quot;mat-expanded&quot;,e._isExpanded())(&quot;mat-expansion-toggle-indicator-after&quot;,&quot;after&quot;===e._getTogglePosition())(&quot;mat-expansion-toggle-indicator-before&quot;,&quot;before&quot;===e._getTogglePosition())(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode))},inputs:{tabIndex:&quot;tabIndex&quot;,expandedHeight:&quot;expandedHeight&quot;,collapsedHeight:&quot;collapsedHeight&quot;},features:[$o],ngContentSelectors:E3,decls:5,vars:1,consts:[[1,&quot;mat-content&quot;],[&quot;class&quot;,&quot;mat-expansion-indicator&quot;,4,&quot;ngIf&quot;],[1,&quot;mat-expansion-indicator&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(k3),Ra(0,&quot;span&quot;,0),Qa(1),Qa(2,1),Qa(3,2),Fa(),ra(4,S3,1,1,&quot;span&quot;,1)),2&amp;t&amp;&amp;(Sr(4),Oa(&quot;ngIf&quot;,e._showToggle()))},directives:[Nd],styles:[&#39;.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:&quot;&quot;;display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:&quot;&quot;}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n&#39;],encapsulation:2,data:{animation:[I3.indicatorRotate]},changeDetection:0}),t})(),z3=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-panel-title&quot;]],hostAttrs:[1,&quot;mat-expansion-panel-header-title&quot;]}),t})(),N3=(()=&gt;{class t extends A3{constructor(){super(...arguments),this._ownHeaders=new Ah,this._hideToggle=!1,this.displayMode=&quot;default&quot;,this.togglePosition=&quot;after&quot;}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=Rf(t)}ngAfterContentInit(){this._headers.changes.pipe(cg(this._headers)).subscribe(t=&gt;{this._ownHeaders.reset(t.filter(t=&gt;t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new bm(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-accordion&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,B3,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._headers=t)}},hostAttrs:[1,&quot;mat-accordion&quot;],hostVars:2,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-accordion-multi&quot;,e.multi)},inputs:{multi:&quot;multi&quot;,displayMode:&quot;displayMode&quot;,togglePosition:&quot;togglePosition&quot;,hideToggle:&quot;hideToggle&quot;},exportAs:[&quot;matAccordion&quot;],features:[Wl([{provide:M3,useExisting:t}]),$o]}),t})(),V3=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[ip,Fb,b3,Xp]]}),t})();const $3=BA(&quot;fadeAnimation&quot;,[jA(&quot;:enter&quot;,[VA({opacity:0}),zA(500,VA({opacity:1}))]),jA(&quot;:leave&quot;,[VA({pointerEvents:&quot;none&quot;,transform:&quot;scale(1)&quot;}),zA(500,VA({opacity:0,transform:&quot;scale(0)&quot;,height:0}))])]),U3=BA(&quot;bodyExpansion&quot;,[$A(&quot;collapsed, void&quot;,VA({height:&quot;0px&quot;,visibility:&quot;hidden&quot;})),$A(&quot;expanded&quot;,VA({height:&quot;*&quot;,visibility:&quot;visible&quot;})),jA(&quot;expanded &lt;=&gt; collapsed, void =&gt; collapsed&quot;,zA(T3))]);function j3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,1),Ra(1,&quot;h1&quot;,2),xl(2,&quot; Gestion du groupe &quot;),Fa(),Ra(3,&quot;button&quot;,3),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;,4),Ra(7,&quot;app-group-management&quot;,5),Ha(&quot;update$&quot;,function(){return Le(t),Za().onUpdate()})(&quot;delete$&quot;,function(){return Le(t),Za().onDelete()}),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(7),Oa(&quot;group&quot;,t.group)(&quot;permissions&quot;,t.group.role)}}let H3=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.data=t,this.dialogRef=e,this.notificationsService=i,this.mapConfigService=n,this.groupsService=s,this.uiService=r,this.workerService=o}ngOnInit(){return jp(this,void 0,void 0,function*(){this.groupId=this.data.groupId,this.subscriptions.push(this.notificationsService.events$.pipe(gf(t=&gt;&quot;group&quot;===t.kind&amp;&amp;t.id===this.groupId)).subscribe(t=&gt;jp(this,void 0,void 0,function*(){var e,i;&quot;delete&quot;===t.type?(this.uiService.success(`Le groupe \`${(null===(e=this.group)||void 0===e?void 0:e.name)||&quot;&quot;}\` vient d&#39;\xeatre supprim\xe9.`),this.onDelete()):(this.uiService.success(`Le groupe \`${(null===(i=this.group)||void 0===i?void 0:i.name)||&quot;&quot;}\` vient d&#39;\xeatre mis \xe0 jour.`),yield this.fetchGroup())}))),yield this.fetchGroup()})}fetchGroup(){return jp(this,void 0,void 0,function*(){this.group=yield this.workerService.groups.getGroup(this.groupId)})}onUpdate(){return jp(this,void 0,void 0,function*(){this.mapConfigService.enableWebsockets$.value||(yield this.fetchGroup())})}onDelete(){this.dialogRef.close(),this.mapConfigService.enableWebsockets$.value||this.groupsService.removeGroup(this.groupId)}}return t.\u0275fac=function(e){return new(e||t)(Da(KS),Da(YS),Da(wZ),Da(HU),Da(CW),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-manage-group-dialog&quot;]],features:[$o],decls:1,vars:1,consts:[[3,&quot;ngIf&quot;],[1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;,&quot;px-3&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer la fen\xeatre&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;pa-3&quot;],[3,&quot;group&quot;,&quot;permissions&quot;,&quot;update$&quot;,&quot;delete$&quot;]],template:function(t,e){1&amp;t&amp;&amp;ra(0,j3,8,2,&quot;ng-template&quot;,0),2&amp;t&amp;&amp;Oa(&quot;ngIf&quot;,e.group)},directives:[Nd,Ry,nk,hE,dX],styles:[&quot;&quot;]}),t})();const G3=&quot;anais-config-expansion&quot;;let q3=(()=&gt;{class t{constructor(){this.expansions={};try{this.expansions=JSON.parse(localStorage.getItem(G3))||{}}catch(t){}}updateExpansionState(t,e){this.expansions[t]=e,localStorage.setItem(G3,JSON.stringify(this.expansions))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),W3=(()=&gt;{class t{constructor(){this.RoleInfos=wW}ngOnChanges(t){t.role&amp;&amp;(this.roleInfo=wW.find(t=&gt;t.role===this.role))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-member-role-help-icon&quot;]],inputs:{role:&quot;role&quot;},features:[he],decls:2,vars:1,consts:[[1,&quot;help-icon&quot;,3,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-icon&quot;,0),xl(1,&quot; help\n&quot;),Fa()),2&amp;t&amp;&amp;Oa(&quot;title&quot;,&quot;Vous faites partie de ce groupe avec le r\xf4le : &quot;+e.roleInfo.label)},directives:[hE],styles:[&quot;[_nghost-%COMP%]{line-height:0}.help-icon[_ngcontent-%COMP%]{font-size:16px!important;width:16px!important;height:16px!important;cursor:help}&quot;],changeDetection:0}),t})();const Y3=[&quot;createTemplate&quot;],Z3=[&quot;resourceTemplate&quot;];function K3(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,12),Ha(&quot;click&quot;,function(e){Le(t);const i=Za().$implicit,n=Za();return e.stopPropagation(),n.openGroupDialog(i)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;settings&quot;),Fa(),Fa()}}function X3(t,e){1&amp;t&amp;&amp;Na(0)}const Q3=function(t){return{group:t}};function J3(t,e){if(1&amp;t&amp;&amp;ra(0,X3,1,0,&quot;ng-container&quot;,13),2&amp;t){const t=Za().$implicit;Oa(&quot;ngTemplateOutlet&quot;,Za().createTemplate)(&quot;ngTemplateOutletContext&quot;,eh(2,Q3,t))}}function t5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,14),xl(1),Fa()),2&amp;t){const t=Za(2);Sr(1),wl(t.emptyMessage)}}function e5(t,e){1&amp;t&amp;&amp;Na(0)}const i5=function(t,e){return{resource:t,group:e}};function n5(t,e){if(1&amp;t&amp;&amp;(Ba(0),ra(1,e5,1,0,&quot;ng-container&quot;,13),za()),2&amp;t){const t=e.$implicit,i=Za().$implicit,n=Za();Sr(1),Oa(&quot;ngTemplateOutlet&quot;,n.resourceTemplate)(&quot;ngTemplateOutletContext&quot;,ih(2,i5,t,i))}}function s5(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-expansion-panel&quot;,3),Ha(&quot;expandedChange&quot;,function(e){const i=Le(t).$implicit;return Za().saveGroupExpansion(i.id,e)}),Ra(1,&quot;mat-expansion-panel-header&quot;,4),Ra(2,&quot;mat-panel-title&quot;,5),Ra(3,&quot;span&quot;,9),xl(4),Fa(),La(5,&quot;app-member-role-help-icon&quot;,10),Fa(),ra(6,K3,3,0,&quot;button&quot;,11),Fa(),Ra(7,&quot;div&quot;,0),ra(8,J3,1,4,&quot;ng-template&quot;,6),ra(9,t5,2,1,&quot;p&quot;,7),ra(10,n5,2,5,&quot;ng-container&quot;,8),Fa(),Fa()}if(2&amp;t){const t=e.$implicit,i=Za();Oa(&quot;expanded&quot;,t.expanded),Sr(4),wl(t.name),Sr(1),Oa(&quot;role&quot;,t.role),Sr(1),Oa(&quot;ngIf&quot;,&quot;owner&quot;===t.role&amp;&amp;!i.isOffline),Sr(2),Oa(&quot;ngIf&quot;,&quot;guest&quot;!==t.role&amp;&amp;!i.isOffline),Sr(1),Oa(&quot;ngIf&quot;,0===t[i.resourcesKey].length),Sr(1),Oa(&quot;ngForOf&quot;,t[i.resourcesKey])(&quot;ngForTrackBy&quot;,i.trackById)}}function r5(t,e){1&amp;t&amp;&amp;Na(0)}function o5(t,e){1&amp;t&amp;&amp;ra(0,r5,1,0,&quot;ng-container&quot;,15),2&amp;t&amp;&amp;Oa(&quot;ngTemplateOutlet&quot;,Za().createTemplate)}function a5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,14),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.emptyMessage)}}function l5(t,e){1&amp;t&amp;&amp;Na(0)}const c5=function(t,e){return{resource:t,editable:e}};function h5(t,e){if(1&amp;t&amp;&amp;(Ba(0),ra(1,l5,1,0,&quot;ng-container&quot;,13),za()),2&amp;t){const t=e.$implicit,i=Za();Sr(1),Oa(&quot;ngTemplateOutlet&quot;,i.resourceTemplate)(&quot;ngTemplateOutletContext&quot;,ih(2,c5,t,!i.isOffline))}}let u5=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.dialog=t,this.expansionPersistenceService=e,this.groupsService=i,this.offlineService=n,this.groups=[],this.resources=[],this.personalResourcesPanelExpanded=!1,this.disablePanelAnimation=!0,this.loading=!0,this.isOffline=!1}ngOnInit(){var t;return jp(this,void 0,void 0,function*(){this.ensureMandatoryInputParams(&quot;resources$&quot;,&quot;resourcesKey&quot;,&quot;privateResourcesTitle&quot;,&quot;emptyMessage&quot;),this.personalResourcesPanelExpanded=null!==(t=this.expansionPersistenceService.expansions[`${this.resourcesKey}-null`])&amp;&amp;void 0!==t&amp;&amp;t,this.subscriptions.push(QT([this.groupsService.groups$,this.resources$]).pipe(df(16)).subscribe(([t,e])=&gt;{var i;const n=this.expansionPersistenceService.expansions,s=t.reduce((t,e)=&gt;{var i;return t[e.id]=e,e[this.resourcesKey]=[],e.expanded=null!==(i=n[`${this.resourcesKey}-${e.id}`])&amp;&amp;void 0!==i&amp;&amp;i,t},{});this.personalResourcesPanelExpanded=null!==(i=n[`${this.resourcesKey}-null`])&amp;&amp;void 0!==i&amp;&amp;i;const r=[];e.forEach(t=&gt;{if(t.group_id){const e=s[t.group_id];if(!e)return void console.log(`Le groupe ${t.group_id} de la ressource ${t.name} est inconnu`);e[this.resourcesKey]||(e[this.resourcesKey]=[]),e[this.resourcesKey].push(t)}else r.push(t)}),this.resources=r,this.groups=t,setTimeout(()=&gt;{this.loading=!1})}),this.offlineService.isOffline$.subscribe(t=&gt;{this.isOffline=t}))})}ngAfterViewInit(){this.ensureMandatoryInputParams(&quot;createTemplate&quot;,&quot;resourceTemplate&quot;),setTimeout(()=&gt;{this.disablePanelAnimation=!1})}trackById(t,e){return e.id}openGroupDialog(t){this.dialog.open(H3,{data:{groupId:t.id},panelClass:&quot;no-border-dialog&quot;,maxHeight:&quot;90vh&quot;,minWidth:&quot;40vw&quot;,maxWidth:&quot;90vw&quot;,autoFocus:!1,closeOnNavigation:!0})}saveGroupExpansion(t,e){this.loading||this.expansionPersistenceService.updateExpansionState(`${this.resourcesKey}-${t}`,e)}}return t.\u0275fac=function(e){return new(e||t)(Da(ek),Da(q3),Da(CW),Da(hW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-resources-panel&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,Y3,5),Th(i,Z3,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.createTemplate=t.first),Eh(t=Ih())&amp;&amp;(e.resourceTemplate=t.first)}},inputs:{resources$:&quot;resources$&quot;,resourcesKey:&quot;resourcesKey&quot;,privateResourcesTitle:&quot;privateResourcesTitle&quot;,emptyMessage:&quot;emptyMessage&quot;},features:[$o],decls:11,vars:12,consts:[[1,&quot;d-flex-column&quot;],[&quot;displayMode&quot;,&quot;flat&quot;,3,&quot;multi&quot;],[&quot;class&quot;,&quot;resources-panel mat-elevation-z0&quot;,&quot;togglePosition&quot;,&quot;before&quot;,3,&quot;expanded&quot;,&quot;expandedChange&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[&quot;togglePosition&quot;,&quot;before&quot;,1,&quot;resources-panel&quot;,&quot;mat-elevation-z0&quot;,3,&quot;expanded&quot;,&quot;expandedChange&quot;],[1,&quot;resources-panel__header&quot;],[1,&quot;d-flex-center&quot;],[3,&quot;ngIf&quot;],[&quot;class&quot;,&quot;px-3&quot;,4,&quot;ngIf&quot;],[4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[1,&quot;mr-2&quot;],[3,&quot;role&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Afficher les param\xe8tres de ce groupe&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Afficher les param\xe8tres de ce groupe&quot;,3,&quot;click&quot;],[4,&quot;ngTemplateOutlet&quot;,&quot;ngTemplateOutletContext&quot;],[1,&quot;px-3&quot;],[4,&quot;ngTemplateOutlet&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;mat-accordion&quot;,1),ra(2,s5,11,8,&quot;mat-expansion-panel&quot;,2),Ra(3,&quot;mat-expansion-panel&quot;,3),Ha(&quot;expandedChange&quot;,function(t){return e.saveGroupExpansion(null,t)}),Ra(4,&quot;mat-expansion-panel-header&quot;,4),Ra(5,&quot;mat-panel-title&quot;,5),xl(6),Fa(),Fa(),Ra(7,&quot;div&quot;,0),ra(8,o5,1,1,&quot;ng-template&quot;,6),ra(9,a5,2,1,&quot;p&quot;,7),ra(10,h5,2,5,&quot;ng-container&quot;,8),Fa(),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(cl(&quot;d-hidden&quot;,e.loading),Sr(1),Oa(&quot;multi&quot;,!0),Sr(1),Oa(&quot;ngForOf&quot;,e.groups)(&quot;ngForTrackBy&quot;,e.trackById),Sr(1),Oa(&quot;@.disabled&quot;,e.disablePanelAnimation)(&quot;expanded&quot;,e.personalResourcesPanelExpanded),Sr(3),Cl(&quot; &quot;,e.privateResourcesTitle,&quot; &quot;),Sr(2),Oa(&quot;ngIf&quot;,!e.isOffline),Sr(1),Oa(&quot;ngIf&quot;,0===e.resources.length),Sr(1),Oa(&quot;ngForOf&quot;,e.resources)(&quot;ngForTrackBy&quot;,e.trackById))},directives:[N3,Bd,R3,B3,z3,Nd,W3,Ry,hE,Wd],styles:[&quot;.resources-panel__header[_ngcontent-%COMP%]{background-color:#e6ebf1}.resources-panel__header[_ngcontent-%COMP%]:focus, .resources-panel__header[_ngcontent-%COMP%]:hover{background-color:#d6dee8!important}.resources-panel[_ngcontent-%COMP%]     .mat-expanded{height:48px!important}.resources-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.resources-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding-right:0}.resources-panel[_ngcontent-%COMP%]     .mat-content{height:100%}&quot;],data:{animation:[$3]}}),t})();function d5(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-chip&quot;,13),xl(1,&quot;D\xe9sactiv\xe9e&quot;),Fa()),2&amp;t&amp;&amp;Oa(&quot;disabled&quot;,!0)}function p5(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-chip&quot;,14),xl(1,&quot; Incorrecte &quot;),Fa())}function f5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot;&quot;,t.criteriaLabels.identifier.title,&quot; : &quot;,t.alertRule.criteria.identifier.identifiers.join(&quot;, &quot;),&quot;&quot;)}}function m5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot;&quot;,t.criteriaLabels.fleet.title,&quot; : &quot;,t.fleets,&quot;&quot;)}}function g5(t,e){1&amp;t&amp;&amp;La(0,&quot;app-flag&quot;,18),2&amp;t&amp;&amp;Oa(&quot;flag&quot;,e.$implicit)}function A5(t,e){1&amp;t&amp;&amp;ra(0,g5,1,1,&quot;app-flag&quot;,17),2&amp;t&amp;&amp;Oa(&quot;ngForOf&quot;,Za(2).alertRule.criteria.flag.flags)}function v5(t,e){1&amp;t&amp;&amp;xl(0),2&amp;t&amp;&amp;Cl(&quot; &quot;,Za(2).alertRule.criteria.flag.flags.length,&quot; pavillons &quot;)}function _5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),ra(2,A5,1,1,&quot;ng-template&quot;,15),ra(3,v5,1,1,&quot;ng-template&quot;,null,16,Rh),Fa()),2&amp;t){const t=oa(4),e=Za();Sr(1),Cl(&quot; &quot;,e.criteriaLabels.flag.title,&quot; : &quot;),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.flag.flags.length&lt;5)(&quot;ngIfElse&quot;,t)}}function b5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot;&quot;,t.criteriaLabels.type.title,&quot; : &quot;,t.types,&quot;&quot;)}}function y5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),kl(&quot;&quot;,t.criteriaLabels.speed.title,&quot; : [&quot;,t.alertRule.criteria.speed.min,&quot;, &quot;,t.alertRule.criteria.speed.max,&quot;]&quot;)}}function x5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.criteriaLabels.erraticRoute.title)}}function w5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.criteriaLabels.transhipment.title)}}function C5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.criteriaLabels.aisInterruption.title)}}function S5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot;&quot;,t.criteriaLabels.passageInZone.title,&quot; : &quot;,t.passages,&quot;&quot;)}}function k5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.criteriaLabels.spoofing.title)}}function E5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;li&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Sl(&quot;&quot;,t.criteriaLabels.zone.title,&quot; : &quot;,t.zones,&quot;&quot;)}}let M5=(()=&gt;{class t extends Eq{constructor(t){super(),this.fleetsService=t,this.criteriaLabels=e0,this.countriesLabelByFlag=yH}get passages(){return this.alertRule.criteria.passageInZone.passages.map(t=&gt;t.zone.name).join(&quot;, &quot;)}get fleets(){return this.alertRule.criteria.fleet.fleets.map(t=&gt;{var e;return(null!==(e=this.fleetsService.fleetsById[t])&amp;&amp;void 0!==e?e:{}).name}).join(&quot;, &quot;)}get zones(){return this.alertRule.criteria.zone.zones.map(t=&gt;t.name).join(&quot;, &quot;)}get types(){return this.alertRule.criteria.type.types.map(t=&gt;sU[t].name).join(&quot;, &quot;)}}return t.\u0275fac=function(e){return new(e||t)(Da(yW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alert-rule-item&quot;]],inputs:{alertRule:&quot;alertRule&quot;},features:[$o],decls:28,vars:16,consts:[[1,&quot;alert-rule-item&quot;],[1,&quot;alert-rule-item__header&quot;],[1,&quot;alert-rule-item__title&quot;],[1,&quot;d-inline&quot;,&quot;u-flex&quot;,&quot;alert-rule-item__state&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,3,&quot;disabled&quot;,4,&quot;ngIf&quot;],[&quot;color&quot;,&quot;warn&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,&quot;title&quot;,&quot;La configuration de cette r\xe8gle est incorrecte. Elle doit contenir au moins une zone de filtrage.&quot;,4,&quot;ngIf&quot;],[1,&quot;alert-rule-item__indicators&quot;],[&quot;title&quot;,&quot;Statistiques&quot;,1,&quot;mr-1&quot;],[&quot;title&quot;,&quot;Nombre d&#39;alertes lev\xe9es au cours des derni\xe8res 24 heures&quot;],[1,&quot;mx-1&quot;],[&quot;title&quot;,&quot;Nombre d&#39;alertes lev\xe9es au cours des 7 derniers jours&quot;],[1,&quot;alert-rule-item__criteria&quot;],[4,&quot;ngIf&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,3,&quot;disabled&quot;],[&quot;color&quot;,&quot;warn&quot;,&quot;selected&quot;,&quot;&quot;,&quot;disableRipple&quot;,&quot;&quot;,&quot;title&quot;,&quot;La configuration de cette r\xe8gle est incorrecte. Elle doit contenir au moins une zone de filtrage.&quot;],[3,&quot;ngIf&quot;,&quot;ngIfElse&quot;],[&quot;tooManyFlags&quot;,&quot;&quot;],[&quot;style&quot;,&quot;margin: 4px&quot;,3,&quot;flag&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[2,&quot;margin&quot;,&quot;4px&quot;,3,&quot;flag&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h4&quot;,1),Ra(2,&quot;div&quot;,2),xl(3),Fa(),Ra(4,&quot;mat-chip-list&quot;,3),ra(5,d5,2,1,&quot;mat-chip&quot;,4),ra(6,p5,2,0,&quot;mat-chip&quot;,5),Fa(),Ra(7,&quot;div&quot;,6),Ra(8,&quot;mat-icon&quot;,7),xl(9,&quot;trending_up&quot;),Fa(),Ra(10,&quot;span&quot;,8),xl(11),Fa(),Ra(12,&quot;span&quot;,9),xl(13,&quot;/&quot;),Fa(),Ra(14,&quot;span&quot;,10),xl(15),Fa(),Fa(),Fa(),Ra(16,&quot;ul&quot;,11),ra(17,f5,2,2,&quot;li&quot;,12),ra(18,m5,2,2,&quot;li&quot;,12),ra(19,_5,5,3,&quot;li&quot;,12),ra(20,b5,2,2,&quot;li&quot;,12),ra(21,y5,2,3,&quot;li&quot;,12),ra(22,x5,2,1,&quot;li&quot;,12),ra(23,w5,2,1,&quot;li&quot;,12),ra(24,C5,2,1,&quot;li&quot;,12),ra(25,S5,2,2,&quot;li&quot;,12),ra(26,k5,2,1,&quot;li&quot;,12),ra(27,E5,2,2,&quot;li&quot;,12),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(3),wl(e.alertRule.name),Sr(2),Oa(&quot;ngIf&quot;,!e.alertRule.active),Sr(1),Oa(&quot;ngIf&quot;,!e.alertRule.validZone),Sr(5),wl(e.alertRule.alertsSummary.lastDay),Sr(4),wl(e.alertRule.alertsSummary.lastWeek),Sr(2),Oa(&quot;ngIf&quot;,e.alertRule.criteria.identifier.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.fleet.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.flag.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.type.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.speed.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.erraticRoute.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.transhipment.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.aisInterruption.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.passageInZone.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.spoofing.enable),Sr(1),Oa(&quot;ngIf&quot;,e.alertRule.criteria.zone.enable))},directives:[HQ,Nd,hE,zQ,Bd,aQ],styles:[&quot;.alert-rule-item__header[_ngcontent-%COMP%]{color:#1515a6;text-align:left;margin-top:8px;display:flex;align-items:center}.alert-rule-item__title[_ngcontent-%COMP%]{word-break:break-word;margin-right:8px}.alert-rule-item__state[_ngcontent-%COMP%]{pointer-events:none;touch-action:none}.alert-rule-item__indicators[_ngcontent-%COMP%]{font-size:14px;margin-left:8px;display:flex;align-items:center;pointer-events:all!important}.alert-rule-item__criteria[_ngcontent-%COMP%]{text-align:left;margin:0;line-height:18px;padding-left:1em}&quot;],changeDetection:0}),t})();function T5(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,5),Ra(1,&quot;mat-icon&quot;,6),xl(2,&quot;warning&quot;),Fa(),xl(3,&quot; La configuration de certaines r\xe8gles est incorrecte. Veuillez revoir leur configuration afin de les rendre \xe0 nouveau effectives. &quot;),Fa())}const I5=function(t){return{groupId:t}};function D5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,7),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;add&quot;),Fa(),xl(3,&quot; Nouvelle r\xe8gle &quot;),Fa()),2&amp;t){const t=e.group;Oa(&quot;queryParams&quot;,eh(1,I5,t?t.id:null))}}function O5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,8),La(1,&quot;app-alert-rule-item&quot;,9),Fa()),2&amp;t){const t=e.resource;Oa(&quot;routerLink&quot;,&quot;/alerts/rules/&quot;+t.id)(&quot;@fadeAnimation&quot;,void 0),Sr(1),Oa(&quot;alertRule&quot;,t)}}let P5=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.titleService=t,this.alertRulesService=e,this.mapService=i}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Liste des r\xe8gles - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.alertRulesService.alertRules$.subscribe(t=&gt;{this.containsInvalidAlertRule=t.some(t=&gt;!t.validZone)})})}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(TH),Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alert-rules-panel&quot;]],features:[$o],decls:7,vars:2,consts:[[&quot;joyrideStep&quot;,&quot;rules-panel&quot;,&quot;stepPosition&quot;,&quot;right&quot;,&quot;title&quot;,&quot;R\xe8gles d&#39;alertes&quot;,&quot;text&quot;,&quot;C&#39;est ici que vous pouvez cr\xe9er et visualiser des r\xe8gles personnalis\xe9es afin d&#39;\xeatre alert\xe9 automatiquement de comportements de navires r\xe9pondant \xe0 des algorithmes et des filtres que vous aurez choisis. Par exemple: navires avec pavillon espagnol, de type p\xeacheur, \xe9tant pass\xe9s \xe0 proximit\xe9 des c\xf4tes Corse et ayant transbord\xe9.&quot;,1,&quot;panel&quot;],[&quot;class&quot;,&quot;d-flex-center error-message panel__content mat-body&quot;,4,&quot;ngIf&quot;],[&quot;resourcesKey&quot;,&quot;rules&quot;,&quot;privateResourcesTitle&quot;,&quot;R\xe8gles priv\xe9es&quot;,&quot;emptyMessage&quot;,&quot;Aucune r\xe8gle&quot;,1,&quot;scrollable&quot;,3,&quot;resources$&quot;],[&quot;createTemplate&quot;,&quot;&quot;],[&quot;resourceTemplate&quot;,&quot;&quot;],[1,&quot;d-flex-center&quot;,&quot;error-message&quot;,&quot;panel__content&quot;,&quot;mat-body&quot;],[1,&quot;mr-2&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;routerLink&quot;,&quot;/alerts/rules/new&quot;,1,&quot;ma-2&quot;,3,&quot;queryParams&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;routerLink&quot;],[3,&quot;alertRule&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),ra(1,T5,4,0,&quot;div&quot;,1),Ra(2,&quot;app-resources-panel&quot;,2),ra(3,D5,4,3,&quot;ng-template&quot;,null,3,Rh),ra(5,O5,2,3,&quot;ng-template&quot;,null,4,Rh),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngIf&quot;,e.containsInvalidAlertRule),Sr(1),Oa(&quot;resources$&quot;,e.alertRulesService.alertRules$))},directives:[gL,Nd,u5,hE,Ry,fF,M5],styles:[&quot;[_nghost-%COMP%]{display:flex;overflow:hidden}.alert-rules-panel__rules[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.alert-rules-panel__rules[_ngcontent-%COMP%]     .mat-button{white-space:normal}&quot;],data:{animation:[$3]}}),t})();function R5(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,8)}function F5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,4),Ra(1,&quot;div&quot;,9),Ra(2,&quot;div&quot;,10),Ra(3,&quot;mat-icon&quot;,11),xl(4,&quot;trending_up&quot;),Fa(),xl(5,&quot; Dernier jour &quot;),Fa(),xl(6),Fa(),Ra(7,&quot;div&quot;,12),Ra(8,&quot;div&quot;,10),Ra(9,&quot;mat-icon&quot;,11),xl(10,&quot;trending_up&quot;),Fa(),xl(11,&quot; Derni\xe8re semaine &quot;),Fa(),xl(12),Fa(),Fa()),2&amp;t){const t=Za();Sr(6),Cl(&quot; &quot;,t.alertsSummary.lastDay,&quot; &quot;),Sr(6),Cl(&quot; &quot;,t.alertsSummary.lastWeek,&quot; &quot;)}}function L5(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,8)}function B5(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,16),Ra(1,&quot;mat-icon&quot;,11),xl(2,&quot;warning&quot;),Fa(),xl(3),Fa(),La(4,&quot;app-ship-item-small&quot;,17),Ra(5,&quot;div&quot;,18),lh(6,&quot;timeago&quot;),Ra(7,&quot;mat-icon&quot;,19),xl(8,&quot;access_time&quot;),Fa(),xl(9),lh(10,&quot;date&quot;),Fa()),2&amp;t){const t=e.alert,i=Za(2);Sr(3),Cl(&quot; &quot;,t.rule_name,&quot; &quot;),Sr(1),Oa(&quot;ship&quot;,t.ship),Sr(1),Ja(&quot;title&quot;,ch(6,4,1e3*t.start)),Sr(4),Cl(&quot; &quot;,uh(10,6,1e3*t.start,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}const z5=function(t){return[&quot;/alerts/rules/&quot;,t]},N5=function(t){return[&quot;/ships/&quot;,t]};function V5(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,20),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;info&quot;),Fa(),xl(3,&quot; Voir la r\xe8gle &quot;),Fa(),Ra(4,&quot;button&quot;,20),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;info&quot;),Fa(),xl(7,&quot; Voir d\xe9tail Navire &quot;),Fa(),Ra(8,&quot;button&quot;,21),Ha(&quot;click&quot;,function(){const e=Le(t).alert;return Za(2).locateShip(e.mmsi)}),Ra(9,&quot;mat-icon&quot;),xl(10,&quot;center_focus_strong&quot;),Fa(),xl(11,&quot; Voir position actuelle Navire &quot;),Fa()}if(2&amp;t){const t=e.alert;Oa(&quot;routerLink&quot;,eh(2,z5,t.rule_id)),Sr(4),Oa(&quot;routerLink&quot;,eh(4,N5,t.mmsi))}}function $5(t,e){if(1&amp;t&amp;&amp;(La(0,&quot;app-alerts-list&quot;,13),ra(1,B5,11,10,&quot;ng-template&quot;,null,14,Rh),ra(3,V5,12,6,&quot;ng-template&quot;,null,15,Rh)),2&amp;t){const t=oa(2),e=oa(4);Oa(&quot;alerts$&quot;,Za().alerts$)(&quot;enableRuleFilters&quot;,!0)(&quot;simpleItems&quot;,!1)(&quot;alertTitleRef&quot;,t)(&quot;alertMenuItemsRef&quot;,e)}}let U5=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.titleService=t,this.alertRulesService=e,this.alertsService=i,this.mapService=n,this.mapConfigService=s,this.timeRangeService=r,this.workerService=o,this.alerts$=new Qp([]),this.alertsSummary=null,this.alertsLoaded=!1,this.useUTCDates=!1}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Alertes - ANAIS&quot;),this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t}),this.timeRangeService.timeRange$.subscribe(t=&gt;jp(this,void 0,void 0,function*(){const e=yield this.workerService.alerts.list(t.start,t.end);e.forEach(t=&gt;{const[e,i]=this.alertRulesService.getAlertRuleColor(t.rule_id);t.color=e,t.rgbVecColor=i}),this.alertsService.updateAlerts(e),this.alerts$.next(e),this.alertsLoaded=!0})),W(Jp(0),Mq(3e5)).subscribe(()=&gt;jp(this,void 0,void 0,function*(){this.alertsSummary=yield this.workerService.alerts.getAlertsSummary()})))})}ngOnDestroy(){super.ngOnDestroy(),this.alertsService.updateAlerts([])}locateShip(t){return jp(this,void 0,void 0,function*(){const e=yield this.workerService.ships.getShip(t);this.mapService.pingLocation([e.lon,e.lat]),this.mapService.centerOnLonLat([e.lon,e.lat])})}exportAlertsAsCSV(){const t=this.timeRangeService.timeRange$.value,e=nq(t.start),i=nq(t.end);this.alerts$.value.forEach(t=&gt;{t.ship_name=t.ship.name}),iW(_Q(this.alerts$.value),`anais-alerts-${e}-${i}.csv`,&quot;text/csv&quot;)}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(TH),Da(IH),Da(kj),Da(HU),Da(Oq),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alerts-dashboard&quot;]],features:[$o],decls:13,vars:5,consts:[[&quot;joyrideStep&quot;,&quot;alerts-panel&quot;,&quot;stepPosition&quot;,&quot;right&quot;,&quot;title&quot;,&quot;Tableau de bord des alertes&quot;,&quot;text&quot;,&quot;Cet endroit contient un tableau de bord de toutes les alertes lev\xe9es par toutes vos r\xe8gles.&quot;,1,&quot;panel&quot;],[1,&quot;panel__title&quot;],[&quot;class&quot;,&quot;small-spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;60&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;d-flex&quot;,4,&quot;ngIf&quot;],[1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;,&quot;my-0&quot;,&quot;pa-2&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter les alertes au format CSV&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[3,&quot;ngIf&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;60&quot;,1,&quot;small-spinner&quot;],[&quot;title&quot;,&quot;Nombre d&#39;alertes lev\xe9es au cours des derni\xe8res 24 heures&quot;,1,&quot;indicator&quot;,&quot;mat-elevation-z8&quot;],[1,&quot;indicator__label&quot;],[1,&quot;mr-1&quot;],[&quot;title&quot;,&quot;Nombre d&#39;alertes lev\xe9es au cours des 7 derniers jours&quot;,1,&quot;indicator&quot;,&quot;mat-elevation-z8&quot;],[3,&quot;alerts$&quot;,&quot;enableRuleFilters&quot;,&quot;simpleItems&quot;,&quot;alertTitleRef&quot;,&quot;alertMenuItemsRef&quot;],[&quot;alertTitleRef&quot;,&quot;&quot;],[&quot;alertMenuItemsRef&quot;,&quot;&quot;],[1,&quot;d-flex-center&quot;],[1,&quot;alert__ship&quot;,3,&quot;ship&quot;],[1,&quot;alert__timestamp&quot;,3,&quot;title&quot;],[&quot;title&quot;,&quot;Date de l&#39;alerte&quot;,1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;routerLink&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h2&quot;,1),xl(2,&quot;Indicateurs&quot;),Fa(),ra(3,R5,1,0,&quot;mat-spinner&quot;,2),ra(4,F5,13,2,&quot;div&quot;,3),Ra(5,&quot;div&quot;,4),Ra(6,&quot;h2&quot;,5),xl(7,&quot;Alertes&quot;),Fa(),Ra(8,&quot;button&quot;,6),Ha(&quot;click&quot;,function(){return e.exportAlertsAsCSV()}),Ra(9,&quot;mat-icon&quot;),xl(10,&quot;file_download&quot;),Fa(),Fa(),Fa(),ra(11,L5,1,0,&quot;mat-spinner&quot;,2),ra(12,$5,5,5,&quot;ng-template&quot;,7),Fa()),2&amp;t&amp;&amp;(Sr(3),Oa(&quot;ngIf&quot;,!e.alertsSummary),Sr(1),Oa(&quot;ngIf&quot;,e.alertsSummary),Sr(4),Oa(&quot;disabled&quot;,0===e.alerts$.value.length),Sr(3),Oa(&quot;ngIf&quot;,!e.alertsLoaded),Sr(1),Oa(&quot;ngIf&quot;,e.alertsLoaded))},directives:[gL,Nd,Ry,hE,TQ,z2,V2,nJ,fF],pipes:[VL,ep],styles:[&quot;[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.indicator[_ngcontent-%COMP%]{flex:1;padding:.7em 8px 8px;position:relative;margin:8px;font-size:1.5em;display:flex;justify-content:center;align-items:center;min-height:3em;border-radius:4px}.indicator__label[_ngcontent-%COMP%]{position:absolute;top:0;left:4px;color:#8c8c8c;font-size:12px;display:flex;align-items:center}.alert__ship[_ngcontent-%COMP%]{border-left:1px solid grey;padding-left:3px;display:block}.alert__timestamp[_ngcontent-%COMP%]{color:gray;display:flex;align-items:center}&quot;]}),t})();const j5=[&quot;*&quot;],H5=[&quot;tabListContainer&quot;],G5=[&quot;tabList&quot;],q5=[&quot;nextPaginator&quot;],W5=[&quot;previousPaginator&quot;],Y5=[&quot;mat-tab-nav-bar&quot;,&quot;&quot;],Z5=new Ji(&quot;MatInkBarPositioner&quot;,{providedIn:&quot;root&quot;,factory:function(){return t=&gt;({left:t?(t.offsetLeft||0)+&quot;px&quot;:&quot;0&quot;,width:t?(t.offsetWidth||0)+&quot;px&quot;:&quot;0&quot;})}});let K5=(()=&gt;{class t{constructor(t,e,i,n){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=i,this._animationMode=n}alignToElement(t){this.show(),&quot;undefined&quot;!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=&gt;{requestAnimationFrame(()=&gt;this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility=&quot;visible&quot;}hide(){this._elementRef.nativeElement.style.visibility=&quot;hidden&quot;}_setStyles(t){const e=this._inkBarPositioner(t),i=this._elementRef.nativeElement;i.style.left=e.left,i.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(iu),Da(Z5),Da(yb,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;mat-ink-bar&quot;]],hostAttrs:[1,&quot;mat-ink-bar&quot;],hostVars:2,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode)}}),t})();const X5=Xf({passive:!0});let Q5=(()=&gt;{class t{constructor(t,e,i,n,s,r,o){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=i,this._dir=n,this._ngZone=s,this._platform=r,this._animationMode=o,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new S,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new S,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new mh,this.indexFocused=new mh,s.runOutsideAngular(()=&gt;{qm(t.nativeElement,&quot;mouseleave&quot;).pipe(Df(this._destroyed)).subscribe(()=&gt;{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Ff(t),this._selectedIndex!=t&amp;&amp;(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&amp;&amp;this._keyManager.updateActiveItem(t))}ngAfterViewInit(){qm(this._previousPaginator.nativeElement,&quot;touchstart&quot;,X5).pipe(Df(this._destroyed)).subscribe(()=&gt;{this._handlePaginatorPress(&quot;before&quot;)}),qm(this._nextPaginator.nativeElement,&quot;touchstart&quot;,X5).pipe(Df(this._destroyed)).subscribe(()=&gt;{this._handlePaginatorPress(&quot;after&quot;)})}ngAfterContentInit(){const t=this._dir?this._dir.change:Jp(&quot;ltr&quot;),e=this._viewportRuler.change(150),i=()=&gt;{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new bm(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),&quot;undefined&quot;!=typeof requestAnimationFrame?requestAnimationFrame(i):i(),W(t,e,this._items.changes).pipe(Df(this._destroyed)).subscribe(()=&gt;{this._ngZone.run(()=&gt;Promise.resolve().then(i)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Df(this._destroyed)).subscribe(t=&gt;{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&amp;&amp;(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&amp;&amp;(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&amp;&amp;(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!tf(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&amp;&amp;(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&amp;&amp;(this._currentTextContent=t||&quot;&quot;,this._ngZone.run(()=&gt;{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&amp;&amp;!e.disabled}_setTabFocus(t){if(this._showPaginationControls&amp;&amp;this._scrollToLabel(t),this._items&amp;&amp;this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement;e.scrollLeft=&quot;ltr&quot;==this._getLayoutDirection()?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&amp;&amp;&quot;rtl&quot;===this._dir.value?&quot;rtl&quot;:&quot;ltr&quot;}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e=&quot;ltr&quot;===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(e)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&amp;&amp;(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+(&quot;before&quot;==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:n,offsetWidth:s}=e.elementRef.nativeElement;let r,o;&quot;ltr&quot;==this._getLayoutDirection()?(r=n,o=r+s):(o=this._tabList.nativeElement.offsetWidth-n,r=o-s);const a=this.scrollDistance,l=this.scrollDistance+i;r&lt;a?this.scrollDistance-=a-r+60:o&gt;l&amp;&amp;(this.scrollDistance+=o-l+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth&gt;this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&amp;&amp;this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&amp;&amp;this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&amp;&amp;null!=e.button&amp;&amp;0!==e.button||(this._stopInterval(),rg(650,100).pipe(Df(W(this._stopScrolling,this._destroyed))).subscribe(()=&gt;{const{maxScrollDistance:e,distance:i}=this._scrollHeader(t);(0===i||i&gt;=e)&amp;&amp;this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Ec),Da(Hg),Da(kg,8),Da(iu),Da(jf),Da(yb,8))},t.\u0275dir=Xt({type:t,inputs:{disablePagination:&quot;disablePagination&quot;}}),t})(),J5=(()=&gt;{class t extends Q5{constructor(t,e,i,n,s,r,o){super(t,n,s,e,i,r,o),this._disableRipple=!1,this.color=&quot;primary&quot;}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement.classList;e.remove(`mat-background-${this.backgroundColor}`),t&amp;&amp;e.add(`mat-background-${t}`),this._backgroundColor=t}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Rf(t)}_itemSelected(){}ngAfterContentInit(){this._items.changes.pipe(cg(null),Df(this._destroyed)).subscribe(()=&gt;{this.updateActiveLink()}),super.ngAfterContentInit()}updateActiveLink(){if(!this._items)return;const t=this._items.toArray();for(let e=0;e&lt;t.length;e++)if(t[e].active)return this.selectedIndex=e,void this._changeDetectorRef.markForCheck();this.selectedIndex=-1,this._inkBar.hide()}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(kg,8),Da(iu),Da(Ec),Da(Hg),Da(jf),Da(yb,8))},t.\u0275dir=Xt({type:t,inputs:{color:&quot;color&quot;,backgroundColor:&quot;backgroundColor&quot;,disableRipple:&quot;disableRipple&quot;},features:[$o]}),t})(),t4=(()=&gt;{class t extends J5{constructor(t,e,i,n,s,r,o){super(t,e,i,n,s,r,o)}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(kg,8),Da(iu),Da(Ec),Da(Hg),Da(jf),Da(yb,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;&quot;,&quot;mat-tab-nav-bar&quot;,&quot;&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;Th(i,n4,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._items=t)}},viewQuery:function(t,e){if(1&amp;t&amp;&amp;(Mh(K5,7),Mh(H5,7),Mh(G5,7),Mh(q5,5),Mh(W5,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._inkBar=t.first),Eh(t=Ih())&amp;&amp;(e._tabListContainer=t.first),Eh(t=Ih())&amp;&amp;(e._tabList=t.first),Eh(t=Ih())&amp;&amp;(e._nextPaginator=t.first),Eh(t=Ih())&amp;&amp;(e._previousPaginator=t.first)}},hostAttrs:[1,&quot;mat-tab-nav-bar&quot;,&quot;mat-tab-header&quot;],hostVars:10,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-tab-header-pagination-controls-enabled&quot;,e._showPaginationControls)(&quot;mat-tab-header-rtl&quot;,&quot;rtl&quot;==e._getLayoutDirection())(&quot;mat-primary&quot;,&quot;warn&quot;!==e.color&amp;&amp;&quot;accent&quot;!==e.color)(&quot;mat-accent&quot;,&quot;accent&quot;===e.color)(&quot;mat-warn&quot;,&quot;warn&quot;===e.color)},inputs:{color:&quot;color&quot;},exportAs:[&quot;matTabNavBar&quot;,&quot;matTabNav&quot;],features:[$o],attrs:Y5,ngContentSelectors:j5,decls:13,vars:8,consts:[[&quot;aria-hidden&quot;,&quot;true&quot;,&quot;mat-ripple&quot;,&quot;&quot;,1,&quot;mat-tab-header-pagination&quot;,&quot;mat-tab-header-pagination-before&quot;,&quot;mat-elevation-z4&quot;,3,&quot;matRippleDisabled&quot;,&quot;click&quot;,&quot;mousedown&quot;,&quot;touchend&quot;],[&quot;previousPaginator&quot;,&quot;&quot;],[1,&quot;mat-tab-header-pagination-chevron&quot;],[1,&quot;mat-tab-link-container&quot;,3,&quot;keydown&quot;],[&quot;tabListContainer&quot;,&quot;&quot;],[1,&quot;mat-tab-list&quot;,3,&quot;cdkObserveContent&quot;],[&quot;tabList&quot;,&quot;&quot;],[1,&quot;mat-tab-links&quot;],[&quot;aria-hidden&quot;,&quot;true&quot;,&quot;mat-ripple&quot;,&quot;&quot;,1,&quot;mat-tab-header-pagination&quot;,&quot;mat-tab-header-pagination-after&quot;,&quot;mat-elevation-z4&quot;,3,&quot;matRippleDisabled&quot;,&quot;mousedown&quot;,&quot;click&quot;,&quot;touchend&quot;],[&quot;nextPaginator&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0,1),Ha(&quot;click&quot;,function(){return e._handlePaginatorClick(&quot;before&quot;)})(&quot;mousedown&quot;,function(t){return e._handlePaginatorPress(&quot;before&quot;,t)})(&quot;touchend&quot;,function(){return e._stopInterval()}),La(2,&quot;div&quot;,2),Fa(),Ra(3,&quot;div&quot;,3,4),Ha(&quot;keydown&quot;,function(t){return e._handleKeydown(t)}),Ra(5,&quot;div&quot;,5,6),Ha(&quot;cdkObserveContent&quot;,function(){return e._onContentChanges()}),Ra(7,&quot;div&quot;,7),Qa(8),Fa(),La(9,&quot;mat-ink-bar&quot;),Fa(),Fa(),Ra(10,&quot;div&quot;,8,9),Ha(&quot;mousedown&quot;,function(t){return e._handlePaginatorPress(&quot;after&quot;,t)})(&quot;click&quot;,function(){return e._handlePaginatorClick(&quot;after&quot;)})(&quot;touchend&quot;,function(){return e._stopInterval()}),La(12,&quot;div&quot;,2),Fa()),2&amp;t&amp;&amp;(cl(&quot;mat-tab-header-pagination-disabled&quot;,e._disableScrollBefore),Oa(&quot;matRippleDisabled&quot;,e._disableScrollBefore||e.disableRipple),Sr(5),cl(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode),Sr(5),cl(&quot;mat-tab-header-pagination-disabled&quot;,e._disableScrollAfter),Oa(&quot;matRippleDisabled&quot;,e._disableScrollAfter||e.disableRipple))},directives:[dy,om,K5],styles:[&#39;.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:&quot;&quot;;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-links{display:flex}[mat-align-tabs=center]&gt;.mat-tab-link-container .mat-tab-links{justify-content:center}[mat-align-tabs=end]&gt;.mat-tab-link-container .mat-tab-links{justify-content:flex-end}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-link-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent}.mat-tab-link:focus{outline:none}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-link:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-link.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-link.mat-tab-disabled{opacity:.5}.mat-tab-link .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-link{opacity:1}[mat-stretch-tabs] .mat-tab-link{flex-basis:0;flex-grow:1}.mat-tab-link.mat-tab-disabled{pointer-events:none}@media(max-width: 599px){.mat-tab-link{min-width:72px}}\n&#39;],encapsulation:2}),t})();const e4=Nb(zb(Lb(class{})));let i4=(()=&gt;{class t extends e4{constructor(t,e,i,n,s,r){super(),this._tabNavBar=t,this.elementRef=e,this._focusMonitor=s,this._isActive=!1,this.rippleConfig=i||{},this.tabIndex=parseInt(n)||0,&quot;NoopAnimations&quot;===r&amp;&amp;(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get active(){return this._isActive}set active(t){Rf(t)!==this._isActive&amp;&amp;(this._isActive=t,this._tabNavBar.updateActiveLink())}get rippleDisabled(){return this.disabled||this.disableRipple||this._tabNavBar.disableRipple||!!this.rippleConfig.disabled}focus(){this.elementRef.nativeElement.focus()}ngAfterViewInit(){this._focusMonitor.monitor(this.elementRef)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.elementRef)}_handleFocus(){this._tabNavBar.focusIndex=this._tabNavBar._items.toArray().indexOf(this)}}return t.\u0275fac=function(e){return new(e||t)(Da(J5),Da(ec),Da(uy,8),Yi(&quot;tabindex&quot;),Da(Nm),Da(yb,8))},t.\u0275dir=Xt({type:t,inputs:{active:&quot;active&quot;},features:[$o]}),t})(),n4=(()=&gt;{class t extends i4{constructor(t,e,i,n,s,r,o,a){super(t,e,s,r,o,a),this._tabLinkRipple=new hy(this,i,e,n),this._tabLinkRipple.setupTriggerEvents(e.nativeElement)}ngOnDestroy(){super.ngOnDestroy(),this._tabLinkRipple._removeTriggerEvents()}}return t.\u0275fac=function(e){return new(e||t)(Da(t4),Da(ec),Da(iu),Da(jf),Da(uy,8),Yi(&quot;tabindex&quot;),Da(Nm),Da(yb,8))},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;mat-tab-link&quot;,&quot;&quot;],[&quot;&quot;,&quot;matTabLink&quot;,&quot;&quot;]],hostAttrs:[1,&quot;mat-tab-link&quot;,&quot;mat-focus-indicator&quot;],hostVars:7,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;focus&quot;,function(){return e._handleFocus()}),2&amp;t&amp;&amp;(ea(&quot;aria-current&quot;,e.active?&quot;page&quot;:null)(&quot;aria-disabled&quot;,e.disabled)(&quot;tabIndex&quot;,e.tabIndex),cl(&quot;mat-tab-disabled&quot;,e.disabled)(&quot;mat-tab-label-active&quot;,e.active))},inputs:{disabled:&quot;disabled&quot;,disableRipple:&quot;disableRipple&quot;,tabIndex:&quot;tabIndex&quot;},exportAs:[&quot;matTabLink&quot;],features:[$o]}),t})(),s4=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[ip,Fb,Xp,py,am,Gm],Fb]}),t})();function r4(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,3,4),xl(2),Fa()),2&amp;t){const t=e.$implicit,i=oa(1);tl(&quot;title&quot;,&quot;Onglet &quot;,t.label,&quot;&quot;),Oa(&quot;routerLink&quot;,t.link)(&quot;active&quot;,i.isActive),Sr(2),Cl(&quot; &quot;,t.label,&quot; &quot;)}}let o4=(()=&gt;{class t extends Eq{constructor(t){super(),this.mapService=t,this.tabs=[{label:&quot;Alertes&quot;,link:&quot;/alerts/dashboard&quot;},{label:&quot;R\xe8gles&quot;,link:&quot;/alerts/rules&quot;}]}ngOnInit(){return jp(this,void 0,void 0,function*(){this.mapService.hasBooted$.value||this.mapService.resetToDefaultView()})}}return t.\u0275fac=function(e){return new(e||t)(Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alerts-panel&quot;]],features:[$o],decls:4,vars:1,consts:[[1,&quot;panel&quot;],[&quot;mat-tab-nav-bar&quot;,&quot;&quot;,&quot;mat-align-tabs&quot;,&quot;center&quot;,1,&quot;tabs&quot;],[&quot;mat-tab-link&quot;,&quot;&quot;,&quot;routerLinkActive&quot;,&quot;&quot;,3,&quot;routerLink&quot;,&quot;active&quot;,&quot;title&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;mat-tab-link&quot;,&quot;&quot;,&quot;routerLinkActive&quot;,&quot;&quot;,3,&quot;routerLink&quot;,&quot;active&quot;,&quot;title&quot;],[&quot;rla&quot;,&quot;routerLinkActive&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;nav&quot;,1),ra(2,r4,3,4,&quot;a&quot;,2),Fa(),La(3,&quot;router-outlet&quot;),Fa()),2&amp;t&amp;&amp;(Sr(2),Oa(&quot;ngForOf&quot;,e.tabs))},directives:[t4,Bd,vF,mF,n4,AF],styles:[&quot;.tabs[_ngcontent-%COMP%]{background-color:#f2c94c}&quot;]}),t})();class a4 extends s${constructor(t){super(),this.id_=void 0,this.geometryName_=&quot;geometry&quot;,this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&amp;&amp;(&quot;function&quot;==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){const t=new a4(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&amp;&amp;t.setGeometry(e.clone());const i=this.getStyle();return i&amp;&amp;t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&amp;&amp;(Xz(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&amp;&amp;(this.geometryChangeKey_=Zz(t,&quot;change&quot;,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if(&quot;function&quot;==typeof t)return t;{let e;return Array.isArray(t)?e=t:(nN(&quot;function&quot;==typeof t.getZIndex,41),e=[t]),function(){return e}}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}var l4=a4;class c4{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null}clone(){const t=this.getColor();return new c4({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var h4=c4;const u4=new Array(6);function d4(t){return f4(t,1,0,0,1,0,0)}function p4(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=e[0],c=e[1],h=e[2],u=e[3],d=e[4],p=e[5];return t[0]=i*l+s*c,t[1]=n*l+r*c,t[2]=i*h+s*u,t[3]=n*h+r*u,t[4]=i*d+s*p+o,t[5]=n*d+r*p+a,t}function f4(t,e,i,n,s,r,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t}function m4(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function g4(t,e,i){return p4(t,f4(u4,1,0,0,1,e,i))}function A4(t,e,i,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return t[0]=n*c,t[1]=s*l,t[2]=-n*l,t[3]=s*c,t[4]=o*n*c-a*n*l+e,t[5]=o*s*l+a*s*c+i,t}function v4(t,e){const i=function(t){return t[0]*t[3]-t[1]*t[2]}(e);nN(0!==i,32);const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/i,t[1]=-s/i,t[2]=-r/i,t[3]=n/i,t[4]=(r*l-o*a)/i,t[5]=-(n*l-s*a)/i,t}let _4;function b4(t){const e=&quot;matrix(&quot;+t.join(&quot;, &quot;)+&quot;)&quot;;if(Nz)return e;const i=_4||(_4=document.createElement(&quot;div&quot;));return i.style.transform=e,i.style.transform}function y4(t,e,i,n,s,r){r=r||[];let o=0;for(let a=e;a&lt;i;a+=n){const e=t[a],i=t[a+1];r[o++]=s[0]*e+s[2]*i+s[4],r[o++]=s[1]*e+s[3]*i+s[5]}return r&amp;&amp;r.length!=o&amp;&amp;(r.length=o),r}function x4(t,e,i,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let d=e;d&lt;i;d+=n){const e=t[d]-c,i=t[d+1]-h;o[u++]=c+e*a-i*l,o[u++]=h+e*l+i*a;for(let s=d+2;s&lt;d+n;++s)o[u++]=t[s]}return o&amp;&amp;o.length!=u&amp;&amp;(o.length=u),o}function w4(t,e,i,n,s,r,o){o=o||[];let a=0;for(let l=e;l&lt;i;l+=n){o[a++]=t[l]+s,o[a++]=t[l+1]+r;for(let e=l+2;e&lt;l+n;++e)o[a++]=t[e]}return o&amp;&amp;o.length!=a&amp;&amp;(o.length=a),o}const C4=[1,0,0,1,0,0];var S4=class extends s${constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,i,n,s=!1;return function(){const r=Array.prototype.slice.call(arguments);return(!s||this!==n||!vz(r,i))&amp;&amp;(s=!0,n=this,i=r,e=t.apply(this,arguments)),e}}(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Sz()}closestPointXY(t,e,i,n){return Sz()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&amp;&amp;i[1]===e}getClosestPoint(t,e){return this.closestPointXY(t[0],t[1],e=e||[NaN,NaN],1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Sz()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&amp;&amp;pN(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){Sz()}scale(t,e,i){Sz()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Sz()}getType(){return Sz()}applyTransform(t){Sz()}intersectsExtent(t){return Sz()}translate(t,e){Sz()}transform(t,e){const i=kV(t),n=&quot;tile-pixels&quot;==i.getUnits()?function(t,n,s){const r=i.getExtent(),o=i.getWorldExtent(),a=TN(o)/TN(r);return A4(C4,o[0],o[3],a,-a,0,0,0),y4(t,0,t.length,s,C4,n),RV(i,e)(t,n,s)}:RV(i,e);return this.applyTransform(n),this}};class k4 extends S4{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Xz),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t&lt;e;++t)this.changeEventsKeys_.push(Zz(this.geometries_[t],&quot;change&quot;,this.changed,this))}clone(){const t=new k4(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n&lt;aN(this.getExtent(),t,e))return n;const s=this.geometries_;for(let r=0,o=s.length;r&lt;o;++r)n=s[r].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,s=i.length;n&lt;s;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){pN(t);const e=this.geometries_;for(let i=0,n=e.length;i&lt;n;++i)AN(t,e[i].getExtent());return t}getGeometries(){return E4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i&lt;n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&amp;&amp;(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t&lt;0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&amp;&amp;t&lt;this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let s=0,r=i.length;s&lt;r;++s){const r=i[s],o=r.getSimplifiedGeometry(t);e.push(o),o!==r&amp;&amp;(n=!0)}if(n){const t=new k4(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return&quot;GeometryCollection&quot;}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i&lt;n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n&lt;s;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=SN(this.getExtent()));const n=this.geometries_;for(let s=0,r=n.length;s&lt;r;++s)n[s].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(E4(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i&lt;n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n&lt;s;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function E4(t){const e=[];for(let i=0,n=t.length;i&lt;n;++i)e.push(t[i].clone());return e}var M4=k4;class T4{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=b$(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new T4({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Sz()}getImage(t){return Sz()}getHitDetectionImage(){return Sz()}getPixelRatio(t){return 1}getImageState(){return Sz()}getImageSize(){return Sz()}getOrigin(){return Sz()}getSize(){return Sz()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=b$(t)}listenImageChange(t){Sz()}load(){Sz()}unlistenImageChange(t){Sz()}}var I4=T4;const D4=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,O4=/^([a-z]*)$|^hsla?\(.*\)$/i;function P4(t){return&quot;string&quot;==typeof t?t:z4(t)}function R4(t){const e=document.createElement(&quot;div&quot;);if(e.style.color=t,&quot;&quot;!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return&quot;&quot;}const F4=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e&gt;=1024){let i=0;for(const n in t)0==(3&amp;i++)&amp;&amp;(delete t[n],--e)}n=function(t){let e,i,n,s,r;if(O4.exec(t)&amp;&amp;(t=R4(t)),D4.exec(t)){const o=t.length-1;let a;a=o&lt;=4?1:2;const l=4===o||8===o;e=parseInt(t.substr(1+0*a,a),16),i=parseInt(t.substr(1+1*a,a),16),n=parseInt(t.substr(1+2*a,a),16),s=l?parseInt(t.substr(1+3*a,a),16):255,1==a&amp;&amp;(e=(e&lt;&lt;4)+e,i=(i&lt;&lt;4)+i,n=(n&lt;&lt;4)+n,l&amp;&amp;(s=(s&lt;&lt;4)+s)),r=[e,i,n,s/255]}else t.startsWith(&quot;rgba(&quot;)?(r=t.slice(5,-1).split(&quot;,&quot;).map(Number),B4(r)):t.startsWith(&quot;rgb(&quot;)?(r=t.slice(4,-1).split(&quot;,&quot;).map(Number),r.push(1),B4(r)):nN(!1,14);return r}(i),t[i]=n,++e}return n}}();function L4(t){return Array.isArray(t)?t:F4(t)}function B4(t){return t[0]=JN(t[0]+.5|0,0,255),t[1]=JN(t[1]+.5|0,0,255),t[2]=JN(t[2]+.5|0,0,255),t[3]=JN(t[3],0,1),t}function z4(t){let e=t[0];e!=(0|e)&amp;&amp;(e=e+.5|0);let i=t[1];i!=(0|i)&amp;&amp;(i=i+.5|0);let n=t[2];return n!=(0|n)&amp;&amp;(n=n+.5|0),&quot;rgba(&quot;+e+&quot;,&quot;+i+&quot;,&quot;+n+&quot;,&quot;+(void 0===t[3]?1:Math.round(100*t[3])/100)+&quot;)&quot;}function N4(t,e,i){return e+&quot;:&quot;+t+&quot;:&quot;+(i?P4(i):&quot;null&quot;)}const V4=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_&gt;this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0==(3&amp;t++)&amp;&amp;!i.hasListener()&amp;&amp;(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=N4(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const s=N4(t,e,i);this.cache_[s]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let $4=null;class U4 extends Cz{constructor(t,e,i,n,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=e}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&amp;&amp;(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&amp;&amp;2===this.imageState_){$4||($4=Uz(1,1)),$4.drawImage(this.image_,0,0);try{$4.getImageData(0,0,1,1),this.tainted_=!1}catch(t){$4=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(&quot;change&quot;)}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Uz(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Qz(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||2!==this.imageState_)return;const e=this.image_,i=document.createElement(&quot;canvas&quot;);i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext(&quot;2d&quot;);n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation=&quot;multiply&quot;,n.fillStyle=P4(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation=&quot;destination-in&quot;,n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&amp;&amp;(this.unlisten_(),this.unlisten_=null)}}class j4 extends I4{constructor(t){super({opacity:void 0!==(t=t||{}).opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&amp;&amp;t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:&quot;top-left&quot;,this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:&quot;fraction&quot;,this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:&quot;fraction&quot;,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const e=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let i=t.src;nN(!(void 0!==i&amp;&amp;e),4),nN(!e||e&amp;&amp;this.imgSize_,5),(void 0===i||0===i.length)&amp;&amp;e&amp;&amp;(i=e.src||Ez(e)),nN(void 0!==i&amp;&amp;i.length&gt;0,6);const n=void 0!==t.src?0:2;this.color_=void 0!==t.color?L4(t.color):null,this.iconImage_=function(t,e,i,n,s,r){let o=V4.get(e,n,r);return o||(o=new U4(t,e,i,n,s,r),V4.set(e,n,r,o)),o}(e,i,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,n,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:&quot;top-left&quot;,this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new j4({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&amp;&amp;this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if(&quot;fraction&quot;==this.anchorXUnits_||&quot;fraction&quot;==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),&quot;fraction&quot;==this.anchorXUnits_&amp;&amp;(t[0]*=e[0]),&quot;fraction&quot;==this.anchorYUnits_&amp;&amp;(t[1]*=e[1])}if(&quot;top-left&quot;!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&amp;&amp;(t=this.anchor_.slice()),(&quot;top-right&quot;==this.anchorOrigin_||&quot;bottom-right&quot;==this.anchorOrigin_)&amp;&amp;(t[0]=-t[0]+e[0]),(&quot;bottom-left&quot;==this.anchorOrigin_||&quot;bottom-right&quot;==this.anchorOrigin_)&amp;&amp;(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(&quot;top-left&quot;!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(&quot;top-right&quot;==this.offsetOrigin_||&quot;bottom-right&quot;==this.offsetOrigin_)&amp;&amp;(t[0]=i[0]-e[0]-t[0]),(&quot;bottom-left&quot;==this.offsetOrigin_||&quot;bottom-right&quot;==this.offsetOrigin_)&amp;&amp;(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(&quot;change&quot;,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(&quot;change&quot;,t)}}var H4=j4;function G4(t){let e;return&quot;XY&quot;==t?e=2:&quot;XYZ&quot;==t||&quot;XYM&quot;==t?e=3:&quot;XYZM&quot;==t&amp;&amp;(e=4),e}var q4=class extends S4{constructor(){super(),this.layout=&quot;XY&quot;,this.stride=2,this.flatCoordinates=null}computeExtent(t){return mN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Sz()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&amp;&amp;(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t&lt;0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&amp;&amp;t&lt;=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length&lt;this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=G4(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Sz()}setLayout(t,e,i){let n;if(t)n=G4(t);else{for(let t=0;t&lt;i;++t){if(0===e.length)return this.layout=&quot;XY&quot;,void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;return 2==t?e=&quot;XY&quot;:3==t?e=&quot;XYZ&quot;:4==t&amp;&amp;(e=&quot;XYZM&quot;),e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&amp;&amp;(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();x4(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&amp;&amp;(e=t),i||(i=SN(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();(function(t,e,i,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=0;u&lt;i;u+=n){const e=t[u+1]-c;a[h++]=l+s*(t[u]-l),a[h++]=c+r*e;for(let i=u+2;i&lt;u+n;++i)a[h++]=t[i]}a&amp;&amp;a.length!=h&amp;&amp;(a.length=h)})(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();w4(i,0,i.length,n,t,e,i),this.changed()}}};function W4(t,e,i,n,s,r,o){const a=t[e],l=t[e+1],c=t[i]-a,h=t[i+1]-l;let u;if(0===c&amp;&amp;0===h)u=e;else{const d=((s-a)*c+(r-l)*h)/(c*c+h*h);if(d&gt;1)u=i;else{if(d&gt;0){for(let s=0;s&lt;n;++s)o[s]=rV(t[e+s],t[i+s],d);return void(o.length=n)}u=e}}for(let d=0;d&lt;n;++d)o[d]=t[u+d];o.length=n}function Y4(t,e,i,n,s){let r=t[e],o=t[e+1];for(e+=n;e&lt;i;e+=n){const i=t[e],n=t[e+1],a=eV(r,o,i,n);a&gt;s&amp;&amp;(s=a),r=i,o=n}return s}function Z4(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){const o=i[r];s=Y4(t,e,o,n,s),e=o}return s}function K4(t,e,i,n,s,r,o,a,l,c,h){if(e==i)return c;let u,d;if(0===s){if(d=eV(o,a,t[e],t[e+1]),d&lt;c){for(u=0;u&lt;n;++u)l[u]=t[e+u];return l.length=n,d}return c}h=h||[NaN,NaN];let p=e+n;for(;p&lt;i;)if(W4(t,p-n,p,n,o,a,h),d=eV(o,a,h[0],h[1]),d&lt;c){for(c=d,u=0;u&lt;n;++u)l[u]=h[u];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&amp;&amp;(W4(t,i-n,e,n,o,a,h),d=eV(o,a,h[0],h[1]),d&lt;c)){for(c=d,u=0;u&lt;n;++u)l[u]=h[u];l.length=n}return c}function X4(t,e,i,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=i.length;u&lt;d;++u){const d=i[u];c=K4(t,e,d,n,s,r,o,a,l,c,h),e=d}return c}function Q4(t,e,i,n){for(let s=0,r=i.length;s&lt;r;++s)t[e++]=i[s];return e}function J4(t,e,i,n){for(let s=0,r=i.length;s&lt;r;++s){const r=i[s];for(let i=0;i&lt;n;++i)t[e++]=r[i]}return e}function t6(t,e,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o&lt;a;++o){const a=J4(t,e,i[o],n);s[r++]=a,e=a}return s.length=r,s}function e6(t,e,i,n,s,r,o){const a=(i-e)/n;if(a&lt;3){for(;e&lt;i;e+=n)r[o++]=t[e],r[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,i-n];let h=0;for(;c.length&gt;0;){const i=c.pop(),r=c.pop();let o=0;const a=t[r],u=t[r+1],d=t[i],p=t[i+1];for(let e=r+n;e&lt;i;e+=n){const i=tV(t[e],t[e+1],a,u,d,p);i&gt;o&amp;&amp;(h=e,o=i)}o&gt;s&amp;&amp;(l[(h-e)/n]=1,r+n&lt;h&amp;&amp;c.push(r,h),h+n&lt;i&amp;&amp;c.push(h,i))}for(let u=0;u&lt;a;++u)l[u]&amp;&amp;(r[o++]=t[e+u*n],r[o++]=t[e+u*n+1]);return o}function i6(t,e){return e*Math.round(t/e)}function n6(t,e,i,n,s,r,o){if(e==i)return o;let a,l,c=i6(t[e],s),h=i6(t[e+1],s);e+=n,r[o++]=c,r[o++]=h;do{if(a=i6(t[e],s),l=i6(t[e+1],s),(e+=n)==i)return r[o++]=a,r[o++]=l,o}while(a==c&amp;&amp;l==h);for(;e&lt;i;){const i=i6(t[e],s),u=i6(t[e+1],s);if(e+=n,i==a&amp;&amp;u==l)continue;const d=a-c,p=l-h,f=i-c,m=u-h;d*m==p*f&amp;&amp;(d&lt;0&amp;&amp;f&lt;d||d==f||d&gt;0&amp;&amp;f&gt;d)&amp;&amp;(p&lt;0&amp;&amp;m&lt;p||p==m||p&gt;0&amp;&amp;m&gt;p)?(a=i,l=u):(r[o++]=a,r[o++]=l,c=a,h=l,a=i,l=u)}return r[o++]=a,r[o++]=l,o}function s6(t,e,i,n,s,r,o,a){for(let l=0,c=i.length;l&lt;c;++l){const c=i[l];o=n6(t,e,c,n,s,r,o),a.push(o),e=c}return o}function r6(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=e;o&lt;i;o+=n)s[r++]=t.slice(o,o+n);return s.length=r,s}function o6(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=i.length;o&lt;a;++o){const a=i[o];s[r++]=r6(t,e,a,n,s[r]),e=a}return s.length=r,s}function a6(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=i.length;o&lt;a;++o){const a=i[o];s[r++]=1===a.length&amp;&amp;a[0]===e?[]:o6(t,e,a,n,s[r]),e=a[a.length-1]}return s.length=r,s}function l6(t,e,i,n,s,r,o){let a,l;const c=(i-e)/n;if(1===c)a=e;else if(2===c)a=e,l=s;else if(0!==c){let r=t[e],o=t[e+1],c=0;const h=[0];for(let s=e+n;s&lt;i;s+=n){const e=t[s],i=t[s+1];c+=Math.sqrt((e-r)*(e-r)+(i-o)*(i-o)),h.push(c),r=e,o=i}const u=s*c,d=function(t,e,i){let n,s;i=i||fz;let r=0,o=t.length,a=!1;for(;r&lt;o;)n=r+(o-r&gt;&gt;1),s=+i(t[n],e),s&lt;0?r=n+1:(o=n,a=!s);return a?r:~r}(h,u);d&lt;0?(l=(u-h[-d-2])/(h[-d-1]-h[-d-2]),a=e+(-d-2)*n):a=e+d*n}o=o&gt;1?o:2,r=r||new Array(o);for(let h=0;h&lt;o;++h)r[h]=void 0===a?NaN:void 0===l?t[a+h]:rV(t[a+h],t[a+n+h],l);return r}function c6(t,e,i,n,s,r){if(i==e)return null;let o;if(s&lt;t[e+n-1])return r?(o=t.slice(e,e+n),o[n-1]=s,o):null;if(t[i-1]&lt;s)return r?(o=t.slice(i-n,i),o[n-1]=s,o):null;if(s==t[e+n-1])return t.slice(e,e+n);let a=e/n,l=i/n;for(;a&lt;l;){const e=a+l&gt;&gt;1;s&lt;t[(e+1)*n-1]?l=e:a=e+1}const c=t[a*n-1];if(s==c)return t.slice((a-1)*n,(a-1)*n+n);const h=(s-c)/(t[(a+1)*n-1]-c);o=[];for(let u=0;u&lt;n-1;++u)o.push(rV(t[(a-1)*n+u],t[a*n+u],h));return o.push(s),o}function h6(t,e,i,n){let s=t[e],r=t[e+1],o=0;for(let a=e+n;a&lt;i;a+=n){const e=t[a],i=t[a+1];o+=Math.sqrt((e-s)*(e-s)+(i-r)*(i-r)),s=e,r=i}return o}class u6 extends q4{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?Az(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new u6(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n&lt;aN(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&amp;&amp;(this.maxDelta_=Math.sqrt(Y4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return h$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return&quot;XYM&quot;!=this.layout&amp;&amp;&quot;XYZM&quot;!=this.layout?null:c6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e=void 0!==e&amp;&amp;e)}getCoordinates(){return r6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return l6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return h6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&amp;&amp;(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=e6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new u6(e,&quot;XY&quot;)}getType(){return&quot;LineString&quot;}intersectsExtent(t){return f$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=J4(this.flatCoordinates,0,t,this.stride),this.changed()}}var d6=u6;class p6 extends q4{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&amp;&amp;i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,n=[],s=[];for(let t=0,r=i.length;t&lt;r;++t){const r=i[t];0===t&amp;&amp;(e=r.getLayout()),Az(n,r.getFlatCoordinates()),s.push(n.length)}this.setFlatCoordinates(e,n),this.ends_=s}}appendLineString(t){this.flatCoordinates?Az(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new p6(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n&lt;aN(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&amp;&amp;(this.maxDelta_=Math.sqrt(Z4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return&quot;XYM&quot;!=this.layout&amp;&amp;&quot;XYZM&quot;!=this.layout||0===this.flatCoordinates.length?null:function(t,e,i,n,s,r,o){if(o)return c6(t,e,i[i.length-1],n,s,r);let a;if(s&lt;t[n-1])return r?(a=t.slice(0,n),a[n-1]=s,a):null;if(t[t.length-1]&lt;s)return r?(a=t.slice(t.length-n),a[n-1]=s,a):null;for(let l=0,c=i.length;l&lt;c;++l){const r=i[l];if(e!=r){if(s&lt;t[e+n-1])return null;if(s&lt;=t[r-1])return c6(t,e,r,n,s,!1);e=r}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e=void 0!==e&amp;&amp;e,i=void 0!==i&amp;&amp;i)}getCoordinates(){return o6(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t&lt;0||this.ends_.length&lt;=t?null:new d6(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let s=0;for(let r=0,o=e.length;r&lt;o;++r){const o=e[r],a=new d6(t.slice(s,o),i);n.push(a),s=o}return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let r=0,o=n.length;r&lt;o;++r){const o=n[r];Az(t,l6(e,i,o,s,.5)),i=o}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,r,o,a){for(let l=0,c=i.length;l&lt;c;++l){const c=i[l];o=e6(t,e,c,n,s,r,o),a.push(o),e=c}return o}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new p6(e,&quot;XY&quot;,i)}getType(){return&quot;MultiLineString&quot;}intersectsExtent(t){return function(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){if(f$(t,e,i[r],n,s))return!0;e=i[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=t6(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var f6=p6;class m6 extends q4{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new m6(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,r=eV(t,e,s[0],s[1]);if(r&lt;n){const t=this.stride;for(let e=0;e&lt;t;++e)i[e]=s[e];return i.length=t,r}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return fN(this.flatCoordinates,t)}getType(){return&quot;Point&quot;}intersectsExtent(t){return hN(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Q4(this.flatCoordinates,0,t),this.changed()}}var g6=m6;class A6 extends q4{constructor(t,e){super(),e&amp;&amp;!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?Az(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new A6(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n&lt;aN(this.getExtent(),t,e))return n;const s=this.flatCoordinates,r=this.stride;for(let o=0,a=s.length;o&lt;a;o+=r){const a=eV(t,e,s[o],s[o+1]);if(a&lt;n){n=a;for(let t=0;t&lt;r;++t)i[t]=s[o+t];i.length=r}}return n}getCoordinates(){return r6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){return t&lt;0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)&lt;=t?null:new g6(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let s=0,r=t.length;s&lt;r;s+=i){const r=new g6(t.slice(s,s+i),e);n.push(r)}return n}getType(){return&quot;MultiPoint&quot;}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,s=e.length;n&lt;s;n+=i)if(hN(t,e[n],e[n+1]))return!0;return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=J4(this.flatCoordinates,0,t,this.stride),this.changed()}}var v6=A6;function _6(t,e,i,n){let s=0,r=t[i-n],o=t[i-n+1];for(;e&lt;i;e+=n){const i=t[e],n=t[e+1];s+=o*i-r*n,r=i,o=n}return s/2}function b6(t,e,i,n){let s=0;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r];s+=_6(t,e,o,n),e=o}return s}class y6 extends q4{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new y6(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n&lt;aN(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&amp;&amp;(this.maxDelta_=Math.sqrt(Y4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return _6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return r6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=e6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y6(e,&quot;XY&quot;)}getType(){return&quot;LinearRing&quot;}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=J4(this.flatCoordinates,0,t,this.stride),this.changed()}}var x6=y6;function w6(t,e,i,n,s,r,o){let a,l,c,h,u,d,p;const f=s[r+1],m=[];for(let v=0,_=i.length;v&lt;_;++v){const s=i[v];for(h=t[s-n],d=t[s-n+1],a=e;a&lt;s;a+=n)u=t[a],p=t[a+1],(f&lt;=d&amp;&amp;p&lt;=f||d&lt;=f&amp;&amp;f&lt;=p)&amp;&amp;(c=(f-d)/(p-d)*(u-h)+h,m.push(c)),h=u,d=p}let g=NaN,A=-1/0;for(m.sort(fz),h=m[0],a=1,l=m.length;a&lt;l;++a){u=m[a];const s=Math.abs(u-h);s&gt;A&amp;&amp;(c=(h+u)/2,p$(t,e,i,n,c,f)&amp;&amp;(g=c,A=s)),h=u}return isNaN(g)&amp;&amp;(g=s[r]),o?(o.push(g,f,A),o):[g,f,A]}function C6(t,e,i,n){for(;e&lt;i-n;){for(let s=0;s&lt;n;++s){const r=t[e+s];t[e+s]=t[i-n+s],t[i-n+s]=r}e+=n,i-=n}}function S6(t,e,i,n){let s=0,r=t[i-n],o=t[i-n+1];for(;e&lt;i;e+=n){const i=t[e],n=t[e+1];s+=(i-r)*(n+o),r=i,o=n}return 0===s?void 0:s&gt;0}function k6(t,e,i,n,s){s=void 0!==s&amp;&amp;s;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r],a=S6(t,e,o,n);if(0===r){if(s&amp;&amp;a||!s&amp;&amp;!a)return!1}else if(s&amp;&amp;!a||!s&amp;&amp;a)return!1;e=o}return!0}function E6(t,e,i,n,s){s=void 0!==s&amp;&amp;s;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r],a=S6(t,e,o,n);(0===r?s&amp;&amp;a||!s&amp;&amp;!a:s&amp;&amp;!a||!s&amp;&amp;a)&amp;&amp;C6(t,e,o,n),e=o}return e}function M6(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r)e=E6(t,e,i[r],n,s);return e}class T6 extends q4{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&amp;&amp;i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Az(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new T6(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n&lt;aN(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&amp;&amp;(this.maxDelta_=Math.sqrt(Z4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return p$(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return b6(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),E6(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,o6(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=SN(this.getExtent());this.flatInteriorPoint_=w6(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new g6(this.getFlatInteriorPoint(),&quot;XYM&quot;)}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t&lt;0||this.ends_.length&lt;=t?null:new x6(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r],a=new x6(e.slice(s,o),t);n.push(a),s=o}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;k6(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=E6(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=s6(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new T6(e,&quot;XY&quot;,i)}getType(){return&quot;Polygon&quot;}intersectsExtent(t){return g$(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=t6(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var I6=T6;function D6(t){const e=t[0],i=t[1],n=t[2],s=t[3],r=[e,i,e,s,n,s,n,i,e,i];return new T6(r,&quot;XY&quot;,[r.length])}function O6(t,e,i){e=e||32;const n=t.getStride(),s=t.getLayout(),r=t.getCenter(),o=n*(e+1),a=new Array(o);for(let c=0;c&lt;o;c+=n){a[c]=0,a[c+1]=0;for(let t=2;t&lt;n;t++)a[c+t]=r[t]}const l=new T6(a,s,[a.length]);return function(t,e,i,n){const s=t.getFlatCoordinates(),r=t.getStride(),o=s.length/r-1,a=n||0;for(let l=0;l&lt;=o;++l){const t=l*r,n=a+2*sV(l,o)*Math.PI/o;s[t]=e[0]+i*Math.cos(n),s[t+1]=e[1]+i*Math.sin(n)}t.changed()}(l,r,t.getRadius(),i),l}class P6 extends q4{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&amp;&amp;!Array.isArray(t[0])){let n=this.getLayout();const s=t,r=[],o=[];for(let t=0,e=s.length;t&lt;e;++t){const e=s[t];0===t&amp;&amp;(n=e.getLayout());const i=r.length,a=e.getEnds();for(let t=0,n=a.length;t&lt;n;++t)a[t]+=i;Az(r,e.getFlatCoordinates()),o.push(a)}e=n,t=r,i=o}void 0!==e&amp;&amp;i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;Az(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t&lt;n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n&lt;t;++n)e[n]=this.endss_[n].slice();const i=new P6(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n&lt;aN(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&amp;&amp;(this.maxDelta_=Math.sqrt(function(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){const o=i[r];s=Z4(t,e,o,n,s),e=o[o.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=i.length;u&lt;d;++u){const r=i[u];c=X4(t,e,r,n,s,true,o,a,l,c,h),e=r[r.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,n))}containsXY(t,e){return function(t,e,i,n,s,r){if(0===i.length)return!1;for(let o=0,a=i.length;o&lt;a;++o){const a=i[o];if(p$(t,e,a,n,s,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,i,n){let s=0;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r];s+=b6(t,e,o,n),e=o[o.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),M6(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,a6(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,i,n){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,a=i.length;o&lt;a;++o){const a=i[o];r=mN(t,e,a[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,s){let r=[];for(let o=0,a=i.length;o&lt;a;++o){const a=i[o];r=w6(t,e,a,n,s,2*o,r),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new v6(this.getFlatInteriorPoints().slice(),&quot;XYM&quot;)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){const s=i[r];if(!k6(t,e,s,n,undefined))return!1;s.length&amp;&amp;(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=M6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,r,o,a){for(let l=0,c=i.length;l&lt;c;++l){const c=i[l],h=[];o=s6(t,e,c,n,s,r,o,h),a.push(h),e=c[c.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new P6(e,&quot;XY&quot;,i)}getPolygon(t){if(t&lt;0||this.endss_.length&lt;=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let s=0,r=i.length;s&lt;r;++s)i[s]-=e;return new I6(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,o=i.length;r&lt;o;++r){const o=i[r].slice(),a=o[o.length-1];if(0!==s)for(let t=0,e=o.length;t&lt;e;++t)o[t]-=s;const l=new I6(e.slice(s,a),t,o);n.push(l),s=a}return n}getType(){return&quot;MultiPolygon&quot;}intersectsExtent(t){return function(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){const o=i[r];if(g$(t,e,o,n,s))return!0;e=o[o.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(t,e,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o&lt;a;++o){const a=t6(t,e,i[o],n,s[r]);0===a.length&amp;&amp;(a[0]=e),s[r++]=a,e=a[a.length-1]}return s.length=r,s}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var R6=P6;class F6{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new F6({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var L6=F6;function B6(t){return Array.isArray(t)?z4(t):t}const z6=&quot;ol-hidden&quot;,N6=&quot;ol-unselectable&quot;,V6=&quot;ol-control&quot;,$6=&quot;ol-collapsed&quot;,U6=new RegExp([&quot;^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)&quot;,&quot;(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)&quot;,&quot;(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)&quot;,&quot;(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?&quot;,&quot;(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))&quot;,&quot;(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))&quot;,&quot;?\\s*([-,\\\&quot;\\&#39;\\sa-z]+?)\\s*$&quot;].join(&quot;&quot;),&quot;i&quot;),j6=[&quot;style&quot;,&quot;variant&quot;,&quot;weight&quot;,&quot;size&quot;,&quot;lineHeight&quot;,&quot;family&quot;],H6=function(t){const e=t.match(U6);if(!e)return null;const i={lineHeight:&quot;normal&quot;,size:&quot;1.2em&quot;,style:&quot;normal&quot;,weight:&quot;normal&quot;,variant:&quot;normal&quot;};for(let n=0,s=j6.length;n&lt;s;++n){const t=e[n+1];void 0!==t&amp;&amp;(i[j6[n]]=t)}return i.families=i.family.split(/,\s?/),i},G6=&quot;10px sans-serif&quot;,q6=&quot;#000&quot;,W6=&quot;round&quot;,Y6=[],Z6=&quot;round&quot;,K6=&quot;#000&quot;,X6=&quot;center&quot;,Q6=&quot;middle&quot;,J6=[0,0,0,0],t8=new s$;let e8,i8=null;const n8={},s8=function(){const t=&quot;32px &quot;,e=[&quot;monospace&quot;,&quot;serif&quot;],i=e.length,n=&quot;wmytzilWMYTZIL@#/&amp;?$%10\uf013&quot;;let s,r;function o(s,o,a){let l=!0;for(let c=0;c&lt;i;++c){const i=e[c];if(r=a8(s+&quot; &quot;+o+&quot; &quot;+t+i,n),a!=i){const e=a8(s+&quot; &quot;+o+&quot; &quot;+t+a+&quot;,&quot;+i,n);l=l&amp;&amp;e!=r}}return!!l}function a(){let t=!0;const e=t8.getKeys();for(let i=0,n=e.length;i&lt;n;++i){const n=e[i];t8.get(n)&lt;100&amp;&amp;(o.apply(this,n.split(&quot;\n&quot;))?(xz(n8),i8=null,e8=void 0,t8.set(n,100)):(t8.set(n,t8.get(n)+1,!0),t=!1))}t&amp;&amp;(clearInterval(s),s=void 0)}return function(t){const e=H6(t);if(!e)return;const i=e.families;for(let n=0,r=i.length;n&lt;r;++n){const t=i[n],r=e.style+&quot;\n&quot;+e.weight+&quot;\n&quot;+t;void 0===t8.get(r)&amp;&amp;(t8.set(r,100,!0),o(e.style,e.weight,t)||(t8.set(r,0,!0),void 0===s&amp;&amp;(s=setInterval(a,32))))}}}(),r8=function(){let t;return function(e){let i=n8[e];if(null==i){if(Nz){const t=H6(e),n=o8(e,&quot;\u017dg&quot;);i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement(&quot;div&quot;),t.innerHTML=&quot;M&quot;,t.style.minHeight=&quot;0&quot;,t.style.maxHeight=&quot;none&quot;,t.style.height=&quot;auto&quot;,t.style.padding=&quot;0&quot;,t.style.border=&quot;none&quot;,t.style.position=&quot;absolute&quot;,t.style.display=&quot;block&quot;,t.style.left=&quot;-99999px&quot;),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);n8[e]=i}return i}}();function o8(t,e){return i8||(i8=Uz(1,1)),t!=e8&amp;&amp;(i8.font=t,e8=i8.font),i8.measureText(e)}function a8(t,e){return o8(t,e).width}function l8(t,e,i){if(e in i)return i[e];const n=e.split(&quot;\n&quot;).reduce((e,i)=&gt;Math.max(e,a8(t,i)),0);return i[e]=n,n}class c8 extends I4{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&amp;&amp;t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new c8({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=Uz(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||&quot;bevel&quot;!==t&amp;&amp;&quot;miter&quot;!==t)return e;let n=this.radius_,s=void 0===this.radius2_?n:this.radius2_;if(n&lt;s){const t=n;n=s,s=t}const r=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),o=s*Math.sin(r),a=n-Math.sqrt(s*s-o*o),l=Math.sqrt(o*o+a*a),c=l/o;if(&quot;miter&quot;===t&amp;&amp;c&lt;=i)return c*e;const h=e/2/c,u=e/2*(a/l),d=Math.sqrt((n+h)*(n+h)+u*u)-n;if(void 0===this.radius2_||&quot;bevel&quot;===t)return 2*d;const p=n*Math.sin(r),f=s-Math.sqrt(n*n-p*p),m=Math.sqrt(p*p+f*f)/p;return m&lt;=i?2*Math.max(d,m*e/2-s-n):2*d}createRenderOptions(){let t,e=Z6,i=0,n=null,s=0,r=0;this.stroke_&amp;&amp;(t=this.stroke_.getColor(),null===t&amp;&amp;(t=K6),t=B6(t),r=this.stroke_.getWidth(),void 0===r&amp;&amp;(r=1),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&amp;&amp;(e=Z6),i=this.stroke_.getMiterLimit(),void 0===i&amp;&amp;(i=10));const o=this.calculateLineJoinSize_(e,r,i),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:r,size:Math.ceil(2*a+o),lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&amp;&amp;(t=q6),e.fillStyle=B6(t),e.fill()}this.stroke_&amp;&amp;(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&amp;&amp;(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(&quot;string&quot;==typeof e&amp;&amp;(e=L4(e)),null===e?i=1:Array.isArray(e)&amp;&amp;(i=4===e.length?e[3]:1),0===i){const e=Uz(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&amp;&amp;(e*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let o=0;o&lt;e;o++){const e=s+o*r,a=o%2==0?i:n;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=q6,e.fill(),this.stroke_&amp;&amp;(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&amp;&amp;(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}var h8=c8;class u8 extends h8{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&amp;&amp;t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new u8({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var d8=u8;class p8{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=A8,void 0!==t.geometry&amp;&amp;this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;(t=t.clone()),new p8({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){&quot;function&quot;==typeof t?this.geometryFunction_=t:&quot;string&quot;==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&amp;&amp;(this.geometryFunction_=function(){return t}):this.geometryFunction_=A8,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let f8=null;function m8(t,e){if(!f8){const t=new h4({color:&quot;rgba(255,255,255,0.4)&quot;}),e=new L6({color:&quot;#3399CC&quot;,width:1.25});f8=[new p8({image:new d8({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return f8}function g8(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new p8({fill:new h4({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new p8({stroke:new L6({color:e,width:5})}),new p8({stroke:new L6({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new p8({image:new d8({radius:6,fill:new h4({color:i}),stroke:new L6({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function A8(t){return t.getGeometry()}var v8=p8;class _8{constructor(t){this.font_=(t=t||{}).font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=b$(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new h4({color:&quot;#333&quot;}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:&quot;point&quot;,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new _8({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=b$(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var b8=_8,y8=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?kV(e.dataProjection):this.readProjection(t);e.extent&amp;&amp;i&amp;&amp;&quot;tile-pixels&quot;===i.getUnits()&amp;&amp;(i=kV(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Sz()}readFeature(t,e){return Sz()}readFeatures(t,e){return Sz()}readGeometry(t,e){return Sz()}readProjection(t){return Sz()}writeFeature(t,e){return Sz()}writeFeatures(t,e){return Sz()}writeGeometry(t,e){return Sz()}};function x8(t,e,i){const n=i?kV(i.featureProjection):null,s=i?kV(i.dataProjection):null;let r;if(r=n&amp;&amp;s&amp;&amp;!OV(n,s)?(e?t.clone():t).transform(e?n:s,e?s:n):t,e&amp;&amp;i&amp;&amp;void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i&lt;n;++i)t[i]=Math.round(t[i]*e)/e;return t};r===t&amp;&amp;(r=t.clone()),r.applyTransform(n)}return r}const w8=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;;function C8(t,e){return G8().createElementNS(t,e)}function S8(t,e){return k8(t,e,[]).join(&quot;&quot;)}function k8(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)i.push(e?String(t.nodeValue).replace(/(\r\n|\r|\n)/g,&quot;&quot;):t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)k8(n,e,i)}return i}function E8(t){return&quot;documentElement&quot;in t}function M8(t){return(new DOMParser).parseFromString(t,&quot;application/xml&quot;)}function T8(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);void 0!==s&amp;&amp;Az(n[n.length-1],s)}}function I8(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);void 0!==s&amp;&amp;n[n.length-1].push(s)}}function D8(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);void 0!==s&amp;&amp;(n[n.length-1]=s)}}function O8(t,e,i){return function(n,s){const r=t.call(void 0!==i?i:this,n,s);void 0!==r&amp;&amp;(s[s.length-1][void 0!==e?e:n.localName]=r)}}function P8(t,e){return function(i,n,s){t.call(void 0!==e?e:this,i,n,s),s[s.length-1].node.appendChild(i)}}function R8(t,e){let i,n;return function(e,s,r){if(void 0===i){i={};const s={};s[e.localName]=t,i[e.namespaceURI]=s,n=F8(e.localName)}$8(i,n,s,r)}}function F8(t,e){return function(i,n,s){let r=t;return void 0===r&amp;&amp;(r=s),C8(void 0!==e?e:n[n.length-1].node.namespaceURI,r)}}const L8=F8();function B8(t,e){const i=e.length,n=new Array(i);for(let s=0;s&lt;i;++s)n[s]=t[e[s]];return n}function z8(t,e,i){let n,s;for(i=void 0!==i?i:{},n=0,s=t.length;n&lt;s;++n)i[t[n]]=e;return i}function N8(t,e,i,n){let s;for(s=e.firstElementChild;s;s=s.nextElementSibling){const e=t[s.namespaceURI];if(void 0!==e){const t=e[s.localName];void 0!==t&amp;&amp;t.call(n,s,i)}}}function V8(t,e,i,n,s){return n.push(t),N8(e,i,n,s),n.pop()}function $8(t,e,i,n,s,r){const o=(void 0!==s?s:i).length;let a,l;for(let c=0;c&lt;o;++c)a=i[c],void 0!==a&amp;&amp;(l=e.call(void 0!==r?r:this,a,n,void 0!==s?s[c]:void 0),void 0!==l&amp;&amp;t[l.namespaceURI][l.localName].call(r,l,a,n))}function U8(t,e,i,n,s,r,o){return s.push(t),$8(e,i,n,s,r,o),s.pop()}let j8,H8;function G8(){return void 0===H8&amp;&amp;&quot;undefined&quot;!=typeof document&amp;&amp;(H8=document.implementation.createDocument(&quot;&quot;,&quot;&quot;,null)),H8}var q8=class extends y8{constructor(){super(),this.xmlSerializer_=(void 0===j8&amp;&amp;&quot;undefined&quot;!=typeof XMLSerializer&amp;&amp;(j8=new XMLSerializer),j8)}getType(){return&quot;xml&quot;}readFeature(t,e){if(t){if(&quot;string&quot;==typeof t){const i=M8(t);return this.readFeatureFromDocument(i,e)}return E8(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null}readFeatureFromDocument(t,e){const i=this.readFeaturesFromDocument(t,e);return i.length&gt;0?i[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(t){if(&quot;string&quot;==typeof t){const i=M8(t);return this.readFeaturesFromDocument(i,e)}return E8(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]}readFeaturesFromDocument(t,e){const i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&amp;&amp;Az(i,this.readFeaturesFromNode(n,e));return i}readFeaturesFromNode(t,e){return Sz()}readGeometry(t,e){if(t){if(&quot;string&quot;==typeof t){const i=M8(t);return this.readGeometryFromDocument(i,e)}return E8(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(t){if(&quot;string&quot;==typeof t){const e=M8(t);return this.readProjectionFromDocument(e)}return E8(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(t,e){return null}};function W8(t){return function(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return void 0!==e[1]||!1}(S8(t,!1))}function Y8(t){const e=S8(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function Z8(t){return function(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}(S8(t,!1))}function K8(t){return function(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}(S8(t,!1))}function X8(t){return S8(t,!1).trim()}function Q8(t,e){e7(t,e?&quot;1&quot;:&quot;0&quot;)}function J8(t,e){const i=e.toPrecision();t.appendChild(G8().createTextNode(i))}function t7(t,e){const i=e.toString();t.appendChild(G8().createTextNode(i))}function e7(t,e){t.appendChild(G8().createTextNode(e))}const i7=[&quot;http://www.google.com/kml/ext/2.2&quot;],n7=[null,&quot;http://earth.google.com/kml/2.0&quot;,&quot;http://earth.google.com/kml/2.1&quot;,&quot;http://earth.google.com/kml/2.2&quot;,&quot;http://www.opengis.net/kml/2.2&quot;],s7={fraction:&quot;fraction&quot;,pixels:&quot;pixels&quot;,insetPixels:&quot;pixels&quot;},r7=z8(n7,{ExtendedData:c9,Region:h9,MultiGeometry:O8(Q7,&quot;geometry&quot;),LineString:O8(Z7,&quot;geometry&quot;),LinearRing:O8(K7,&quot;geometry&quot;),Point:O8(J7,&quot;geometry&quot;),Polygon:O8(e9,&quot;geometry&quot;),Style:O8(n9),StyleMap:function(t,e){const i=F7.call(this,t,e);if(!i)return;const n=e[e.length-1];Array.isArray(i)?n.Style=i:&quot;string&quot;==typeof i?n.styleUrl=i:nN(!1,38)},address:O8(X8),description:O8(X8),name:O8(X8),open:O8(W8),phoneNumber:O8(X8),styleUrl:O8(O7),visibility:O8(W8)},z8(i7,{MultiTrack:O8(function(t,e){const i=V8([],U7,t,e);if(i)return new f6(i)},&quot;geometry&quot;),Track:O8(H7,&quot;geometry&quot;)})),o7=z8(n7,{ExtendedData:c9,Region:h9,Link:function(t,e){N8(a7,t,e)},address:O8(X8),description:O8(X8),name:O8(X8),open:O8(W8),phoneNumber:O8(X8),visibility:O8(W8)}),a7=z8(n7,{href:O8(D7)}),l7=z8(n7,{LatLonAltBox:function(t,e){const i=V8({},p9,t,e);if(!i)return;const n=e[e.length-1],s=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=s,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){const i=V8({},f9,t,e);if(!i)return;const n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),c7=z8(n7,[&quot;Document&quot;,&quot;Placemark&quot;]),h7=z8(n7,{Document:P8(function(t,e,i){U8({node:t},_9,b9,e,i,void 0,this)}),Placemark:P8(H9)});let u7,d7,p7,f7,m7,g7,A7,v7,_7,b7=null,y7=null,x7=null,w7=null,C7=null,S7=null;function k7(t){return 32/Math.min(t[0],t[1])}function E7(t){return t}function M7(t,e,i){return Array.isArray(t)?t:&quot;string&quot;==typeof t?M7(i[t],e,i):e}function T7(t){const e=S8(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){const t=i[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function I7(t){let e=S8(t,!1);const i=[];e=e.replace(/\s*,\s*/g,&quot;,&quot;);const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let s;for(;s=n.exec(e);){const t=parseFloat(s[1]),n=parseFloat(s[2]),r=s[3]?parseFloat(s[3]):0;i.push(t,n,r),e=e.substr(s[0].length)}if(&quot;&quot;===e)return i}function D7(t){const e=S8(t,!1).trim();let i=t.baseURI;return(!i||&quot;about:blank&quot;==i)&amp;&amp;(i=window.location.href),i?new URL(e,i).href:e}function O7(t){const e=S8(t,!1).trim().replace(/^(?!.*#)/,&quot;#&quot;);let i=t.baseURI;return(!i||&quot;about:blank&quot;==i)&amp;&amp;(i=window.location.href),i?new URL(e,i).href:e}function P7(t){return Z8(t)}const R7=z8(n7,{Pair:function(t,e){const i=V8({},u9,t,e,this);if(!i)return;const n=i.key;if(n&amp;&amp;&quot;normal&quot;==n){const t=i.styleUrl;t&amp;&amp;(e[e.length-1]=t);const n=i.Style;n&amp;&amp;(e[e.length-1]=n)}}});function F7(t,e){return V8(void 0,R7,t,e,this)}const L7=z8(n7,{Icon:O8(function(t,e){return V8({},G7,t,e)||null}),color:O8(T7),heading:O8(Z8),hotSpot:O8(function(t){const e=t.getAttribute(&quot;xunits&quot;),i=t.getAttribute(&quot;yunits&quot;);let n;return n=&quot;insetPixels&quot;!==e?&quot;insetPixels&quot;!==i?&quot;bottom-left&quot;:&quot;top-left&quot;:&quot;insetPixels&quot;!==i?&quot;bottom-right&quot;:&quot;top-right&quot;,{x:parseFloat(t.getAttribute(&quot;x&quot;)),xunits:s7[e],y:parseFloat(t.getAttribute(&quot;y&quot;)),yunits:s7[i],origin:n}}),scale:O8(P7)}),B7=z8(n7,{color:O8(T7),scale:O8(P7)}),z7=z8(n7,{color:O8(T7),width:O8(Z8)}),N7=z8(n7,{color:O8(T7),fill:O8(W8),outline:O8(W8)}),V7=z8(n7,{coordinates:D8(I7)});function $7(t,e){return V8(null,V7,t,e)}const U7=z8(i7,{Track:I8(H7)}),j7=z8(n7,{when:function(t,e){const i=e[e.length-1].whens,n=S8(t,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}},z8(i7,{coord:function(t,e){const i=e[e.length-1].coordinates,n=S8(t,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(s){const t=parseFloat(s[1]),e=parseFloat(s[2]),n=parseFloat(s[3]);i.push([t,e,n])}else i.push([])}}));function H7(t,e){const i=V8({coordinates:[],whens:[]},j7,t,e);if(!i)return;const n=[],s=i.coordinates,r=i.whens;for(let o=0,a=Math.min(s.length,r.length);o&lt;a;++o)3==s[o].length&amp;&amp;n.push(s[o][0],s[o][1],s[o][2],r[o]);return new d6(n,&quot;XYZM&quot;)}const G7=z8(n7,{href:O8(D7)},z8(i7,{x:O8(Z8),y:O8(Z8),w:O8(Z8),h:O8(Z8)})),q7=z8(n7,{coordinates:D8(I7)});function W7(t,e){return V8(null,q7,t,e)}const Y7=z8(n7,{extrude:O8(W8),tessellate:O8(W8),altitudeMode:O8(X8)});function Z7(t,e){const i=V8({},Y7,t,e),n=W7(t,e);if(n){const t=new d6(n,&quot;XYZ&quot;);return t.setProperties(i,!0),t}}function K7(t,e){const i=V8({},Y7,t,e),n=W7(t,e);if(n){const t=new I6(n,&quot;XYZ&quot;,[n.length]);return t.setProperties(i,!0),t}}const X7=z8(n7,{LineString:I8(Z7),LinearRing:I8(K7),MultiGeometry:I8(Q7),Point:I8(J7),Polygon:I8(e9)});function Q7(t,e){const i=V8([],X7,t,e);if(!i)return null;if(0===i.length)return new M4(i);let n,s=!0;const r=i[0].getType();let o;for(let a=1,l=i.length;a&lt;l;++a)if(o=i[a],o.getType()!=r){s=!1;break}if(s){let t,e;if(&quot;Point&quot;==r){const s=i[0];t=s.getLayout(),e=s.getFlatCoordinates();for(let t=1,n=i.length;t&lt;n;++t)o=i[t],Az(e,o.getFlatCoordinates());n=new v6(e,t),s9(n,i)}else&quot;LineString&quot;==r?(n=new f6(i),s9(n,i)):&quot;Polygon&quot;==r?(n=new R6(i),s9(n,i)):&quot;GeometryCollection&quot;==r?n=new M4(i):nN(!1,37)}else n=new M4(i);return n}function J7(t,e){const i=V8({},Y7,t,e),n=W7(t,e);if(n){const t=new g6(n,&quot;XYZ&quot;);return t.setProperties(i,!0),t}}const t9=z8(n7,{innerBoundaryIs:function(t,e){const i=V8([],m9,t,e);i.length&gt;0&amp;&amp;e[e.length-1].push(...i)},outerBoundaryIs:function(t,e){const i=V8(void 0,g9,t,e);i&amp;&amp;(e[e.length-1][0]=i)}});function e9(t,e){const i=V8({},Y7,t,e),n=V8([null],t9,t,e);if(n&amp;&amp;n[0]){const t=n[0],e=[t.length];for(let i=1,r=n.length;i&lt;r;++i)Az(t,n[i]),e.push(t.length);const s=new I6(t,&quot;XYZ&quot;,e);return s.setProperties(i,!0),s}}const i9=z8(n7,{IconStyle:function(t,e){const i=V8({},L7,t,e);if(!i)return;const n=e[e.length-1],s=&quot;Icon&quot;in i?i.Icon:{},r=!(&quot;Icon&quot;in i)||Object.keys(s).length&gt;0;let o;const a=s.href;a?o=a:r&amp;&amp;(o=g7);let l,c,h,u=&quot;bottom-left&quot;;const d=i.hotSpot;let p;d?(l=[d.x,d.y],c=d.xunits,h=d.yunits,u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&amp;&amp;(o.includes(&quot;pushpin&quot;)?(l=d7,c=p7,h=f7):o.includes(&quot;arrow-reverse&quot;)?(l=[54,42],c=p7,h=f7):o.includes(&quot;paddle&quot;)&amp;&amp;(l=[32,1],c=p7,h=f7));const f=s.x,m=s.y;let g;void 0!==f&amp;&amp;void 0!==m&amp;&amp;(p=[f,m]);const A=s.w,v=s.h;let _;void 0!==A&amp;&amp;void 0!==v&amp;&amp;(g=[A,v]);const b=i.heading;void 0!==b&amp;&amp;(_=nV(b));const y=i.color;if(r){o==g7&amp;&amp;(g=m7);const t=new H4({anchor:l,anchorOrigin:u,anchorXUnits:c,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:&quot;bottom-left&quot;,rotation:_,scale:i.scale,size:g,src:this.iconUrlFunction_(o),color:y}),e=t.getScaleArray()[0],s=t.getSize();if(null===s){const i=t.getImageState();if(0===i||1===i){const n=function(){const i=t.getImageState();if(0!==i&amp;&amp;1!==i){const i=t.getSize();if(i&amp;&amp;2==i.length){const n=k7(i);t.setScale(e*n)}t.unlistenImageChange(n)}};t.listenImageChange(n),0===i&amp;&amp;t.load()}}else if(2==s.length){const i=k7(s);t.setScale(e*i)}n.imageStyle=t}else n.imageStyle=A7},LabelStyle:function(t,e){const i=V8({},B7,t,e);if(!i)return;const n=e[e.length-1],s=new b8({fill:new h4({color:&quot;color&quot;in i?i.color:u7}),scale:i.scale});n.textStyle=s},LineStyle:function(t,e){const i=V8({},z7,t,e);if(!i)return;const n=e[e.length-1],s=new L6({color:&quot;color&quot;in i?i.color:u7,width:&quot;width&quot;in i?i.width:1});n.strokeStyle=s},PolyStyle:function(t,e){const i=V8({},N7,t,e);if(!i)return;const n=e[e.length-1],s=new h4({color:&quot;color&quot;in i?i.color:u7});n.fillStyle=s;const r=i.fill;void 0!==r&amp;&amp;(n.fill=r);const o=i.outline;void 0!==o&amp;&amp;(n.outline=o)}});function n9(t,e){const i=V8({},i9,t,e,this);if(!i)return null;let n=&quot;fillStyle&quot;in i?i.fillStyle:b7;const s=i.fill;let r;void 0!==s&amp;&amp;!s&amp;&amp;(n=null),&quot;imageStyle&quot;in i?i.imageStyle!=A7&amp;&amp;(r=i.imageStyle):r=y7;const o=&quot;textStyle&quot;in i?i.textStyle:w7,a=&quot;strokeStyle&quot;in i?i.strokeStyle:x7,l=i.outline;return void 0===l||l?[new v8({fill:n,image:r,stroke:a,text:o,zIndex:void 0})]:[new v8({geometry:function(t){const e=t.getGeometry(),i=e.getType();return&quot;GeometryCollection&quot;===i?new M4(e.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;Polygon&quot;!==e&amp;&amp;&quot;MultiPolygon&quot;!==e})):&quot;Polygon&quot;!==i&amp;&amp;&quot;MultiPolygon&quot;!==i?e:void 0},fill:n,image:r,stroke:a,text:o,zIndex:void 0}),new v8({geometry:function(t){const e=t.getGeometry(),i=e.getType();return&quot;GeometryCollection&quot;===i?new M4(e.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;Polygon&quot;===e||&quot;MultiPolygon&quot;===e})):&quot;Polygon&quot;===i||&quot;MultiPolygon&quot;===i?e:void 0},fill:n,stroke:null,zIndex:void 0})]}function s9(t,e){const i=e.length,n=new Array(e.length),s=new Array(e.length),r=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c&lt;i;++c){const t=e[c];n[c]=t.get(&quot;extrude&quot;),s[c]=t.get(&quot;tessellate&quot;),r[c]=t.get(&quot;altitudeMode&quot;),o=o||void 0!==n[c],a=a||void 0!==s[c],l=l||r[c]}o&amp;&amp;t.set(&quot;extrude&quot;,n),a&amp;&amp;t.set(&quot;tessellate&quot;,s),l&amp;&amp;t.set(&quot;altitudeMode&quot;,r)}const r9=z8(n7,{displayName:O8(X8),value:O8(X8)}),l9=z8(n7,{Data:function(t,e){const i=t.getAttribute(&quot;name&quot;);N8(r9,t,e);const n=e[e.length-1];i&amp;&amp;n.displayName?n[i]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==i?n[i]=n.value:null!==n.displayName&amp;&amp;(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){N8(d9,t,e)}});function c9(t,e){N8(l9,t,e)}function h9(t,e){N8(l7,t,e)}const u9=z8(n7,{Style:O8(n9),key:O8(X8),styleUrl:O8(O7)}),d9=z8(n7,{SimpleData:function(t,e){const i=t.getAttribute(&quot;name&quot;);if(null!==i){const n=X8(t);e[e.length-1][i]=n}}}),p9=z8(n7,{altitudeMode:O8(X8),minAltitude:O8(Z8),maxAltitude:O8(Z8),north:O8(Z8),south:O8(Z8),east:O8(Z8),west:O8(Z8)}),f9=z8(n7,{minLodPixels:O8(Z8),maxLodPixels:O8(Z8),minFadeExtent:O8(Z8),maxFadeExtent:O8(Z8)}),m9=z8(n7,{LinearRing:I8($7)}),g9=z8(n7,{LinearRing:D8($7)});function A9(t,e){const i=L4(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(let s=0;s&lt;4;++s){const t=Math.floor(n[s]).toString(16);n[s]=1==t.length?&quot;0&quot;+t:t}e7(t,n.join(&quot;&quot;))}const v9=z8(n7,{Data:P8(function(t,e,i){t.setAttribute(&quot;name&quot;,e.name);const n={node:t},s=e.value;&quot;object&quot;==typeof s?(null!==s&amp;&amp;s.displayName&amp;&amp;U8(n,v9,L8,[s.displayName],i,[&quot;displayName&quot;]),null!==s&amp;&amp;s.value&amp;&amp;U8(n,v9,L8,[s.value],i,[&quot;value&quot;])):U8(n,v9,L8,[s],i,[&quot;value&quot;])}),value:P8(function(t,e){e7(t,e)}),displayName:P8(function(t,e){!function(t,e){t.appendChild(G8().createCDATASection(e))}(t,e)})}),_9=z8(n7,{Placemark:P8(H9)}),b9=function(t,e,i){return C8(e[e.length-1].node.namespaceURI,&quot;Placemark&quot;)},y9=F8(&quot;Data&quot;),x9=z8(n7,[&quot;href&quot;],z8(i7,[&quot;x&quot;,&quot;y&quot;,&quot;w&quot;,&quot;h&quot;])),w9=z8(n7,{href:P8(e7)},z8(i7,{x:P8(J8),y:P8(J8),w:P8(J8),h:P8(J8)})),C9=function(t,e,i){return C8(i7[0],&quot;gx:&quot;+i)},S9=z8(n7,[&quot;scale&quot;,&quot;heading&quot;,&quot;Icon&quot;,&quot;color&quot;,&quot;hotSpot&quot;]),k9=z8(n7,{Icon:P8(function(t,e,i){const n={node:t};let s=x9[i[i.length-1].node.namespaceURI],r=B8(e,s);U8(n,w9,L8,r,i,s),s=x9[i7[0]],r=B8(e,s),U8(n,w9,C9,r,i,s)}),color:P8(A9),heading:P8(J8),hotSpot:P8(function(t,e){t.setAttribute(&quot;x&quot;,String(e.x)),t.setAttribute(&quot;y&quot;,String(e.y)),t.setAttribute(&quot;xunits&quot;,e.xunits),t.setAttribute(&quot;yunits&quot;,e.yunits)}),scale:P8(ttt)}),E9=z8(n7,[&quot;color&quot;,&quot;scale&quot;]),M9=z8(n7,{color:P8(A9),scale:P8(ttt)}),T9=z8(n7,[&quot;color&quot;,&quot;width&quot;]),I9=z8(n7,{color:P8(A9),width:P8(J8)}),D9={Point:&quot;Point&quot;,LineString:&quot;LineString&quot;,LinearRing:&quot;LinearRing&quot;,Polygon:&quot;Polygon&quot;,MultiPoint:&quot;MultiGeometry&quot;,MultiLineString:&quot;MultiGeometry&quot;,MultiPolygon:&quot;MultiGeometry&quot;,GeometryCollection:&quot;MultiGeometry&quot;},O9=function(t,e,i){if(t)return C8(e[e.length-1].node.namespaceURI,D9[t.getType()])},P9=F8(&quot;Point&quot;),R9=F8(&quot;LineString&quot;),F9=F8(&quot;LinearRing&quot;),L9=F8(&quot;Polygon&quot;),B9=z8(n7,{LineString:P8(W9),Point:P8(W9),Polygon:P8(Q9),GeometryCollection:P8(z9)});function z9(t,e,i){const n={node:t},s=e.getType();let r,o=[];&quot;GeometryCollection&quot;===s?(e.getGeometriesArrayRecursive().forEach(function(t){const e=t.getType();&quot;MultiPoint&quot;===e?o=o.concat(t.getPoints()):&quot;MultiLineString&quot;===e?o=o.concat(t.getLineStrings()):&quot;MultiPolygon&quot;===e?o=o.concat(t.getPolygons()):&quot;Point&quot;===e||&quot;LineString&quot;===e||&quot;Polygon&quot;===e?o.push(t):nN(!1,39)}),r=O9):&quot;MultiPoint&quot;===s?(o=e.getPoints(),r=P9):&quot;MultiLineString&quot;===s?(o=e.getLineStrings(),r=R9):&quot;MultiPolygon&quot;===s?(o=e.getPolygons(),r=L9):nN(!1,39),U8(n,B9,r,o,i)}const N9=z8(n7,{LinearRing:P8(W9)});function V9(t,e,i){U8({node:t},N9,F9,[e],i)}const $9=z8(n7,{ExtendedData:P8(function(t,e,i){const n={node:t},s=e.names,r=e.values,o=s.length;for(let a=0;a&lt;o;a++)U8(n,v9,y9,[{name:s[a],value:r[a]}],i)}),MultiGeometry:P8(z9),LineString:P8(W9),LinearRing:P8(W9),Point:P8(W9),Polygon:P8(Q9),Style:P8(function(t,e,i){const n={node:t},s={};if(e.pointStyles.length){const t=e.pointStyles[0].getText();t&amp;&amp;(s.LabelStyle=t);const i=e.pointStyles[0].getImage();i&amp;&amp;&quot;function&quot;==typeof i.getSrc&amp;&amp;(s.IconStyle=i)}if(e.lineStyles.length){const t=e.lineStyles[0].getStroke();t&amp;&amp;(s.LineStyle=t)}if(e.polyStyles.length){const t=e.polyStyles[0].getStroke();t&amp;&amp;!s.LineStyle&amp;&amp;(s.LineStyle=t),s.PolyStyle=e.polyStyles[0]}const r=ett[i[i.length-1].node.namespaceURI],o=B8(s,r);U8(n,itt,L8,o,i,r)}),address:P8(e7),description:P8(e7),name:P8(e7),open:P8(Q8),phoneNumber:P8(e7),styleUrl:P8(e7),visibility:P8(Q8)}),U9=z8(n7,[&quot;name&quot;,&quot;open&quot;,&quot;visibility&quot;,&quot;address&quot;,&quot;phoneNumber&quot;,&quot;description&quot;,&quot;styleUrl&quot;,&quot;Style&quot;]),j9=F8(&quot;ExtendedData&quot;);function H9(t,e,i){const n={node:t};e.getId()&amp;&amp;t.setAttribute(&quot;id&quot;,e.getId());const s=e.getProperties(),r={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};r[e.getGeometryName()]=1;const o=Object.keys(s||{}).sort().filter(function(t){return!r[t]}),a=e.getStyleFunction();if(a){const t=a(e,0);if(t){const i=Array.isArray(t)?t:[t];let n=i;if(e.getGeometry()&amp;&amp;(n=i.filter(function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return&quot;GeometryCollection&quot;===t?i.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;Point&quot;===e||&quot;MultiPoint&quot;===e}).length:&quot;Point&quot;===t||&quot;MultiPoint&quot;===t}})),this.writeStyles_){let t=i,r=i;e.getGeometry()&amp;&amp;(t=i.filter(function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return&quot;GeometryCollection&quot;===t?i.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;LineString&quot;===e||&quot;MultiLineString&quot;===e}).length:&quot;LineString&quot;===t||&quot;MultiLineString&quot;===t}}),r=i.filter(function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return&quot;GeometryCollection&quot;===t?i.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;Polygon&quot;===e||&quot;MultiPolygon&quot;===e}).length:&quot;Polygon&quot;===t||&quot;MultiPolygon&quot;===t}})),s.Style={pointStyles:n,lineStyles:t,polyStyles:r}}if(n.length&amp;&amp;void 0===s.name){const t=n[0].getText();t&amp;&amp;(s.name=t.getText())}}}const l=U9[i[i.length-1].node.namespaceURI],c=B8(s,l);if(U8(n,$9,L8,c,i,l),o.length&gt;0){const t=B8(s,o);U8(n,$9,j9,[{names:o,values:t}],i)}const h=i[0];let u=e.getGeometry();u&amp;&amp;(u=x8(u,!0,h)),U8(n,$9,O9,[u],i)}const G9=z8(n7,[&quot;extrude&quot;,&quot;tessellate&quot;,&quot;altitudeMode&quot;,&quot;coordinates&quot;]),q9=z8(n7,{extrude:P8(Q8),tessellate:P8(Q8),altitudeMode:P8(e7),coordinates:P8(function(t,e,i){const n=i[i.length-1],s=n.layout,r=n.stride;let o;&quot;XY&quot;==s||&quot;XYM&quot;==s?o=2:&quot;XYZ&quot;==s||&quot;XYZM&quot;==s?o=3:nN(!1,34);const a=e.length;let l=&quot;&quot;;if(a&gt;0){l+=e[0];for(let t=1;t&lt;o;++t)l+=&quot;,&quot;+e[t];for(let t=r;t&lt;a;t+=r){l+=&quot; &quot;+e[t];for(let i=1;i&lt;o;++i)l+=&quot;,&quot;+e[t+i]}}e7(t,l)})});function W9(t,e,i){const n=e.getFlatCoordinates(),s={node:t};s.layout=e.getLayout(),s.stride=e.getStride();const r=e.getProperties();r.coordinates=n;const o=G9[i[i.length-1].node.namespaceURI],a=B8(r,o);U8(s,q9,L8,a,i,o)}const Y9=z8(n7,[&quot;color&quot;,&quot;fill&quot;,&quot;outline&quot;]),Z9=z8(n7,{outerBoundaryIs:P8(V9),innerBoundaryIs:P8(V9)}),K9=F8(&quot;innerBoundaryIs&quot;),X9=F8(&quot;outerBoundaryIs&quot;);function Q9(t,e,i){const n=e.getLinearRings(),s=n.shift(),r={node:t};U8(r,Z9,K9,n,i),U8(r,Z9,X9,[s],i)}const J9=z8(n7,{color:P8(A9),fill:P8(Q8),outline:P8(Q8)});function ttt(t,e){J8(t,Math.round(1e6*e)/1e6)}const ett=z8(n7,[&quot;IconStyle&quot;,&quot;LabelStyle&quot;,&quot;LineStyle&quot;,&quot;PolyStyle&quot;]),itt=z8(n7,{IconStyle:P8(function(t,e,i){const n={node:t},s={},r=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:r};if(o){l.w=o[0],l.h=o[1];const t=e.getAnchor(),i=e.getOrigin();i&amp;&amp;a&amp;&amp;0!==i[0]&amp;&amp;i[1]!==o[1]&amp;&amp;(l.x=i[0],l.y=a[1]-(i[1]+o[1])),!t||t[0]===o[0]/2&amp;&amp;t[1]===o[1]/2||(s.hotSpot={x:t[0],xunits:&quot;pixels&quot;,y:o[1]-t[1],yunits:&quot;pixels&quot;})}s.Icon=l;let c=e.getScaleArray()[0],h=o;null===h&amp;&amp;(h=m7),2==h.length&amp;&amp;(c/=k7(h)),1!==c&amp;&amp;(s.scale=c);const u=e.getRotation();0!==u&amp;&amp;(s.heading=u);const d=e.getColor();d&amp;&amp;(s.color=d);const p=S9[i[i.length-1].node.namespaceURI],f=B8(s,p);U8(n,k9,L8,f,i,p)}),LabelStyle:P8(function(t,e,i){const n={node:t},s={},r=e.getFill();r&amp;&amp;(s.color=r.getColor());const o=e.getScale();o&amp;&amp;1!==o&amp;&amp;(s.scale=o);const a=E9[i[i.length-1].node.namespaceURI],l=B8(s,a);U8(n,M9,L8,l,i,a)}),LineStyle:P8(function(t,e,i){const n={node:t},s={color:e.getColor(),width:Number(e.getWidth())||1},r=T9[i[i.length-1].node.namespaceURI],o=B8(s,r);U8(n,I9,L8,o,i,r)}),PolyStyle:P8(function(t,e,i){const n={node:t},s=e.getFill(),r=e.getStroke(),o={color:s?s.getColor():void 0,fill:!!s&amp;&amp;void 0,outline:!!r&amp;&amp;void 0},a=Y9[i[i.length-1].node.namespaceURI],l=B8(o,a);U8(n,J9,L8,l,i,a)})});var ntt=class extends q8{constructor(t){super(),t=t||{},S7||(u7=[255,255,255,1],b7=new h4({color:u7}),d7=[20,2],p7=&quot;pixels&quot;,f7=&quot;pixels&quot;,m7=[64,64],g7=&quot;https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png&quot;,y7=new H4({anchor:d7,anchorOrigin:&quot;bottom-left&quot;,anchorXUnits:p7,anchorYUnits:f7,crossOrigin:&quot;anonymous&quot;,rotation:0,scale:k7(m7),size:m7,src:g7}),A7=&quot;NO_IMAGE&quot;,x7=new L6({color:u7,width:1}),v7=new L6({color:[51,51,51,1],width:2}),w7=new b8({font:&quot;bold 16px Helvetica&quot;,fill:b7,stroke:v7,scale:.8}),C7=new v8({fill:b7,image:y7,text:w7,stroke:x7,zIndex:0}),S7=[C7]),this.dataProjection=kV(&quot;EPSG:4326&quot;),this.defaultStyle_=t.defaultStyle?t.defaultStyle:S7,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:&quot;anonymous&quot;,this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:E7,this.supportedMediaTypes=[&quot;application/vnd.google-earth.kml+xml&quot;]}readDocumentOrFolder_(t,e){const i=V8([],z8(n7,{Document:T8(this.readDocumentOrFolder_,this),Folder:T8(this.readDocumentOrFolder_,this),Placemark:I8(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);if(i)return i}readPlacemark_(t,e){const i=V8({geometry:null},r7,t,e,this);if(!i)return;const n=new l4,s=t.getAttribute(&quot;id&quot;);null!==s&amp;&amp;n.setId(s);const r=i.geometry;if(r&amp;&amp;x8(r,!1,e[0]),n.setGeometry(r),delete i.geometry,this.extractStyles_){const t=function(t,e,i,n,s){return function(r,o){let a=s,l=&quot;&quot;,c=[];if(a){const t=r.getGeometry();if(t)if(t instanceof M4)c=t.getGeometriesArrayRecursive().filter(function(t){const e=t.getType();return&quot;Point&quot;===e||&quot;MultiPoint&quot;===e}),a=c.length&gt;0;else{const e=t.getType();a=&quot;Point&quot;===e||&quot;MultiPoint&quot;===e}}a&amp;&amp;(l=r.get(&quot;name&quot;),a=a&amp;&amp;!!l,a&amp;&amp;/&amp;[^&amp;]+;/.test(l)&amp;&amp;(_7||(_7=document.createElement(&quot;textarea&quot;)),_7.innerHTML=l,l=_7.value));let h=i;if(t?h=t:e&amp;&amp;(h=M7(e,i,n)),a){const t=function(t,e){const i=[0,0];let n=&quot;start&quot;;const s=t.getImage();if(s){const t=s.getSize();if(t&amp;&amp;2==t.length){const e=s.getScaleArray(),r=s.getAnchor();i[0]=e[0]*(t[0]-r[0]),i[1]=e[1]*(t[1]/2-r[1]),n=&quot;left&quot;}}let r=t.getText();return r?(r=r.clone(),r.setFont(r.getFont()||w7.getFont()),r.setScale(r.getScale()||w7.getScale()),r.setFill(r.getFill()||w7.getFill()),r.setStroke(r.getStroke()||v7)):r=w7.clone(),r.setText(e),r.setOffsetX(i[0]),r.setOffsetY(i[1]),r.setTextAlign(n),new v8({image:s,text:r})}(h[0],l);return c.length&gt;0?(t.setGeometry(new M4(c)),[t,new v8({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null})].concat(h.slice(1))):t}return h}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(t)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(t,e){const i=t.getAttribute(&quot;id&quot;);if(null!==i){const n=n9.call(this,t,e);if(n){let e,s=t.baseURI;(!s||&quot;about:blank&quot;==s)&amp;&amp;(s=window.location.href),e=s?new URL(&quot;#&quot;+i,s).href:&quot;#&quot;+i,this.sharedStyles_[e]=n}}}readSharedStyleMap_(t,e){const i=t.getAttribute(&quot;id&quot;);if(null===i)return;const n=F7.call(this,t,e);if(!n)return;let s,r=t.baseURI;(!r||&quot;about:blank&quot;==r)&amp;&amp;(r=window.location.href),s=r?new URL(&quot;#&quot;+i,r).href:&quot;#&quot;+i,this.sharedStyles_[s]=n}readFeatureFromNode(t,e){return n7.includes(t.namespaceURI)&amp;&amp;this.readPlacemark_(t,[this.getReadOptions(t,e)])||null}readFeaturesFromNode(t,e){if(!n7.includes(t.namespaceURI))return[];let i;const n=t.localName;if(&quot;Document&quot;==n||&quot;Folder&quot;==n)return i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),i||[];if(&quot;Placemark&quot;==n){const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if(&quot;kml&quot;==n){i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=this.readFeaturesFromNode(n,e);t&amp;&amp;Az(i,t)}return i}return[]}readName(t){if(t){if(&quot;string&quot;==typeof t){const e=M8(t);return this.readNameFromDocument(e)}return E8(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(n7.includes(e.namespaceURI)&amp;&amp;&quot;name&quot;==e.localName)return X8(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(n7.includes(e.namespaceURI)&amp;&amp;(&quot;Document&quot;==t||&quot;Folder&quot;==t||&quot;Placemark&quot;==t||&quot;kml&quot;==t)){const t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){const e=[];if(&quot;string&quot;==typeof t){const i=M8(t);Az(e,this.readNetworkLinksFromDocument(i))}else E8(t)?Az(e,this.readNetworkLinksFromDocument(t)):Az(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&amp;&amp;Az(e,this.readNetworkLinksFromNode(i));return e}readNetworkLinksFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(n7.includes(i.namespaceURI)&amp;&amp;&quot;NetworkLink&quot;==i.localName){const t=V8({},o7,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;n7.includes(i.namespaceURI)&amp;&amp;(&quot;Document&quot;==t||&quot;Folder&quot;==t||&quot;kml&quot;==t)&amp;&amp;Az(e,this.readNetworkLinksFromNode(i))}return e}readRegion(t){const e=[];if(&quot;string&quot;==typeof t){const i=M8(t);Az(e,this.readRegionFromDocument(i))}else E8(t)?Az(e,this.readRegionFromDocument(t)):Az(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&amp;&amp;Az(e,this.readRegionFromNode(i));return e}readRegionFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(n7.includes(i.namespaceURI)&amp;&amp;&quot;Region&quot;==i.localName){const t=V8({},l7,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;n7.includes(i.namespaceURI)&amp;&amp;(&quot;Document&quot;==t||&quot;Folder&quot;==t||&quot;kml&quot;==t)&amp;&amp;Az(e,this.readRegionFromNode(i))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const i=C8(n7[4],&quot;kml&quot;),n=&quot;http://www.w3.org/2000/xmlns/&quot;;i.setAttributeNS(n,&quot;xmlns:gx&quot;,i7[0]),i.setAttributeNS(n,&quot;xmlns:xsi&quot;,w8),i.setAttributeNS(w8,&quot;xsi:schemaLocation&quot;,&quot;http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd&quot;);const s={node:i},r={};t.length&gt;1?r.Document=t:1==t.length&amp;&amp;(r.Placemark=t[0]);const o=c7[i.namespaceURI],a=B8(r,o);return U8(s,h7,L8,a,[e],o,this),i}};function stt(t){return&quot;string&quot;==typeof t?JSON.parse(t)||null:null!==t?t:null}var rtt=class extends y8{constructor(){super()}getType(){return&quot;json&quot;}readFeature(t,e){return this.readFeatureFromObject(stt(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(stt(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Sz()}readFeaturesFromObject(t,e){return Sz()}readGeometry(t,e){return this.readGeometryFromObject(stt(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Sz()}readProjection(t){return this.readProjectionFromObject(stt(t))}readProjectionFromObject(t){return Sz()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Sz()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Sz()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Sz()}};function ott(t,e){if(!t)return null;let i;switch(t.type){case&quot;Point&quot;:i=function(t){return new g6(t.coordinates)}(t);break;case&quot;LineString&quot;:i=function(t){return new d6(t.coordinates)}(t);break;case&quot;Polygon&quot;:i=function(t){return new I6(t.coordinates)}(t);break;case&quot;MultiPoint&quot;:i=function(t){return new v6(t.coordinates)}(t);break;case&quot;MultiLineString&quot;:i=function(t){return new f6(t.coordinates)}(t);break;case&quot;MultiPolygon&quot;:i=function(t){return new R6(t.coordinates)}(t);break;case&quot;GeometryCollection&quot;:i=function(t,e){const i=t.geometries.map(function(t){return ott(t,undefined)});return new M4(i)}(t);break;default:throw new Error(&quot;Unsupported GeoJSON type: &quot;+t.type)}return x8(i,!1,e)}function att(t,e){const i=(t=x8(t,!0,e)).getType();let n;switch(i){case&quot;Point&quot;:n=function(t,e){return{type:&quot;Point&quot;,coordinates:t.getCoordinates()}}(t);break;case&quot;LineString&quot;:n=function(t,e){return{type:&quot;LineString&quot;,coordinates:t.getCoordinates()}}(t);break;case&quot;Polygon&quot;:n=function(t,e){let i;return e&amp;&amp;(i=e.rightHanded),{type:&quot;Polygon&quot;,coordinates:t.getCoordinates(i)}}(t,e);break;case&quot;MultiPoint&quot;:n=function(t,e){return{type:&quot;MultiPoint&quot;,coordinates:t.getCoordinates()}}(t);break;case&quot;MultiLineString&quot;:n=function(t,e){return{type:&quot;MultiLineString&quot;,coordinates:t.getCoordinates()}}(t);break;case&quot;MultiPolygon&quot;:n=function(t,e){let i;return e&amp;&amp;(i=e.rightHanded),{type:&quot;MultiPolygon&quot;,coordinates:t.getCoordinates(i)}}(t,e);break;case&quot;GeometryCollection&quot;:n=function(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:&quot;GeometryCollection&quot;,geometries:t.getGeometriesArray().map(function(t){return att(t,e)})}}(t,e);break;case&quot;Circle&quot;:n={type:&quot;GeometryCollection&quot;,geometries:[]};break;default:throw new Error(&quot;Unsupported geometry type: &quot;+i)}return n}var ltt=class extends rtt{constructor(t){t=t||{},super(),this.dataProjection=kV(t.dataProjection?t.dataProjection:&quot;EPSG:4326&quot;),t.featureProjection&amp;&amp;(this.defaultFeatureProjection=kV(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=[&quot;application/geo+json&quot;,&quot;application/vnd.geo+json&quot;]}readFeatureFromObject(t,e){let i=null;i=&quot;Feature&quot;===t.type?t:{type:&quot;Feature&quot;,geometry:t,properties:null};const n=ott(i.geometry,e),s=new l4;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&amp;&amp;&quot;geometry_name&quot;in i!==void 0&amp;&amp;s.setGeometryName(i.geometry_name),s.setGeometry(n),&quot;id&quot;in i&amp;&amp;s.setId(i.id),i.properties&amp;&amp;s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){let i=null;if(&quot;FeatureCollection&quot;===t.type){i=[];const n=t.features;for(let t=0,s=n.length;t&lt;s;++t)i.push(this.readFeatureFromObject(n[t],e))}else i=[this.readFeatureFromObject(t,e)];return i}readGeometryFromObject(t,e){return ott(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?&quot;name&quot;==e.type?i=kV(e.properties.name):&quot;EPSG&quot;===e.type?i=kV(&quot;EPSG:&quot;+e.properties.code):nN(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:&quot;Feature&quot;,geometry:null,properties:null},n=t.getId();if(void 0!==n&amp;&amp;(i.id=n),!t.hasProperties())return i;const s=t.getProperties(),r=t.getGeometry();return r&amp;&amp;(i.geometry=att(r,e),delete s[t.getGeometryName()]),wz(s)||(i.properties=s),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,s=t.length;n&lt;s;++n)i.push(this.writeFeatureObject(t[n],e));return{type:&quot;FeatureCollection&quot;,features:i}}writeGeometryObject(t,e){return att(t,this.adaptOptions(e))}};const ctt=new ltt({featureProjection:&quot;EPSG:3857&quot;}),htt=(new v8,new L6({color:&quot;rgba(0, 0, 0, 0.8)&quot;})),utt=new h4({color:&quot;rgba(255, 255, 255, 0.2)&quot;}),dtt=new h4({color:&quot;#000000&quot;}),ptt=new v8({image:new d8({radius:7,stroke:htt,fill:utt})}),ftt=new L6({color:&quot;rgba(195, 38, 125, 1)&quot;,lineDash:[4,8],width:2}),mtt=new v8({image:new d8({radius:13,stroke:ftt})}),gtt=new v8({stroke:ftt}),Att={Point(t){const e=new b8({text:t.name,font:&quot;12px sans-serif&quot;,placement:&quot;point&quot;,offsetY:-20,fill:dtt}),i=[new v8({text:e,image:new d8({radius:7,stroke:new L6({color:t.color}),fill:new h4({color:`${t.color}9f`})})})];return t.editing&amp;&amp;i.push(mtt),i},LineString(t){const e=new b8({text:t.name,font:&quot;12px sans-serif&quot;,placement:&quot;line&quot;,textBaseline:&quot;bottom&quot;,offsetY:-5,overflow:!0,fill:dtt}),i=new L6({color:t.color,width:2}),n=[new v8({stroke:i})],s=t.getGeometry();return s.forEachSegment((t,i)=&gt;{n.push(new v8({geometry:new d6([t,i]),text:e}))}),t.editing&amp;&amp;(n.push(gtt),s.getCoordinates().forEach(e=&gt;{const s=new g6(e);n.push(new v8({geometry:s,image:new d8({radius:13,stroke:ftt})})),n.push(new v8({geometry:s,image:new d8({radius:7,stroke:i,fill:new h4({color:t.color})})}))})),n},Polygon(t){const e=new b8({text:t.name,font:&quot;12px sans-serif&quot;,placement:&quot;point&quot;,fill:dtt}),i=new L6({color:t.color}),n=[new v8({text:e,stroke:i,fill:new h4({color:`${t.color}3f`})})];return t.editing&amp;&amp;(n.push(gtt),t.getGeometry().getCoordinates()[0].forEach(e=&gt;{const s=new g6(e);n.push(new v8({geometry:s,image:new d8({radius:13,stroke:ftt})})),n.push(new v8({geometry:s,image:new d8({radius:7,stroke:i,fill:new h4({color:t.color})})}))})),n}};class vtt extends l4{constructor(t){super({geometry:ctt.readGeometry(t.geom)}),this.editing=!1,this.annotation=t,this.color=this.annotation.color,this.name=this.annotation.name,t.geom&amp;&amp;this.setStyle(Att[this.getGeometry().getType()](this))}updateColor(t){this.color=t,this.changed()}updateName(t){this.name=t,this.changed()}setEditingStyle(){this.editing=!0,this.getGeometry()&amp;&amp;this.setStyle(Att[this.getGeometry().getType()])}}function _tt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,9),Ha(&quot;click&quot;,function(){return Le(t),Za().editAnnotation()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;edit&quot;),Fa(),Ra(3,&quot;span&quot;),xl(4,&quot;\xc9diter&quot;),Fa(),Fa()}2&amp;t&amp;&amp;Oa(&quot;disabled&quot;,Za().disableEdition)}function btt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,10),Ha(&quot;click&quot;,function(){return Le(t),Za().deleteAnnotation()}),Ra(1,&quot;mat-icon&quot;,11),xl(2,&quot;delete&quot;),Fa(),Ra(3,&quot;span&quot;,12),xl(4,&quot;Supprimer&quot;),Fa(),Fa()}2&amp;t&amp;&amp;Oa(&quot;disabled&quot;,Za().disableEdition)}let ytt=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.annotationsService=t,this.mapConfigService=e,this.mapService=i,this.uiService=n,this.editable=!1,this.disableEdition=!1}ngOnInit(){this.ensureMandatoryInputParams(&quot;annotation&quot;)}locateAnnotation(){switch(this.annotation.geom.type){case&quot;Point&quot;:this.mapService.pingLocation(this.annotation.geom.coordinates),this.mapService.centerOnLonLat(this.annotation.geom.coordinates);break;case&quot;LineString&quot;:case&quot;Polygon&quot;:this.mapService.fitOn(ctt.readGeometry(this.annotation.geom))}}editAnnotation(){this.locateAnnotation(),this.annotationsService.editAnnotation(this.annotation)}deleteAnnotation(){this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Confirmez-vous la suppression de cette annotation ?&quot;,action:t=&gt;jp(this,void 0,void 0,function*(){t&amp;&amp;(yield this.annotationsService.deleteAnnotation(this.annotation.id))})})}exportAnnotation(){const t=new vtt(this.annotation);t.setProperties({name:this.annotation.name,description:this.annotation.description,color:this.annotation.color,created_at:this.annotation.created_at,updated_at:this.annotation.updated_at}),iW((new ntt).writeFeatures([t],{featureProjection:&quot;EPSG:3857&quot;}),`annotation-${hU(this.annotation.name)}.kml`,&quot;application/vnd.google-earth.kml+xml&quot;)}}return t.\u0275fac=function(e){return new(e||t)(Da(PH),Da(HU),Da(kj),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-annotation-item&quot;]],inputs:{annotation:&quot;annotation&quot;,editable:&quot;editable&quot;,disableEdition:&quot;disableEdition&quot;},features:[$o],decls:18,vars:7,consts:[[1,&quot;d-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Localiser l&#39;annotation&quot;,1,&quot;u-flex&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;title&quot;,&quot;click&quot;],[3,&quot;color&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Actions&quot;,3,&quot;matMenuTriggerFor&quot;],[&quot;menu&quot;,&quot;matMenu&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;\xc9diter l&#39;annotation&quot;,3,&quot;disabled&quot;,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter l&#39;annotation en KML&quot;,3,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Supprimer l&#39;annotation&quot;,3,&quot;disabled&quot;,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;\xc9diter l&#39;annotation&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Supprimer l&#39;annotation&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;color&quot;,&quot;warn&quot;],[1,&quot;error-message&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;button&quot;,1),Ha(&quot;click&quot;,function(){return e.locateAnnotation()}),xl(2),Fa(),Ra(3,&quot;button&quot;,2),Ha(&quot;click&quot;,function(){return e.annotationsService.toggleAnnotationVisiblity(e.annotation)}),Ra(4,&quot;mat-icon&quot;,3),xl(5),Fa(),Fa(),Ra(6,&quot;button&quot;,4),Ra(7,&quot;mat-icon&quot;),xl(8,&quot;more_vert&quot;),Fa(),Fa(),Ra(9,&quot;mat-menu&quot;,null,5),ra(11,_tt,5,1,&quot;button&quot;,6),Ra(12,&quot;button&quot;,7),Ha(&quot;click&quot;,function(){return e.exportAnnotation()}),Ra(13,&quot;mat-icon&quot;),xl(14,&quot;file_download&quot;),Fa(),Ra(15,&quot;span&quot;),xl(16,&quot;Exporter en KML&quot;),Fa(),Fa(),ra(17,btt,5,1,&quot;button&quot;,8),Fa(),Fa()),2&amp;t){const t=oa(10);Sr(2),Cl(&quot; &quot;,e.annotation.name,&quot; &quot;),Sr(1),Oa(&quot;title&quot;,e.annotation.visible?&quot;Masquer l&#39;annotation&quot;:&quot;Afficher l&#39;annotation&quot;),Sr(1),Oa(&quot;color&quot;,e.annotation.visible?&quot;primary&quot;:&quot;default&quot;),Sr(1),wl(e.annotation.visible?&quot;visibility&quot;:&quot;visibility_off&quot;),Sr(1),Oa(&quot;matMenuTriggerFor&quot;,t),Sr(5),Oa(&quot;ngIf&quot;,e.editable),Sr(6),Oa(&quot;ngIf&quot;,e.editable)}},directives:[Ry,hE,dJ,aJ,Nd,nJ],styles:[&quot;&quot;],changeDetection:0}),t})();function xtt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,6),Ha(&quot;click&quot;,function(){const e=Le(t).group;return Za().annotationsService.createNewAnnotation(e?e.id:void 0)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;add&quot;),Fa(),xl(3,&quot; Nouvelle annotation &quot;),Fa()}2&amp;t&amp;&amp;Oa(&quot;disabled&quot;,Za().isEditingAnnotation)}function wtt(t,e){if(1&amp;t&amp;&amp;La(0,&quot;app-annotation-item&quot;,7),2&amp;t){const t=e.resource,i=e.group,n=Za();Oa(&quot;annotation&quot;,t)(&quot;editable&quot;,!(n.isOffline||i&amp;&amp;&quot;guest&quot;===i.role))(&quot;disableEdition&quot;,n.isEditingAnnotation)(&quot;@fadeAnimation&quot;,void 0)}}let Ctt=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.titleService=t,this.annotationsService=e,this.mapService=i,this.offlineService=n,this.isEditingAnnotation=!1,this.isOffline=!1}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Liste des annotations - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(this.annotationsService.editedAnnotation$.pipe(M(t=&gt;!!t)).subscribe(t=&gt;{this.isEditingAnnotation=t}),this.offlineService.isOffline$.subscribe(t=&gt;{this.isOffline=t}))})}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(PH),Da(kj),Da(hW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-annotations-panel&quot;]],features:[$o],decls:9,vars:1,consts:[[&quot;joyrideStep&quot;,&quot;annotations-panel&quot;,&quot;title&quot;,&quot;Gestion des annotations&quot;,&quot;text&quot;,&quot;C&#39;est ici que vous pouvez g\xe9rer vos annotations sur la carte.&quot;,1,&quot;panel&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[&quot;resourcesKey&quot;,&quot;annotations&quot;,&quot;privateResourcesTitle&quot;,&quot;Annotations priv\xe9es&quot;,&quot;emptyMessage&quot;,&quot;Aucune annotation&quot;,1,&quot;scrollable&quot;,3,&quot;resources$&quot;],[&quot;createTemplate&quot;,&quot;&quot;],[&quot;resourceTemplate&quot;,&quot;&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,1,&quot;ma-2&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[3,&quot;annotation&quot;,&quot;editable&quot;,&quot;disableEdition&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h2&quot;,2),xl(3,&quot;Annotations&quot;),Fa(),Fa(),Ra(4,&quot;app-resources-panel&quot;,3),ra(5,xtt,4,1,&quot;ng-template&quot;,null,4,Rh),ra(7,wtt,1,4,&quot;ng-template&quot;,null,5,Rh),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(4),Oa(&quot;resources$&quot;,e.annotationsService.annotations$))},directives:[gL,u5,Ry,hE,ytt],styles:[&quot;&quot;],data:{animation:[$3]}}),t})();var Stt=i(5709);const ktt=[{group:&quot;UTC+14:00&quot;,timezone:&quot;Pacific/Kiritimati&quot;,label:&quot;Pacific/Kiritimati (+14)&quot;},{group:&quot;UTC+13:00&quot;,timezone:&quot;Pacific/Apia&quot;,label:&quot;Pacific/Apia (+13)&quot;},{group:&quot;UTC+13:00&quot;,timezone:&quot;Pacific/Enderbury&quot;,label:&quot;Pacific/Enderbury (+13)&quot;},{group:&quot;UTC+13:00&quot;,timezone:&quot;Pacific/Fakaofo&quot;,label:&quot;Pacific/Fakaofo (+13)&quot;},{group:&quot;UTC+13:00&quot;,timezone:&quot;Pacific/Tongatapu&quot;,label:&quot;Pacific/Tongatapu (+13)&quot;},{group:&quot;UTC+12:45&quot;,timezone:&quot;Pacific/Chatham&quot;,label:&quot;Pacific/Chatham (+12:45)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Antarctica/McMurdo&quot;,label:&quot;Antarctica/McMurdo (NZST)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Asia/Anadyr&quot;,label:&quot;Asia/Anadyr (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Asia/Kamchatka&quot;,label:&quot;Asia/Kamchatka (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Auckland&quot;,label:&quot;Pacific/Auckland (NZST)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Fiji&quot;,label:&quot;Pacific/Fiji (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Funafuti&quot;,label:&quot;Pacific/Funafuti (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Kwajalein&quot;,label:&quot;Pacific/Kwajalein (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Majuro&quot;,label:&quot;Pacific/Majuro (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Nauru&quot;,label:&quot;Pacific/Nauru (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Tarawa&quot;,label:&quot;Pacific/Tarawa (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Wake&quot;,label:&quot;Pacific/Wake (+12)&quot;},{group:&quot;UTC+12:00&quot;,timezone:&quot;Pacific/Wallis&quot;,label:&quot;Pacific/Wallis (+12)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Antarctica/Casey&quot;,label:&quot;Antarctica/Casey (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Antarctica/Macquarie&quot;,label:&quot;Antarctica/Macquarie (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Asia/Magadan&quot;,label:&quot;Asia/Magadan (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Asia/Sakhalin&quot;,label:&quot;Asia/Sakhalin (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Asia/Srednekolymsk&quot;,label:&quot;Asia/Srednekolymsk (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Bougainville&quot;,label:&quot;Pacific/Bougainville (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Efate&quot;,label:&quot;Pacific/Efate (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Guadalcanal&quot;,label:&quot;Pacific/Guadalcanal (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Kosrae&quot;,label:&quot;Pacific/Kosrae (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Norfolk&quot;,label:&quot;Pacific/Norfolk (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Noumea&quot;,label:&quot;Pacific/Noumea (+11)&quot;},{group:&quot;UTC+11:00&quot;,timezone:&quot;Pacific/Pohnpei&quot;,label:&quot;Pacific/Pohnpei (+11)&quot;},{group:&quot;UTC+10:30&quot;,timezone:&quot;Australia/Lord_Howe&quot;,label:&quot;Australia/Lord Howe (+10:30)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Antarctica/DumontDUrville&quot;,label:&quot;Antarctica/DumontDUrville (+10)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Asia/Ust-Nera&quot;,label:&quot;Asia/Ust-Nera (+10)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Asia/Vladivostok&quot;,label:&quot;Asia/Vladivostok (+10)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Brisbane&quot;,label:&quot;Australia/Brisbane (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Currie&quot;,label:&quot;Australia/Currie (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Hobart&quot;,label:&quot;Australia/Hobart (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Lindeman&quot;,label:&quot;Australia/Lindeman (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Melbourne&quot;,label:&quot;Australia/Melbourne (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Australia/Sydney&quot;,label:&quot;Australia/Sydney (AEST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Pacific/Chuuk&quot;,label:&quot;Pacific/Chuuk (+10)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Pacific/Guam&quot;,label:&quot;Pacific/Guam (ChST)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Pacific/Port_Moresby&quot;,label:&quot;Pacific/Port Moresby (+10)&quot;},{group:&quot;UTC+10:00&quot;,timezone:&quot;Pacific/Saipan&quot;,label:&quot;Pacific/Saipan (ChST)&quot;},{group:&quot;UTC+09:30&quot;,timezone:&quot;Australia/Adelaide&quot;,label:&quot;Australia/Adelaide (ACST)&quot;},{group:&quot;UTC+09:30&quot;,timezone:&quot;Australia/Broken_Hill&quot;,label:&quot;Australia/Broken Hill (ACST)&quot;},{group:&quot;UTC+09:30&quot;,timezone:&quot;Australia/Darwin&quot;,label:&quot;Australia/Darwin (ACST)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Chita&quot;,label:&quot;Asia/Chita (+09)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Dili&quot;,label:&quot;Asia/Dili (+09)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Jayapura&quot;,label:&quot;Asia/Jayapura (WIT)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Khandyga&quot;,label:&quot;Asia/Khandyga (+09)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Seoul&quot;,label:&quot;Asia/Seoul (KST)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Tokyo&quot;,label:&quot;Asia/Tokyo (JST)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Asia/Yakutsk&quot;,label:&quot;Asia/Yakutsk (+09)&quot;},{group:&quot;UTC+09:00&quot;,timezone:&quot;Pacific/Palau&quot;,label:&quot;Pacific/Palau (+09)&quot;},{group:&quot;UTC+08:45&quot;,timezone:&quot;Australia/Eucla&quot;,label:&quot;Australia/Eucla (+08:45)&quot;},{group:&quot;UTC+08:30&quot;,timezone:&quot;Asia/Pyongyang&quot;,label:&quot;Asia/Pyongyang (KST)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Brunei&quot;,label:&quot;Asia/Brunei (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Choibalsan&quot;,label:&quot;Asia/Choibalsan (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Hong_Kong&quot;,label:&quot;Asia/Hong Kong (HKT)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Irkutsk&quot;,label:&quot;Asia/Irkutsk (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Kuala_Lumpur&quot;,label:&quot;Asia/Kuala Lumpur (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Kuching&quot;,label:&quot;Asia/Kuching (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Macau&quot;,label:&quot;Asia/Macau (CST)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Makassar&quot;,label:&quot;Asia/Makassar (WITA)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Manila&quot;,label:&quot;Asia/Manila (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Shanghai&quot;,label:&quot;Asia/Shanghai (CST)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Singapore&quot;,label:&quot;Asia/Singapore (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Taipei&quot;,label:&quot;Asia/Taipei (CST)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Asia/Ulaanbaatar&quot;,label:&quot;Asia/Ulaanbaatar (+08)&quot;},{group:&quot;UTC+08:00&quot;,timezone:&quot;Australia/Perth&quot;,label:&quot;Australia/Perth (AWST)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Antarctica/Davis&quot;,label:&quot;Antarctica/Davis (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Bangkok&quot;,label:&quot;Asia/Bangkok (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Barnaul&quot;,label:&quot;Asia/Barnaul (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Ho_Chi_Minh&quot;,label:&quot;Asia/Ho Chi Minh (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Hovd&quot;,label:&quot;Asia/Hovd (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Jakarta&quot;,label:&quot;Asia/Jakarta (WIB)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Krasnoyarsk&quot;,label:&quot;Asia/Krasnoyarsk (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Novokuznetsk&quot;,label:&quot;Asia/Novokuznetsk (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Novosibirsk&quot;,label:&quot;Asia/Novosibirsk (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Phnom_Penh&quot;,label:&quot;Asia/Phnom_Penh (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Pontianak&quot;,label:&quot;Asia/Pontianak (WIB)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Tomsk&quot;,label:&quot;Asia/Tomsk (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Asia/Vientiane&quot;,label:&quot;Asia/Vientiane (+07)&quot;},{group:&quot;UTC+07:00&quot;,timezone:&quot;Indian/Christmas&quot;,label:&quot;Indian/Christmas (+07)&quot;},{group:&quot;UTC+06:30&quot;,timezone:&quot;Asia/Yangon&quot;,label:&quot;Asia/Yangon (+06:30)&quot;},{group:&quot;UTC+06:30&quot;,timezone:&quot;Indian/Cocos&quot;,label:&quot;Indian/Cocos (+06:30)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Antarctica/Vostok&quot;,label:&quot;Antarctica/Vostok (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Almaty&quot;,label:&quot;Asia/Almaty (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Bishkek&quot;,label:&quot;Asia/Bishkek (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Dhaka&quot;,label:&quot;Asia/Dhaka (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Omsk&quot;,label:&quot;Asia/Omsk (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Qyzylorda&quot;,label:&quot;Asia/Qyzylorda (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Thimphu&quot;,label:&quot;Asia/Thimphu (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Asia/Urumqi&quot;,label:&quot;Asia/Urumqi (+06)&quot;},{group:&quot;UTC+06:00&quot;,timezone:&quot;Indian/Chagos&quot;,label:&quot;Indian/Chagos (+06)&quot;},{group:&quot;UTC+05:45&quot;,timezone:&quot;Asia/Kathmandu&quot;,label:&quot;Asia/Kathmandu (+05:45)&quot;},{group:&quot;UTC+05:30&quot;,timezone:&quot;Asia/Colombo&quot;,label:&quot;Asia/Colombo (+05:30)&quot;},{group:&quot;UTC+05:30&quot;,timezone:&quot;Asia/Kolkata&quot;,label:&quot;Asia/Kolkata (IST)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Antarctica/Mawson&quot;,label:&quot;Antarctica/Mawson (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Aqtau&quot;,label:&quot;Asia/Aqtau (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Aqtobe&quot;,label:&quot;Asia/Aqtobe (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Ashgabat&quot;,label:&quot;Asia/Ashgabat (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Atyrau&quot;,label:&quot;Asia/Atyrau (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Dushanbe&quot;,label:&quot;Asia/Dushanbe (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Karachi&quot;,label:&quot;Asia/Karachi (PKT)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Oral&quot;,label:&quot;Asia/Oral (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Samarkand&quot;,label:&quot;Asia/Samarkand (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Tashkent&quot;,label:&quot;Asia/Tashkent (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Asia/Yekaterinburg&quot;,label:&quot;Asia/Yekaterinburg (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Indian/Kerguelen&quot;,label:&quot;Indian/Kerguelen (+05)&quot;},{group:&quot;UTC+05:00&quot;,timezone:&quot;Indian/Maldives&quot;,label:&quot;Indian/Maldives (+05)&quot;},{group:&quot;UTC+04:30&quot;,timezone:&quot;Asia/Kabul&quot;,label:&quot;Asia/Kabul (+04:30)&quot;},{group:&quot;UTC+04:30&quot;,timezone:&quot;Asia/Tehran&quot;,label:&quot;Asia/Tehran (+04:30)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Asia/Baku&quot;,label:&quot;Asia/Baku (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Asia/Dubai&quot;,label:&quot;Asia/Dubai (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Asia/Muscat&quot;,label:&quot;Asia/Muscat (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Asia/Tbilisi&quot;,label:&quot;Asia/Tbilisi (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Asia/Yerevan&quot;,label:&quot;Asia/Yerevan (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Europe/Astrakhan&quot;,label:&quot;Europe/Astrakhan (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Europe/Samara&quot;,label:&quot;Europe/Samara (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Europe/Saratov&quot;,label:&quot;Europe/Saratov (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Europe/Ulyanovsk&quot;,label:&quot;Europe/Ulyanovsk (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Indian/Mahe&quot;,label:&quot;Indian/Mahe (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Indian/Mauritius&quot;,label:&quot;Indian/Mauritius (+04)&quot;},{group:&quot;UTC+04:00&quot;,timezone:&quot;Indian/Reunion&quot;,label:&quot;Indian/Reunion (+04)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Addis_Ababa&quot;,label:&quot;Africa/Addis Ababa (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Asmara&quot;,label:&quot;Africa/Asmara (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Dar_es_Salaam&quot;,label:&quot;Africa/Dar es Salaam (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Djibouti&quot;,label:&quot;Africa/Djibouti (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Juba&quot;,label:&quot;Africa/Juba (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Kampala&quot;,label:&quot;Africa/Kampala (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Khartoum&quot;,label:&quot;Africa/Khartoum (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Mogadishu&quot;,label:&quot;Africa/Mogadishu (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Africa/Nairobi&quot;,label:&quot;Africa/Nairobi (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Antarctica/Syowa&quot;,label:&quot;Antarctica/Syowa (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Aden&quot;,label:&quot;Asia/Aden (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Amman&quot;,label:&quot;Asia/Amman (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Baghdad&quot;,label:&quot;Asia/Baghdad (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Bahrain&quot;,label:&quot;Asia/Bahrain (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Beirut&quot;,label:&quot;Asia/Beirut (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Damascus&quot;,label:&quot;Asia/Damascus (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Famagusta&quot;,label:&quot;Asia/Famagusta (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Gaza&quot;,label:&quot;Asia/Gaza (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Hebron&quot;,label:&quot;Asia/Hebron (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Jerusalem&quot;,label:&quot;Asia/Jerusalem (IDT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Kuwait&quot;,label:&quot;Asia/Kuwait (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Nicosia&quot;,label:&quot;Asia/Nicosia (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Qatar&quot;,label:&quot;Asia/Qatar (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Asia/Riyadh&quot;,label:&quot;Asia/Riyadh (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Athens&quot;,label:&quot;Europe/Athens (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Bucharest&quot;,label:&quot;Europe/Bucharest (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Chisinau&quot;,label:&quot;Europe/Chisinau (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Helsinki&quot;,label:&quot;Europe/Helsinki (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Istanbul&quot;,label:&quot;Europe/Istanbul (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Kiev&quot;,label:&quot;Europe/Kiev (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Kirov&quot;,label:&quot;Europe/Kirov (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Mariehamn&quot;,label:&quot;Europe/Mariehamn (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Minsk&quot;,label:&quot;Europe/Minsk (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Moscow&quot;,label:&quot;Europe/Moscow (MSK)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Riga&quot;,label:&quot;Europe/Riga (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Simferopol&quot;,label:&quot;Europe/Simferopol (MSK)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Sofia&quot;,label:&quot;Europe/Sofia (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Tallinn&quot;,label:&quot;Europe/Tallinn (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Uzhgorod&quot;,label:&quot;Europe/Uzhgorod (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Vilnius&quot;,label:&quot;Europe/Vilnius (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Volgograd&quot;,label:&quot;Europe/Volgograd (+03)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Europe/Zaporozhye&quot;,label:&quot;Europe/Zaporozhye (EEST)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Indian/Antananarivo&quot;,label:&quot;Indian/Antananarivo (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Indian/Comoro&quot;,label:&quot;Indian/Comoro (EAT)&quot;},{group:&quot;UTC+03:00&quot;,timezone:&quot;Indian/Mayotte&quot;,label:&quot;Indian/Mayotte (EAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Blantyre&quot;,label:&quot;Africa/Blantyre (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Bujumbura&quot;,label:&quot;Africa/Bujumbura (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Cairo&quot;,label:&quot;Africa/Cairo (EET)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Ceuta&quot;,label:&quot;Africa/Ceuta (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Gaborone&quot;,label:&quot;Africa/Gaborone (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Harare&quot;,label:&quot;Africa/Harare (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Johannesburg&quot;,label:&quot;Africa/Johannesburg (SAST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Kigali&quot;,label:&quot;Africa/Kigali (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Lubumbashi&quot;,label:&quot;Africa/Lubumbashi (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Lusaka&quot;,label:&quot;Africa/Lusaka (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Maputo&quot;,label:&quot;Africa/Maputo (CAT)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Maseru&quot;,label:&quot;Africa/Maseru (SAST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Mbabane&quot;,label:&quot;Africa/Mbabane (SAST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Africa/Tripoli&quot;,label:&quot;Africa/Tripoli (EET)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Antarctica/Troll&quot;,label:&quot;Antarctica/Troll (+02)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Arctic/Longyearbyen&quot;,label:&quot;Arctic/Longyearbyen (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Amsterdam&quot;,label:&quot;Europe/Amsterdam (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Andorra&quot;,label:&quot;Europe/Andorra (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Belgrade&quot;,label:&quot;Europe/Belgrade (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Berlin&quot;,label:&quot;Europe/Berlin (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Bratislava&quot;,label:&quot;Europe/Bratislava (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Brussels&quot;,label:&quot;Europe/Brussels (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Budapest&quot;,label:&quot;Europe/Budapest (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Busingen&quot;,label:&quot;Europe/Busingen (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Copenhagen&quot;,label:&quot;Europe/Copenhagen (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Gibraltar&quot;,label:&quot;Europe/Gibraltar (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Kaliningrad&quot;,label:&quot;Europe/Kaliningrad (EET)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Ljubljana&quot;,label:&quot;Europe/Ljubljana (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Luxembourg&quot;,label:&quot;Europe/Luxembourg (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Madrid&quot;,label:&quot;Europe/Madrid (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Malta&quot;,label:&quot;Europe/Malta (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Monaco&quot;,label:&quot;Europe/Monaco (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Oslo&quot;,label:&quot;Europe/Oslo (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Paris&quot;,label:&quot;Europe/Paris (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Podgorica&quot;,label:&quot;Europe/Podgorica (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Prague&quot;,label:&quot;Europe/Prague (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Rome&quot;,label:&quot;Europe/Rome (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/San_Marino&quot;,label:&quot;Europe/San Marino (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Sarajevo&quot;,label:&quot;Europe/Sarajevo (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Skopje&quot;,label:&quot;Europe/Skopje (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Stockholm&quot;,label:&quot;Europe/Stockholm (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Tirane&quot;,label:&quot;Europe/Tirane (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Vaduz&quot;,label:&quot;Europe/Vaduz (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Vatican&quot;,label:&quot;Europe/Vatican (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Vienna&quot;,label:&quot;Europe/Vienna (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Warsaw&quot;,label:&quot;Europe/Warsaw (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Zagreb&quot;,label:&quot;Europe/Zagreb (CEST)&quot;},{group:&quot;UTC+02:00&quot;,timezone:&quot;Europe/Zurich&quot;,label:&quot;Europe/Zurich (CEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Algiers&quot;,label:&quot;Africa/Algiers (CET)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Bangui&quot;,label:&quot;Africa/Bangui (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Brazzaville&quot;,label:&quot;Africa/Brazzaville (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Casablanca&quot;,label:&quot;Africa/Casablanca (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Douala&quot;,label:&quot;Africa/Douala (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/El_Aaiun&quot;,label:&quot;Africa/El Aaiun (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Kinshasa&quot;,label:&quot;Africa/Kinshasa (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Lagos&quot;,label:&quot;Africa/Lagos (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Libreville&quot;,label:&quot;Africa/Libreville (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Luanda&quot;,label:&quot;Africa/Luanda (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Malabo&quot;,label:&quot;Africa/Malabo (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Ndjamena&quot;,label:&quot;Africa/Ndjamena (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Niamey&quot;,label:&quot;Africa/Niamey (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Porto-Novo&quot;,label:&quot;Africa/Porto-Novo (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Tunis&quot;,label:&quot;Africa/Tunis (CET)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Africa/Windhoek&quot;,label:&quot;Africa/Windhoek (WAT)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Atlantic/Canary&quot;,label:&quot;Atlantic/Canary (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Atlantic/Faroe&quot;,label:&quot;Atlantic/Faroe (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Atlantic/Madeira&quot;,label:&quot;Atlantic/Madeira (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/Dublin&quot;,label:&quot;Europe/Dublin (IST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/Guernsey&quot;,label:&quot;Europe/Guernsey (BST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/Isle_of_Man&quot;,label:&quot;Europe/Isle of Man (BST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/Jersey&quot;,label:&quot;Europe/Jersey (BST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/Lisbon&quot;,label:&quot;Europe/Lisbon (WEST)&quot;},{group:&quot;UTC+01:00&quot;,timezone:&quot;Europe/London&quot;,label:&quot;Europe/London (BST)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Abidjan&quot;,label:&quot;Africa/Abidjan (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Accra&quot;,label:&quot;Africa/Accra (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Bamako&quot;,label:&quot;Africa/Bamako (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Banjul&quot;,label:&quot;Africa/Banjul (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Bissau&quot;,label:&quot;Africa/Bissau (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Conakry&quot;,label:&quot;Africa/Conakry (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Dakar&quot;,label:&quot;Africa/Dakar (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Freetown&quot;,label:&quot;Africa/Freetown (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Lome&quot;,label:&quot;Africa/Lome (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Monrovia&quot;,label:&quot;Africa/Monrovia (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Nouakchott&quot;,label:&quot;Africa/Nouakchott (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Ouagadougou&quot;,label:&quot;Africa/Ouagadougou (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Africa/Sao_Tome&quot;,label:&quot;Africa/Sao_Tome (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;America/Danmarkshavn&quot;,label:&quot;America/Danmarkshavn (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;America/Scoresbysund&quot;,label:&quot;America/Scoresbysund (+00)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Atlantic/Azores&quot;,label:&quot;Atlantic/Azores (+00)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Atlantic/Reykjavik&quot;,label:&quot;Atlantic/Reykjavik (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;Atlantic/St_Helena&quot;,label:&quot;Atlantic/St_Helena (GMT)&quot;},{group:&quot;UTC&quot;,timezone:&quot;UTC&quot;,label:&quot;UTC (UTC)&quot;},{group:&quot;UTC-01:00&quot;,timezone:&quot;Atlantic/Cape_Verde&quot;,label:&quot;Atlantic/Cape Verde (-01)&quot;},{group:&quot;UTC-02:00&quot;,timezone:&quot;America/Godthab&quot;,label:&quot;America/Godthab (-02)&quot;},{group:&quot;UTC-02:00&quot;,timezone:&quot;America/Miquelon&quot;,label:&quot;America/Miquelon (-02)&quot;},{group:&quot;UTC-02:00&quot;,timezone:&quot;America/Noronha&quot;,label:&quot;America/Noronha (-02)&quot;},{group:&quot;UTC-02:00&quot;,timezone:&quot;Atlantic/South_Georgia&quot;,label:&quot;Atlantic/South Georgia (-02)&quot;},{group:&quot;UTC-02:30&quot;,timezone:&quot;America/St_Johns&quot;,label:&quot;America/St Johns (NDT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Araguaina&quot;,label:&quot;America/Araguaina (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Buenos_Aires&quot;,label:&quot;America/Argentina/Buenos Aires (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Catamarca&quot;,label:&quot;America/Argentina/Catamarca (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Cordoba&quot;,label:&quot;America/Argentina/Cordoba (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Jujuy&quot;,label:&quot;America/Argentina/Jujuy (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/La_Rioja&quot;,label:&quot;America/Argentina/La Rioja (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Mendoza&quot;,label:&quot;America/Argentina/Mendoza (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Rio_Gallegos&quot;,label:&quot;America/Argentina/Rio Gallegos (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Salta&quot;,label:&quot;America/Argentina/Salta (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/San_Juan&quot;,label:&quot;America/Argentina/San Juan (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/San_Luis&quot;,label:&quot;America/Argentina/San Luis (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Tucuman&quot;,label:&quot;America/Argentina/Tucuman (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Argentina/Ushuaia&quot;,label:&quot;America/Argentina/Ushuaia (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Bahia&quot;,label:&quot;America/Bahia (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Belem&quot;,label:&quot;America/Belem (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Cayenne&quot;,label:&quot;America/Cayenne (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Fortaleza&quot;,label:&quot;America/Fortaleza (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Glace_Bay&quot;,label:&quot;America/Glace_Bay (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Goose_Bay&quot;,label:&quot;America/Goose_Bay (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Halifax&quot;,label:&quot;America/Halifax (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Maceio&quot;,label:&quot;America/Maceio (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Moncton&quot;,label:&quot;America/Moncton (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Montevideo&quot;,label:&quot;America/Montevideo (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Paramaribo&quot;,label:&quot;America/Paramaribo (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Punta_Arenas&quot;,label:&quot;America/Punta Arenas (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Recife&quot;,label:&quot;America/Recife (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Santarem&quot;,label:&quot;America/Santarem (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Sao_Paulo&quot;,label:&quot;America/Sao Paulo (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;America/Thule&quot;,label:&quot;America/Thule (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;Antarctica/Palmer&quot;,label:&quot;Antarctica/Palmer (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;Antarctica/Rothera&quot;,label:&quot;Antarctica/Rothera (-03)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;Atlantic/Bermuda&quot;,label:&quot;Atlantic/Bermuda (ADT)&quot;},{group:&quot;UTC-03:00&quot;,timezone:&quot;Atlantic/Stanley&quot;,label:&quot;Atlantic/Stanley (-03)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Anguilla&quot;,label:&quot;America/Anguilla (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Antigua&quot;,label:&quot;America/Antigua (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Aruba&quot;,label:&quot;America/Aruba (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Asuncion&quot;,label:&quot;America/Asuncion (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Barbados&quot;,label:&quot;America/Barbados (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Blanc-Sablon&quot;,label:&quot;America/Blanc-Sablon (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Boa_Vista&quot;,label:&quot;America/Boa Vista (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Campo_Grande&quot;,label:&quot;America/Campo Grande (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Caracas&quot;,label:&quot;America/Caracas (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Cuiaba&quot;,label:&quot;America/Cuiaba (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Curacao&quot;,label:&quot;America/Curacao (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Detroit&quot;,label:&quot;America/Detroit (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Dominica&quot;,label:&quot;America/Dominica (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Grand_Turk&quot;,label:&quot;America/Grand Turk (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Grenada&quot;,label:&quot;America/Grenada (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Guadeloupe&quot;,label:&quot;America/Guadeloupe (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Guyana&quot;,label:&quot;America/Guyana (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Havana&quot;,label:&quot;America/Havana (CDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Indianapolis&quot;,label:&quot;America/Indiana/Indianapolis (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Marengo&quot;,label:&quot;America/Indiana/Marengo (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Petersburg&quot;,label:&quot;America/Indiana/Petersburg (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Vevay&quot;,label:&quot;America/Indiana/Vevay (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Vincennes&quot;,label:&quot;America/Indiana/Vincennes (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Indiana/Winamac&quot;,label:&quot;America/Indiana/Winamac (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Iqaluit&quot;,label:&quot;America/Iqaluit (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Kentucky/Louisville&quot;,label:&quot;America/Kentucky/Louisville (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Kentucky/Monticello&quot;,label:&quot;America/Kentucky/Monticello (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Kralendijk&quot;,label:&quot;America/Kralendijk (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/La_Paz&quot;,label:&quot;America/La_Paz (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Lower_Princes&quot;,label:&quot;America/Lower Princes (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Manaus&quot;,label:&quot;America/Manaus (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Marigot&quot;,label:&quot;America/Marigot (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Martinique&quot;,label:&quot;America/Martinique (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Montserrat&quot;,label:&quot;America/Montserrat (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Nassau&quot;,label:&quot;America/Nassau (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/New_York&quot;,label:&quot;America/New_York (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Nipigon&quot;,label:&quot;America/Nipigon (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Pangnirtung&quot;,label:&quot;America/Pangnirtung (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Port-au-Prince&quot;,label:&quot;America/Port-au-Prince (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Port_of_Spain&quot;,label:&quot;America/Port of Spain (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Porto_Velho&quot;,label:&quot;America/Porto Velho (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Puerto_Rico&quot;,label:&quot;America/Puerto Rico (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Santiago&quot;,label:&quot;America/Santiago (-04)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Santo_Domingo&quot;,label:&quot;America/Santo Domingo (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/St_Barthelemy&quot;,label:&quot;America/St Barthelemy (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/St_Kitts&quot;,label:&quot;America/St Kitts (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/St_Lucia&quot;,label:&quot;America/St Lucia (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/St_Thomas&quot;,label:&quot;America/St Thomas (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/St_Vincent&quot;,label:&quot;America/St Vincent (AST)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Thunder_Bay&quot;,label:&quot;America/Thunder Bay (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Toronto&quot;,label:&quot;America/Toronto (EDT)&quot;},{group:&quot;UTC-04:00&quot;,timezone:&quot;America/Tortola&quot;,label:&quot;America/Tortola (AST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Atikokan&quot;,label:&quot;America/Atikokan (EST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Bahia_Banderas&quot;,label:&quot;America/Bahia Banderas (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Bogota&quot;,label:&quot;America/Bogota (-05)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Cancun&quot;,label:&quot;America/Cancun (EST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Cayman&quot;,label:&quot;America/Cayman (EST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Chicago&quot;,label:&quot;America/Chicago (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Eirunepe&quot;,label:&quot;America/Eirunepe (-05)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Guayaquil&quot;,label:&quot;America/Guayaquil (-05)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Indiana/Knox&quot;,label:&quot;America/Indiana/Knox (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Indiana/Tell_City&quot;,label:&quot;America/Indiana/Tell City (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Jamaica&quot;,label:&quot;America/Jamaica (EST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Lima&quot;,label:&quot;America/Lima (-05)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Matamoros&quot;,label:&quot;America/Matamoros (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Menominee&quot;,label:&quot;America/Menominee (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Merida&quot;,label:&quot;America/Merida (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Mexico_City&quot;,label:&quot;America/Mexico City (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Monterrey&quot;,label:&quot;America/Monterrey (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/North_Dakota/Beulah&quot;,label:&quot;America/North Dakota/Beulah (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/North_Dakota/Center&quot;,label:&quot;America/North Dakota/Center (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/North_Dakota/New_Salem&quot;,label:&quot;America/North Dakota/New Salem (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Panama&quot;,label:&quot;America/Panama (EST)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Rainy_River&quot;,label:&quot;America/Rainy River (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Rankin_Inlet&quot;,label:&quot;America/Rankin Inlet (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Resolute&quot;,label:&quot;America/Resolute (CDT)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Rio_Branco&quot;,label:&quot;America/Rio Branco (-05)&quot;},{group:&quot;UTC-05:00&quot;,timezone:&quot;America/Winnipeg&quot;,label:&quot;America/Winnipeg (CDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Belize&quot;,label:&quot;America/Belize (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Boise&quot;,label:&quot;America/Boise (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Cambridge_Bay&quot;,label:&quot;America/Cambridge Bay (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Chihuahua&quot;,label:&quot;America/Chihuahua (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Costa_Rica&quot;,label:&quot;America/Costa Rica (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Denver&quot;,label:&quot;America/Denver (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Edmonton&quot;,label:&quot;America/Edmonton (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/El_Salvador&quot;,label:&quot;America/El Salvador (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Guatemala&quot;,label:&quot;America/Guatemala (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Inuvik&quot;,label:&quot;America/Inuvik (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Managua&quot;,label:&quot;America/Managua (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Mazatlan&quot;,label:&quot;America/Mazatlan (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Ojinaga&quot;,label:&quot;America/Ojinaga (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Regina&quot;,label:&quot;America/Regina (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Swift_Current&quot;,label:&quot;America/Swift Current (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Tegucigalpa&quot;,label:&quot;America/Tegucigalpa (CST)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;America/Yellowknife&quot;,label:&quot;America/Yellowknife (MDT)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;Pacific/Easter&quot;,label:&quot;Pacific/Easter (-06)&quot;},{group:&quot;UTC-06:00&quot;,timezone:&quot;Pacific/Galapagos&quot;,label:&quot;Pacific/Galapagos (-06)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Creston&quot;,label:&quot;America/Creston (MST)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Dawson&quot;,label:&quot;America/Dawson (PDT)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Dawson_Creek&quot;,label:&quot;America/Dawson Creek (MST)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Fort_Nelson&quot;,label:&quot;America/Fort Nelson (MST)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Hermosillo&quot;,label:&quot;America/Hermosillo (MST)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Los_Angeles&quot;,label:&quot;America/Los Angeles (PDT)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Phoenix&quot;,label:&quot;America/Phoenix (MST)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Tijuana&quot;,label:&quot;America/Tijuana (PDT)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Vancouver&quot;,label:&quot;America/Vancouver (PDT)&quot;},{group:&quot;UTC-07:00&quot;,timezone:&quot;America/Whitehorse&quot;,label:&quot;America/Whitehorse (PDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Anchorage&quot;,label:&quot;America/Anchorage (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Juneau&quot;,label:&quot;America/Juneau (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Metlakatla&quot;,label:&quot;America/Metlakatla (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Nome&quot;,label:&quot;America/Nome (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Sitka&quot;,label:&quot;America/Sitka (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;America/Yakutat&quot;,label:&quot;America/Yakutat (AKDT)&quot;},{group:&quot;UTC-08:00&quot;,timezone:&quot;Pacific/Pitcairn&quot;,label:&quot;Pacific/Pitcairn (-08)&quot;},{group:&quot;UTC-09:00&quot;,timezone:&quot;America/Adak&quot;,label:&quot;America/Adak (HDT)&quot;},{group:&quot;UTC-09:00&quot;,timezone:&quot;Pacific/Gambier&quot;,label:&quot;Pacific/Gambier (-09)&quot;},{group:&quot;UTC-09:30&quot;,timezone:&quot;Pacific/Marquesas&quot;,label:&quot;Pacific/Marquesas (-09:30)&quot;},{group:&quot;UTC-10:00&quot;,timezone:&quot;Pacific/Honolulu&quot;,label:&quot;Pacific/Honolulu (HST)&quot;},{group:&quot;UTC-10:00&quot;,timezone:&quot;Pacific/Rarotonga&quot;,label:&quot;Pacific/Rarotonga (-10)&quot;},{group:&quot;UTC-10:00&quot;,timezone:&quot;Pacific/Tahiti&quot;,label:&quot;Pacific/Tahiti (-10)&quot;},{group:&quot;UTC-11:00&quot;,timezone:&quot;Pacific/Midway&quot;,label:&quot;Pacific/Midway (SST)&quot;},{group:&quot;UTC-11:00&quot;,timezone:&quot;Pacific/Niue&quot;,label:&quot;Pacific/Niue (-11)&quot;},{group:&quot;UTC-11:00&quot;,timezone:&quot;Pacific/Pago_Pago&quot;,label:&quot;Pacific/Pago Pago (SST)&quot;}].reduce((t,e)=&gt;(t[e.timezone]=e.group.substring(3)||&quot;00:00&quot;,t),{});function Ett(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,5),Ha(&quot;click&quot;,function(){return Le(t),Za().locate()}),La(1,&quot;app-flag&quot;,6),Ra(2,&quot;span&quot;,7),xl(3),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(1),Oa(&quot;flag&quot;,t.step.place.countryCode),Sr(2),wl(t.step.place.name)}}function Mtt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,8),La(1,&quot;app-flag&quot;,6),Ra(2,&quot;span&quot;,7),xl(3),Fa(),Fa()),2&amp;t){const t=Za();Oa(&quot;disabled&quot;,!0),Sr(1),Oa(&quot;flag&quot;,t.step.place.countryCode),Sr(2),wl(t.step.place.name)}}function Ttt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;),xl(1,&quot;(Estim\xe9)&quot;),Fa())}function Itt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;,9),xl(1),lh(2,&quot;date&quot;),ra(3,Ttt,2,0,&quot;span&quot;,10),Fa()),2&amp;t){const t=Za();Sr(1),Cl(&quot; &quot;,uh(2,2,t.step.date.value,&quot;yyyy-MM-dd HH:mm z&quot;,t.step.date.timezoneOffset),&quot; &quot;),Sr(2),Oa(&quot;ngIf&quot;,&quot;Estimated&quot;===t.step.date.type)}}let Dtt=(()=&gt;{class t extends Eq{constructor(t){super(),this.mapService=t}ngOnInit(){this.step.date&amp;&amp;(this.step.date.timezoneOffset=ktt[this.step.place.timeZoneId])}locate(){const[t,e]=this.step.place.latLong.split(&quot;,&quot;).map(t=&gt;+t);this.mapService.pingLocation([e,t]),this.mapService.centerOnLonLat([e,t])}locateAndZoom(){const[t,e]=this.step.place.latLong.split(&quot;,&quot;).map(t=&gt;+t);this.mapService.locate([e,t])}}return t.\u0275fac=function(e){return new(e||t)(Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-shipment-step&quot;]],inputs:{step:&quot;step&quot;,label:&quot;label&quot;,labelTitle:&quot;labelTitle&quot;},features:[$o],decls:6,vars:5,consts:[[1,&quot;d-flex-center&quot;,&quot;px-2&quot;],[1,&quot;shipment-step__label&quot;,3,&quot;title&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;mx-2&quot;,&quot;title&quot;,&quot;Localiser le port&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;mx-2&quot;,&quot;title&quot;,&quot;Localisation non disponible&quot;,3,&quot;disabled&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;shipment-step__time&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Localiser le port&quot;,1,&quot;mx-2&quot;,3,&quot;click&quot;],[3,&quot;flag&quot;],[1,&quot;ml-2&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Localisation non disponible&quot;,1,&quot;mx-2&quot;,3,&quot;disabled&quot;],[1,&quot;shipment-step__time&quot;],[4,&quot;ngIf&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;span&quot;,1),xl(2),Fa(),ra(3,Ett,4,2,&quot;button&quot;,2),ra(4,Mtt,4,3,&quot;button&quot;,3),ra(5,Itt,4,6,&quot;span&quot;,4),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;title&quot;,e.labelTitle),Sr(1),Cl(&quot;&quot;,e.label,&quot;\xa0:&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.step.place.latLong),Sr(1),Oa(&quot;ngIf&quot;,!e.step.place.latLong),Sr(1),Oa(&quot;ngIf&quot;,e.step.date))},directives:[Nd,Ry,aQ],pipes:[ep],styles:[&quot;.mat-button{font-weight:normal;white-space:normal;padding:0 8px!important}  .mat-button[disabled]{cursor:not-allowed;color:inherit!important}.shipment-step__label[_ngcontent-%COMP%]{font-weight:600;cursor:help;min-width:42px}.shipment-step__time[_ngcontent-%COMP%]{color:#7c7c7c;font-size:.9em}&quot;],changeDetection:0}),t})();function Ott(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,1),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),Cl(&quot;Bill of lading : &quot;,t.voyage.billOfLadingNumber,&quot;&quot;)}}function Ptt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-shipment-step&quot;,11),2&amp;t&amp;&amp;Oa(&quot;step&quot;,Za().voyage.collection)}function Rtt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-shipment-step&quot;,12),2&amp;t&amp;&amp;Oa(&quot;step&quot;,Za().voyage.pol)}function Ftt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-shipment-step&quot;,13),2&amp;t&amp;&amp;Oa(&quot;step&quot;,Za().voyage.pod)}function Ltt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-shipment-step&quot;,14),2&amp;t&amp;&amp;Oa(&quot;step&quot;,Za().voyage.delivery)}function Btt(t,e){1&amp;t&amp;&amp;xl(0),2&amp;t&amp;&amp;Cl(&quot; \xa0- IMO: &quot;,Za().$implicit.imo,&quot; &quot;)}function ztt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;),Ra(1,&quot;button&quot;,15),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za().locateShip(e.name)}),xl(2),ra(3,Btt,1,1,&quot;ng-template&quot;,16),Fa(),Ra(4,&quot;button&quot;,17),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za().openShip(e.name)}),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;info&quot;),Fa(),Fa(),Fa()}if(2&amp;t){const t=e.$implicit;Sr(2),Cl(&quot; &quot;,t.name,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,t.imo)}}function Ntt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,18),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za().containerSearch.emit(e)}),xl(1),Fa()}if(2&amp;t){const t=e.$implicit;Sr(1),Cl(&quot; &quot;,t,&quot; &quot;)}}let Vtt=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.mapService=t,this.selectionService=e,this.workerService=i,this.containerSearch=new mh}ngOnInit(){this.voyage.containers.sort()}locate(t){const[e,i]=t.split(&quot;,&quot;).map(t=&gt;+t);this.mapService.pingLocation([i,e]),this.mapService.locate([i,e])}openShip(t){return jp(this,void 0,void 0,function*(){const e=yield this.findShipByName(t);this.selectionService.addToSelection(OH.Ship,e.mmsi)})}locateShip(t){return jp(this,void 0,void 0,function*(){const e=yield this.findShipByName(t);this.mapService.pingLocation([e.lon,e.lat]),this.mapService.locate([e.lon,e.lat])})}findShipByName(t){return jp(this,void 0,void 0,function*(){const e=yield this.workerService.ships.findShips(t);if(0===e.length)throw new Error(&quot;Navire inconnu (aucun r\xe9sultat pour ce nom)&quot;);const[i]=e;return i})}}return t.\u0275fac=function(e){return new(e||t)(Da(kj),Da(dW),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-shipment-voyage&quot;]],inputs:{voyage:&quot;voyage&quot;},outputs:{containerSearch:&quot;containerSearch&quot;},features:[$o],decls:17,vars:10,consts:[[1,&quot;shipment-voyage__metadata&quot;],[1,&quot;pa-2&quot;],[&quot;class&quot;,&quot;pa-2&quot;,4,&quot;ngIf&quot;],[1,&quot;shipment-voyage__label&quot;],[&quot;label&quot;,&quot;POR&quot;,&quot;labelTitle&quot;,&quot;Place Of Receipt&quot;,3,&quot;step&quot;,4,&quot;ngIf&quot;],[&quot;label&quot;,&quot;POL&quot;,&quot;labelTitle&quot;,&quot;Port Of Loading&quot;,3,&quot;step&quot;,4,&quot;ngIf&quot;],[&quot;label&quot;,&quot;POD&quot;,&quot;labelTitle&quot;,&quot;Port Of Discharge&quot;,3,&quot;step&quot;,4,&quot;ngIf&quot;],[&quot;label&quot;,&quot;DEL&quot;,&quot;labelTitle&quot;,&quot;Place Of Delivery&quot;,3,&quot;step&quot;,4,&quot;ngIf&quot;],[4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;shipment-voyage__containers&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;shipment-voyage__container&quot;,&quot;title&quot;,&quot;Rechercher ce conteneur&quot;,3,&quot;click&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;label&quot;,&quot;POR&quot;,&quot;labelTitle&quot;,&quot;Place Of Receipt&quot;,3,&quot;step&quot;],[&quot;label&quot;,&quot;POL&quot;,&quot;labelTitle&quot;,&quot;Port Of Loading&quot;,3,&quot;step&quot;],[&quot;label&quot;,&quot;POD&quot;,&quot;labelTitle&quot;,&quot;Port Of Discharge&quot;,3,&quot;step&quot;],[&quot;label&quot;,&quot;DEL&quot;,&quot;labelTitle&quot;,&quot;Place Of Delivery&quot;,3,&quot;step&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Localiser le navire&quot;,3,&quot;click&quot;],[3,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la fiche navire&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Rechercher ce conteneur&quot;,1,&quot;shipment-voyage__container&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),xl(2),Fa(),ra(3,Ott,2,1,&quot;div&quot;,2),Fa(),Ra(4,&quot;div&quot;,3),xl(5,&quot;Route&quot;),Fa(),ra(6,Ptt,1,1,&quot;app-shipment-step&quot;,4),ra(7,Rtt,1,1,&quot;app-shipment-step&quot;,5),ra(8,Ftt,1,1,&quot;app-shipment-step&quot;,6),ra(9,Ltt,1,1,&quot;app-shipment-step&quot;,7),Ra(10,&quot;div&quot;,3),xl(11,&quot;Navires&quot;),Fa(),ra(12,ztt,7,2,&quot;div&quot;,8),Ra(13,&quot;div&quot;,3),xl(14),Fa(),Ra(15,&quot;div&quot;,9),ra(16,Ntt,2,1,&quot;button&quot;,10),Fa()),2&amp;t&amp;&amp;(Sr(2),Cl(&quot;Transporteur : &quot;,e.voyage.transportParty,&quot;&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.voyage.billOfLadingNumber),Sr(3),Oa(&quot;ngIf&quot;,e.voyage.collection),Sr(1),Oa(&quot;ngIf&quot;,e.voyage.pol),Sr(1),Oa(&quot;ngIf&quot;,e.voyage.pod),Sr(1),Oa(&quot;ngIf&quot;,e.voyage.delivery),Sr(3),Oa(&quot;ngForOf&quot;,e.voyage.vessels),Sr(2),Sl(&quot;&quot;,e.voyage.containers.length,&quot; conteneur&quot;,e.voyage.containers.length&gt;1?&quot;s&quot;:&quot;&quot;,&quot;&quot;),Sr(2),Oa(&quot;ngForOf&quot;,e.voyage.containers))},directives:[Nd,Bd,Dtt,Ry,hE],styles:[&quot;.mat-button{font-weight:normal;white-space:normal}.shipment-voyage__metadata[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#c3c3c3}.shipment-voyage__label[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:gray;padding:8px;background-color:#f2f2f2}.shipment-voyage__containers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.shipment-voyage__container[_ngcontent-%COMP%]{flex:auto}&quot;],changeDetection:0}),t})();const $tt=[&quot;submitButton&quot;];function Utt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za().f.containerId.reset()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;close&quot;),Fa(),Fa()}}function jtt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),wl(t.f.containerId.errors.invalid)}}function Htt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za().f.billOfLading.reset()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;close&quot;),Fa(),Fa()}}function Gtt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,15),xl(1,&quot; Faites une recherche pour afficher les r\xe9sultats. &quot;),Fa())}function qtt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,15),xl(1,&quot; Aucun r\xe9sultat &quot;),Fa())}function Wtt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-shipment-voyage&quot;,19),Ha(&quot;containerSearch&quot;,function(e){return Le(t),Za(3).searchContainer(e)}),Fa()}2&amp;t&amp;&amp;Oa(&quot;voyage&quot;,e.$implicit)}function Ytt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,17),ra(1,Wtt,1,1,&quot;app-shipment-voyage&quot;,18),Fa()),2&amp;t){const t=Za(2);Sr(1),Oa(&quot;ngForOf&quot;,t.searchResults)}}function Ztt(t,e){if(1&amp;t&amp;&amp;(ra(0,qtt,2,0,&quot;div&quot;,12),ra(1,Ytt,2,1,&quot;div&quot;,16)),2&amp;t){const t=Za();Oa(&quot;ngIf&quot;,0===t.searchResults.length),Sr(1),Oa(&quot;ngIf&quot;,t.searchResults.length&gt;0)}}function Ktt(t){return!t.value||t.dirty&amp;&amp;(0,Stt.Z)(t.value)?null:{invalid:&quot;Le num\xe9ro doit \xeatre au format ISO 6346 (ex: TEXU3070079).&quot;}}let Xtt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.formBuilder=t,this.router=e,this.uiService=i,this.titleService=n,this.mapService=s,this.workerService=r,this.searchResults=null,this.search=()=&gt;jp(this,void 0,void 0,function*(){this.searchResults=null,this.searchForm.valid&amp;&amp;(this.searchResults=this.searchForm.controls.containerId.value?yield this.workerService.containers.findContainerTraceByContainerId(this.searchForm.controls.containerId.value):yield this.workerService.containers.findContainerTraceByBillOfLading(this.searchForm.controls.billOfLading.value))})}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Recherche de conteneur - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.searchForm=this.formBuilder.group({containerId:[&quot;&quot;,[Ktt]],billOfLading:[&quot;&quot;]},{validator:t=&gt;t.controls.containerId.value||t.controls.billOfLading.value?null:{needOneField:!0}}),this.searchForm.controls.containerId.valueChanges.subscribe(t=&gt;{t?this.f.billOfLading.disable({emitEvent:!1}):this.f.billOfLading.enable({emitEvent:!1})}),this.searchForm.controls.billOfLading.valueChanges.subscribe(t=&gt;{t?this.f.containerId.disable({emitEvent:!1}):this.f.containerId.enable({emitEvent:!1})}),window.__anaisSettings.LESTR_CONTAINERS_ENABLE||(this.uiService.error(&quot;La recherche de conteneurs est suspendue car notre exp\xe9rimentation avec Semsoft est arriv\xe9e \xe0 terme.&quot;),yield this.router.navigateByUrl(&quot;/&quot;))})}get f(){return this.searchForm.controls}searchContainer(t){return jp(this,void 0,void 0,function*(){this.searchForm.reset(),this.searchForm.controls.containerId.markAsDirty(),this.searchForm.controls.containerId.setValue(t),this.searchResults=null,setTimeout(()=&gt;{this.submitButtonRef.nativeElement.click()})})}}return t.\u0275fac=function(e){return new(e||t)(Da(Rw),Da(dF),Da(fH),Da(Up),Da(kj),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-container-search-panel&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh($tt,7,ec),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.submitButtonRef=t.first)}},features:[$o],decls:24,vars:8,consts:[[&quot;joyrideStep&quot;,&quot;container-search-panel&quot;,&quot;title&quot;,&quot;Recherche de conteneurs&quot;,&quot;text&quot;,&quot;C&#39;est ici que vous pouvez rechercher des conteneurs.&quot;,1,&quot;panel&quot;,&quot;panel--medium&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;],[1,&quot;pa-3&quot;,&quot;d-flex-column&quot;,3,&quot;formGroup&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;containerId&quot;,&quot;minlength&quot;,&quot;11&quot;,&quot;maxlength&quot;,&quot;11&quot;],[&quot;type&quot;,&quot;button&quot;,&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;aria-label&quot;,&quot;R\xe9initialiser le champ&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[4,&quot;ngIf&quot;],[1,&quot;u-center&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;billOfLading&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;type&quot;,&quot;submit&quot;,&quot;title&quot;,&quot;Lancer la rechercher&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;submitButton&quot;,&quot;&quot;],[1,&quot;mt-3&quot;],[&quot;class&quot;,&quot;pa-3&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;type&quot;,&quot;button&quot;,&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;aria-label&quot;,&quot;R\xe9initialiser le champ&quot;,3,&quot;click&quot;],[1,&quot;pa-3&quot;],[&quot;class&quot;,&quot;d-flex-column mat-body scrollable&quot;,4,&quot;ngIf&quot;],[1,&quot;d-flex-column&quot;,&quot;mat-body&quot;,&quot;scrollable&quot;],[3,&quot;voyage&quot;,&quot;containerSearch&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;voyage&quot;,&quot;containerSearch&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h2&quot;,2),xl(3,&quot;Recherche de conteneurs&quot;),Fa(),Fa(),Ra(4,&quot;form&quot;,3),Ra(5,&quot;mat-form-field&quot;),Ra(6,&quot;mat-label&quot;),xl(7,&quot;Num\xe9ro de conteneur&quot;),Fa(),La(8,&quot;input&quot;,4),ra(9,Utt,3,0,&quot;button&quot;,5),ra(10,jtt,2,1,&quot;mat-error&quot;,6),Fa(),Ra(11,&quot;div&quot;,7),xl(12,&quot;Ou&quot;),Fa(),Ra(13,&quot;mat-form-field&quot;),Ra(14,&quot;mat-label&quot;),xl(15,&quot;Bill of lading&quot;),Fa(),La(16,&quot;input&quot;,8),ra(17,Htt,3,0,&quot;button&quot;,5),Fa(),Ra(18,&quot;button&quot;,9,10),xl(20,&quot;Rechercher&quot;),Fa(),La(21,&quot;mat-divider&quot;,11),Fa(),ra(22,Gtt,2,0,&quot;div&quot;,12),ra(23,Ztt,2,2,&quot;ng-template&quot;,13),Fa()),2&amp;t&amp;&amp;(Sr(4),Oa(&quot;formGroup&quot;,e.searchForm),Sr(5),Oa(&quot;ngIf&quot;,e.f.containerId.value),Sr(1),Oa(&quot;ngIf&quot;,null==e.f.containerId.errors?null:e.f.containerId.errors.invalid),Sr(7),Oa(&quot;ngIf&quot;,e.f.billOfLading.value),Sr(1),Oa(&quot;app-async-action&quot;,e.search)(&quot;disabled&quot;,!e.searchForm.valid),Sr(4),Oa(&quot;ngIf&quot;,null===e.searchResults),Sr(1),Oa(&quot;ngIf&quot;,null!==e.searchResults))},directives:[gL,nw,Cx,uw,gC,oC,kC,Hy,wx,vw,Mw,Iw,Nd,Ry,Fq,Pq,uC,hE,tC,Bd,Vtt],styles:[&quot;&quot;]}),t})();const Qtt=/@(.+),(.+),(.+)z(?:,(.+Z))?/;let Jtt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.location=t,this.titleService=e,this.historyService=i,this.mapService=n,this.mapConfigService=s,this.routeService=r}ngOnInit(){if(!this.mapService.hasBooted$.value){const t=this.location.path().match(Qtt);if(t){const e=function(t,e){if(0!==e){const i=e+180;t[0]&lt;e-180&amp;&amp;(t[0]+=360),t[0]&gt;i&amp;&amp;(t[0]-=360)}return t}([+t[2],+t[1]],this.mapConfigService.longitudeCenter$.value);this.mapService.centerOnLonLat(e,+t[3]);const i=t[4];i&amp;&amp;this.historyService.setTimestamp(Math.ceil(new Date(i).getTime()/1e3))}else this.mapService.resetToDefaultView()}this.subscriptions.push(this.routeService.viewURL$.pipe(gf(t=&gt;!!t)).subscribe(t=&gt;{this.location.replaceState(`/${t}`),this.titleService.setTitle(`${t} - ANAIS`)}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Ku),Da(Up),Da(Dj),Da(kj),Da(HU),Da(Oj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-empty-panel&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();function tet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),kl(&quot; &quot;,t.extractedMMSIs.length,&quot; MMSI d\xe9tect\xe9&quot;,t.extractedMMSIs.length&gt;1?&quot;s&quot;:&quot;&quot;,&quot; : &quot;,t.extractedMMSIs.length&gt;0?t.extractedMMSIs.join(&quot;, &quot;):&quot;-&quot;,&quot; &quot;)}}function eet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),xl(1),Fa()),2&amp;t){const t=Za();Sr(1),kl(&quot; &quot;,t.extractedIMOs.length,&quot; IMO d\xe9tect\xe9&quot;,t.extractedIMOs.length&gt;1?&quot;s&quot;:&quot;&quot;,&quot; : &quot;,t.extractedIMOs.length&gt;0?t.extractedIMOs.join(&quot;, &quot;):&quot;-&quot;,&quot; &quot;)}}let iet=(()=&gt;{class t{constructor(t,e){this.dialogRef=t,this.workerService=e,this.textFormControl=new Wx(&quot;&quot;),this.extractedMMSIs=null,this.extractedIMOs=null,this.save=()=&gt;jp(this,void 0,void 0,function*(){const t=(yield Promise.all([(()=&gt;jp(this,void 0,void 0,function*(){return Promise.all(this.extractedMMSIs.map(t=&gt;jp(this,void 0,void 0,function*(){try{return yield this.workerService.ships.getShip(t)}catch(e){if(e.name!==oz.NotFound)throw e}})))}))(),(()=&gt;jp(this,void 0,void 0,function*(){return(yield Promise.all(this.extractedIMOs.map(t=&gt;jp(this,void 0,void 0,function*(){try{return yield this.workerService.ships.getShipsByIMO(t)}catch(e){if(e.name!==oz.NotFound)throw e}})))).flat()}))()])).flat();this.dialogRef.close(t)})}ngOnInit(){this.textFormControl.valueChanges.subscribe(t=&gt;{this.extractedMMSIs=function(t){return VK($K,t).map(([t])=&gt;t)}(t),this.extractedIMOs=function(t){return VK(UK,t).map(([t])=&gt;+t)}(t)})}}return t.\u0275fac=function(e){return new(e||t)(Da(YS),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-fleet-ships-bulk-import-dialog&quot;]],decls:19,vars:6,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;],[&quot;mat-dialog-content&quot;,&quot;&quot;,2,&quot;min-width&quot;,&quot;600px&quot;],[1,&quot;d-flex-column-center&quot;],[&quot;appearance&quot;,&quot;outline&quot;,1,&quot;pa-1&quot;,&quot;d-block&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;name&quot;,&quot;text&quot;,&quot;cdkTextareaAutosize&quot;,&quot;&quot;,&quot;cdkAutosizeMinRows&quot;,&quot;4&quot;,&quot;cdkAutosizeMaxRows&quot;,&quot;15&quot;,3,&quot;formControl&quot;],[4,&quot;ngIf&quot;],[&quot;mat-dialog-actions&quot;,&quot;&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,3,&quot;disabled&quot;,&quot;app-async-action&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;mat-dialog-close&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot;Import en masse&quot;),Fa(),Ra(2,&quot;div&quot;,1),Ra(3,&quot;p&quot;),xl(4,&quot;Utilisez la zone de texte ci-apr\xe8s pour copiez-coller une liste de MMSI ou IMO (texte, CSV). Les MMSI et IMO seront extraits automatiquement avec les formats de 9 et 7 chiffres respectivement.&quot;),Fa(),Ra(5,&quot;div&quot;,2),Ra(6,&quot;mat-form-field&quot;,3),Ra(7,&quot;mat-label&quot;),xl(8,&quot;Liste de MMSI ou IMO (CSV, etc)&quot;),Fa(),Ra(9,&quot;textarea&quot;,4),xl(10,&quot;      &quot;),Fa(),Fa(),ra(11,tet,2,3,&quot;div&quot;,5),ra(12,eet,2,3,&quot;div&quot;,5),Fa(),Fa(),Ra(13,&quot;div&quot;,6),La(14,&quot;div&quot;,7),Ra(15,&quot;button&quot;,8),xl(16,&quot; Enregistrer &quot;),Fa(),Ra(17,&quot;button&quot;,9),xl(18,&quot; Annuler &quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;formControl&quot;,e.textFormControl),Sr(2),Oa(&quot;ngIf&quot;,e.extractedMMSIs),Sr(1),Oa(&quot;ngIf&quot;,e.extractedIMOs),Sr(3),Oa(&quot;disabled&quot;,!(e.extractedMMSIs&amp;&amp;0!==e.extractedMMSIs.length||e.extractedIMOs&amp;&amp;0!==e.extractedIMOs.length))(&quot;app-async-action&quot;,e.save),Sr(2),Oa(&quot;mat-dialog-close&quot;,null))},directives:[sk,rk,gC,oC,kC,bC,Hy,wx,cw,Nd,ok,Ry,Fq,nk],styles:[&quot;&quot;]}),t})();const net={0:&quot;Under way using engine&quot;,1:&quot;At anchor&quot;,2:&quot;Not under command&quot;,3:&quot;Restricted manoeuverability&quot;,4:&quot;Constrained by her draught&quot;,5:&quot;Moored&quot;,6:&quot;Aground&quot;,7:&quot;Engaged in Fishing&quot;,8:&quot;Under way sailing&quot;,9:&quot;Reserved for future amendment of Navigational Status for HSC&quot;,10:&quot;Reserved for future amendment of Navigational Status for WIG&quot;,11:&quot;Reserved for future use&quot;,12:&quot;Reserved for future use&quot;,13:&quot;Reserved for future use&quot;,14:&quot;AIS-SART is active&quot;,15:&quot;Not defined (default)&quot;},set=Object.values(net).filter((t,e)=&gt;e&lt;9||15===e).map((t,e)=&gt;({key:e,label:t}));function ret(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,9),Ha(&quot;click&quot;,function(){Le(t);const e=Za();return e.deleteItem.emit(e.ship)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;delete&quot;),Fa(),Fa()}}const oet=function(t){return[&quot;./ships/&quot;,t]};function aet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,10),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;info&quot;),Fa(),Fa()),2&amp;t){const t=Za();Oa(&quot;routerLink&quot;,eh(1,oet,t.ship.mmsi))}}let cet=(()=&gt;{class t{constructor(t){this.mapService=t,this.editable=!1,this.deleteItem=new mh,this.navigationStatusByKey=net,this.vesselTypeLabelsByType=nU,this.hasPosition=!0}ngOnChanges(t){var e,i;t.ship&amp;&amp;(this.hasPosition=pU(null===(e=t.ship.currentValue)||void 0===e?void 0:e.lon)&amp;&amp;pU(null===(i=t.ship.currentValue)||void 0===i?void 0:i.lat))}locateShip(){this.mapService.centerOnLonLat([this.ship.lon,this.ship.lat])}locateAndZoomToShip(){this.mapService.locate([this.ship.lon,this.ship.lat])}}return t.\u0275fac=function(e){return new(e||t)(Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-fleet-ship-item&quot;]],inputs:{ship:&quot;ship&quot;,editable:&quot;editable&quot;},outputs:{deleteItem:&quot;deleteItem&quot;},features:[he],decls:14,vars:8,consts:[[1,&quot;fleet-ship-item&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;fleet-ship-item__link&quot;,3,&quot;title&quot;,&quot;disabled&quot;,&quot;click&quot;,&quot;dblclick&quot;],[1,&quot;fleet-ship-item__flag&quot;,3,&quot;mmsi&quot;],[1,&quot;fleet-ship-item__title&quot;],[1,&quot;fleet-ship-item__name&quot;],[1,&quot;fleet-ship-item__type&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;routerLink&quot;,4,&quot;ngIf&quot;],[1,&quot;fleet-ship-item&quot;,&quot;ml-2&quot;,&quot;mb-2&quot;,&quot;mat-small&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;routerLink&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;button&quot;,1),Ha(&quot;click&quot;,function(){return e.locateShip()})(&quot;dblclick&quot;,function(){return e.locateAndZoomToShip()}),La(2,&quot;app-flag&quot;,2),Ra(3,&quot;div&quot;,3),Ra(4,&quot;strong&quot;,4),xl(5),Fa(),Ra(6,&quot;small&quot;,5),xl(7),Fa(),Fa(),Fa(),ra(8,ret,3,0,&quot;button&quot;,6),ra(9,aet,3,3,&quot;button&quot;,7),Fa(),Ra(10,&quot;div&quot;,8),xl(11,&quot; Statut :\xa0&quot;),Ra(12,&quot;strong&quot;),xl(13),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;title&quot;,e.hasPosition?&quot;Localiser le navire&quot;:&quot;Ce navire n&#39;a pas de position&quot;)(&quot;disabled&quot;,!e.hasPosition),Sr(1),Oa(&quot;mmsi&quot;,e.ship.mmsi),Sr(3),wl(e.ship.name||&quot;?&quot;),Sr(2),wl(e.ship.cargo?e.vesselTypeLabelsByType[e.ship.cargo]:&quot;?&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.editable),Sr(1),Oa(&quot;ngIf&quot;,!e.editable),Sr(4),wl(e.navigationStatusByKey[e.ship.status]||&quot;?&quot;))},directives:[Ry,aQ,Nd,hE,fF],styles:[&quot;.fleet-ship-item[_ngcontent-%COMP%]{display:flex}.fleet-ship-item__button-content[_ngcontent-%COMP%]{display:flex}.fleet-ship-item__link[_ngcontent-%COMP%]{flex:1;padding:0;line-height:inherit;text-align:inherit;font-size:inherit;font-weight:inherit}.fleet-ship-item__link[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.fleet-ship-item__flag[_ngcontent-%COMP%]{margin:5px}.fleet-ship-item__title[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0;flex:1}.fleet-ship-item__name[_ngcontent-%COMP%]{font-size:1.2em}.fleet-ship-item__type[_ngcontent-%COMP%]{font-size:.9em;color:#555}&quot;],changeDetection:0}),t})();function het(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,5)}function uet(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;,21),xl(1,&quot; Ce champ ne peut \xeatre vide. &quot;),Fa())}function det(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-form-field&quot;,15),Ra(1,&quot;input&quot;,16,17),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).fleet.name=e}),Fa(),ra(3,uet,2,0,&quot;mat-error&quot;,18),Fa(),Ra(4,&quot;button&quot;,19),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;check&quot;),Fa(),Fa(),Ra(7,&quot;button&quot;,20),Ra(8,&quot;mat-icon&quot;),xl(9,&quot;clear&quot;),Fa(),Fa()}if(2&amp;t){const t=oa(2);Za();const e=oa(1),i=Za();Sr(1),Oa(&quot;ngModel&quot;,i.fleet.name),Sr(2),Oa(&quot;ngIf&quot;,null==t.errors?null:t.errors.required),Sr(1),Oa(&quot;app-async-action&quot;,i.saveFleet)(&quot;disabled&quot;,!e.form.valid),Sr(3),Oa(&quot;routerLink&quot;,i.newFleet?&quot;/fleets&quot;:&quot;/fleets/&quot;+i.fleet.id)}}function pet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,23),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;create&quot;),Fa(),Fa(),Ra(3,&quot;button&quot;,24),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;more_vert&quot;),Fa(),Fa(),Ra(6,&quot;mat-menu&quot;,null,25),Ra(8,&quot;button&quot;,26),Ha(&quot;click&quot;,function(){return Le(t),Za(3).openExportDataDialog()}),Ra(9,&quot;mat-icon&quot;),xl(10,&quot;file_download&quot;),Fa(),Ra(11,&quot;span&quot;),xl(12,&quot;Exporter la flotte en CSV&quot;),Fa(),Fa(),Ra(13,&quot;button&quot;,27),Ha(&quot;click&quot;,function(){return Le(t),Za(3).deleteFleet()}),Ra(14,&quot;mat-icon&quot;,28),xl(15,&quot;delete&quot;),Fa(),Ra(16,&quot;span&quot;,28),xl(17,&quot;Supprimer&quot;),Fa(),Fa(),Fa()}if(2&amp;t){const t=oa(7),e=Za(3);Oa(&quot;routerLink&quot;,&quot;/fleets/&quot;+e.fleet.id+&quot;/edit&quot;),Sr(3),Oa(&quot;matMenuTriggerFor&quot;,t),Sr(5),Oa(&quot;disabled&quot;,!e.fleet||0===e.fleet.ships.length)}}function fet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;h2&quot;,22),xl(1),Fa(),ra(2,pet,18,3,&quot;ng-template&quot;,4)),2&amp;t){const t=Za(2);Sr(1),Cl(&quot; &quot;,t.fleet.name,&quot; &quot;),Sr(1),Oa(&quot;ngIf&quot;,t.canEdit&amp;&amp;!t.offlineService.isOffline$.value)}}function met(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,33),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;stacked_line_chart&quot;),Fa(),Fa()),2&amp;t){const t=Za(3);cl(&quot;button-active&quot;,t.fleetsService.displayFleetTrail$.value),Oa(&quot;title&quot;,t.fleetsService.displayFleetTrail$.value?&quot;Masquer les traces des navires de la flotte&quot;:&quot;Afficher les traces des navires de la flotte (le rafraichissement n&#39;est pas automatique)&quot;)(&quot;app-async-action&quot;,t.fleetsService.toggleDisplayFleetTrails)}}function get(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,29),Ra(1,&quot;button&quot;,30),Ha(&quot;click&quot;,function(){return Le(t),Za(2).fitOnFleet()}),Ra(2,&quot;mat-icon&quot;),xl(3,&quot;center_focus_strong&quot;),Fa(),Fa(),ra(4,met,3,4,&quot;button&quot;,31),Ra(5,&quot;button&quot;,32),Ha(&quot;click&quot;,function(){return Le(t),Za(2).mapConfigService.toggleOtherShips()}),Ra(6,&quot;mat-icon&quot;),xl(7,&quot;directions_boat&quot;),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(4),Oa(&quot;ngIf&quot;,!t.offlineService.isOffline$.value),Sr(1),cl(&quot;button-active&quot;,t.mapConfigService.showOtherShips$.value),tl(&quot;title&quot;,&quot;&quot;,t.mapConfigService.showOtherShips$.value?&quot;Masquer&quot;:&quot;Afficher&quot;,&quot; les autres navires&quot;)}}function Aet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,38),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.id),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function vet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,34),Ra(1,&quot;mat-form-field&quot;,35),Ra(2,&quot;mat-label&quot;),xl(3,&quot;Groupe&quot;),Fa(),Ra(4,&quot;mat-select&quot;,36),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).fleet.group_id=e}),ra(5,Aet,2,2,&quot;mat-option&quot;,37),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(4),Oa(&quot;ngModel&quot;,t.fleet.group_id),Sr(1),Oa(&quot;ngForOf&quot;,t.updatableGroups)}}function _et(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,39),xl(1,&quot;Aucun navire n&#39;a \xe9t\xe9 configur\xe9&quot;),Fa())}function bet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-fleet-ship-item&quot;,40),Ha(&quot;deleteItem&quot;,function(e){return Le(t),Za(2).deleteShip(e)}),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(2);Oa(&quot;ship&quot;,t)(&quot;editable&quot;,i.editMode)}}function yet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,39),Ra(1,&quot;h3&quot;),xl(2,&quot;Ajouter des navires&quot;),Fa(),Ra(3,&quot;button&quot;,41),Ha(&quot;click&quot;,function(){return Le(t),Za(2).openBulkImportDialog()}),Ra(4,&quot;mat-icon&quot;,42),xl(5,&quot;post_add&quot;),Fa(),Ra(6,&quot;span&quot;),xl(7,&quot;Import en masse&quot;),Fa(),Fa(),Ra(8,&quot;app-ship-identifier-input&quot;,43),Ha(&quot;selectItem&quot;,function(e){return Le(t),Za(2).addShipToFleet(e)}),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(8),Oa(&quot;existingItems&quot;,t.fleetShipsIds)}}function xet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,47),Ra(1,&quot;div&quot;,48),Ra(2,&quot;mat-icon&quot;,49),xl(3,&quot;warning&quot;),Fa(),xl(4),Fa(),Ra(5,&quot;div&quot;),xl(6),Fa(),Fa()),2&amp;t){const t=e.alert;Sr(4),Cl(&quot; &quot;,t.rule_name,&quot; &quot;),Sr(2),wl(t.ship_name)}}const wet=function(t){return[&quot;/ships/&quot;,t]},Cet=function(t){return[&quot;/alerts/rules/&quot;,t]};function ket(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,50),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;info&quot;),Fa(),xl(3,&quot; Voir d\xe9tail Navire &quot;),Fa(),Ra(4,&quot;button&quot;,50),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;info&quot;),Fa(),xl(7,&quot; Voir la r\xe8gle &quot;),Fa()),2&amp;t){const t=e.alert;Oa(&quot;routerLink&quot;,eh(2,wet,t.mmsi)),Sr(4),Oa(&quot;routerLink&quot;,eh(4,Cet,t.rule_id))}}function Eet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;h3&quot;,12),xl(1,&quot;Alertes&quot;),Fa(),La(2,&quot;app-alerts-list&quot;,44),ra(3,xet,7,2,&quot;ng-template&quot;,null,45,Rh),ra(5,ket,8,6,&quot;ng-template&quot;,null,46,Rh)),2&amp;t){const t=oa(4),e=oa(6),i=Za(2);Sr(2),Oa(&quot;alerts$&quot;,i.alerts$)(&quot;alertTitleRef&quot;,t)(&quot;alertMenuItemsRef&quot;,e)}}function Met(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;ng-form&quot;,6,7),Ra(2,&quot;div&quot;,8),ra(3,det,10,5,&quot;ng-template&quot;,4),ra(4,fet,3,2,&quot;ng-template&quot;,4),Fa(),La(5,&quot;mat-divider&quot;),ra(6,get,8,4,&quot;div&quot;,9),ra(7,vet,6,2,&quot;div&quot;,10),Ra(8,&quot;div&quot;,11),Ra(9,&quot;h3&quot;,12),xl(10,&quot;Navires&quot;),Fa(),ra(11,_et,2,0,&quot;p&quot;,13),ra(12,bet,1,2,&quot;app-fleet-ship-item&quot;,14),La(13,&quot;mat-divider&quot;),ra(14,yet,9,1,&quot;div&quot;,13),ra(15,Eet,7,3,&quot;ng-template&quot;,4),Fa(),Fa()),2&amp;t){const t=Za();Sr(3),Oa(&quot;ngIf&quot;,t.editMode),Sr(1),Oa(&quot;ngIf&quot;,!t.editMode),Sr(2),Oa(&quot;ngIf&quot;,!t.editMode),Sr(1),Oa(&quot;ngIf&quot;,t.editMode&amp;&amp;t.newFleet&amp;&amp;t.updatableGroups.length&gt;1),Sr(4),Oa(&quot;ngIf&quot;,0===t.fleet.ships.length),Sr(1),Oa(&quot;ngForOf&quot;,t.fleet.ships),Sr(2),Oa(&quot;ngIf&quot;,t.editMode),Sr(1),Oa(&quot;ngIf&quot;,!t.editMode)}}let Tet=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h,u,p,f){super(),this.activatedRoute=t,this.router=e,this.dialog=i,this.titleService=n,this.configService=s,this.exportService=r,this.fleetsService=o,this.groupsService=a,this.interactionsService=l,this.mapService=c,this.mapConfigService=h,this.offlineService=u,this.timeRangeService=p,this.uiService=f,this.timeRangeSubscription=new d,this.componentDestroyed=!1,this.fleet$=new Qp(null),this.alerts$=new Qp([]),this.editMode=!1,this.newFleet=!1,this.canEdit=!1,this.fleetShipsIds=[],this.updatableGroups=[],this.saveFleet=()=&gt;jp(this,void 0,void 0,function*(){if(this.newFleet){const t=yield this.fleetsService.createFleet(this.fleet);yield this.router.navigateByUrl(`/fleets/${t}`)}else yield this.fleetsService.updateFleet(this.fleet),yield this.router.navigateByUrl(`/fleets/${this.fleet.id}`)})}ngOnInit(){this.subscriptions.push(this.activatedRoute.data.subscribe(t=&gt;{this.editMode=!!t.edit,this.newFleet=!!t.new})),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(QT([this.activatedRoute.paramMap,this.activatedRoute.queryParams]).subscribe(([t,e])=&gt;jp(this,void 0,void 0,function*(){this.fleetsService.resetDisplayFleetTrails(),this.newFleet?(this.fleet=function(t){return{name:&quot;&quot;,ships:[],group_id:null!=t?t:&quot;&quot;}}(e.groupId),this.titleService.setTitle(&quot;Nouvelle flotte - ANAIS&quot;)):(this.fleetId=t.get(&quot;fleetId&quot;),yield this.fetchFleet())})),this.groupsService.updatableGroups$.subscribe(t=&gt;{this.updatableGroups=t}),QT([this.fleet$.pipe(Sf(1)),this.groupsService.updatableGroups$]).subscribe(([t,e])=&gt;{this.canEdit=null===t.group_id||e.some(e=&gt;e.id===t.group_id)}))}ngOnDestroy(){super.ngOnDestroy(),this.componentDestroyed=!0,this.fleetsService.deselectFleet(),this.timeRangeSubscription.unsubscribe(),this.fleetsService.resetDisplayFleetTrails()}refreshFleetShipsIds(){this.fleetShipsIds=this.fleet.ships.map(t=&gt;t.mmsi)}fetchFleet(){return jp(this,void 0,void 0,function*(){try{this.timeRangeSubscription.unsubscribe();const{fleet:t,alerts:e}=yield this.fleetsService.selectFleet(this.fleetId);if(t.group_id||(t.group_id=&quot;&quot;),this.componentDestroyed)return;this.fleet=t,this.fleet$.next(t),this.refreshFleetShipsIds(),this.alerts$.next(e),this.titleService.setTitle(`Flotte ${this.fleet.name} - ANAIS`),this.offlineService.isOffline$.value||(this.timeRangeSubscription=this.timeRangeService.timeRange$.pipe(Sf(1)).subscribe(()=&gt;jp(this,void 0,void 0,function*(){this.fleet&amp;&amp;!this.editMode&amp;&amp;(yield this.fetchFleet())})))}catch(t){throw t.notfound?(this.router.navigateByUrl(&quot;/fleets&quot;).catch(()=&gt;{}),new Error(`La flotte &lt;${this.fleetId}&gt; n&#39;existe pas.`)):t}})}deleteFleet(){this.uiService.confirm({title:&quot;Suppression&quot;,message:&quot;Une fois supprim\xe9e, cette flotte ne sera plus accessible. Confirmez-vous la suppression de cette flotte ?&quot;,action:t=&gt;jp(this,void 0,void 0,function*(){t&amp;&amp;(yield this.fleetsService.deleteFleet(this.fleet.id),yield this.router.navigateByUrl(&quot;/fleets&quot;))})})}openExportDataDialog(){this.exportService.openExportDataDialog({mmsis:this.fleet.ships.map(t=&gt;t.mmsi),label:`des navires de la flotte ${this.fleet.name}`})}addShipToFleet(t){t&amp;&amp;!this.fleet.ships.some(e=&gt;e.mmsi===t.mmsi)&amp;&amp;(this.fleet.ships.push(t),this.refreshFleetShipsIds())}deleteShip(t){this.fleet.ships=this.fleet.ships.filter(e=&gt;e!==t),this.refreshFleetShipsIds()}fitOnFleet(){if(this.fleet.ships.length&gt;0){const{lon:t,lat:e}=this.fleet.ships[0],i=SU.New(t,e,t,e);this.fleet.ships.filter(t=&gt;pU(t.lon)&amp;&amp;pU(t.lat)).forEach(t=&gt;{i.addPoint(t.lon,t.lat)}),this.mapService.fitOn(i.toExtent())}}openBulkImportDialog(){this.dialog.open(iet,{autoFocus:!1,closeOnNavigation:!0}).afterClosed().subscribe(t=&gt;{t instanceof Array&amp;&amp;t.forEach(t=&gt;{this.addShipToFleet(t)})})}}return t.\u0275fac=function(e){return new(e||t)(Da(HP),Da(dF),Da(ek),Da(Up),Da(jU),Da(aW),Da(yW),Da(CW),Da(gW),Da(kj),Da(HU),Da(hW),Da(Oq),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-fleet-panel&quot;]],features:[$o],decls:9,vars:2,consts:[[1,&quot;panel&quot;,&quot;fleet-panel&quot;,&quot;u-flex&quot;],[1,&quot;d-flex&quot;,2,&quot;background-color&quot;,&quot;#fff&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Revenir \xe0 la liste&quot;,&quot;routerLink&quot;,&quot;/fleets&quot;,1,&quot;back-button&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[&quot;name&quot;,&quot;form&quot;,1,&quot;d-flex-column&quot;,&quot;unscrollable&quot;],[&quot;form&quot;,&quot;ngForm&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[&quot;class&quot;,&quot;d-flex&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;d-flex-baseline&quot;,4,&quot;ngIf&quot;],[1,&quot;scrollable&quot;],[1,&quot;panel__subtitle&quot;],[&quot;class&quot;,&quot;panel__content&quot;,4,&quot;ngIf&quot;],[3,&quot;ship&quot;,&quot;editable&quot;,&quot;deleteItem&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;fleet-panel__name-input&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;name&quot;,&quot;name&quot;,&quot;placeholder&quot;,&quot;Nom de la flotte&quot;,&quot;required&quot;,&quot;&quot;,&quot;maxlength&quot;,&quot;64&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;name&quot;,&quot;ngModel&quot;],[&quot;class&quot;,&quot;input-error&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Enregistrer les changements&quot;,&quot;data-test&quot;,&quot;save-fleet&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler l&#39;\xe9dition&quot;,3,&quot;routerLink&quot;],[1,&quot;input-error&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Modifier&quot;,3,&quot;routerLink&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Autres actions&quot;,3,&quot;matMenuTriggerFor&quot;],[&quot;menu&quot;,&quot;matMenu&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter les donn\xe9es des navires de la flotte au format CSV&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,&quot;title&quot;,&quot;Supprimer la flotte&quot;,3,&quot;click&quot;],[&quot;color&quot;,&quot;warn&quot;],[1,&quot;d-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Centrer sur la flotte&quot;,1,&quot;d-block&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;d-block&quot;,3,&quot;title&quot;,&quot;button-active&quot;,&quot;app-async-action&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;d-block&quot;,3,&quot;title&quot;,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;d-block&quot;,3,&quot;title&quot;,&quot;app-async-action&quot;],[1,&quot;d-flex-baseline&quot;],[1,&quot;pa-2&quot;,&quot;u-flex&quot;],[&quot;name&quot;,&quot;group_id&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;value&quot;],[1,&quot;panel__content&quot;],[3,&quot;ship&quot;,&quot;editable&quot;,&quot;deleteItem&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la fen\xeatre d&#39;import en masse&quot;,1,&quot;d-block&quot;,3,&quot;click&quot;],[1,&quot;mr-1&quot;],[1,&quot;pa-1&quot;,3,&quot;existingItems&quot;,&quot;selectItem&quot;],[3,&quot;alerts$&quot;,&quot;alertTitleRef&quot;,&quot;alertMenuItemsRef&quot;],[&quot;alertTitleRef&quot;,&quot;&quot;],[&quot;alertMenuItemsRef&quot;,&quot;&quot;],[1,&quot;fleet-panel__alert-item&quot;],[1,&quot;d-flex-center&quot;],[1,&quot;rule-name-icon&quot;],[&quot;mat-menu-item&quot;,&quot;&quot;,3,&quot;routerLink&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;a&quot;,2),Ra(3,&quot;mat-icon&quot;),xl(4,&quot;arrow_back_ios&quot;),Fa(),xl(5,&quot; Flottes &quot;),Fa(),Fa(),ra(6,het,1,0,&quot;mat-spinner&quot;,3),ra(7,Met,16,8,&quot;ng-template&quot;,4),Fa(),La(8,&quot;router-outlet&quot;)),2&amp;t&amp;&amp;(Sr(6),Oa(&quot;ngIf&quot;,!e.fleet),Sr(1),Oa(&quot;ngIf&quot;,e.fleet))},directives:[Fy,mF,hE,Nd,vF,TQ,Qx,Pq,Bd,gC,kC,Hy,kw,Iw,wx,iw,Ry,Fq,fF,tC,dJ,aJ,nJ,oC,qT,Sy,cet,K1,z2],styles:[&quot;[_nghost-%COMP%]{display:flex;height:100%}.back-button[_ngcontent-%COMP%]{line-height:36px}.fleet-panel[_ngcontent-%COMP%]{min-width:270px}.fleet-panel__name-input[_ngcontent-%COMP%]{margin:.5em;flex:1;font-size:20px}.rule-name-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px;margin-right:.3em}  router-outlet+app-ship-details-panel{border-left:1px solid rgba(0,0,0,.12)}&quot;]}),t})();const Iet=function(t){return{groupId:t}};function Det(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,6),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;add&quot;),Fa(),xl(3,&quot; Nouvelle flotte &quot;),Fa()),2&amp;t){const t=e.group;Oa(&quot;queryParams&quot;,eh(1,Iet,t?t.id:null))}}function Oet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,7),xl(1),Ra(2,&quot;em&quot;),xl(3),Fa(),Fa()),2&amp;t){const t=e.resource;Oa(&quot;routerLink&quot;,&quot;/fleets/&quot;+t.id)(&quot;@fadeAnimation&quot;,void 0),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;),Sr(2),Sl(&quot;(&quot;,t.ships.length,&quot; navire&quot;,t.ships.length&gt;1?&quot;s&quot;:&quot;&quot;,&quot;)&quot;)}}let Pet=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.titleService=t,this.fleetsService=e,this.mapService=i}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Liste des flottes - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView()})}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(yW),Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-fleets-panel&quot;]],features:[$o],decls:9,vars:1,consts:[[&quot;joyrideStep&quot;,&quot;fleets-panel&quot;,&quot;title&quot;,&quot;Flottes de navires&quot;,&quot;text&quot;,&quot;C&#39;est ici que vous pouvez cr\xe9er et suivre vos flottes de navires.&quot;,1,&quot;panel&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[&quot;resourcesKey&quot;,&quot;fleets&quot;,&quot;privateResourcesTitle&quot;,&quot;Flottes priv\xe9es&quot;,&quot;emptyMessage&quot;,&quot;Aucune flotte&quot;,1,&quot;scrollable&quot;,3,&quot;resources$&quot;],[&quot;createTemplate&quot;,&quot;&quot;],[&quot;resourceTemplate&quot;,&quot;&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;routerLink&quot;,&quot;/fleets/new&quot;,1,&quot;ma-2&quot;,3,&quot;queryParams&quot;],[&quot;mat-button&quot;,&quot;&quot;,3,&quot;routerLink&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h2&quot;,2),xl(3,&quot;Flottes&quot;),Fa(),Fa(),Ra(4,&quot;app-resources-panel&quot;,3),ra(5,Det,4,3,&quot;ng-template&quot;,null,4,Rh),ra(7,Oet,4,5,&quot;ng-template&quot;,null,5,Rh),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(4),Oa(&quot;resources$&quot;,e.fleetsService.fleets$))},directives:[gL,u5,Ry,fF,hE],styles:[&quot;&quot;],data:{animation:[$3]}}),t})(),Ret=(()=&gt;{class t{constructor(t){this.workerService=t,this.companies$=new Qp(null),this.companiesFetched=null,this.companiesPanelState$=new Qp({nameFilter:&quot;&quot;,scrollIndex:0})}fetchCompanies(){return jp(this,void 0,void 0,function*(){this.companiesFetched||(this.companiesFetched=this.workerService.lloyds.listCompanies(),this.companies$.next(yield this.companiesFetched))})}updateScrollIndex(t){this.companiesPanelState$.value.scrollIndex=t,this.companiesPanelState$.next(this.companiesPanelState$.value)}updateNameFilter(t){this.companiesPanelState$.value.nameFilter=t,this.companiesPanelState$.next(this.companiesPanelState$.value)}}return t.\u0275fac=function(e){return new(e||t)(Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function Fet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,11),Ha(&quot;click&quot;,function(e){Le(t);const i=Za();return e.stopPropagation(),i.lloydsCompaniesService.updateNameFilter(&quot;&quot;)}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;close&quot;),Fa(),Fa()}}function Let(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,12)}function Bet(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,13),xl(1,&quot;Aucun r\xe9sultat&quot;),Fa())}const zet=function(t){return[&quot;/lloyds/companies/&quot;,t]};function Net(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;button&quot;,14),xl(1),Fa()),2&amp;t){const t=e.$implicit;Ja(&quot;title&quot;,t.name),Oa(&quot;routerLink&quot;,eh(3,zet,t.id)),Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}let Vet=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.titleService=t,this.lloydsCompaniesService=e,this.mapService=i,this.offlineService=n,this.workerService=s,this.loading=!0,this.filteredCompanies=[],this.contentCheckCount=0}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Liste des entreprises Lloyds - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(QT([this.lloydsCompaniesService.companiesPanelState$.pipe(nf(t=&gt;{this.companiesPanelState=t})),this.lloydsCompaniesService.companies$.pipe(gf(t=&gt;null!==t))]).pipe(M(([t,e])=&gt;{if(0===t.nameFilter.length)return e;const i=hU(t.nameFilter);return e.filter(t=&gt;t.normalizedName.includes(i))})).subscribe(t=&gt;{this.filteredCompanies=t,this.loading=!1,this.scrollViewport&amp;&amp;this.scrollViewport.checkViewportSize()})),this.lloydsCompaniesService.fetchCompanies()})}ngAfterViewInit(){this.subscriptions.push(this.scrollViewport.scrolledIndexChange.pipe(Sf(1)).subscribe(t=&gt;{this.lloydsCompaniesService.updateScrollIndex(t)}))}ngAfterViewChecked(){this.contentCheckCount&lt;5&amp;&amp;(this.scrollViewport.scrollToIndex(this.companiesPanelState.scrollIndex),this.contentCheckCount++)}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(Ret),Da(kj),Da(hW),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-lloyds-companies-panel&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(qg,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.scrollViewport=t.first)}},features:[$o],decls:17,vars:6,consts:[[&quot;joyrideStep&quot;,&quot;companies-panel&quot;,&quot;title&quot;,&quot;Recherche d&#39;entreprises&quot;,&quot;text&quot;,&quot;Vous pouvez rechercher et acc\xe9der aux entreprises inscrites au registre Lloyds.&quot;,1,&quot;panel&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[1,&quot;px-3&quot;],[1,&quot;d-block&quot;,&quot;px-3&quot;],[&quot;matInput&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9initialiser le filtre&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;px-3 u-center&quot;,4,&quot;ngIf&quot;],[1,&quot;companies-scroll&quot;,3,&quot;itemSize&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;d-block u-left button-events&quot;,&quot;style&quot;,&quot;height: 36px; overflow-x: hidden&quot;,3,&quot;routerLink&quot;,&quot;title&quot;,4,&quot;cdkVirtualFor&quot;,&quot;cdkVirtualForOf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9initialiser le filtre&quot;,3,&quot;click&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[1,&quot;px-3&quot;,&quot;u-center&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;d-block&quot;,&quot;u-left&quot;,&quot;button-events&quot;,2,&quot;height&quot;,&quot;36px&quot;,&quot;overflow-x&quot;,&quot;hidden&quot;,3,&quot;routerLink&quot;,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h2&quot;,2),xl(3,&quot;Recherche d&#39;entreprises&quot;),Fa(),Fa(),Ra(4,&quot;h3&quot;,3),xl(5,&quot;Filtres&quot;),Fa(),Ra(6,&quot;mat-form-field&quot;,4),Ra(7,&quot;mat-label&quot;),xl(8,&quot;Nom&quot;),Fa(),Ra(9,&quot;input&quot;,5),Ha(&quot;ngModelChange&quot;,function(t){return e.lloydsCompaniesService.updateNameFilter(t)}),Fa(),ra(10,Fet,3,0,&quot;button&quot;,6),Fa(),Ra(11,&quot;h3&quot;,3),xl(12,&quot;Liste&quot;),Fa(),ra(13,Let,1,0,&quot;mat-spinner&quot;,7),ra(14,Bet,2,0,&quot;p&quot;,8),Ra(15,&quot;cdk-virtual-scroll-viewport&quot;,9),ra(16,Net,2,5,&quot;button&quot;,10),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;ngModel&quot;,e.companiesPanelState.nameFilter),Sr(1),Oa(&quot;ngIf&quot;,e.companiesPanelState.nameFilter.length&gt;0),Sr(3),Oa(&quot;ngIf&quot;,e.loading),Sr(1),Oa(&quot;ngIf&quot;,!e.loading&amp;&amp;0===e.filteredCompanies.length),Sr(1),Oa(&quot;itemSize&quot;,36),Sr(1),Oa(&quot;cdkVirtualForOf&quot;,e.filteredCompanies))},directives:[gL,gC,oC,kC,Hy,wx,iw,Nd,qg,$g,Yg,Ry,uC,hE,TQ,fF],styles:[&quot;.companies-scroll[_ngcontent-%COMP%]{flex:1;overflow-x:hidden}  .companies-scroll&gt;.cdk-virtual-scroll-content-wrapper{width:100%}&quot;]}),t})();const $et=[&quot;fleetNameInput&quot;];function Uet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,2),Ha(&quot;click&quot;,function(){return Le(t),Za().toggleForm()}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;add&quot;),Fa(),xl(3,&quot; Nouvelle flotte\n&quot;),Fa()}}function jet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-form-field&quot;,3),Ra(1,&quot;input&quot;,4,5),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().fleetName=e})(&quot;keyup.enter&quot;,function(){return Le(t),Za().save()}),Fa(),Fa(),Ra(3,&quot;button&quot;,6),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;check&quot;),Fa(),Fa(),Ra(6,&quot;button&quot;,7),Ha(&quot;click&quot;,function(){return Le(t),Za().toggleForm()}),Ra(7,&quot;mat-icon&quot;),xl(8,&quot;cancel&quot;),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(1),Oa(&quot;autofocus&quot;,!0)(&quot;ngModel&quot;,t.fleetName),Sr(2),Oa(&quot;app-async-action&quot;,t.save)(&quot;disabled&quot;,0===t.fleetName.length)}}let Het=(()=&gt;{class t extends Eq{constructor(t){super(),this.fleetsService=t,this.showForm=!1,this.fleetName=&quot;&quot;,this.createEmitter=new mh,this.save=()=&gt;jp(this,void 0,void 0,function*(){const t=yield this.fleetsService.createFleet({name:this.fleetName,group_id:this.groupId,ships:this.mmsis.map(t=&gt;({mmsi:t}))});this.createEmitter.emit(t)})}ngOnInit(){this.ensureMandatoryInputParams(&quot;mmsis&quot;)}toggleForm(){this.showForm=!this.showForm,this.showForm&amp;&amp;setTimeout(()=&gt;{this.fleetNameInput.nativeElement.focus()})}}return t.\u0275fac=function(e){return new(e||t)(Da(yW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-create-fleet-button&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh($et,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.fleetNameInput=t.first)}},inputs:{groupId:&quot;groupId&quot;,mmsis:&quot;mmsis&quot;},outputs:{createEmitter:&quot;create&quot;},features:[$o],decls:2,vars:2,consts:[[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;d-block&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;d-block&quot;,3,&quot;click&quot;],[1,&quot;u-flex&quot;,&quot;auto-width&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;placeholder&quot;,&quot;Nom de la flotte&quot;,3,&quot;autofocus&quot;,&quot;ngModel&quot;,&quot;ngModelChange&quot;,&quot;keyup.enter&quot;],[&quot;fleetNameInput&quot;,&quot;&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Enregistrer&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(ra(0,Uet,4,0,&quot;button&quot;,0),ra(1,jet,9,4,&quot;ng-template&quot;,1)),2&amp;t&amp;&amp;(Oa(&quot;ngIf&quot;,!e.showForm),Sr(1),Oa(&quot;ngIf&quot;,e.showForm))},directives:[Nd,Ry,hE,gC,kC,Hy,wx,iw,Fq],styles:[&quot;[_nghost-%COMP%]{display:flex;width:100%}&quot;]}),t})();function Get(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,11),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(2).addShipsToFleet(e.id)}),xl(1),Fa()}if(2&amp;t){const t=e.$implicit;Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}function qet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,6),Ra(1,&quot;div&quot;,7),xl(2),Fa(),Ra(3,&quot;app-create-fleet-button&quot;,10),Ha(&quot;create&quot;,function(e){return Le(t),Za().closeDialog(e)}),Fa(),ra(4,Get,2,1,&quot;button&quot;,9),Fa()}if(2&amp;t){const t=e.$implicit,i=Za();Sr(2),wl(t.name),Sr(1),Oa(&quot;groupId&quot;,t.id)(&quot;mmsis&quot;,i.data.mmsis),Sr(1),Oa(&quot;ngForOf&quot;,t.fleets)}}function Wet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,11),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za().addShipsToFleet(e.id)}),xl(1),Fa()}if(2&amp;t){const t=e.$implicit;Sr(1),Cl(&quot; &quot;,t.name,&quot; &quot;)}}let Yet=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.data=t,this.fleetsService=e,this.groupsService=i,this.workerService=n,this.dialogRef=s,this.fleetGroups=[],this.personalFleets=[]}ngOnInit(){this.subscriptions.push(QT([this.groupsService.groups$,this.fleetsService.fleets$]).subscribe(([t,e])=&gt;{const i=t.reduce((t,e)=&gt;(t[e.id]=e,e.fleets=[],t),{}),n=[];e.forEach(t=&gt;{if(t.group_id){const e=i[t.group_id];if(!e)return void console.log(`Le groupe ${t.group_id} de la flotte ${t.name} est inconnu`);e.fleets||(e.fleets=[]),e.fleets.push(t)}else n.push(t)}),this.fleetGroups=t.filter(t=&gt;&quot;guest&quot;!==t.role),this.personalFleets=n}))}addShipsToFleet(t){return jp(this,void 0,void 0,function*(){const e=yield this.workerService.fleets.get(t),i=bW(e);let n=!1;for(const t of this.data.mmsis)i.ships.includes(t)||(e.ships.push({mmsi:t}),n=!0);n&amp;&amp;(yield this.fleetsService.updateFleet(e)),this.dialogRef.close(t)})}closeDialog(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(Da(KS),Da(yW),Da(CW),Da(Jj),Da(YS))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-add-to-fleet-dialog&quot;]],features:[$o],decls:15,vars:3,consts:[[1,&quot;d-flex&quot;],[1,&quot;dialog-title&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;d-flex-column&quot;,&quot;dialog-content&quot;,2,&quot;max-height&quot;,&quot;60vh&quot;,&quot;overflow&quot;,&quot;auto&quot;],[&quot;class&quot;,&quot;d-flex-column&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;d-flex-column&quot;],[1,&quot;py-1&quot;],[3,&quot;mmsis&quot;,&quot;create&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ajouter \xe0 la flotte&quot;,3,&quot;click&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;groupId&quot;,&quot;mmsis&quot;,&quot;create&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ajouter \xe0 la flotte&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;h1&quot;,1),xl(2,&quot; Ajouter \xe0 la flotte ... &quot;),Fa(),La(3,&quot;div&quot;,2),Ra(4,&quot;button&quot;,3),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;close&quot;),Fa(),Fa(),Fa(),La(7,&quot;mat-divider&quot;),Ra(8,&quot;div&quot;,4),ra(9,qet,5,4,&quot;div&quot;,5),Ra(10,&quot;div&quot;,6),Ra(11,&quot;div&quot;,7),xl(12,&quot;Flottes priv\xe9es&quot;),Fa(),Ra(13,&quot;app-create-fleet-button&quot;,8),Ha(&quot;create&quot;,function(t){return e.closeDialog(t)}),Fa(),ra(14,Wet,2,1,&quot;button&quot;,9),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(9),Oa(&quot;ngForOf&quot;,e.fleetGroups),Sr(4),Oa(&quot;mmsis&quot;,e.data.mmsis),Sr(1),Oa(&quot;ngForOf&quot;,e.personalFleets))},directives:[Ry,nk,hE,Pq,Bd,Het],styles:[&quot;.dialog-title[_ngcontent-%COMP%]{margin:0;padding:16px}.dialog-content[_ngcontent-%COMP%]{padding:16px}&quot;],changeDetection:0}),t})();function Zet(t){return`//${function(t){return VK(Ket,t).map(([t])=&gt;t)}(t)[0]}`}const Ket=/(?:https?:\/\/)?(\S+)/gi;function Xet(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,7),Ha(&quot;click&quot;,function(){return Le(t),Za().locateShip()}),La(1,&quot;app-flag&quot;,8),Ra(2,&quot;div&quot;,9),Ra(3,&quot;strong&quot;,10),xl(4),Fa(),Ra(5,&quot;small&quot;,11),xl(6),Fa(),Fa(),Fa()}if(2&amp;t){const t=Za();Oa(&quot;title&quot;,t.hasPosition?&quot;Localiser le navire&quot;:&quot;Ce navire n&#39;a pas de position&quot;)(&quot;disabled&quot;,!t.hasPosition),Sr(1),Oa(&quot;mmsi&quot;,t.ship.mmsi),Sr(3),wl(t.ship.name||&quot;?&quot;),Sr(2),wl(t.ship.cargo?t.vesselTypeLabelsByType[t.ship.cargo]:&quot;?&quot;)}}function Qet(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,12),La(1,&quot;app-flag&quot;,8),Ra(2,&quot;div&quot;,9),Ra(3,&quot;strong&quot;,10),xl(4),Fa(),Ra(5,&quot;small&quot;,11),xl(6),Fa(),Fa(),Fa()),2&amp;t){const t=Za();Sr(1),Oa(&quot;mmsi&quot;,t.ship.mmsi),Sr(3),wl(t.ship.name||&quot;?&quot;),Sr(2),wl(t.ship.cargo?t.vesselTypeLabelsByType[t.ship.cargo]:&quot;?&quot;)}}const Jet=function(t){return[&quot;/ships/&quot;,t]},tit=[&quot;*&quot;];let eit=(()=&gt;{class t extends Eq{constructor(t){super(),this.mapService=t,this.showLink=!0,this.vesselTypeLabelsByType=nU,this.hasPosition=!0}ngOnInit(){this.ensureMandatoryInputParams(&quot;ship&quot;)}ngOnChanges(t){var e,i;t.ship&amp;&amp;(this.hasPosition=pU(null===(e=t.ship.currentValue)||void 0===e?void 0:e.lon)&amp;&amp;pU(null===(i=t.ship.currentValue)||void 0===i?void 0:i.lat))}locateShip(){this.mapService.pingLocation([this.ship.lon,this.ship.lat]),this.mapService.locate([this.ship.lon,this.ship.lat])}}return t.\u0275fac=function(e){return new(e||t)(Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ship-item&quot;]],inputs:{ship:&quot;ship&quot;,showLink:&quot;showLink&quot;},features:[$o,he],ngContentSelectors:tit,decls:15,vars:8,consts:[[1,&quot;ship-item__header&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;class&quot;,&quot;ship-item__link&quot;,3,&quot;title&quot;,&quot;disabled&quot;,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;d-flex u-flex&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la fiche du navire&quot;,1,&quot;d-center&quot;,3,&quot;routerLink&quot;],[1,&quot;ship-item__row&quot;],[1,&quot;px-2&quot;],[1,&quot;ship-item__row&quot;,&quot;ship-item__slot-row&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;ship-item__link&quot;,3,&quot;title&quot;,&quot;disabled&quot;,&quot;click&quot;],[1,&quot;ship-item__flag&quot;,3,&quot;mmsi&quot;],[1,&quot;ship-item__title&quot;],[1,&quot;ship-item__name&quot;],[1,&quot;ship-item__type&quot;],[1,&quot;d-flex&quot;,&quot;u-flex&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),ra(1,Xet,7,5,&quot;button&quot;,1),ra(2,Qet,7,3,&quot;div&quot;,2),Ra(3,&quot;a&quot;,3),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;info&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;,4),Ra(7,&quot;span&quot;),xl(8),Fa(),Ra(9,&quot;span&quot;,5),xl(10),Fa(),Ra(11,&quot;span&quot;),xl(12),Fa(),Fa(),Ra(13,&quot;div&quot;,6),Qa(14),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngIf&quot;,e.showLink),Sr(1),Oa(&quot;ngIf&quot;,!e.showLink),Sr(1),Oa(&quot;routerLink&quot;,eh(6,Jet,e.ship.mmsi)),Sr(5),Cl(&quot;MMSI &quot;,e.ship.mmsi,&quot;&quot;),Sr(2),Cl(&quot;IMO &quot;,e.ship.imo||&quot;?&quot;,&quot;&quot;),Sr(2),Cl(&quot;Callsign &quot;,e.ship.callsign||&quot;?&quot;,&quot;&quot;))},directives:[Nd,Fy,mF,hE,Ry,aQ],styles:[&quot;.ship-item__header[_ngcontent-%COMP%]{display:flex;padding:4px 4px 0}.ship-item__link[_ngcontent-%COMP%]{flex:1;padding:0;line-height:inherit;text-align:inherit;font-size:inherit;font-weight:inherit}.ship-item__link[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.ship-item__flag[_ngcontent-%COMP%]{margin:5px}.ship-item__title[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0;flex:1}.ship-item__type[_ngcontent-%COMP%]{font-size:.9em;color:#555}.ship-item__row[_ngcontent-%COMP%]{padding:0 8px 4px;display:flex;justify-content:space-between;font-size:.9em;flex-wrap:wrap}.ship-item__slot-row[_ngcontent-%COMP%]:empty{display:none}&quot;],changeDetection:0}),t})();function iit(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,5)}function nit(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,30),xl(1),Fa()),2&amp;t){const t=Za(2);Oa(&quot;href&quot;,&quot;tel:&quot;+t.company.telephone,Cs),Sr(1),wl(t.company.telephone)}}function sit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;,12),xl(1,&quot;?&quot;),Fa())}function rit(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,30),xl(1),Fa()),2&amp;t){const t=Za(2);Oa(&quot;href&quot;,&quot;mailto:&quot;+t.company.email,Cs),Sr(1),wl(t.company.email)}}function oit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;,12),xl(1,&quot;?&quot;),Fa())}function ait(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;a&quot;,30),xl(1),Fa()),2&amp;t){const t=Za(2);Oa(&quot;href&quot;,t.websiteLink,Cs),Sr(1),wl(t.company.website)}}function lit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;span&quot;,12),xl(1,&quot;?&quot;),Fa())}function cit(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,31),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.key),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function hit(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,32),Ha(&quot;click&quot;,function(e){Le(t);const i=Za(2);return e.stopPropagation(),i.updateRoleFilter([])}),Ra(1,&quot;mat-icon&quot;),xl(2,&quot;close&quot;),Fa(),Fa()}}function uit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,33),xl(1,&quot;Aucun navire&quot;),Fa())}function dit(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;app-ship-item&quot;,34),Ra(1,&quot;div&quot;),Ra(2,&quot;span&quot;,35),xl(3,&quot;BO&quot;),Fa(),Ra(4,&quot;span&quot;,36),xl(5,&quot;CO&quot;),Fa(),Ra(6,&quot;span&quot;,37),xl(7,&quot;RO&quot;),Fa(),Ra(8,&quot;span&quot;,38),xl(9,&quot;TM&quot;),Fa(),Ra(10,&quot;span&quot;,39),xl(11,&quot;TO&quot;),Fa(),Fa(),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;ship&quot;,t),Sr(2),cl(&quot;role--disabled&quot;,!t.isbeneficialowner),Sr(2),cl(&quot;role--disabled&quot;,!t.iscommercialoperator),Sr(2),cl(&quot;role--disabled&quot;,!t.isregisteredowner),Sr(2),cl(&quot;role--disabled&quot;,!t.istechnicalmanager),Sr(2),cl(&quot;role--disabled&quot;,!t.isthirdpartoperator)}}function pit(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,6),Ra(1,&quot;h2&quot;,7),xl(2),Fa(),Fa(),Ra(3,&quot;div&quot;,8),Ra(4,&quot;div&quot;,9),Ra(5,&quot;div&quot;,10),Ra(6,&quot;span&quot;,11),xl(7,&quot;All\xe9geance\xa0:&quot;),Fa(),Ra(8,&quot;span&quot;,12),xl(9),Fa(),Fa(),Ra(10,&quot;div&quot;,10),Ra(11,&quot;span&quot;,11),xl(12,&quot;Si\xe8ge social\xa0:&quot;),Fa(),Ra(13,&quot;span&quot;,12),xl(14),Fa(),Fa(),Fa(),Ra(15,&quot;div&quot;),Ra(16,&quot;div&quot;,13),Ra(17,&quot;span&quot;,11),xl(18,&quot;T\xe9l\xe9phone\xa0:&quot;),Fa(),ra(19,nit,2,2,&quot;a&quot;,14),ra(20,sit,2,0,&quot;span&quot;,15),Fa(),Ra(21,&quot;div&quot;,13),Ra(22,&quot;span&quot;,11),xl(23,&quot;E-mail\xa0:&quot;),Fa(),ra(24,rit,2,2,&quot;a&quot;,14),ra(25,oit,2,0,&quot;span&quot;,15),Fa(),Ra(26,&quot;div&quot;,13),Ra(27,&quot;span&quot;,11),xl(28,&quot;Site web\xa0:&quot;),Fa(),ra(29,ait,2,2,&quot;a&quot;,14),ra(30,lit,2,0,&quot;span&quot;,15),Fa(),Fa(),Ra(31,&quot;div&quot;,10),Ra(32,&quot;div&quot;,16),xl(33,&quot;Adresse&quot;),Fa(),Ra(34,&quot;div&quot;,12),xl(35),Fa(),Ra(36,&quot;div&quot;,12),xl(37),Fa(),Ra(38,&quot;div&quot;,12),xl(39),Fa(),Ra(40,&quot;div&quot;,12),xl(41),Fa(),Fa(),Fa(),Ra(42,&quot;div&quot;,17),Ra(43,&quot;h4&quot;,18),xl(44,&quot;Navires li\xe9s&quot;),Fa(),Ra(45,&quot;button&quot;,19),Ha(&quot;click&quot;,function(){return Le(t),Za().openExportDataDialog()}),Ra(46,&quot;mat-icon&quot;),xl(47,&quot;file_download&quot;),Fa(),Fa(),Ra(48,&quot;button&quot;,20),Ha(&quot;click&quot;,function(){return Le(t),Za().openAddToFleetDialog()}),Ra(49,&quot;mat-icon&quot;),xl(50,&quot;playlist_add&quot;),Fa(),Fa(),Fa(),Ra(51,&quot;mat-form-field&quot;,21),Ra(52,&quot;mat-label&quot;),xl(53,&quot;Filtre par r\xf4le&quot;),Fa(),Ra(54,&quot;mat-select&quot;,22,23),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().updateRoleFilter(e)}),La(56,&quot;app-select-check-all&quot;,24),ra(57,cit,2,2,&quot;mat-option&quot;,25),Fa(),ra(58,hit,3,0,&quot;button&quot;,26),Ra(59,&quot;mat-hint&quot;),xl(60,&quot;Mode \xab ET \xbb si multi-s\xe9lection&quot;),Fa(),Fa(),ra(61,uit,2,0,&quot;p&quot;,27),lh(62,&quot;async&quot;),Ra(63,&quot;cdk-virtual-scroll-viewport&quot;,28),ra(64,dit,12,11,&quot;app-ship-item&quot;,29),lh(65,&quot;async&quot;),Fa()}if(2&amp;t){const t=oa(55),e=Za();Sr(2),wl(e.company.name),Sr(7),wl(e.company.allegiancecountry||&quot;?&quot;),Sr(5),wl(e.company.headofficecountry||&quot;?&quot;),Sr(5),Oa(&quot;ngIf&quot;,e.company.telephone),Sr(1),Oa(&quot;ngIf&quot;,!e.company.telephone),Sr(4),Oa(&quot;ngIf&quot;,e.company.email),Sr(1),Oa(&quot;ngIf&quot;,!e.company.email),Sr(4),Oa(&quot;ngIf&quot;,e.company.website),Sr(1),Oa(&quot;ngIf&quot;,!e.company.website),Sr(5),wl(e.company.address||&quot;?&quot;),Sr(2),Sl(&quot;&quot;,e.company.postcode,&quot; &quot;,e.company.town,&quot;&quot;),Sr(2),wl(e.company.state),Sr(2),wl(e.company.country),Sr(4),Oa(&quot;disabled&quot;,0===e.filteredShips$.value.length),Sr(3),Oa(&quot;disabled&quot;,0===e.filteredShips$.value.length),Sr(6),Oa(&quot;ngModel&quot;,e.roleFilter),Sr(2),Oa(&quot;model&quot;,t)(&quot;values&quot;,e.companyRoles)(&quot;key&quot;,&quot;key&quot;),Sr(1),Oa(&quot;ngForOf&quot;,e.companyRoles),Sr(1),Oa(&quot;ngIf&quot;,e.roleFilter.length&gt;0),Sr(3),Oa(&quot;ngIf&quot;,0===ch(62,25,e.filteredShips$).length),Sr(2),Oa(&quot;itemSize&quot;,70),Sr(1),Oa(&quot;cdkVirtualForOf&quot;,ch(65,27,e.filteredShips$))}}let fit=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h,u){super(),this.activatedRoute=t,this.titleService=e,this.dialog=i,this.configService=n,this.exportService=s,this.interactionsService=r,this.mapConfigService=o,this.mapService=a,this.offlineService=l,this.routeService=c,this.uiService=h,this.workerService=u,this.loading=!0,this.company=null,this.websiteLink=&quot;&quot;,this.ships$=new Qp([]),this.filteredShips$=new Qp([]),this.companyRoles=[{label:&quot;Beneficial owner&quot;,key:&quot;isbeneficialowner&quot;},{label:&quot;Commercial operator&quot;,key:&quot;iscommercialoperator&quot;},{label:&quot;Registered owner&quot;,key:&quot;isregisteredowner&quot;},{label:&quot;Technical manager&quot;,key:&quot;istechnicalmanager&quot;},{label:&quot;Third-party operator&quot;,key:&quot;isthirdpartoperator&quot;}],this.roleFilter=[],this.roleFilter$=new Qp(this.roleFilter)}ngOnInit(){return jp(this,void 0,void 0,function*(){if(this.offlineService.isOffline$.value)return this.uiService.error(&quot;Cette page n&#39;est pas disponible en mode hors-ligne&quot;),void(yield this.routeService.goToPreviousPage());this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.activatedRoute.paramMap.pipe(M(t=&gt;t.get(&quot;companyId&quot;))).subscribe(t=&gt;jp(this,void 0,void 0,function*(){try{yield Promise.all([(()=&gt;jp(this,void 0,void 0,function*(){this.company=yield this.workerService.lloyds.getCompany(t),this.titleService.setTitle(`Entreprise ${this.company.name} - ANAIS`),this.websiteLink=Zet(this.company.website)}))(),(()=&gt;jp(this,void 0,void 0,function*(){this.ships$.next(yield this.workerService.lloyds.listCompanyShips(t))}))()]),this.loading=!1}catch(e){this.uiService.error(`L&#39;entreprise ${t} est inconnue.`),yield this.routeService.goToPreviousPage()}})),this.subscriptions.push(QT([this.ships$,this.roleFilter$]).pipe(M(([t,e])=&gt;{if(0===e.length)return t;const i=e.reduce((t,e)=&gt;(t[e]=!0,t),{});return t.filter(t=&gt;(!i.isbeneficialowner||i.isbeneficialowner&amp;&amp;t.isbeneficialowner)&amp;&amp;(!i.iscommercialoperator||i.iscommercialoperator&amp;&amp;t.iscommercialoperator)&amp;&amp;(!i.isregisteredowner||i.isregisteredowner&amp;&amp;t.isregisteredowner)&amp;&amp;(!i.istechnicalmanager||i.istechnicalmanager&amp;&amp;t.istechnicalmanager)&amp;&amp;(!i.isthirdpartoperator||i.isthirdpartoperator&amp;&amp;t.isthirdpartoperator))})).subscribe(t=&gt;{this.filteredShips$.next(t)}))})}updateRoleFilter(t){this.roleFilter=t,this.roleFilter$.next(t)}openAddToFleetDialog(){this.dialog.open(Yet,{panelClass:&quot;no-border-dialog&quot;,maxHeight:&quot;90vh&quot;,maxWidth:&quot;90vw&quot;,minWidth:&quot;300px&quot;,autoFocus:!1,closeOnNavigation:!0,hasBackdrop:!0,data:{mmsis:this.filteredShips$.value.map(t=&gt;t.mmsi)}})}openExportDataDialog(){this.exportService.openExportDataDialog({mmsis:this.filteredShips$.value.map(t=&gt;t.mmsi),label:`des navires li\xe9s \xe0 l&#39;entreprise ${this.company.name}`})}}return t.\u0275fac=function(e){return new(e||t)(Da(HP),Da(Up),Da(ek),Da(jU),Da(aW),Da(gW),Da(HU),Da(kj),Da(hW),Da(Oj),Da(fH),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-lloyds-company-panel&quot;]],features:[$o],decls:8,vars:2,consts:[[1,&quot;panel&quot;,&quot;port-panel&quot;,&quot;u-flex&quot;],[1,&quot;d-flex&quot;,2,&quot;background-color&quot;,&quot;#fff&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Revenir \xe0 la liste&quot;,&quot;routerLink&quot;,&quot;/lloyds/companies&quot;,1,&quot;back-button&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;,2,&quot;font-size&quot;,&quot;18px&quot;],[1,&quot;mat-body&quot;],[1,&quot;d-flex&quot;],[1,&quot;property&quot;,&quot;u-flex&quot;],[1,&quot;property-label&quot;,&quot;mr-1&quot;],[1,&quot;property-value&quot;],[1,&quot;property&quot;],[&quot;target&quot;,&quot;_blank&quot;,&quot;class&quot;,&quot;property-value&quot;,3,&quot;href&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;property-value&quot;,4,&quot;ngIf&quot;],[1,&quot;property-label&quot;],[1,&quot;d-flex-center&quot;],[1,&quot;u-flex&quot;,&quot;ml-2&quot;,&quot;my-0&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Exporter les donn\xe9es des navires li\xe9s \xe0 l&#39;entreprise au format CSV&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ajouter tous les navires \xe0 une flotte&quot;,1,&quot;ship-details-panel__action&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[1,&quot;d-block&quot;,&quot;px-3&quot;],[&quot;multiple&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;roleSelection&quot;,&quot;ngModel&quot;],[3,&quot;model&quot;,&quot;values&quot;,&quot;key&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9initialiser le filtre&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;panel__content&quot;,4,&quot;ngIf&quot;],[1,&quot;ships-scroll&quot;,3,&quot;itemSize&quot;],[3,&quot;ship&quot;,4,&quot;cdkVirtualFor&quot;,&quot;cdkVirtualForOf&quot;],[&quot;target&quot;,&quot;_blank&quot;,1,&quot;property-value&quot;,3,&quot;href&quot;],[3,&quot;value&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;matSuffix&quot;,&quot;&quot;,&quot;mat-icon-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;R\xe9initialiser le filtre&quot;,3,&quot;click&quot;],[1,&quot;panel__content&quot;],[3,&quot;ship&quot;],[&quot;title&quot;,&quot;Beneficial owner&quot;,1,&quot;role&quot;],[&quot;title&quot;,&quot;Commercial operator&quot;,1,&quot;role&quot;],[&quot;title&quot;,&quot;Registered owner&quot;,1,&quot;role&quot;],[&quot;title&quot;,&quot;Technical manager&quot;,1,&quot;role&quot;],[&quot;title&quot;,&quot;Third-party operator&quot;,1,&quot;role&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;a&quot;,2),Ra(3,&quot;mat-icon&quot;),xl(4,&quot;arrow_back_ios&quot;),Fa(),xl(5,&quot; Entreprises &quot;),Fa(),Fa(),ra(6,iit,1,0,&quot;mat-spinner&quot;,3),ra(7,pit,66,29,&quot;ng-template&quot;,4),Fa()),2&amp;t&amp;&amp;(Sr(6),Oa(&quot;ngIf&quot;,e.loading),Sr(1),Oa(&quot;ngIf&quot;,!e.loading))},directives:[Fy,mF,hE,Nd,TQ,Ry,gC,oC,qT,wx,iw,i2,Bd,rC,qg,$g,Yg,Sy,uC,eit],pipes:[Jd],styles:[&quot;[_nghost-%COMP%]{display:flex;height:100%}.back-button[_ngcontent-%COMP%]{line-height:36px}.property[_ngcontent-%COMP%]{padding:4px;border:1px solid rgba(0,0,0,.12);text-align:center;min-width:100px}.property--large[_ngcontent-%COMP%]{flex-basis:100%;display:flex;align-items:center}.property-label[_ngcontent-%COMP%]{color:gray;font-weight:500}.property-value[_ngcontent-%COMP%]{font-weight:bold}.ships-scroll[_ngcontent-%COMP%]{height:100%;overflow-x:hidden}  .ships-scroll&gt;.cdk-virtual-scroll-content-wrapper{width:100%}.role[_ngcontent-%COMP%]{font-weight:500;margin-right:16px;cursor:help}.role--disabled[_ngcontent-%COMP%]{font-weight:400;color:#bbb}&quot;]}),t})(),mit=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.titleService=t,this.historyService=e,this.mapService=i,this.offlineService=n,this.selectionService=s}ngOnInit(){this.titleService.setTitle(&quot;Mode hors-ligne - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.historyService.resetTimestamp(),this.selectionService.clear(),setTimeout(()=&gt;{this.offlineService.enterSetupMode()})}ngOnDestroy(){this.offlineService.exitSetupMode()}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(Dj),Da(kj),Da(hW),Da(dW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-offline-loader&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),git=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.titleService=t,this.historyService=e,this.mapService=i,this.playbackService=n,this.selectionService=s}ngOnInit(){this.titleService.setTitle(&quot;Rejeu de situation - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.historyService.resetTimestamp(),this.selectionService.clear(),setTimeout(()=&gt;{this.playbackService.enterPlaybackMode()})}ngOnDestroy(){this.playbackService.exitPlaybackMode()}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(Dj),Da(kj),Da(mq),Da(dW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-playback-loader&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Ait=(()=&gt;{class t{constructor(t,e,i){this.mapConfigService=t,this.mapService=e,this.uiService=i,this.isSelectingArea$=new Qp(!1),this.isSelectingArea$.pipe(Sf(1)).subscribe(t=&gt;{this.uiService.setDrawingMode(t)})}startSelectingArea(){this.isSelectingArea$.next(!0)}cancelSelectingArea(){this.isSelectingArea$.next(!1)}finishSelectingArea(){this.mapConfigService.updateRestrictedAreas(SU.fromOLExtent(this.mapService.view$.value.extent).toLatLonExtent()),this.cancelSelectingArea()}removeArea(){this.mapConfigService.updateRestrictedAreas(null)}}return t.\u0275fac=function(e){return new(e||t)(Mn(HU),Mn(kj),Mn(fH))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();const vit=[&quot;sliderWrapper&quot;],_it=Xf({passive:!1}),bit={provide:$y,useExisting:at(()=&gt;wit),multi:!0};class yit{}const xit=Nb(Bb(Lb(class{constructor(t){this._elementRef=t}}),&quot;accent&quot;));let wit=(()=&gt;{class t extends xit{constructor(t,e,i,n,s,r,o,a){super(t),this._focusMonitor=e,this._changeDetectorRef=i,this._dir=n,this._ngZone=r,this._animationMode=a,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new mh,this.input=new mh,this.valueChange=new mh,this.onTouched=()=&gt;{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=&gt;{},this._dirChangeSubscription=d.EMPTY,this._pointerDown=t=&gt;{this.disabled||this._isSliding||!Cit(t)&amp;&amp;0!==t.button||this._ngZone.run(()=&gt;{this._touchId=Cit(t)?function(t,e){for(let i=0;i&lt;t.touches.length;i++){const n=t.touches[i].target;if(e===n||e.contains(n))return t.touches[i].identifier}}(t,this._elementRef.nativeElement):void 0;const e=Sit(t,this._touchId);if(e){const i=this.value;this._isSliding=&quot;pointer&quot;,this._lastPointerEvent=t,t.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(t),this._focusHostElement(),this._updateValueFromPosition(e),this._valueOnSlideStart=i,i!=this.value&amp;&amp;this._emitInputEvent()}})},this._pointerMove=t=&gt;{if(&quot;pointer&quot;===this._isSliding){const e=Sit(t,this._touchId);if(e){t.preventDefault();const i=this.value;this._lastPointerEvent=t,this._updateValueFromPosition(e),i!=this.value&amp;&amp;this._emitInputEvent()}}},this._pointerUp=t=&gt;{&quot;pointer&quot;===this._isSliding&amp;&amp;(!Cit(t)||&quot;number&quot;!=typeof this._touchId||kit(t.changedTouches,this._touchId))&amp;&amp;(t.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&amp;&amp;!this.disabled&amp;&amp;this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=&gt;{this._lastPointerEvent&amp;&amp;this._pointerUp(this._lastPointerEvent)},this._document=o,this.tabIndex=parseInt(s)||0,r.runOutsideAngular(()=&gt;{const e=t.nativeElement;e.addEventListener(&quot;mousedown&quot;,this._pointerDown,_it),e.addEventListener(&quot;touchstart&quot;,this._pointerDown,_it)})}get invert(){return this._invert}set invert(t){this._invert=Rf(t)}get max(){return this._max}set max(t){this._max=Ff(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Ff(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Ff(t,this._step),this._step%1!=0&amp;&amp;(this._roundToDecimal=this._step.toString().split(&quot;.&quot;).pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Rf(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval=&quot;auto&quot;===t?&quot;auto&quot;:&quot;number&quot;==typeof t||&quot;string&quot;==typeof t?Ff(t,this._tickInterval):0}get value(){return null===this._value&amp;&amp;(this.value=this._min),this._value}set value(t){if(t!==this._value){let e=Ff(t,0);this._roundToDecimal&amp;&amp;e!==this.min&amp;&amp;e!==this.max&amp;&amp;(e=parseFloat(e.toFixed(this._roundToDecimal))),this._value=e,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Rf(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&amp;&amp;this.value&amp;&amp;this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&amp;&amp;!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const t=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+&quot;, 1, 1&quot;;return{transform:`translate${this.vertical?&quot;Y&quot;:&quot;X&quot;}(${this._shouldInvertMouseCoords()?&quot;-&quot;:&quot;&quot;}${this._getThumbGap()}px) scale3d(${t})`}}_getTrackFillStyles(){const t=this.percent,e=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?&quot;Y&quot;:&quot;X&quot;}(${this._shouldInvertMouseCoords()?&quot;&quot;:&quot;-&quot;}${this._getThumbGap()}px) scale3d(${e})`,display:0===t?&quot;none&quot;:&quot;&quot;}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?&quot;Y&quot;:&quot;X&quot;}(${this.vertical||&quot;rtl&quot;!=this._getDirection()?&quot;-&quot;:&quot;&quot;}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,e={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?&quot;Y&quot;:&quot;X&quot;}(${this.vertical||&quot;rtl&quot;!=this._getDirection()?&quot;&quot;:&quot;-&quot;}${t/2}%)${this.vertical||&quot;rtl&quot;!=this._getDirection()?&quot;&quot;:&quot; rotate(180deg)&quot;}`};if(this._isMinValue()&amp;&amp;this._getThumbGap()){const t=this._shouldInvertAxis();let i;i=this.vertical?t?&quot;Bottom&quot;:&quot;Top&quot;:t?&quot;Right&quot;:&quot;Left&quot;,e[`padding${i}`]=`${this._getThumbGap()}px`}return e}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?&quot;Y&quot;:&quot;X&quot;}(-${100*((&quot;rtl&quot;!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return&quot;rtl&quot;!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&amp;&amp;&quot;rtl&quot;==this._dir.value?&quot;rtl&quot;:&quot;ltr&quot;}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=&gt;{this._isActive=!!t&amp;&amp;&quot;keyboard&quot;!==t,this._changeDetectorRef.detectChanges()}),this._dir&amp;&amp;(this._dirChangeSubscription=this._dir.change.subscribe(()=&gt;{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener(&quot;mousedown&quot;,this._pointerDown,_it),t.removeEventListener(&quot;touchstart&quot;,this._pointerDown,_it),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||tf(t)||this._isSliding&amp;&amp;&quot;keyboard&quot;!==this._isSliding)return;const e=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment(&quot;rtl&quot;==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment(&quot;rtl&quot;==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}e!=this.value&amp;&amp;(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=&quot;keyboard&quot;,t.preventDefault()}_onKeyup(){&quot;keyboard&quot;===this._isSliding&amp;&amp;(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const e=this._document,i=Cit(t),n=i?&quot;touchend&quot;:&quot;mouseup&quot;;e.addEventListener(i?&quot;touchmove&quot;:&quot;mousemove&quot;,this._pointerMove,_it),e.addEventListener(n,this._pointerUp,_it),i&amp;&amp;e.addEventListener(&quot;touchcancel&quot;,this._pointerUp,_it);const s=this._getWindow();void 0!==s&amp;&amp;s&amp;&amp;s.addEventListener(&quot;blur&quot;,this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener(&quot;mousemove&quot;,this._pointerMove,_it),t.removeEventListener(&quot;mouseup&quot;,this._pointerUp,_it),t.removeEventListener(&quot;touchmove&quot;,this._pointerMove,_it),t.removeEventListener(&quot;touchend&quot;,this._pointerUp,_it),t.removeEventListener(&quot;touchcancel&quot;,this._pointerUp,_it);const e=this._getWindow();void 0!==e&amp;&amp;e&amp;&amp;e.removeEventListener(&quot;blur&quot;,this._windowBlur)}_increment(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let e=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&amp;&amp;(e=1-e),0===e)this.value=this.min;else if(1===e)this.value=this.max;else{const t=this._calculateValue(e),i=Math.round((t-this.min)/this.step)*this.step+this.min;this.value=this._clamp(i,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&amp;&amp;this._sliderDimensions)if(&quot;auto&quot;==this.tickInterval){let t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,e=Math.ceil(30/(t*this.step/(this.max-this.min)))*this.step;this._tickIntervalPercent=e/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(t=this.value){let e=new yit;return e.source=this,e.value=t,e}_calculatePercentage(t){return((t||0)-this.min)/(this.max-this.min)}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,e=0,i=1){return Math.max(e,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Nm),Da(Ec),Da(kg,8),Yi(&quot;tabindex&quot;),Da(iu),Da(Fu),Da(yb,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-slider&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(vit,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._sliderWrapper=t.first)}},hostAttrs:[&quot;role&quot;,&quot;slider&quot;,1,&quot;mat-slider&quot;,&quot;mat-focus-indicator&quot;],hostVars:29,hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;focus&quot;,function(){return e._onFocus()})(&quot;blur&quot;,function(){return e._onBlur()})(&quot;keydown&quot;,function(t){return e._onKeydown(t)})(&quot;keyup&quot;,function(){return e._onKeyup()})(&quot;mouseenter&quot;,function(){return e._onMouseenter()})(&quot;selectstart&quot;,function(t){return t.preventDefault()}),2&amp;t&amp;&amp;(Tl(&quot;tabIndex&quot;,e.tabIndex),ea(&quot;aria-disabled&quot;,e.disabled)(&quot;aria-valuemax&quot;,e.max)(&quot;aria-valuemin&quot;,e.min)(&quot;aria-valuenow&quot;,e.value)(&quot;aria-valuetext&quot;,null==e.valueText?e.displayValue:e.valueText)(&quot;aria-orientation&quot;,e.vertical?&quot;vertical&quot;:&quot;horizontal&quot;),cl(&quot;mat-slider-disabled&quot;,e.disabled)(&quot;mat-slider-has-ticks&quot;,e.tickInterval)(&quot;mat-slider-horizontal&quot;,!e.vertical)(&quot;mat-slider-axis-inverted&quot;,e._shouldInvertAxis())(&quot;mat-slider-invert-mouse-coords&quot;,e._shouldInvertMouseCoords())(&quot;mat-slider-sliding&quot;,e._isSliding)(&quot;mat-slider-thumb-label-showing&quot;,e.thumbLabel)(&quot;mat-slider-vertical&quot;,e.vertical)(&quot;mat-slider-min-value&quot;,e._isMinValue())(&quot;mat-slider-hide-last-tick&quot;,e.disabled||e._isMinValue()&amp;&amp;e._getThumbGap()&amp;&amp;e._shouldInvertAxis())(&quot;_mat-animation-noopable&quot;,&quot;NoopAnimations&quot;===e._animationMode))},inputs:{disabled:&quot;disabled&quot;,color:&quot;color&quot;,tabIndex:&quot;tabIndex&quot;,invert:&quot;invert&quot;,max:&quot;max&quot;,min:&quot;min&quot;,step:&quot;step&quot;,thumbLabel:&quot;thumbLabel&quot;,tickInterval:&quot;tickInterval&quot;,value:&quot;value&quot;,vertical:&quot;vertical&quot;,displayWith:&quot;displayWith&quot;,valueText:&quot;valueText&quot;},outputs:{change:&quot;change&quot;,input:&quot;input&quot;,valueChange:&quot;valueChange&quot;},exportAs:[&quot;matSlider&quot;],features:[Wl([bit]),$o],decls:13,vars:6,consts:[[1,&quot;mat-slider-wrapper&quot;],[&quot;sliderWrapper&quot;,&quot;&quot;],[1,&quot;mat-slider-track-wrapper&quot;],[1,&quot;mat-slider-track-background&quot;,3,&quot;ngStyle&quot;],[1,&quot;mat-slider-track-fill&quot;,3,&quot;ngStyle&quot;],[1,&quot;mat-slider-ticks-container&quot;,3,&quot;ngStyle&quot;],[1,&quot;mat-slider-ticks&quot;,3,&quot;ngStyle&quot;],[1,&quot;mat-slider-thumb-container&quot;,3,&quot;ngStyle&quot;],[1,&quot;mat-slider-focus-ring&quot;],[1,&quot;mat-slider-thumb&quot;],[1,&quot;mat-slider-thumb-label&quot;],[1,&quot;mat-slider-thumb-label-text&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0,1),Ra(2,&quot;div&quot;,2),La(3,&quot;div&quot;,3),La(4,&quot;div&quot;,4),Fa(),Ra(5,&quot;div&quot;,5),La(6,&quot;div&quot;,6),Fa(),Ra(7,&quot;div&quot;,7),La(8,&quot;div&quot;,8),La(9,&quot;div&quot;,9),Ra(10,&quot;div&quot;,10),Ra(11,&quot;span&quot;,11),xl(12),Fa(),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(3),Oa(&quot;ngStyle&quot;,e._getTrackBackgroundStyles()),Sr(1),Oa(&quot;ngStyle&quot;,e._getTrackFillStyles()),Sr(1),Oa(&quot;ngStyle&quot;,e._getTicksContainerStyles()),Sr(1),Oa(&quot;ngStyle&quot;,e._getTicksStyles()),Sr(1),Oa(&quot;ngStyle&quot;,e._getThumbContainerStyles()),Sr(5),wl(e.displayValue))},directives:[qd],styles:[&#39;.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:&quot;&quot;;position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n&#39;],encapsulation:2,changeDetection:0}),t})();function Cit(t){return&quot;t&quot;===t.type[0]}function Sit(t,e){let i;return i=Cit(t)?&quot;number&quot;==typeof e?kit(t.touches,e)||kit(t.changedTouches,e):t.touches[0]||t.changedTouches[0]:t,i?{x:i.clientX,y:i.clientY}:void 0}function kit(t,e){for(let i=0;i&lt;t.length;i++)if(t[i].identifier===e)return t[i]}let Eit=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[ip,Fb],Fb]}),t})();const Mit=&quot;anais-seen-glitters&quot;;let Tit=(()=&gt;{class t{constructor(){this.glitters=[];try{this.glitters=JSON.parse(localStorage.getItem(Mit))||[]}catch(t){}}viewItem(t){this.glitters.includes(t)||(this.glitters.push(t),localStorage.setItem(Mit,JSON.stringify(this.glitters)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function Iit(t,e){if(1&amp;t&amp;&amp;La(0,&quot;div&quot;,1),2&amp;t){const t=e.$implicit;ll(&quot;left&quot;,t.x)(&quot;top&quot;,t.y),Oa(&quot;ngClass&quot;,&quot;glitter__star glitter__star--delay-&quot;+t.delay)}}const Dit=[&quot;*&quot;],Oit=[200,800,1400,2e3,2600],Pit=new Date((new Date).setMonth((new Date).getMonth()-2));let Rit=(()=&gt;{class t{constructor(t,e,i){this.changeDetectorRef=t,this.elementRef=e,this.glitterService=i,this.stars=[],this.active=!1,this.clickListener=()=&gt;{this.stopGlitter()}}ngOnInit(){this.changeDetectorRef.detach(),this.active=!this.glitterService.glitters.includes(this.gid)&amp;&amp;(!this.date||new Date(this.date)&gt;Pit),this.elementRef.nativeElement.addEventListener(&quot;click&quot;,this.clickListener,!0),this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener(&quot;click&quot;,this.clickListener,!0)}ngAfterViewInit(){if(!this.active)return;let t;if(this.width&amp;&amp;this.height)t={clientWidth:this.width,clientHeight:this.height};else{if(t=this.elementRef.nativeElement.children[0],!t)throw new Error(`Missing child element for glitter ${this.gid}`);for(;0===t.clientHeight||0===t.clientWidth;)if(t=t.children[0],!t)return}const e=.05*t.clientWidth;this.minX=e,this.maxX=t.clientWidth-16-e;const i=.05*t.clientHeight;this.minY=i,this.maxY=t.clientHeight-16-i,Oit.forEach(t=&gt;{setTimeout(()=&gt;{this.createStar(t),this.changeDetectorRef.detectChanges()},t)})}createStar(t){this.stars.push({x:`${this.minX+Math.random()*(this.maxX-this.minX)}px`,y:`${this.minY+Math.random()*(this.maxY-this.minY)}px`,delay:t})}stopGlitter(){!this.active||(this.glitterService.viewItem(this.gid),this.stars=[],this.changeDetectorRef.detectChanges())}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(ec),Da(Tit))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-glitter&quot;]],inputs:{gid:&quot;gid&quot;,date:&quot;date&quot;,width:&quot;width&quot;,height:&quot;height&quot;},ngContentSelectors:Dit,decls:2,vars:1,consts:[[3,&quot;ngClass&quot;,&quot;left&quot;,&quot;top&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[3,&quot;ngClass&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Qa(0),ra(1,Iit,1,5,&quot;div&quot;,0)),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngForOf&quot;,e.stars))},directives:[Bd,Fd],styles:[&#39;[_nghost-%COMP%]{position:relative;display:block;line-height:0}.glitter__star[_ngcontent-%COMP%]{content:&quot; &quot;;position:absolute;background-image:url(glitter-star.76372dc0eb5e11c5d423.png);background-position:center;height:16px;width:16px;-webkit-animation:glitter 3s linear infinite;animation:glitter 3s linear infinite;opacity:0;z-index:1;pointer-events:none;touch-action:none}.glitter__star--delay-200[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.glitter__star--delay-800[_ngcontent-%COMP%]{-webkit-animation-delay:.8s;animation-delay:.8s}.glitter__star--delay-1400[_ngcontent-%COMP%]{-webkit-animation-delay:1.4s;animation-delay:1.4s}.glitter__star--delay-2000[_ngcontent-%COMP%]{-webkit-animation-delay:2s;animation-delay:2s}.glitter__star--delay-2600[_ngcontent-%COMP%]{-webkit-animation-delay:2.6s;animation-delay:2.6s}@-webkit-keyframes glitter{0%{transform:scale(.3) rotate(0);opacity:0}25%{transform:scale(1) rotate(180deg);opacity:1}50%{transform:scale(.3) rotate(360deg);opacity:0}to{transform:scale(.3) rotate(0);opacity:0}}@keyframes glitter{0%{transform:scale(.3) rotate(0);opacity:0}25%{transform:scale(1) rotate(180deg);opacity:1}50%{transform:scale(.3) rotate(360deg);opacity:0}to{transform:scale(.3) rotate(0);opacity:0}}&#39;]}),t})(),Fit=(()=&gt;{class t{validate(t){return function(t){const e=parseInt(t.value,10);return!isNaN(e)&amp;&amp;e&gt;=-180&amp;&amp;e&lt;=180?null:{invalidLongitude:{value:t.value}}}(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[[&quot;&quot;,&quot;appLongitude&quot;,&quot;&quot;]],features:[Wl([{provide:Wy,useExisting:t,multi:!0}])]}),t})();var Lit=i(2114),Bit=i.n(Lit);let zit=(()=&gt;{class t{constructor(){this.sampleCode=&quot;const fs = require(&#39;fs&#39;)\nconst http = require(&#39;http&#39;)\n\n// Avec cette configuration, l&#39;URL \xe0 configurer dans l&#39;interface ANAIS est : http://localhost:3001/mysecret\nconst accessKey = &#39;mysecret&#39;\nconst listenPort = 3001\nconst geoPositionFilePath = &#39;/tmp/position.log&#39;\n\nconst headers = {\n  &#39;access-control-allow-origin&#39;: &#39;*&#39;\n}\nconst server = http.createServer(async (req, res) =&gt; {\n  const key = req.url.slice(1)\n  if (key !== accessKey) {\n    res.writeHead(401, headers)\n    res.end(&#39;&#39;)\n  } else {\n    res.writeHead(200, headers)\n    // La r\xe9ponse doit \xeatre au format &#39;latitude,longitude&#39; en projection EPSG:4326\n    fs.createReadStream(geoPositionFilePath).pipe(res)\n  }\n})\n\nserver.listen(listenPort, &#39;127.0.0.1&#39;, () =&gt; {\n  console.log(&#39;GeoServer started on port %d&#39;, listenPort)\n})\n&quot;}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-geolocation-sample-server-dialog&quot;]],decls:19,vars:1,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;,1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;mat-typography&quot;],[&quot;href&quot;,&quot;https://nodejs.org/&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h2&quot;,0),xl(1,&quot; Configuration d&#39;un serveur HTTP pour exposer la position &quot;),La(2,&quot;div&quot;,1),Ra(3,&quot;button&quot;,2),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;mat-dialog-content&quot;,3),Ra(7,&quot;p&quot;),xl(8,&quot;Le code JavaScript ci-dessous est a ex\xe9cuter par &quot;),Ra(9,&quot;a&quot;,4),xl(10,&quot;Node.js&quot;),Fa(),xl(11,&quot; et permet de d\xe9marrer un serveur HTTP en local et exposer la position latitude et longitude \xe0 partir d&#39;un fichier.&quot;),Fa(),Ra(12,&quot;p&quot;),xl(13,&quot;Afin que l&#39;interface d&#39;ANAIS reconnaisse bien cette position, il faut que le serveur renvoie bien la position au format &quot;),Ra(14,&quot;em&quot;),xl(15,&quot;latitude,longitude&quot;),Fa(),xl(16,&quot; en projection EPSG:4326.&quot;),Fa(),Ra(17,&quot;pre&quot;),xl(18),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(18),wl(e.sampleCode))},directives:[sk,Ry,nk,hE,rk],styles:[&quot;&quot;]}),t})();class Nit extends pz{constructor(t){super(&quot;error&quot;),this.code=t.code,this.message=t.message}}var Vit=class extends s${constructor(t){super(),t=t||{},this.position_=null,this.transform_=CV,this.watchId_=void 0,this.addChangeListener(&quot;projection&quot;,this.handleProjectionChanged_),this.addChangeListener(&quot;tracking&quot;,this.handleTrackingChanged_),void 0!==t.projection&amp;&amp;this.setProjection(t.projection),void 0!==t.trackingOptions&amp;&amp;this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&amp;&amp;t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&amp;&amp;(this.transform_=PV(kV(&quot;EPSG:4326&quot;),t),this.position_&amp;&amp;this.set(&quot;position&quot;,this.transform_(this.position_)))}handleTrackingChanged_(){if(&quot;geolocation&quot;in navigator){const t=this.getTracking();t&amp;&amp;void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&amp;&amp;void 0!==this.watchId_&amp;&amp;(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(&quot;accuracy&quot;,e.accuracy),this.set(&quot;altitude&quot;,null===e.altitude?void 0:e.altitude),this.set(&quot;altitudeAccuracy&quot;,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(&quot;heading&quot;,null===e.heading?void 0:nV(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const i=this.transform_(this.position_);this.set(&quot;position&quot;,i),this.set(&quot;speed&quot;,null===e.speed?void 0:e.speed);const n=function(t,e,i,n){i=i||32;const s=[];for(let r=0;r&lt;i;++r)Az(s,bV(t,e,2*Math.PI*r/i,undefined));return s.push(s[0],s[1]),new T6(s,&quot;XY&quot;,[s.length])}(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(&quot;accuracyGeometry&quot;,n),this.changed()}positionError_(t){this.dispatchEvent(new Nit(t))}getAccuracy(){return this.get(&quot;accuracy&quot;)}getAccuracyGeometry(){return this.get(&quot;accuracyGeometry&quot;)||null}getAltitude(){return this.get(&quot;altitude&quot;)}getAltitudeAccuracy(){return this.get(&quot;altitudeAccuracy&quot;)}getHeading(){return this.get(&quot;heading&quot;)}getPosition(){return this.get(&quot;position&quot;)}getProjection(){return this.get(&quot;projection&quot;)}getSpeed(){return this.get(&quot;speed&quot;)}getTracking(){return this.get(&quot;tracking&quot;)}getTrackingOptions(){return this.get(&quot;trackingOptions&quot;)}setProjection(t){this.set(&quot;projection&quot;,kV(t))}setTracking(t){this.set(&quot;tracking&quot;,t)}setTrackingOptions(t){this.set(&quot;trackingOptions&quot;,t)}},$it=(()=&gt;(function(t){t.Browser=&quot;browser&quot;,t.FixedLocation=&quot;fixed_location&quot;,t.Server=&quot;server&quot;}($it||($it={})),$it))();class Uit{constructor(t={}){Object.assign(this,t)}}function jit(t){const e=_V(t);return e&lt;926?Math.round(100*e)/100+&quot; m&quot;:Math.round(e/1852*100)/100+&quot; Nq&quot;}function Hit(t,e){return Math.round(AV(DV(t),DV(e))/1852*100)/100}function Git(t,e){return`${qit(e[0]-t[0],e[1]-t[1])}\xb0 ${jit(new d6([t,e]))}`}function qit(t,e){return Math.round((450-180*Math.atan2(e,t)/Math.PI)%360)}let Wit=(()=&gt;{class t{constructor(t){this.configService=t,this.enable$=new Qp(!1),this.source$=new Qp($it.Browser),this.serverURL$=new Qp(&quot;&quot;),this.fixedLocation$=new Qp(null),this.showBearing$=new Qp(!1),this.location$=new Qp(null),this.headingAngle$=new Qp(-1),this.retrievalError$=new Qp(&quot;&quot;),this.validConfiguration$=new Qp(!1),this.locationFetchInterval=2e3,this.location$.subscribe(t=&gt;{this.oldLocation&amp;&amp;t&amp;&amp;this.headingAngle$.next(qit(t.lon-this.oldLocation.lon,t.lat-this.oldLocation.lat)),this.oldLocation=t}),this.source$.subscribe(()=&gt;{this.oldLocation=null,this.headingAngle$.next(-1)}),this.geolocation=new Vit({trackingOptions:{enableHighAccuracy:!0},tracking:!1}),this.geolocation.on(&quot;change:position&quot;,()=&gt;{const t=this.geolocation.getPosition();this.location$.next(t?new CU(t[0],t[1]):null)}),QT([this.enable$,this.serverURL$,this.fixedLocation$,this.source$]).subscribe(([t,e,i,n])=&gt;{let s=!1;t&amp;&amp;n===$it.Server&amp;&amp;e?(this.fetchTimer&amp;&amp;window.clearInterval(this.fetchTimer),this.fetchTimer=window.setInterval(()=&gt;jp(this,void 0,void 0,function*(){if(this.serverURL$.value)try{this.location$.next(yield this.fetchLocation(this.serverURL$.value)),&quot;&quot;!==this.retrievalError$.value&amp;&amp;this.retrievalError$.next(&quot;&quot;)}catch(t){this.retrievalError$.next(t.message)}}),this.locationFetchInterval),s=!0):(window.clearInterval(this.fetchTimer),this.fetchTimer=null);const r=t&amp;&amp;n===$it.Browser;if(r&amp;&amp;!this.geolocation.getTracking()){const t=this.geolocation.getPosition();this.location$.next(t?new CU(t[0],t[1]):null)}if(r&amp;&amp;(s=!0),this.geolocation.setTracking(r),t&amp;&amp;n===$it.FixedLocation&amp;&amp;i){const{lon:t,lat:e}=Bit()(i);this.location$.next(new CU(t,e)),s=!0}t||&quot;&quot;!==this.retrievalError$.value&amp;&amp;this.retrievalError$.next(&quot;&quot;),this.validConfiguration$.next(s)}),this.loadConfig(),W(this.enable$,this.fixedLocation$,this.serverURL$,this.showBearing$,this.source$).subscribe(()=&gt;{this.configService.set(&quot;geolocationConfig&quot;,new Uit({enable:this.enable$.value,fixedLocation:this.fixedLocation$.value,serverURL:this.serverURL$.value,showBearing:this.showBearing$.value,source:this.source$.value}))})}loadConfig(){const t=this.configService.geolocationConfig;t&amp;&amp;(pU(t.enable)&amp;&amp;this.enable$.next(t.enable),pU(t.fixedLocation)&amp;&amp;this.fixedLocation$.next(t.fixedLocation),pU(t.serverURL)&amp;&amp;this.serverURL$.next(t.serverURL),pU(t.showBearing)&amp;&amp;this.showBearing$.next(t.showBearing),pU(t.source)&amp;&amp;this.source$.next(t.source))}fetchLocation(t){return jp(this,void 0,void 0,function*(){let e;try{e=yield fetch(t)}catch(n){throw new Error(`Impossible de r\xe9cup\xe9rer la position : ${n.message}. Le serveur est-il joignable ?`)}if(!e.ok)throw new Error(`Mauvais code retour (${e.status}). Une r\xe9ponse de type 200 est attendue.`);const i=yield e.text();try{const t=i.split(&quot;,&quot;);if(2!==t.length)throw new Error(`Mauvais format. R\xe9ponse re\xe7ue : &#39;${i.slice(0,50)}&#39;`);const e=parseFloat(t[0]),n=parseFloat(t[1]);if(isNaN(e))throw new Error(`La latitude &#39;${t[0]}&#39; n&#39;est pas un nombre valide`);if(isNaN(n))throw new Error(`La longitude &#39;${t[0]}&#39; n&#39;est pas un nombre valide`);return new CU(n,e)}catch(n){throw new Error(`Impossible de d\xe9coder la position : ${n.message}. Le format &quot;latitude,longitude&quot; est attendu.`)}})}updateEnable(t){this.enable$.next(t)}updateServerURL(t){this.serverURL$.next(t)}updateFixedLocation(t){this.fixedLocation$.next(t)}updateSource(t){this.source$.next(t),this.retrievalError$.next(&quot;&quot;)}toggleShowBearing(){this.showBearing$.next(!this.showBearing$.value)}}return t.\u0275fac=function(e){return new(e||t)(Mn(jU))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();function Yit(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-form-field&quot;,2),Ra(1,&quot;mat-label&quot;),xl(2,&quot;URL du serveur&quot;),Fa(),Ra(3,&quot;input&quot;,10),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za(2).serverURL=e}),Fa(),Fa(),Ra(4,&quot;button&quot;,11),Ha(&quot;click&quot;,function(){return Le(t),Za(2).saveServerLocation()}),xl(5,&quot; Enregistrer &quot;),Fa(),Ra(6,&quot;button&quot;,12),Ha(&quot;click&quot;,function(){return Le(t),Za(2).tryFetchLocation()}),xl(7,&quot; Tester l&#39;URL &quot;),Fa()}if(2&amp;t){const t=Za(2);Sr(3),Oa(&quot;ngModel&quot;,t.serverURL)(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value),Sr(1),Oa(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value),Sr(2),Oa(&quot;disabled&quot;,!t.serverURL||!t.geolocationLayerService.enable$.value)}}function Zit(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,13),xl(1),Fa(),Ra(2,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za(2).editMode=!0}),xl(3,&quot; \xc9diter &quot;),Fa()}if(2&amp;t){const t=Za(2);Sr(1),wl(t.serverURL||&quot;Aucune URL configur\xe9e&quot;),Sr(1),Oa(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value)}}function Kit(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,15),xl(1),Fa()),2&amp;t){const t=Za(2);Sr(1),Cl(&quot; &quot;,t.fetchAttempt,&quot; &quot;)}}function Xit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,16),Ra(1,&quot;mat-icon&quot;,2),xl(2,&quot;warning&quot;),Fa(),xl(3,&quot; Avec certaines versions de Firefox, il faut autoriser le chargement de contenu non s\xe9curis\xe9 (HTTP) afin d&#39;acc\xe9der \xe0 votre serveur en local. &quot;),Fa(),La(4,&quot;img&quot;,17))}function Qit(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,1),Ra(1,&quot;div&quot;,2),xl(2,&quot;URL du serveur :&quot;),Fa(),ra(3,Yit,8,4,&quot;ng-template&quot;,7),ra(4,Zit,4,2,&quot;ng-template&quot;,7),Fa(),ra(5,Kit,2,1,&quot;div&quot;,8),Ra(6,&quot;div&quot;),xl(7,&quot; Pour mettre en oeuvre un serveur qui expose une position \xe0 partir d&#39;un fichier local, veuillez vous r\xe9f\xe9rer \xe0 cet &quot;),Ra(8,&quot;button&quot;,9),Ha(&quot;click&quot;,function(){return Le(t),Za().openGeolocationSampleServerDialog()}),xl(9,&quot;exemple de serveur HTTP&quot;),Fa(),xl(10,&quot;. &quot;),La(11,&quot;br&quot;),xl(12,&quot; Sinon pour tester cette fonctionnalit\xe9, vous pouvez &quot;),Ra(13,&quot;button&quot;,9),Ha(&quot;click&quot;,function(){return Le(t),Za().useSampleServer()}),xl(14,&quot;utiliser l&#39;URL de test&quot;),Fa(),xl(15,&quot; qui simule une position GPS : &quot;),Ra(16,&quot;em&quot;),xl(17),Fa(),xl(18,&quot;. &quot;),Fa(),ra(19,Xit,5,0,&quot;ng-template&quot;,7)}if(2&amp;t){const t=Za();Sr(3),Oa(&quot;ngIf&quot;,t.editMode),Sr(1),Oa(&quot;ngIf&quot;,!t.editMode),Sr(1),Oa(&quot;ngIf&quot;,t.fetchAttempt),Sr(3),Oa(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value),Sr(5),Oa(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value),Sr(4),wl(t.sampleServerURL),Sr(2),Oa(&quot;ngIf&quot;,t.isFirefox)}}function Jit(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;Ce champ est n\xe9cessaire&quot;),Fa())}function tnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-form-field&quot;,2),Ra(1,&quot;input&quot;,18),Ha(&quot;accept&quot;,function(e){return Le(t),Za(2).onFixedLocationUpdate(e)})(&quot;complete&quot;,function(e){return Le(t),Za(2).onFixedLocationComplete(e)}),Fa(),ra(2,Jit,2,0,&quot;mat-error&quot;,19),Fa(),Ra(3,&quot;button&quot;,20),Ha(&quot;click&quot;,function(){return Le(t),Za(2).saveFixedLocation()}),xl(4,&quot; Enregistrer &quot;),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;formControl&quot;,t.fixedLocation)(&quot;imask&quot;,t.lonLatMask),Sr(1),Oa(&quot;ngIf&quot;,null==t.fixedLocation.errors?null:t.fixedLocation.errors.mandatory),Sr(1),Oa(&quot;disabled&quot;,!t.fixedLocation.valid||!t.geolocationLayerService.enable$.value)}}function ent(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,13),xl(1),Fa(),Ra(2,&quot;button&quot;,14),Ha(&quot;click&quot;,function(){return Le(t),Za(2).editMode=!0}),xl(3,&quot; \xc9diter &quot;),Fa()}if(2&amp;t){const t=Za(2);Sr(1),wl(t.fixedLocation.value||&quot;Aucune position configur\xe9e&quot;),Sr(1),Oa(&quot;disabled&quot;,!t.geolocationLayerService.enable$.value)}}function int(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,1),Ra(1,&quot;div&quot;,2),xl(2,&quot;Position :&quot;),Fa(),ra(3,tnt,5,4,&quot;ng-template&quot;,7),ra(4,ent,4,2,&quot;ng-template&quot;,7),Fa()),2&amp;t){const t=Za();Sr(3),Oa(&quot;ngIf&quot;,t.editMode),Sr(1),Oa(&quot;ngIf&quot;,!t.editMode)}}let nnt=(()=&gt;{class t{constructor(t,e){this.dialog=t,this.geolocationLayerService=e,this.editMode=!1,this.fixedLocation=new Wx(&quot;&quot;),this.fetchAttempt=null,this.sampleServerURL=&quot;https://sample-geoserver.anais.beta.gouv.fr/&quot;,this.lonLatMask={mask:&quot;LAT\xb0`MIN&#39;`MIN\&quot;NS LON\xb0`MIN&#39;`MIN\&quot;EW&quot;,lazy:!1,blocks:{LON:{mask:pD,from:0,to:180},LAT:{mask:pD,from:0,to:85},NS:{mask:_D,enum:[&quot;N&quot;,&quot;S&quot;]},EW:{mask:_D,enum:[&quot;E&quot;,&quot;W&quot;]},MIN:{mask:pD,from:0,to:59}}}}ngOnInit(){this.geolocationLayerService.enable$.subscribe(t=&gt;{t?this.fixedLocation.enable():this.fixedLocation.disable()}),this.geolocationLayerService.fixedLocation$.subscribe(t=&gt;{this.fixedLocation.setValue(null!=t?t:&quot;&quot;)}),this.geolocationLayerService.serverURL$.subscribe(t=&gt;{this.serverURL=t}),this.geolocationLayerService.source$.subscribe(t=&gt;{this.source=t,this.editMode=!1}),this.isFirefox=eW.getParser(window.navigator.userAgent).isBrowser(&quot;firefox&quot;)}updateEnable(t){this.geolocationLayerService.updateEnable(t)}updateSource(t){this.geolocationLayerService.updateSource(t)}saveServerLocation(){return jp(this,void 0,void 0,function*(){try{&quot;&quot;!==this.serverURL&amp;&amp;(yield this.geolocationLayerService.fetchLocation(this.serverURL)),this.geolocationLayerService.updateServerURL(this.serverURL),this.editMode=!1,this.fetchAttempt=&quot;&quot;}catch(t){this.fetchAttempt=t.message}})}tryFetchLocation(){return jp(this,void 0,void 0,function*(){try{const t=yield this.geolocationLayerService.fetchLocation(this.serverURL);this.fetchAttempt=`Position r\xe9cup\xe9r\xe9e: latitude=${t.lat}, longitude=${t.lon}`}catch(t){this.fetchAttempt=t.message}})}openGeolocationSampleServerDialog(){this.dialog.open(zit)}useSampleServer(){return jp(this,void 0,void 0,function*(){this.serverURL=this.sampleServerURL,yield this.saveServerLocation()})}saveFixedLocation(){return jp(this,void 0,void 0,function*(){this.fixedLocation.valid&amp;&amp;this.geolocationLayerService.updateFixedLocation(this.fixedLocation.value),this.editMode=!1})}onFixedLocationUpdate(t){this.fixedLocation.setErrors({mandatory:!0})}onFixedLocationComplete(t){try{Bit()(t),this.fixedLocation.setErrors({mandatory:null}),this.fixedLocation.setValue(t,{emitEvent:!1})}catch(e){}}}return t.\u0275fac=function(e){return new(e||t)(Da(ek),Da(Wit))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-geolocation-settings&quot;]],decls:14,vars:5,consts:[[&quot;color&quot;,&quot;primary&quot;,1,&quot;d-block&quot;,&quot;mt-2&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[1,&quot;d-flex-center&quot;,&quot;mt-2&quot;],[1,&quot;mr-2&quot;],[3,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;value&quot;,&quot;browser&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;value&quot;,&quot;server&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;value&quot;,&quot;fixed_location&quot;],[3,&quot;ngIf&quot;],[&quot;class&quot;,&quot;mt-1&quot;,4,&quot;ngIf&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,1,&quot;text-link&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;matInput&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;disabled&quot;,&quot;ngModelChange&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Enregistrer l&#39;URL du serveur&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Tester la r\xe9cup\xe9ration de cette URL&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[2,&quot;min-width&quot;,&quot;180px&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,1,&quot;ml-2&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[1,&quot;mt-1&quot;],[1,&quot;firefox-warning-geolocation&quot;],[&quot;src&quot;,&quot;assets/images/help-firefox-mixed-content-tutorial.png&quot;,&quot;alt&quot;,&quot;Configuration Firefox&quot;,1,&quot;ml-3&quot;],[&quot;matInput&quot;,&quot;&quot;,3,&quot;formControl&quot;,&quot;imask&quot;,&quot;accept&quot;,&quot;complete&quot;],[4,&quot;ngIf&quot;],[&quot;type&quot;,&quot;submit&quot;,&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Enregistrer&quot;,3,&quot;disabled&quot;,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-slide-toggle&quot;,0),Ha(&quot;ngModelChange&quot;,function(t){return e.updateEnable(t)}),xl(1,&quot; Afficher la position GPS sur la carte\n&quot;),Fa(),Ra(2,&quot;div&quot;,1),Ra(3,&quot;label&quot;,2),xl(4,&quot;Source :&quot;),Fa(),Ra(5,&quot;mat-radio-group&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.updateSource(t)}),Ra(6,&quot;mat-radio-button&quot;,4),xl(7,&quot;API Navigateur&quot;),Fa(),Ra(8,&quot;mat-radio-button&quot;,5),xl(9,&quot;Serveur&quot;),Fa(),Ra(10,&quot;mat-radio-button&quot;,6),xl(11,&quot;Point de r\xe9f\xe9rence&quot;),Fa(),Fa(),Fa(),ra(12,Qit,20,7,&quot;ng-template&quot;,7),ra(13,int,5,2,&quot;ng-template&quot;,7)),2&amp;t&amp;&amp;(Oa(&quot;ngModel&quot;,e.geolocationLayerService.enable$.value),Sr(5),Oa(&quot;ngModel&quot;,e.geolocationLayerService.source$.value)(&quot;disabled&quot;,!e.geolocationLayerService.enable$.value),Sr(7),Oa(&quot;ngIf&quot;,&quot;server&quot;===e.source),Sr(1),Oa(&quot;ngIf&quot;,&quot;fixed_location&quot;===e.source))},directives:[QJ,wx,iw,ZW,JW,Nd,Ry,gC,oC,kC,Hy,hE,cw,MD,tC],styles:[&quot;.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.firefox-warning-geolocation[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9em;color:#d41a1a}.text-link[_ngcontent-%COMP%]{padding:0 8px;line-height:2em}&quot;]}),t})();function snt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,20),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.value),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function rnt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-chip&quot;,25),xl(1,&quot;Restriction active&quot;),Fa())}function ont(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-chip-list&quot;,21),ra(1,rnt,2,0,&quot;mat-chip&quot;,22),Fa(),Ra(2,&quot;button&quot;,23),Ha(&quot;click&quot;,function(){return Le(t),Za(2).mapRestrictionService.removeArea()}),Ra(3,&quot;mat-icon&quot;),xl(4,&quot;delete&quot;),Fa(),Fa(),Ra(5,&quot;button&quot;,24),Ha(&quot;click&quot;,function(){return Le(t),Za(2).mapRestrictionService.startSelectingArea()}),Ra(6,&quot;mat-icon&quot;),xl(7,&quot;edit&quot;),Fa(),Fa()}if(2&amp;t){const t=Za(2);Sr(1),Oa(&quot;ngIf&quot;,t.mapConfigService.restrictedAreas$.value)}}function ant(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,26),Ha(&quot;click&quot;,function(){return Le(t),Za(2).mapRestrictionService.startSelectingArea()}),xl(1,&quot; S\xe9lectionner une zone &quot;),Fa()}}function lnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;h5&quot;),xl(1,&quot;Intervalle de rafraichissement des derni\xe8res positions des navires&quot;),Fa(),Ra(2,&quot;div&quot;),xl(3,&quot;En vue temps r\xe9el, les positions des navires sont rafraichies selon cet intervalle.&quot;),Fa(),Ra(4,&quot;mat-form-field&quot;),Ra(5,&quot;mat-select&quot;,5),Ha(&quot;ngModelChange&quot;,function(e){return Le(t),Za().mapConfigService.updateShipRefreshInterval(e)}),ra(6,snt,2,2,&quot;mat-option&quot;,6),Fa(),Fa(),Ra(7,&quot;h5&quot;),xl(8,&quot;Restriction de la carte&quot;),Fa(),Ra(9,&quot;p&quot;),xl(10,&quot; Cette option permet de limiter la r\xe9cup\xe9ration des navires \xe0 une zone de la carte. Notez que la zone restreinte va d\xe9signer les tuiles de donn\xe9es \xe0 charger. Il est donc normal que la zone charg\xe9e soit un peu plus grande que la zone choisie. &quot;),Fa(),Ra(11,&quot;div&quot;,18),ra(12,ont,8,1,&quot;ng-template&quot;,4),ra(13,ant,2,0,&quot;button&quot;,19),Fa()}if(2&amp;t){const t=Za();Sr(5),Oa(&quot;ngModel&quot;,t.mapConfigService.shipRefreshInterval$.value),Sr(1),Oa(&quot;ngForOf&quot;,t.shipRefreshIntervals),Sr(6),Oa(&quot;ngIf&quot;,t.mapConfigService.restrictedAreas$.value),Sr(1),Oa(&quot;ngIf&quot;,!t.mapConfigService.restrictedAreas$.value)}}function cnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,20),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.key),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function hnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,20),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t.key),Sr(1),Cl(&quot; &quot;,t.label,&quot; &quot;)}}function unt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;),xl(1,&quot;La longitude est invalide&quot;),Fa())}const dnt=[{label:&quot;30 secondes&quot;,value:3e4},{label:&quot;1 minute&quot;,value:6e4},{label:&quot;2 minutes&quot;,value:12e4},{label:&quot;5 minutes&quot;,value:3e5},{label:&quot;10 minutes&quot;,value:6e5},{label:&quot;20 minutes&quot;,value:12e5},{label:&quot;D\xe9sactiv\xe9&quot;,value:2147483647}];let pnt=(()=&gt;{class t{constructor(t,e,i){this.configService=t,this.mapConfigService=e,this.mapRestrictionService=i,this.shipRefreshIntervals=dnt,this.availableTimeRanges=IU.filter(t=&gt;!t.isCustom),this.coordinateSystems=$$}}return t.\u0275fac=function(e){return new(e||t)(Da(jU),Da(HU),Da(Ait))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-settings-dialog&quot;]],decls:93,vars:23,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;,1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[&quot;color&quot;,&quot;primary&quot;,1,&quot;d-block&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;ngIf&quot;],[3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;my-3&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Ce param\xe8tre permet d&#39;afficher des hexagones plus petits lors de la s\xe9lection de zones.&quot;,1,&quot;d-block&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Ce param\xe8tre permet d&#39;afficher les traces des navires traduites en arcs dirig\xe9s dans la grille hexagonale.&quot;,1,&quot;d-block&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[1,&quot;d-flex-center&quot;,&quot;my-2&quot;],[1,&quot;mr-2&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;thumbLabel&quot;,&quot;true&quot;,2,&quot;width&quot;,&quot;300px&quot;,3,&quot;min&quot;,&quot;max&quot;,&quot;step&quot;,&quot;tickInterval&quot;,&quot;value&quot;,&quot;change&quot;],[&quot;gid&quot;,&quot;coordinate-system&quot;,&quot;date&quot;,&quot;2021-10-13&quot;],[1,&quot;d-inline&quot;],[&quot;type&quot;,&quot;number&quot;,&quot;matInput&quot;,&quot;&quot;,&quot;appLongitude&quot;,&quot;&quot;,3,&quot;ngModel&quot;,&quot;ngModelChange&quot;],[&quot;longitudeCenter&quot;,&quot;ngModel&quot;],[4,&quot;ngIf&quot;],[1,&quot;d-flex-center&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,3,&quot;click&quot;,4,&quot;ngIf&quot;],[3,&quot;value&quot;],[1,&quot;d-inline&quot;,&quot;mr-2&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;selected&quot;,&quot;&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;warn&quot;,&quot;title&quot;,&quot;Supprimer la zone de restriction&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Mettre \xe0 jour la zone de restriction&quot;,3,&quot;click&quot;],[&quot;color&quot;,&quot;primary&quot;,&quot;selected&quot;,&quot;&quot;],[&quot;mat-raised-button&quot;,&quot;&quot;,3,&quot;click&quot;]],template:function(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot; Param\xe8tres g\xe9n\xe9raux &quot;),La(2,&quot;div&quot;,1),Ra(3,&quot;button&quot;,2),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;),Ra(7,&quot;h3&quot;),xl(8,&quot;Bande passante&quot;),Fa(),Ra(9,&quot;p&quot;),xl(10,&quot; Ces param\xe8tres peuvent \xeatre utilis\xe9s pour r\xe9duire la bande passante utilis\xe9e quand le d\xe9bit de la connexion internet est faible (par exemple dans un avion ou un navire). &quot;),Fa(),Ra(11,&quot;h5&quot;),xl(12,&quot;Chargement manuel&quot;),Fa(),Ra(13,&quot;p&quot;),xl(14,&quot; Par d\xe9faut, les donn\xe9es navires et a\xe9ronefs sont charg\xe9s par tuiles \xe0 chaque d\xe9placement de carte, et rafraichis r\xe9guli\xe8rement. Le chargement manuel d\xe9sactive la r\xe9cup\xe9ration automatique des donn\xe9es et permet \xe0 l&#39;utilisateur de d\xe9clencher manuellement cette r\xe9cup\xe9ration. &quot;),Fa(),Ra(15,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateManualMapFetch(t)}),xl(16,&quot; Chargement manuel actif &quot;),Fa(),ra(17,lnt,14,4,&quot;ng-template&quot;,4),Ra(18,&quot;h5&quot;),xl(19,&quot;P\xe9riode de temps par d\xe9faut&quot;),Fa(),Ra(20,&quot;div&quot;),xl(21,&quot;Cette p\xe9riode de temps permet d&#39;afficher l&#39;historique des traces et des alertes affich\xe9 lorsque l&#39;on visualise le d\xe9tail d&#39;un navire.&quot;),Fa(),Ra(22,&quot;mat-form-field&quot;),Ra(23,&quot;mat-select&quot;,5),Ha(&quot;ngModelChange&quot;,function(t){return e.configService.set(&quot;defaultTimeRange&quot;,t)}),ra(24,cnt,2,2,&quot;mat-option&quot;,6),Fa(),Fa(),Ra(25,&quot;h5&quot;),xl(26,&quot;Limite de zoom minimum&quot;),Fa(),Ra(27,&quot;div&quot;),xl(28,&quot;Par d\xe9faut le zoom minimum est limit\xe9 afin de r\xe9duire la consommation r\xe9seau et m\xe9moire de l&#39;application. Si vous d\xe9sactivez cette option, vous pourrez alors d\xe9zoomer mais cela aura un co\xfbt en termes de bande passante et de capacit\xe9s de traitement (CPU et m\xe9moire). Il se peut que votre navigateur se bloque si vous n&#39;avez pas assez de m\xe9moire !&quot;),Fa(),Ra(29,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateLimitMinimumZoom(t)}),xl(30,&quot; Limite de zoom active &quot;),Fa(),La(31,&quot;mat-divider&quot;,7),Ra(32,&quot;h3&quot;),xl(33,&quot;Affichage&quot;),Fa(),Ra(34,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updatePreloadMapTiles(t)}),Ra(35,&quot;div&quot;),xl(36,&quot;Pr\xe9charger les tuiles du fond de carte (affichage plus rapide mais bande passante x2 environ)&quot;),Fa(),Fa(),Ra(37,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateZoomOnLocationEvents(t)}),xl(38,&quot; Zoomer sur la carte lors d&#39;\xe9v\xe9nements de localisation &quot;),Fa(),Ra(39,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateHidePositionsInLowZooms(t)}),xl(40,&quot; Masquer les points des traces quand le zoom est bas &quot;),Fa(),Ra(41,&quot;mat-slide-toggle&quot;,8),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateHighHexagonsResolution(t)}),xl(42,&quot; Utiliser des hexagones de haute r\xe9solution &quot;),Fa(),Ra(43,&quot;mat-slide-toggle&quot;,9),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateDebugH3Trace(t)}),xl(44,&quot; Voir l&#39;analyse des traces des navires dans la grille hexagonale (fonction de Debug) &quot;),Fa(),Ra(45,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateShowMarineTrafficPhotos(t)}),xl(46,&quot; Afficher les photos de Marine Traffic dans la fiche navire &quot;),Fa(),Ra(47,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateShowMarineTrafficDeparture(t)}),xl(48,&quot; Afficher le bouton pour r\xe9cup\xe9rer la provenance de Marine Traffic &quot;),Fa(),Ra(49,&quot;div&quot;,10),Ra(50,&quot;label&quot;,11),xl(51,&quot;Transparence des \xe9tiquettes et infobulles :&quot;),Fa(),xl(52,&quot; Transparent &quot;),Ra(53,&quot;mat-slider&quot;,12),Ha(&quot;change&quot;,function(t){return e.mapConfigService.updateTooltipsOpacity(t.value)}),Fa(),xl(54,&quot; Opaque &quot;),Fa(),Ra(55,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateUseUTCDates(t)}),xl(56,&quot; Afficher les dates en UTC &quot;),Fa(),Ra(57,&quot;app-glitter&quot;,13),Ra(58,&quot;div&quot;,14),Ra(59,&quot;label&quot;,11),xl(60,&quot;Syst\xe8me de coordonn\xe9es : &quot;),Fa(),Ra(61,&quot;mat-form-field&quot;),Ra(62,&quot;mat-select&quot;,5),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateCoordinateSystem(t)}),ra(63,hnt,2,2,&quot;mat-option&quot;,6),Fa(),Fa(),Fa(),Fa(),Ra(64,&quot;h5&quot;),xl(65,&quot;D\xe9calage de longitude&quot;),Fa(),Ra(66,&quot;div&quot;),xl(67,&quot; Par d\xe9faut, les donn\xe9es sont affich\xe9es de la longitude -180 \xe0 la longitude +180. Or cet affichage occasionne une coupure de l&#39;affichage au milieu de l&#39;oc\xe9an pacifique. Si vous travaillez r\xe9guli\xe8rement sur cette zone, alors pour pouvez d\xe9caler le centre afin de d\xe9placer la coupure \xe0 un endroit moins important pour vous. &quot;),Fa(),Ra(68,&quot;mat-form-field&quot;),Ra(69,&quot;mat-label&quot;),xl(70,&quot;Longitude&quot;),Fa(),Ra(71,&quot;input&quot;,15,16),Ha(&quot;ngModelChange&quot;,function(t){return e.mapConfigService.updateLongitudeCenter(t)}),Fa(),ra(73,unt,2,0,&quot;mat-error&quot;,17),Fa(),La(74,&quot;mat-divider&quot;,7),Ra(75,&quot;h3&quot;),xl(76,&quot;G\xe9olocalisation&quot;),Fa(),Ra(77,&quot;div&quot;),xl(78,&quot;L&#39;option ci-dessous permet d&#39;afficher une position en temps-r\xe9el sur la carte, en utilisant un point de r\xe9f\xe9rence, l&#39;API navigateur, ou bien un serveur HTTP en local.&quot;),Fa(),Ra(79,&quot;div&quot;),xl(80,&quot;Si vous \xeates dans un avion ou dans un navire, cette option permet par exemple d&#39;afficher la position de l&#39;avion ou du navire embarquant ANAIS.&quot;),Fa(),Ra(81,&quot;div&quot;),xl(82,&quot;Notez bien que cette information de position est utilis\xe9e localement pour \xeatre affich\xe9e sur la carte.&quot;),Fa(),Ra(83,&quot;div&quot;),xl(84,&quot;Cette position n&#39;est &quot;),Ra(85,&quot;strong&quot;),xl(86,&quot;jamais&quot;),Fa(),xl(87,&quot; envoy\xe9e sur internet (serveur ANAIS ou autre)&quot;),Fa(),La(88,&quot;app-geolocation-settings&quot;),Ra(89,&quot;h3&quot;),xl(90,&quot;Zone dangereuse&quot;),Fa(),Ra(91,&quot;mat-slide-toggle&quot;,3),Ha(&quot;ngModelChange&quot;,function(){return e.mapConfigService.toggleEnableWebsockets()}),xl(92,&quot; D\xe9sactiver les websockets &quot;),Fa(),Fa()),2&amp;t){const t=oa(72);Sr(15),Oa(&quot;ngModel&quot;,e.mapConfigService.manualMapFetch$.value),Sr(2),Oa(&quot;ngIf&quot;,!e.mapConfigService.manualMapFetch$.value),Sr(6),Oa(&quot;ngModel&quot;,e.configService.defaultTimeRange),Sr(1),Oa(&quot;ngForOf&quot;,e.availableTimeRanges),Sr(5),Oa(&quot;ngModel&quot;,e.mapConfigService.limitMinimumZoom$.value),Sr(5),Oa(&quot;ngModel&quot;,e.mapConfigService.preloadMapTiles$.value),Sr(3),Oa(&quot;ngModel&quot;,e.mapConfigService.zoomOnLocationEvents$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.hidePositionsInLowZooms$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.highHexagonsResolution$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.debugH3Trace$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.showMarineTrafficPhotos$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.showMarineTrafficDeparture$.value),Sr(6),Oa(&quot;min&quot;,0)(&quot;max&quot;,1)(&quot;step&quot;,.1)(&quot;tickInterval&quot;,1)(&quot;value&quot;,e.mapConfigService.tooltipsOpacity$.value),Sr(2),Oa(&quot;ngModel&quot;,e.mapConfigService.useUTCDates$.value),Sr(7),Oa(&quot;ngModel&quot;,e.mapConfigService.coordinateSystem$.value),Sr(1),Oa(&quot;ngForOf&quot;,e.coordinateSystems),Sr(8),Oa(&quot;ngModel&quot;,e.mapConfigService.longitudeCenter$.value),Sr(2),Oa(&quot;ngIf&quot;,t.invalid&amp;&amp;t.errors.invalidLongitude),Sr(18),Oa(&quot;ngModel&quot;,!e.mapConfigService.enableWebsockets$.value)}},directives:[sk,Ry,nk,hE,QJ,wx,iw,Nd,gC,qT,Bd,Pq,wit,Rit,oC,rw,kC,Hy,Fit,nnt,Sy,HQ,zQ,tC],styles:[&quot;&quot;]}),t})(),fnt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.titleService=t,this.router=e,this.dialog=i,this.mapService=n,this.routeService=s,this.uiService=r}ngOnInit(){this.titleService.setTitle(&quot;Param\xe8tres - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(this.uiService.drawingMode$.pipe(Mf()).subscribe(t=&gt;{t?this.dialogRef&amp;&amp;(this.dialogRef.close(!1),this.dialogRef=null):this.dialogRef||this.createDialog()}))}createDialog(){this.dialogRef=this.dialog.open(pnt,{height:&quot;90vh&quot;,width:&quot;90vw&quot;,maxWidth:&quot;90vw&quot;,closeOnNavigation:!0}),this.dialogRef.afterClosed().subscribe((t=!0)=&gt;jp(this,void 0,void 0,function*(){if(t){const t=this.routeService.previousUrl||&quot;&quot;;yield this.router.navigateByUrl(t)}}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(dF),Da(ek),Da(kj),Da(Oj),Da(fH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-settings-loader&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var mnt=(()=&gt;(function(t){t.HIGH=&quot;Urgente&quot;,t.NORMAL=&quot;Normale&quot;,t.LOW=&quot;Basse&quot;}(mnt||(mnt={})),mnt))();function gnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,13),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t),Sr(1),Cl(&quot; &quot;,t,&quot; &quot;)}}function Ant(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,14),2&amp;t&amp;&amp;Oa(&quot;diameter&quot;,70)}function vnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;button&quot;,15),Ha(&quot;click&quot;,function(){return Le(t),Za().onValidation()}),Ra(1,&quot;mat-icon&quot;,16),xl(2,&quot;post_add&quot;),Fa(),Ra(3,&quot;span&quot;),xl(4,&quot;Valider le ticket&quot;),Fa(),Fa()}2&amp;t&amp;&amp;Oa(&quot;disabled&quot;,Za().ticketForms.invalid)}let _nt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.titleService=t,this.mapService=e,this.uiService=i,this.workerService=n,this.fb=s,this.errorHandler=r,this.dialogRef=o,this.ticketId=0,this.errorMessage=&quot;&quot;,this.awaitingResponse=!1,this.priorities=Object.values(mnt)}ngOnInit(){this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.titleService.setTitle(&quot;Cr\xe9ation d&#39;un ticket d&#39;incident - ANAIS&quot;),this.ticketForms=this.fb.group({ticketTitle:[&quot;&quot;,Ky.compose([Ky.required,Ky.maxLength(255)])],ticketPriority:[&quot;&quot;,Ky.required],ticketDescription:[&quot;&quot;,Ky.required]})}onValidation(){return jp(this,void 0,void 0,function*(){this.ticketId=0;const t={title:this.ticketForms.controls.ticketTitle.value,priority:this.ticketForms.controls.ticketPriority.value,description:this.ticketForms.controls.ticketDescription.value};this.awaitingResponse=!0;try{yield this.workerService.tickets.uploadTicket(t),this.uiService.success(&quot;Le ticket a correctement \xe9t\xe9 cr\xe9\xe9.&quot;,5e3),this.ticketForms.reset()}finally{this.awaitingResponse=!1}this.dialogRef.close(!1)})}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(kj),Da(fH),Da(Jj),Da(Rw),Da(Ps),Da(YS))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ticket-creation-panel&quot;]],features:[$o],decls:31,vars:4,consts:[[&quot;mat-dialog-title&quot;,&quot;&quot;,1,&quot;d-flex&quot;],[1,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer le panneau&quot;,3,&quot;mat-dialog-close&quot;],[3,&quot;formGroup&quot;],[1,&quot;ticket-creation-panel__text-input&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;required&quot;,&quot;&quot;,&quot;maxlength&quot;,&quot;255&quot;,&quot;type&quot;,&quot;text&quot;,&quot;formControlName&quot;,&quot;ticketTitle&quot;,&quot;name&quot;,&quot;ticketTitle&quot;],[1,&quot;ticket-creation-panel__select&quot;],[&quot;required&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;ticketPriority&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;required&quot;,&quot;&quot;,&quot;matInput&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;ticketDescription&quot;,1,&quot;ticket-creation-panel__text-input-long&quot;],[1,&quot;d-flex-center&quot;],[&quot;class&quot;,&quot;ticket-creation-panel__spinner&quot;,3,&quot;diameter&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;ticket-creation-panel__margin&quot;,&quot;mat-stroked-button&quot;,&quot;&quot;,3,&quot;disabled&quot;,&quot;click&quot;,4,&quot;ngIf&quot;],[3,&quot;value&quot;],[1,&quot;ticket-creation-panel__spinner&quot;,3,&quot;diameter&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,1,&quot;ticket-creation-panel__margin&quot;,3,&quot;disabled&quot;,&quot;click&quot;],[1,&quot;mr-1&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;h1&quot;,0),xl(1,&quot; Cr\xe9ation de tickets d&#39;incident &quot;),La(2,&quot;div&quot;,1),Ra(3,&quot;button&quot;,2),Ra(4,&quot;mat-icon&quot;),xl(5,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(6,&quot;div&quot;,3),Ra(7,&quot;div&quot;),xl(8,&quot; Entrez le titre de l&#39;incident &quot;),Fa(),Ra(9,&quot;mat-form-field&quot;,4),Ra(10,&quot;mat-label&quot;),xl(11,&quot;Titre du ticket:&quot;),Fa(),La(12,&quot;input&quot;,5),Fa(),Ra(13,&quot;div&quot;),xl(14,&quot; Entrez la priorit\xe9 du ticket &quot;),Fa(),Ra(15,&quot;mat-form-field&quot;,6),Ra(16,&quot;mat-label&quot;),xl(17,&quot;Priorit\xe9 du ticket&quot;),Fa(),Ra(18,&quot;mat-select&quot;,7),ra(19,gnt,2,2,&quot;mat-option&quot;,8),Fa(),Fa(),Ra(20,&quot;div&quot;),xl(21,&quot; Entrez les d\xe9tails de l&#39;incident rencontr\xe9 &quot;),Fa(),Ra(22,&quot;mat-form-field&quot;,4),Ra(23,&quot;mat-label&quot;),xl(24,&quot; Description du ticket: &quot;),Fa(),Ra(25,&quot;textarea&quot;,9),xl(26,&quot;    &quot;),Fa(),Fa(),La(27,&quot;mat-divider&quot;),Ra(28,&quot;div&quot;,10),ra(29,Ant,1,1,&quot;mat-spinner&quot;,11),ra(30,vnt,5,1,&quot;button&quot;,12),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(6),Oa(&quot;formGroup&quot;,e.ticketForms),Sr(13),Oa(&quot;ngForOf&quot;,e.priorities),Sr(10),Oa(&quot;ngIf&quot;,e.awaitingResponse),Sr(1),Oa(&quot;ngIf&quot;,!e.awaitingResponse))},directives:[sk,Ry,nk,hE,Cx,uw,gC,oC,kC,Hy,kw,Iw,wx,vw,qT,Bd,Pq,Nd,Sy,TQ],styles:[&quot;.ticket-creation-panel[_ngcontent-%COMP%]{min-width:270px}.ticket-creation-panel__text-input[_ngcontent-%COMP%]{width:90%;margin:.5em .5em .5em 0;font-size:16px}.ticket-creation-panel__text-input-long[_ngcontent-%COMP%]{padding-right:0;min-height:250px}.ticket-creation-panel__select[_ngcontent-%COMP%]{width:40%}.ticket-creation-panel__spinner[_ngcontent-%COMP%]{display:block!important;margin:1.5em auto auto}.ticket-creation-panel__margin[_ngcontent-%COMP%]{margin:1.5em auto auto}&quot;]}),t})();function bnt(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,3)}function ynt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-error&quot;,19),xl(1,&quot; Ce champ ne peut \xeatre vide. &quot;),Fa())}function xnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;mat-option&quot;,20),xl(1),Fa()),2&amp;t){const t=e.$implicit;Oa(&quot;value&quot;,t),Sr(1),Cl(&quot; &quot;,t,&quot; &quot;)}}const wnt=function(t,e){return{&quot;ticket-details-panel__comment-text__user&quot;:t,&quot;ticket-details-panel__comment-text__support&quot;:e}},Cnt=function(t,e){return{&quot;ticket-details-panel__timestamp__user&quot;:t,&quot;ticket-details-panel__timestamp__support&quot;:e}};function Snt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,21),Ra(1,&quot;p&quot;,22),xl(2),Fa(),Ra(3,&quot;div&quot;,23),lh(4,&quot;timeago&quot;),Ra(5,&quot;mat-icon&quot;,24),xl(6,&quot;access_time&quot;),Fa(),xl(7),lh(8,&quot;date&quot;),Fa(),La(9,&quot;div&quot;,25),Fa()),2&amp;t){const t=e.$implicit,i=Za(3);Oa(&quot;ngClass&quot;,ih(12,wnt,&quot;Admin User&quot;!==t.author,&quot;Admin User&quot;===t.author)),Sr(2),Cl(&quot; &quot;,t.author,&quot;&quot;),Sr(1),Ja(&quot;title&quot;,ch(4,6,t.time)),Oa(&quot;ngClass&quot;,ih(15,Cnt,&quot;Admin User&quot;!==t.author,&quot;Admin User&quot;===t.author)),Sr(4),Cl(&quot; &quot;,uh(8,8,t.time,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;),Sr(2),Oa(&quot;innerHTML&quot;,t.message,ws)}}function knt(t,e){if(1&amp;t){const t=Va();Ba(0,6),Ra(1,&quot;div&quot;,7),Ra(2,&quot;mat-form-field&quot;,8),La(3,&quot;input&quot;,9),ra(4,ynt,2,0,&quot;mat-error&quot;,10),Fa(),Ra(5,&quot;button&quot;,11),Ra(6,&quot;mat-icon&quot;),xl(7,&quot;check&quot;),Fa(),Fa(),Ra(8,&quot;button&quot;,12),Ha(&quot;click&quot;,function(){return Le(t),Za(2).switchEditMode()}),Ra(9,&quot;mat-icon&quot;),xl(10,&quot;clear&quot;),Fa(),Fa(),Fa(),Ra(11,&quot;div&quot;,13),Ra(12,&quot;mat-form-field&quot;,14),Ra(13,&quot;mat-label&quot;),xl(14,&quot;Priorit\xe9 du ticket&quot;),Fa(),Ra(15,&quot;mat-select&quot;,15),ra(16,xnt,2,2,&quot;mat-option&quot;,16),Fa(),Fa(),Ra(17,&quot;mat-form-field&quot;,14),Ra(18,&quot;mat-label&quot;),xl(19,&quot; Entrer la description du ticket: &quot;),Fa(),Ra(20,&quot;textarea&quot;,17),xl(21,&quot;              &quot;),Fa(),Fa(),La(22,&quot;mat-divider&quot;),ra(23,Snt,10,18,&quot;div&quot;,18),Fa(),za()}if(2&amp;t){const t=Za(2);Oa(&quot;formGroup&quot;,t.ticketForms),Sr(4),Oa(&quot;ngIf&quot;,null==t.ticketForms.controls.title.errors?null:t.ticketForms.controls.title.errors.required),Sr(1),Oa(&quot;app-async-action&quot;,t.updateTicket)(&quot;disabled&quot;,!t.ticketForms.controls.title.valid),Sr(10),Oa(&quot;value&quot;,t.ticket.priority),Sr(1),Oa(&quot;ngForOf&quot;,t.priorities),Sr(7),Oa(&quot;ngForOf&quot;,t.ticket.dataFlow)}}function Ent(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,21),Ra(1,&quot;p&quot;,22),xl(2),Fa(),Ra(3,&quot;div&quot;,23),lh(4,&quot;timeago&quot;),Ra(5,&quot;mat-icon&quot;,24),xl(6,&quot;access_time&quot;),Fa(),xl(7),lh(8,&quot;date&quot;),Fa(),La(9,&quot;div&quot;,25),Fa()),2&amp;t){const t=e.$implicit,i=Za(3);Oa(&quot;ngClass&quot;,ih(12,wnt,&quot;Admin User&quot;!==t.author,&quot;Admin User&quot;===t.author)),Sr(2),Cl(&quot; &quot;,t.author,&quot;&quot;),Sr(1),Ja(&quot;title&quot;,ch(4,6,t.time)),Oa(&quot;ngClass&quot;,ih(15,Cnt,&quot;Admin User&quot;!==t.author,&quot;Admin User&quot;===t.author)),Sr(4),Cl(&quot; &quot;,uh(8,8,t.time,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;),Sr(2),Oa(&quot;innerHTML&quot;,t.message,ws)}}function Mnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,7),Ra(1,&quot;h2&quot;,26),xl(2),Fa(),Ra(3,&quot;button&quot;,27),Ha(&quot;click&quot;,function(){return Le(t),Za(2).switchEditMode()}),Ra(4,&quot;mat-icon&quot;),xl(5,&quot; create &quot;),Fa(),Fa(),Ra(6,&quot;button&quot;,28),Ha(&quot;click&quot;,function(){return Le(t),Za(2).reloadDataEvent.emit(!0)}),Ra(7,&quot;mat-icon&quot;),xl(8,&quot;replay&quot;),Fa(),Fa(),Fa(),Ra(9,&quot;div&quot;,13),Ra(10,&quot;h3&quot;,26),xl(11,&quot; Description de l&#39;incident: &quot;),La(12,&quot;br&quot;),Fa(),Ra(13,&quot;div&quot;,29),lh(14,&quot;timeago&quot;),Ra(15,&quot;mat-icon&quot;,30),xl(16,&quot;access_time&quot;),Fa(),xl(17),lh(18,&quot;date&quot;),Fa(),La(19,&quot;div&quot;,31),La(20,&quot;br&quot;),La(21,&quot;mat-divider&quot;),Ra(22,&quot;h3&quot;,26),xl(23,&quot; Commentaires: &quot;),Fa(),ra(24,Ent,10,18,&quot;div&quot;,18),Ba(25,6),Ra(26,&quot;mat-form-field&quot;,14),Ra(27,&quot;mat-label&quot;),xl(28,&quot; Ajouter votre commentaire: &quot;),Fa(),Ra(29,&quot;textarea&quot;,32),xl(30,&quot;              &quot;),Fa(),Fa(),Ra(31,&quot;button&quot;,33),xl(32,&quot; Envoyer &quot;),Ra(33,&quot;mat-icon&quot;),xl(34,&quot;check&quot;),Fa(),Fa(),za(),Fa()}if(2&amp;t){const t=Za(2);Sr(2),wl(t.ticket.title),Sr(11),Ja(&quot;title&quot;,ch(14,8,t.ticket.createdAt)),Sr(4),Cl(&quot; &quot;,uh(18,10,t.ticket.createdAt,&quot;yyyy-MM-dd HH:mm:ss z&quot;,t.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;),Sr(2),Oa(&quot;innerHTML&quot;,t.ticket.description,ws),Sr(5),Oa(&quot;ngForOf&quot;,t.ticket.dataFlow),Sr(1),Oa(&quot;formGroup&quot;,t.ticketForms),Sr(6),Oa(&quot;app-async-action&quot;,t.addComment)(&quot;disabled&quot;,!t.ticketForms.controls.userComment.value)}}function Tnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;ng-form&quot;,4,5),ra(2,knt,24,7,&quot;ng-template&quot;,2),ra(3,Mnt,35,14,&quot;ng-template&quot;,2),Fa()),2&amp;t){const t=Za();Sr(2),Oa(&quot;ngIf&quot;,t.editMode),Sr(1),Oa(&quot;ngIf&quot;,!t.editMode)}}let Int=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.titleService=t,this.mapService=e,this.mapConfigService=i,this.workerService=n,this.reloadDataEvent=new mh,this.editMode=!1,this.priorities=Object.values(mnt),this.useUTCDates=!1,this.addComment=()=&gt;jp(this,void 0,void 0,function*(){yield this.workerService.tickets.publishComment(this.ticketForms.controls.userComment.value,this.ticket.id),this.ticketForms.controls.userComment.reset(),this.reloadDataEvent.emit(!0)}),this.updateTicket=()=&gt;jp(this,void 0,void 0,function*(){if(!this.ticketForms)throw new Error(&quot;Impossible d&#39;envoyer les nouvelles informations&quot;);yield this.workerService.tickets.updateTicket({id:this.ticket.id,createdAt:this.ticket.createdAt,title:this.ticketForms.controls.title.value,priority:this.ticketForms.controls.priority.value,description:this.ticketForms.controls.description.value,dataFlow:this.ticket.dataFlow}),yield this.switchEditMode(),this.reloadDataEvent.emit(!0)})}ngOnInit(){return jp(this,void 0,void 0,function*(){this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t})),this.titleService.setTitle(this.editMode?&quot;Mise \xe0 jour d&#39;un ticket d&#39;incident - ANAIS&quot;:&quot;D\xe9tails d&#39;un ticket d&#39;incident - ANAIS&quot;),yield this.fetchTicketDetails()})}fetchTicketDetails(){return jp(this,void 0,void 0,function*(){if(!this.ticket)throw new Error(&quot;Impossible de retrouver les d\xe9tails du ticket&quot;);this.ticketForms=new Yx({title:new Wx(this.ticket.title,Ky.maxLength(255)),priority:new Wx(this.ticket.priority),description:new Wx(this.ticket.description),userComment:new Wx(&quot;&quot;)})})}switchEditMode(){return jp(this,void 0,void 0,function*(){this.editMode=!this.editMode,yield this.fetchTicketDetails()})}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(kj),Da(HU),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ticket-details-panel&quot;]],inputs:{ticket:&quot;ticket&quot;},outputs:{reloadDataEvent:&quot;reloadDataEvent&quot;},features:[$o],decls:3,vars:2,consts:[[1,&quot;u-flex&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[3,&quot;ngIf&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[&quot;name&quot;,&quot;form&quot;,1,&quot;d-flex-column&quot;,&quot;unscrollable&quot;],[&quot;form&quot;,&quot;ngForm&quot;],[3,&quot;formGroup&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;ticket-details-panel__name-input&quot;],[&quot;matInput&quot;,&quot;&quot;,&quot;name&quot;,&quot;title&quot;,&quot;formControlName&quot;,&quot;title&quot;,&quot;placeholder&quot;,&quot;Titre du ticket&quot;,&quot;required&quot;,&quot;&quot;,&quot;maxlength&quot;,&quot;255&quot;],[&quot;class&quot;,&quot;input-error&quot;,4,&quot;ngIf&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Enregistrer les changements&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Annuler l&#39;\xe9dition&quot;,3,&quot;click&quot;],[&quot;mat-dialog-content&quot;,&quot;&quot;,1,&quot;d-flex-column&quot;,&quot;scrollable&quot;,&quot;ticket-details-panel__text-input&quot;],[1,&quot;ticket-details-panel__text-input&quot;],[&quot;required&quot;,&quot;&quot;,&quot;formControlName&quot;,&quot;priority&quot;,3,&quot;value&quot;],[3,&quot;value&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[&quot;formControlName&quot;,&quot;description&quot;,&quot;name&quot;,&quot;ticketDescription&quot;,&quot;required&quot;,&quot;&quot;,&quot;matInput&quot;,&quot;&quot;],[&quot;class&quot;,&quot;u-flex ticket-details-panel__comment-text&quot;,3,&quot;ngClass&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;input-error&quot;],[3,&quot;value&quot;],[1,&quot;u-flex&quot;,&quot;ticket-details-panel__comment-text&quot;,3,&quot;ngClass&quot;],[1,&quot;ticket-details-panel__comment-title&quot;],[3,&quot;title&quot;,&quot;ngClass&quot;],[&quot;title&quot;,&quot;Date de l&#39;alerte&quot;,1,&quot;mini-icon&quot;,&quot;ticket-details-panel__timestamp__icon&quot;,&quot;mr1&quot;],[3,&quot;innerHTML&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Modifier&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;white&quot;,&quot;title&quot;,&quot;Rafraichir les informations&quot;,1,&quot;ma-2&quot;,3,&quot;click&quot;],[1,&quot;ticket-details-panel__timestamp__icon&quot;,3,&quot;title&quot;],[&quot;title&quot;,&quot;Date de l&#39;alerte&quot;,1,&quot;mr-1&quot;],[1,&quot;ticket-details-panel__comment-text&quot;,3,&quot;innerHTML&quot;],[&quot;formControlName&quot;,&quot;userComment&quot;,&quot;name&quot;,&quot;userComment&quot;,&quot;matInput&quot;,&quot;&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;title&quot;,&quot;Envoyer le commentaire au support&quot;,1,&quot;d-flex&quot;,3,&quot;app-async-action&quot;,&quot;disabled&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),ra(1,bnt,1,0,&quot;mat-spinner&quot;,1),ra(2,Tnt,4,2,&quot;ng-template&quot;,2),Fa()),2&amp;t&amp;&amp;(Sr(1),Oa(&quot;ngIf&quot;,!e.ticket),Sr(1),Oa(&quot;ngIf&quot;,e.ticket))},directives:[Nd,TQ,Qx,Cx,uw,gC,kC,Hy,wx,vw,kw,Iw,Ry,Fq,hE,rk,oC,qT,Bd,Pq,tC,Sy,Fd],pipes:[VL,ep],styles:[&quot;[_nghost-%COMP%]     hr{border:1px!important;width:96%;background-color:#000;height:1px}.ticket-details-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.ticket-details-panel__name-input[_ngcontent-%COMP%]{margin-left:.5em;margin-top:.5em;flex:1;font-size:20px}.ticket-details-panel__text-input[_ngcontent-%COMP%]{margin-left:.5em;margin-top:.5em;font-size:16px;width:95%}.ticket-details-panel__comment-title[_ngcontent-%COMP%]{font-size:18px;margin:4px 0}.ticket-details-panel__comment-text[_ngcontent-%COMP%]{font-size:14px;padding-left:5px;padding-right:5px;margin-top:10px;border-radius:15px}.ticket-details-panel__comment-text__user[_ngcontent-%COMP%]{margin-left:auto;border:2px solid #41a8d1;background-color:#41a8d1;text-align:right}.ticket-details-panel__comment-text__support[_ngcontent-%COMP%]{margin-right:auto;border:2px solid #a7e47f;background-color:#a7e47f}.ticket-details-panel__timestamp__icon[_ngcontent-%COMP%]{vertical-align:text-top}.ticket-details-panel__timestamp__user[_ngcontent-%COMP%]{margin-left:auto;align-items:center}.ticket-details-panel__timestamp__support[_ngcontent-%COMP%]{margin-right:auto;align-items:center}&quot;]}),t})();function Dnt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;p&quot;,12),xl(1,&quot;Aucun ticket&quot;),Fa())}function Ont(t,e){1&amp;t&amp;&amp;La(0,&quot;mat-spinner&quot;,13)}function Pnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,15),Ra(1,&quot;div&quot;),lh(2,&quot;lowercase&quot;),Ra(3,&quot;button&quot;,16),Ha(&quot;click&quot;,function(){const e=Le(t).$implicit;return Za(2).showTicket(e.id)}),xl(4),Ra(5,&quot;em&quot;),xl(6),Fa(),Ra(7,&quot;div&quot;),Ra(8,&quot;mat-icon&quot;,17),xl(9,&quot; access_time &quot;),Fa(),xl(10),lh(11,&quot;date&quot;),Fa(),Fa(),Fa(),Fa()}if(2&amp;t){const t=e.$implicit,i=Za(2);Sr(1),Ml(&quot;priority priority__&quot;,ch(2,9,t.priority),&quot;&quot;),Sr(2),Ja(&quot;title&quot;,t.title),Oa(&quot;@fadeAnimation&quot;,void 0),Sr(1),Cl(&quot; &quot;,t.title,&quot; &quot;),Sr(2),Sl(&quot;(&quot;,t.dataFlow.length,&quot; commentaire&quot;,t.dataFlow.length&gt;1?&quot;s&quot;:&quot;&quot;,&quot;)&quot;),Sr(4),Cl(&quot; &quot;,uh(11,11,t.createdAt,&quot;yyyy-MM-dd HH:mm:ss z&quot;,i.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}function Rnt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;),ra(1,Pnt,12,15,&quot;div&quot;,14),Fa()),2&amp;t){const t=Za();Sr(1),Oa(&quot;ngForOf&quot;,t.ticketsList)}}function Fnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;mat-paginator&quot;,18),Ha(&quot;page&quot;,function(e){return Le(t),Za().showTicketsPage(e.pageIndex)}),Fa()}if(2&amp;t){const t=Za();Oa(&quot;pageIndex&quot;,t.currentTicketsPageIndex)(&quot;length&quot;,t.ticketsTotal)(&quot;pageSize&quot;,t.ticketsPageSize)}}function Lnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,19),Ra(1,&quot;app-ticket-details-panel&quot;,20),Ha(&quot;reloadDataEvent&quot;,function(){return Le(t),Za().reloadTicketDetails()}),Fa(),Fa()}if(2&amp;t){const t=Za();Sr(1),Oa(&quot;ticket&quot;,t.selectedTicket)}}let Bnt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.authenticationService=t,this.titleService=e,this.mapService=i,this.mapConfigService=n,this.workerService=s,this.ticketsList=[],this.currentTicketsPageIndex=0,this.ticketsPageSize=10,this.ticketsTotal=0,this.selectedTicket=null,this.ready=!1}ngOnInit(){return jp(this,void 0,void 0,function*(){this.titleService.setTitle(&quot;Liste des tickets d&#39;incident - ANAIS&quot;),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView(),this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t})),this.currentUserID=this.authenticationService.user$.value.id,yield this.updateTicketList()})}showTicket(t){return jp(this,void 0,void 0,function*(){const e=this.ticketsList.find(e=&gt;e.id===t);this.selectedTicket=e===this.selectedTicket?null:e})}reloadTicketDetails(){return jp(this,void 0,void 0,function*(){yield this.updateTicketList(),yield this.showTicket(this.selectedTicket.id)})}showTicketsPage(t){return jp(this,void 0,void 0,function*(){this.currentTicketsPageIndex=t,yield this.updateTicketList(this.currentTicketsPageIndex)})}updateTicketList(t=this.currentTicketsPageIndex){return jp(this,void 0,void 0,function*(){this.ready=!1;const e=yield this.workerService.tickets.fetchTicketsPage(t);this.ticketsTotal=e.total,this.ticketsList=e.incidents,this.ticketsList.forEach(t=&gt;{t.dataFlow.forEach(t=&gt;jp(this,void 0,void 0,function*(){t.author=t.author===this.currentUserID?&quot;Vous&quot;:t.author}))}),this.ready=!0})}}return t.\u0275fac=function(e){return new(e||t)(Da(tH),Da(Up),Da(kj),Da(HU),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ticket-list-panel&quot;]],hostAttrs:[1,&quot;d-flex&quot;],features:[$o],decls:20,vars:6,consts:[[1,&quot;u-flex&quot;],[1,&quot;panel__header&quot;,&quot;panel__header--blue&quot;],[1,&quot;panel__title&quot;,&quot;u-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Rafraichir la liste&quot;,3,&quot;click&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Fermer la fen\xeatre&quot;,3,&quot;mat-dialog-close&quot;],[1,&quot;ticket-list-panel&quot;],[&quot;mat-stroked-button&quot;,&quot;&quot;,&quot;color&quot;,&quot;primary&quot;,&quot;routerLink&quot;,&quot;/tickets/new&quot;,1,&quot;ma-2&quot;,3,&quot;mat-dialog-close&quot;],[&quot;class&quot;,&quot;px-3&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;spinner&quot;,&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,4,&quot;ngIf&quot;],[4,&quot;ngIf&quot;],[&quot;showFirstLastButtons&quot;,&quot;&quot;,&quot;hidePageSize&quot;,&quot;&quot;,3,&quot;pageIndex&quot;,&quot;length&quot;,&quot;pageSize&quot;,&quot;page&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;scrollable&quot;,4,&quot;ngIf&quot;],[1,&quot;px-3&quot;],[&quot;strokeWidth&quot;,&quot;4&quot;,&quot;diameter&quot;,&quot;80&quot;,1,&quot;spinner&quot;],[&quot;class&quot;,&quot;ticket-list-panel__ticket&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;],[1,&quot;ticket-list-panel__ticket&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;ticket-list-panel__ellipsis&quot;,3,&quot;title&quot;,&quot;click&quot;],[&quot;title&quot;,&quot;Date de creation&quot;,1,&quot;mr-1&quot;],[&quot;showFirstLastButtons&quot;,&quot;&quot;,&quot;hidePageSize&quot;,&quot;&quot;,3,&quot;pageIndex&quot;,&quot;length&quot;,&quot;pageSize&quot;,&quot;page&quot;],[1,&quot;scrollable&quot;],[3,&quot;ticket&quot;,&quot;reloadDataEvent&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;h2&quot;,2),xl(3,&quot;Liste des incidents&quot;),Fa(),Ra(4,&quot;button&quot;,3),Ha(&quot;click&quot;,function(){return e.updateTicketList()}),Ra(5,&quot;mat-icon&quot;),xl(6,&quot;replay&quot;),Fa(),Fa(),Ra(7,&quot;button&quot;,4),Ra(8,&quot;mat-icon&quot;),xl(9,&quot;close&quot;),Fa(),Fa(),Fa(),Ra(10,&quot;div&quot;,5),Ra(11,&quot;button&quot;,6),Ra(12,&quot;mat-icon&quot;),xl(13,&quot;add&quot;),Fa(),xl(14,&quot; Nouvel incident &quot;),Fa(),ra(15,Dnt,2,0,&quot;p&quot;,7),ra(16,Ont,1,0,&quot;mat-spinner&quot;,8),ra(17,Rnt,2,1,&quot;div&quot;,9),ra(18,Fnt,1,3,&quot;mat-paginator&quot;,10),Fa(),Fa(),ra(19,Lnt,2,1,&quot;div&quot;,11)),2&amp;t&amp;&amp;(Sr(11),Oa(&quot;mat-dialog-close&quot;,!1),Sr(4),Oa(&quot;ngIf&quot;,0===e.ticketsList.length&amp;&amp;e.ready),Sr(1),Oa(&quot;ngIf&quot;,!e.ready),Sr(1),Oa(&quot;ngIf&quot;,e.ready),Sr(1),Oa(&quot;ngIf&quot;,e.ready),Sr(1),Oa(&quot;ngIf&quot;,e.selectedTicket))},directives:[Ry,hE,nk,fF,Nd,TQ,Bd,TI,Int],pipes:[tp,ep],styles:[&quot;.ticket-list-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.ticket-list-panel__tickets-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.ticket-list-panel__ticket[_ngcontent-%COMP%]{flex:1;display:flex;transition:2s ease-out background-color;max-height:82px;text-align:center}.ticket-list-panel__ellipsis[_ngcontent-%COMP%]{max-width:500px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.priority[_ngcontent-%COMP%]{margin:auto;padding-left:10px;padding-right:10px;border-left:10px solid;border-right:10px solid;overflow:hidden!important;white-space:pre-wrap!important;line-height:normal;min-height:2em;width:100%}.priority__urgente[_ngcontent-%COMP%]{border-left-color:#b33f3d;border-right-color:#b33f3d}.priority__normale[_ngcontent-%COMP%]{border-left-color:#ffba30;border-right-color:#ffba30}.priority__basse[_ngcontent-%COMP%]{border-left-color:#1b95f2;border-right-color:#1b95f2}&quot;],data:{animation:[$3]}}),t})(),znt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.titleService=t,this.router=e,this.dialog=i,this.mapService=n,this.routeService=s}ngOnInit(){this.titleService.setTitle(&quot;Cr\xe9ation d&#39;un ticket d&#39;incident - ANAIS&quot;),&quot;/tickets/new&quot;===this.router.url?(this.dialogComponent=_nt,this.dialogRefCreate||this.createDialog()):(this.dialogComponent=Bnt,this.dialogRefList||this.createDialog()),this.mapService.hasBooted$.value||this.mapService.resetToDefaultView()}createDialog(){this.dialogComponent===Bnt?(this.dialogRefList=this.dialog.open(Bnt,{height:&quot;85vh&quot;,width:&quot;70vw&quot;,maxWidth:&quot;70vw&quot;,closeOnNavigation:!0,panelClass:[&quot;no-border-dialog&quot;]}),this.dialogRefList.afterClosed().subscribe((t=!0)=&gt;jp(this,void 0,void 0,function*(){if(t){const t=&quot;/tickets/new&quot;===this.routeService.previousUrl?&quot;&quot;:this.routeService.previousUrl||&quot;&quot;;yield this.router.navigateByUrl(t)}}))):(this.dialogRefCreate=this.dialog.open(_nt,{height:&quot;85vh&quot;,width:&quot;70vw&quot;,maxWidth:&quot;70vw&quot;,closeOnNavigation:!0}),this.dialogRefCreate.afterClosed().subscribe((t=!0)=&gt;jp(this,void 0,void 0,function*(){if(t){const t=this.routeService.previousUrl||&quot;&quot;;yield this.router.navigateByUrl(t)}})))}}return t.\u0275fac=function(e){return new(e||t)(Da(Up),Da(dF),Da(ek),Da(kj),Da(Oj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ticket-creation-loader&quot;]],features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();function Nnt(t){return e=&gt;e.lift(new Vnt(t))}class Vnt{constructor(t){this.value=t}call(t,e){return e.subscribe(new $nt(t,this.value))}}class $nt extends g{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const Unt=[&quot;*&quot;];function jnt(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;div&quot;,2),Ha(&quot;click&quot;,function(){return Le(t),Za()._onBackdropClicked()}),Fa()}2&amp;t&amp;&amp;cl(&quot;mat-drawer-shown&quot;,Za()._isShowingBackdrop())}function Hnt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;mat-drawer-content&quot;),Qa(1,2),Fa())}const Gnt=[[[&quot;mat-drawer&quot;]],[[&quot;mat-drawer-content&quot;]],&quot;*&quot;],qnt=[&quot;mat-drawer&quot;,&quot;mat-drawer-content&quot;,&quot;*&quot;],Wnt={transformDrawer:BA(&quot;transform&quot;,[$A(&quot;open, open-instant&quot;,VA({transform:&quot;none&quot;,visibility:&quot;visible&quot;})),$A(&quot;void&quot;,VA({&quot;box-shadow&quot;:&quot;none&quot;,visibility:&quot;hidden&quot;})),jA(&quot;void =&gt; open-instant&quot;,zA(&quot;0ms&quot;)),jA(&quot;void &lt;=&gt; open, open-instant =&gt; void&quot;,zA(&quot;400ms cubic-bezier(0.25, 0.8, 0.25, 1)&quot;))])},Ynt=new Ji(&quot;MAT_DRAWER_DEFAULT_AUTOSIZE&quot;,{providedIn:&quot;root&quot;,factory:function(){return!1}}),Znt=new Ji(&quot;MAT_DRAWER_CONTAINER&quot;);let Knt=(()=&gt;{class t extends jg{constructor(t,e,i,n,s){super(i,n,s),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=&gt;{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(at(()=&gt;Qnt)),Da(ec),Da(Ug),Da(iu))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-drawer-content&quot;]],hostAttrs:[1,&quot;mat-drawer-content&quot;],hostVars:4,hostBindings:function(t,e){2&amp;t&amp;&amp;ll(&quot;margin-left&quot;,e._container._contentMargins.left,&quot;px&quot;)(&quot;margin-right&quot;,e._container._contentMargins.right,&quot;px&quot;)},features:[$o],ngContentSelectors:Unt,decls:1,vars:0,template:function(t,e){1&amp;t&amp;&amp;(Xa(),Qa(0))},encapsulation:2,changeDetection:0}),t})(),Xnt=(()=&gt;{class t{constructor(t,e,i,n,s,r,o){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=i,this._platform=n,this._ngZone=s,this._doc=r,this._container=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position=&quot;start&quot;,this._mode=&quot;over&quot;,this._disableClose=!1,this._opened=!1,this._animationStarted=new S,this._animationEnd=new S,this._animationState=&quot;void&quot;,this.openedChange=new mh(!0),this._openedStream=this.openedChange.pipe(gf(t=&gt;t),M(()=&gt;{})),this.openedStart=this._animationStarted.pipe(gf(t=&gt;t.fromState!==t.toState&amp;&amp;0===t.toState.indexOf(&quot;open&quot;)),Nnt(void 0)),this._closedStream=this.openedChange.pipe(gf(t=&gt;!t),M(()=&gt;{})),this.closedStart=this._animationStarted.pipe(gf(t=&gt;t.fromState!==t.toState&amp;&amp;&quot;void&quot;===t.toState),Nnt(void 0)),this._destroyed=new S,this.onPositionChanged=new mh,this._modeChanged=new S,this.openedChange.subscribe(t=&gt;{t?(this._doc&amp;&amp;(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&amp;&amp;this._restoreFocus()}),this._ngZone.runOutsideAngular(()=&gt;{qm(this._elementRef.nativeElement,&quot;keydown&quot;).pipe(gf(t=&gt;27===t.keyCode&amp;&amp;!this.disableClose&amp;&amp;!tf(t)),Df(this._destroyed)).subscribe(t=&gt;this._ngZone.run(()=&gt;{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(Mf((t,e)=&gt;t.fromState===e.fromState&amp;&amp;t.toState===e.toState)).subscribe(t=&gt;{const{fromState:e,toState:i}=t;(0===i.indexOf(&quot;open&quot;)&amp;&amp;&quot;void&quot;===e||&quot;void&quot;===i&amp;&amp;0===e.indexOf(&quot;open&quot;))&amp;&amp;this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t=&quot;end&quot;===t?&quot;end&quot;:&quot;start&quot;)!=this._position&amp;&amp;(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Rf(t)}get autoFocus(){const t=this._autoFocus;return null==t?&quot;side&quot;!==this.mode:t}set autoFocus(t){this._autoFocus=Rf(t)}get opened(){return this._opened}set opened(t){this.toggle(Rf(t))}_takeFocus(){!this.autoFocus||!this._focusTrap||this._focusTrap.focusInitialElementWhenReady().then(t=&gt;{!t&amp;&amp;&quot;function&quot;==typeof this._elementRef.nativeElement.focus&amp;&amp;this._elementRef.nativeElement.focus()})}_restoreFocus(){!this.autoFocus||(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&amp;&amp;this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&amp;&amp;(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&amp;&amp;this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&amp;&amp;this._isFocusWithinDrawer(),e)}_setOpen(t,e,i=&quot;program&quot;){return this._opened=t,t?(this._animationState=this._enableAnimations?&quot;open&quot;:&quot;open-instant&quot;,this._openedVia=i):(this._animationState=&quot;void&quot;,e&amp;&amp;this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=&gt;{this.openedChange.pipe(xf(1)).subscribe(e=&gt;t(e?&quot;open&quot;:&quot;close&quot;))})}_getWidth(){return this._elementRef.nativeElement&amp;&amp;this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&amp;&amp;(this._focusTrap.enabled=this.opened&amp;&amp;&quot;side&quot;!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Da(ec),Da(Sm),Da(Nm),Da(jf),Da(iu),Da(Fu,8),Da(Znt,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-drawer&quot;]],hostAttrs:[&quot;tabIndex&quot;,&quot;-1&quot;,1,&quot;mat-drawer&quot;],hostVars:12,hostBindings:function(t,e){1&amp;t&amp;&amp;Ga(&quot;@transform.start&quot;,function(t){return e._animationStartListener(t)})(&quot;@transform.done&quot;,function(t){return e._animationDoneListener(t)}),2&amp;t&amp;&amp;(ea(&quot;align&quot;,null),Il(&quot;@transform&quot;,e._animationState),cl(&quot;mat-drawer-end&quot;,&quot;end&quot;===e.position)(&quot;mat-drawer-over&quot;,&quot;over&quot;===e.mode)(&quot;mat-drawer-push&quot;,&quot;push&quot;===e.mode)(&quot;mat-drawer-side&quot;,&quot;side&quot;===e.mode)(&quot;mat-drawer-opened&quot;,e.opened))},inputs:{position:&quot;position&quot;,mode:&quot;mode&quot;,disableClose:&quot;disableClose&quot;,autoFocus:&quot;autoFocus&quot;,opened:&quot;opened&quot;},outputs:{openedChange:&quot;openedChange&quot;,_openedStream:&quot;opened&quot;,openedStart:&quot;openedStart&quot;,_closedStream:&quot;closed&quot;,closedStart:&quot;closedStart&quot;,onPositionChanged:&quot;positionChanged&quot;},exportAs:[&quot;matDrawer&quot;],ngContentSelectors:Unt,decls:2,vars:0,consts:[[&quot;cdkScrollable&quot;,&quot;&quot;,1,&quot;mat-drawer-inner-container&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0),Qa(1),Fa())},directives:[jg],encapsulation:2,data:{animation:[Wnt.transformDrawer]},changeDetection:0}),t})(),Qnt=(()=&gt;{class t{constructor(t,e,i,n,s,r=!1,o){this._dir=t,this._element=e,this._ngZone=i,this._changeDetectorRef=n,this._animationMode=o,this._drawers=new Ah,this.backdropClick=new mh,this._destroyed=new S,this._doCheckSubject=new S,this._contentMargins={left:null,right:null},this._contentMarginChanges=new S,t&amp;&amp;t.change.pipe(Df(this._destroyed)).subscribe(()=&gt;{this._validateDrawers(),this.updateContentMargins()}),s.change().pipe(Df(this._destroyed)).subscribe(()=&gt;this.updateContentMargins()),this._autosize=r}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Rf(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||&quot;side&quot;!==this._start.mode||!this._end||&quot;side&quot;!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Rf(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(cg(this._allDrawers),Df(this._destroyed)).subscribe(t=&gt;{this._drawers.reset(t.filter(t=&gt;!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(cg(null)).subscribe(()=&gt;{this._validateDrawers(),this._drawers.forEach(t=&gt;{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&amp;&amp;this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=&gt;{this._doCheckSubject.pipe(df(10),Df(this._destroyed)).subscribe(()=&gt;this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=&gt;t.open())}close(){this._drawers.forEach(t=&gt;t.close())}updateContentMargins(){let t=0,e=0;if(this._left&amp;&amp;this._left.opened)if(&quot;side&quot;==this._left.mode)t+=this._left._getWidth();else if(&quot;push&quot;==this._left.mode){const i=this._left._getWidth();t+=i,e-=i}if(this._right&amp;&amp;this._right.opened)if(&quot;side&quot;==this._right.mode)e+=this._right._getWidth();else if(&quot;push&quot;==this._right.mode){const i=this._right._getWidth();e+=i,t-=i}t=t||null,e=e||null,(t!==this._contentMargins.left||e!==this._contentMargins.right)&amp;&amp;(this._contentMargins={left:t,right:e},this._ngZone.run(()=&gt;this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&amp;&amp;this._isPushed()&amp;&amp;this._ngZone.runOutsideAngular(()=&gt;this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(gf(t=&gt;t.fromState!==t.toState),Df(this._drawers.changes)).subscribe(t=&gt;{&quot;open-instant&quot;!==t.toState&amp;&amp;&quot;NoopAnimations&quot;!==this._animationMode&amp;&amp;this._element.nativeElement.classList.add(&quot;mat-drawer-transition&quot;),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),&quot;side&quot;!==t.mode&amp;&amp;t.openedChange.pipe(Df(this._drawers.changes)).subscribe(()=&gt;this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Df(this._drawers.changes)).subscribe(()=&gt;{this._ngZone.onMicrotaskEmpty.pipe(xf(1)).subscribe(()=&gt;{this._validateDrawers()})})}_watchDrawerMode(t){t&amp;&amp;t._modeChanged.pipe(Df(W(this._drawers.changes,this._destroyed))).subscribe(()=&gt;{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,i=&quot;mat-drawer-container-has-open&quot;;t?e.add(i):e.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=&gt;{&quot;end&quot;==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&amp;&amp;&quot;rtl&quot;===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&amp;&amp;&quot;over&quot;!=this._start.mode||this._isDrawerOpen(this._end)&amp;&amp;&quot;over&quot;!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=&gt;t&amp;&amp;!t.disableClose&amp;&amp;this._canHaveBackdrop(t)).forEach(t=&gt;t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&amp;&amp;this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&amp;&amp;this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return&quot;side&quot;!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&amp;&amp;t.opened}}return t.\u0275fac=function(e){return new(e||t)(Da(kg,8),Da(ec),Da(iu),Da(Ec),Da(Hg),Da(Ynt),Da(yb,8))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;mat-drawer-container&quot;]],contentQueries:function(t,e,i){if(1&amp;t&amp;&amp;(Th(i,Knt,5),Th(i,Xnt,5)),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._content=t.first),Eh(t=Ih())&amp;&amp;(e._allDrawers=t)}},viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(Knt,5),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e._userContent=t.first)}},hostAttrs:[1,&quot;mat-drawer-container&quot;],hostVars:2,hostBindings:function(t,e){2&amp;t&amp;&amp;cl(&quot;mat-drawer-container-explicit-backdrop&quot;,e._backdropOverride)},inputs:{autosize:&quot;autosize&quot;,hasBackdrop:&quot;hasBackdrop&quot;},outputs:{backdropClick:&quot;backdropClick&quot;},exportAs:[&quot;matDrawerContainer&quot;],features:[Wl([{provide:Znt,useExisting:t}])],ngContentSelectors:qnt,decls:4,vars:2,consts:[[&quot;class&quot;,&quot;mat-drawer-backdrop&quot;,3,&quot;mat-drawer-shown&quot;,&quot;click&quot;,4,&quot;ngIf&quot;],[4,&quot;ngIf&quot;],[1,&quot;mat-drawer-backdrop&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(Gnt),ra(0,jnt,1,2,&quot;div&quot;,0),Qa(1),Qa(2,1),ra(3,Hnt,2,0,&quot;mat-drawer-content&quot;,1)),2&amp;t&amp;&amp;(Oa(&quot;ngIf&quot;,e.hasBackdrop),Sr(3),Oa(&quot;ngIf&quot;,!e._content))},directives:[Nd,Knt],styles:[&quot;.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n&quot;],encapsulation:2,changeDetection:0}),t})(),Jnt=(()=&gt;{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=gt({imports:[[ip,Fb,Hf,Zg],Zg,Fb]}),t})();class tst extends pz{constructor(t,e,i){super(t),this.element=e,this.index=i}}var est=class extends s${constructor(t,e){if(super(),this.unique_=!!(e=e||{}).unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i&lt;n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()&gt;0;)this.pop()}extend(t){for(let e=0,i=t.length;e&lt;i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i&lt;n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(&quot;length&quot;)}insertAt(t,e){if(t&lt;0||t&gt;this.getLength())throw new Error(&quot;Index out of bounds: &quot;+t);this.unique_&amp;&amp;this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new tst(&quot;add&quot;,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&amp;&amp;this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i&lt;n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t&lt;0||t&gt;=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new tst(&quot;remove&quot;,e,t)),e}setAt(t,e){if(t&gt;=this.getLength())return void this.insertAt(t,e);if(t&lt;0)throw new Error(&quot;Index out of bounds: &quot;+t);this.unique_&amp;&amp;this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new tst(&quot;remove&quot;,i,t)),this.dispatchEvent(new tst(&quot;add&quot;,e,t))}updateLength_(){this.set(&quot;length&quot;,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i&lt;n;++i)if(this.array_[i]===t&amp;&amp;i!==e)throw new iN(58)}};function ist(t,e,i,n){const s=t.getZoom();if(void 0===s)return;const r=t.getConstrainedZoom(s+e),o=t.getResolutionForZoom(r);t.getAnimating()&amp;&amp;t.cancelAnimations(),t.animate({resolution:o,anchor:i,duration:void 0!==n?n:250,easing:Tz})}var nst=class extends s${constructor(t){super(),t&amp;&amp;t.handleEvent&amp;&amp;(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(&quot;active&quot;)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(&quot;active&quot;,t)}setMap(t){this.map_=t}},sst={SINGLECLICK:&quot;singleclick&quot;,CLICK:&quot;click&quot;,DBLCLICK:&quot;dblclick&quot;,POINTERDRAG:&quot;pointerdrag&quot;,POINTERMOVE:&quot;pointermove&quot;,POINTERDOWN:&quot;pointerdown&quot;,POINTERUP:&quot;pointerup&quot;,POINTEROVER:&quot;pointerover&quot;,POINTEROUT:&quot;pointerout&quot;,POINTERENTER:&quot;pointerenter&quot;,POINTERLEAVE:&quot;pointerleave&quot;,POINTERCANCEL:&quot;pointercancel&quot;},rst=class extends nst{constructor(t){super(),this.delta_=(t=t||{}).delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==sst.DBLCLICK){const i=t.originalEvent,n=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_;ist(t.map.getView(),s,n,this.duration_),i.preventDefault(),e=!0}return!e}};function ost(t){const e=t.length;let i=0,n=0;for(let s=0;s&lt;e;s++)i+=t[s].clientX,n+=t[s].clientY;return[i/e,n/e]}var ast=class extends nst{constructor(t){super(t=t||{}),t.handleDownEvent&amp;&amp;(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&amp;&amp;(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&amp;&amp;(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&amp;&amp;(this.handleUpEvent=t.handleUpEvent),t.stopDown&amp;&amp;(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==sst.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==sst.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&amp;&amp;this.targetPointers.length&gt;0}}else if(t.type==sst.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==sst.POINTERMOVE&amp;&amp;this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&amp;&amp;(this.targetPointers=t.activePointers)}};function lst(t){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n&lt;s&amp;&amp;(i=i&amp;&amp;e[n](t),i);++n);return i}}const cst=function(t){const e=t.originalEvent;return e.altKey&amp;&amp;!(e.metaKey||e.ctrlKey)&amp;&amp;e.shiftKey},hst=function(t){return!t.map.getTargetElement().hasAttribute(&quot;tabindex&quot;)||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)}(t)},ust=_z,dst=function(t){const e=t.originalEvent;return 0==e.button&amp;&amp;!(Lz&amp;&amp;Bz&amp;&amp;e.ctrlKey)},pst=bz,fst=function(t){const e=t.originalEvent;return!e.altKey&amp;&amp;!(e.metaKey||e.ctrlKey)&amp;&amp;!e.shiftKey},mst=function(t){const e=t.originalEvent;return!e.altKey&amp;&amp;(Bz?e.metaKey:e.ctrlKey)&amp;&amp;!e.shiftKey},gst=function(t){const e=t.originalEvent;return!e.altKey&amp;&amp;!(e.metaKey||e.ctrlKey)&amp;&amp;e.shiftKey},Ast=function(t){const e=t.originalEvent,i=e.target.tagName;return&quot;INPUT&quot;!==i&amp;&amp;&quot;SELECT&quot;!==i&amp;&amp;&quot;TEXTAREA&quot;!==i&amp;&amp;!e.target.isContentEditable},vst=function(t){const e=t.originalEvent;return nN(void 0!==e,56),&quot;mouse&quot;==e.pointerType},_st=function(t){const e=t.originalEvent;return nN(void 0!==e,56),e.isPrimary&amp;&amp;0===e.button};var bst=class extends ast{constructor(t){super({stopDown:bz}),this.kinetic_=(t=t||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const e=t.condition?t.condition:lst(fst,_st);this.condition_=t.onFocusOnly?lst(hst,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,i=ost(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&amp;&amp;this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();(function(t,e){t[0]*=e,t[1]*=e})(e,n.getResolution()),dV(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&amp;&amp;this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&amp;&amp;this.kinetic_&amp;&amp;this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),r=e.getPixelFromCoordinateInternal(s),o=e.getCoordinateFromPixelInternal([r[0]-t*Math.cos(n),r[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(o),duration:500,easing:Tz})}return this.panning_&amp;&amp;(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&amp;&amp;this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length&gt;0&amp;&amp;this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&amp;&amp;e.cancelAnimations(),this.kinetic_&amp;&amp;this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length&gt;1,!0}return!1}};function yst(t){if(void 0!==t)return 0}function xst(t){if(void 0!==t)return t}var wst=class extends ast{constructor(t){t=t||{},super({stopDown:bz}),this.condition_=t.condition?t.condition:cst,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!vst(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===yst)return;const n=e.getSize(),s=t.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);void 0!==this.lastAngle_&amp;&amp;i.adjustRotationInternal(-(r-this.lastAngle_)),this.lastAngle_=r}handleUpEvent(t){return!vst(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(vst(t)&amp;&amp;dst(t)&amp;&amp;this.condition_(t))&amp;&amp;(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},Cst=class extends dz{constructor(t){super(),this.geometry_=null,this.element_=document.createElement(&quot;div&quot;),this.element_.style.position=&quot;absolute&quot;,this.element_.style.pointerEvents=&quot;auto&quot;,this.element_.className=&quot;ol-box &quot;+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i=&quot;px&quot;,n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left=&quot;inherit&quot;,t.top=&quot;inherit&quot;,t.width=&quot;inherit&quot;,t.height=&quot;inherit&quot;}this.map_=t,this.map_&amp;&amp;this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new I6([i])}getGeometry(){return this.geometry_}};class Sst extends pz{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}var kst=class extends ast{constructor(t){super(),this.box_=new Cst((t=t||{}).className||&quot;ol-dragbox&quot;),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&amp;&amp;(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:dst,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s&gt;=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Sst(&quot;boxdrag&quot;,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&amp;&amp;this.onBoxEnd(t),this.dispatchEvent(new Sst(e?&quot;boxend&quot;:&quot;boxcancel&quot;,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&amp;&amp;(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Sst(&quot;boxstart&quot;,t.coordinate,t)),!0)}onBoxEnd(t){}},Est=class extends kst{constructor(t){super({condition:(t=t||{}).condition?t.condition:gst,className:t.className||&quot;ol-dragzoom&quot;,minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&amp;&amp;t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),s=e.getResolution()/n;i=i.clone(),i.scale(s*s)}e.fitInternal(i,{duration:this.duration_,easing:Tz})}},Mst=class extends nst{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return fst(t)&amp;&amp;Ast(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(&quot;keydown&quot;==t.type){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&amp;&amp;(40==n||37==n||39==n||38==n)){const s=t.map.getView(),r=s.getResolution()*this.pixelDelta_;let o=0,a=0;40==n?a=-r:37==n?o=-r:39==n?o=r:a=r;const l=[o,a];dV(l,s.getRotation()),function(t,e,i){const n=t.getCenterInternal();n&amp;&amp;t.animateInternal({duration:void 0!==i?i:250,easing:Dz,center:t.getConstrainedCenter([n[0]+e[0],n[1]+e[1]])})}(s,l,this.duration_),i.preventDefault(),e=!0}}return!e}},Tst=class extends nst{constructor(t){super(),this.condition_=(t=t||{}).condition?t.condition:Ast,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(&quot;keydown&quot;==t.type||&quot;keypress&quot;==t.type){const i=t.originalEvent,n=i.charCode;if(this.condition_(t)&amp;&amp;(n==&quot;+&quot;.charCodeAt(0)||n==&quot;-&quot;.charCodeAt(0))){const s=t.map,r=n==&quot;+&quot;.charCodeAt(0)?this.delta_:-this.delta_;ist(s.getView(),r,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},Ist=class extends nst{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&amp;&amp;t.constrainResolution;const e=t.condition?t.condition:ust;this.condition_=t.onFocusOnly?lst(hst,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&amp;&amp;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_&gt;0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||&quot;wheel&quot;!==t.type)return!0;const e=t.map,i=t.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&amp;&amp;(this.lastAnchor_=t.coordinate),&quot;wheel&quot;==t.type&amp;&amp;(n=i.deltaY,Rz&amp;&amp;i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&amp;&amp;(n/=zz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&amp;&amp;(n*=40)),0===n)return!1;this.lastDelta_=n;const s=Date.now();void 0===this.startTime_&amp;&amp;(this.startTime_=s),(!this.mode_||s-this.startTime_&gt;this.trackpadEventGap_)&amp;&amp;(this.mode_=Math.abs(n)&lt;4?&quot;trackpad&quot;:&quot;wheel&quot;);const r=e.getView();if(&quot;trackpad&quot;===this.mode_&amp;&amp;!r.getConstrainResolution()&amp;&amp;!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&amp;&amp;r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=n;const o=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),o),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&amp;&amp;e.cancelAnimations();let i=-JN(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&amp;&amp;(i=i?i&gt;0?1:-1:0),ist(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Dst=class extends ast{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=bz),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&amp;&amp;Math.abs(this.rotationDelta_)&gt;this.threshold_&amp;&amp;(this.rotating_=!0),e=t}this.lastAngle_=s;const r=t.map,o=r.getView();if(o.getConstraints().rotation===yst)return;const a=r.getViewport().getBoundingClientRect(),l=ost(this.targetPointers);l[0]-=a.left,l[1]-=a.top,this.anchor_=r.getCoordinateFromPixelInternal(l),this.rotating_&amp;&amp;(r.render(),o.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return!(this.targetPointers.length&lt;2&amp;&amp;(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length&gt;=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},Ost=class extends ast{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=bz),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,r=i.clientY-n.clientY,o=Math.sqrt(s*s+r*r);void 0!==this.lastDistance_&amp;&amp;(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&amp;&amp;(this.lastScaleDelta_=e);const c=a.getViewport().getBoundingClientRect(),h=ost(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=a.getCoordinateFromPixelInternal(h),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){return!(this.targetPointers.length&lt;2)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_&gt;1?1:-1),!1)}handleDownEvent(t){if(this.targetPointers.length&gt;=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function Pst(t){t=t||{};const e=new est,i=new class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length&lt;6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]&lt;t)return!1;let i=e-3;for(;i&gt;0&amp;&amp;this.points_[i+2]&gt;t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n&lt;1e3/60)return!1;const s=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,s),this.initialVelocity_=Math.sqrt(s*s+r*r)/n,this.initialVelocity_&gt;this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&amp;&amp;e.push(new wst),(void 0===t.doubleClickZoom||t.doubleClickZoom)&amp;&amp;e.push(new rst({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&amp;&amp;e.push(new bst({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&amp;&amp;e.push(new Dst),(void 0===t.pinchZoom||t.pinchZoom)&amp;&amp;e.push(new Ost({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&amp;&amp;(e.push(new Mst),e.push(new Tst({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&amp;&amp;e.push(new Ist({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&amp;&amp;e.push(new Est({duration:t.zoomDuration})),e}var Rst=class extends s${constructor(t){super(),this.background_=t.background;const e=Object.assign({},t);&quot;object&quot;==typeof t.properties&amp;&amp;(delete e.properties,Object.assign(e,t.properties)),e.opacity=void 0!==t.opacity?t.opacity:1,nN(&quot;number&quot;==typeof e.opacity,64),e.visible=void 0===t.visible||t.visible,e.zIndex=t.zIndex,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,e.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,e.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:&quot;ol-layer&quot;,delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=JN(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Sz()}getLayerStatesArray(t){return Sz()}getExtent(){return this.get(&quot;extent&quot;)}getMaxResolution(){return this.get(&quot;maxResolution&quot;)}getMinResolution(){return this.get(&quot;minResolution&quot;)}getMinZoom(){return this.get(&quot;minZoom&quot;)}getMaxZoom(){return this.get(&quot;maxZoom&quot;)}getOpacity(){return this.get(&quot;opacity&quot;)}getSourceState(){return Sz()}getVisible(){return this.get(&quot;visible&quot;)}getZIndex(){return this.get(&quot;zIndex&quot;)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(&quot;extent&quot;,t)}setMaxResolution(t){this.set(&quot;maxResolution&quot;,t)}setMinResolution(t){this.set(&quot;minResolution&quot;,t)}setMaxZoom(t){this.set(&quot;maxZoom&quot;,t)}setMinZoom(t){this.set(&quot;minZoom&quot;,t)}setOpacity(t){nN(&quot;number&quot;==typeof t,64),this.set(&quot;opacity&quot;,t)}setVisible(t){this.set(&quot;visible&quot;,t)}setZIndex(t){this.set(&quot;zIndex&quot;,t)}disposeInternal(){this.state_&amp;&amp;(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function Fst(t,e){if(!t.visible)return!1;const i=e.resolution;if(i&lt;t.minResolution||i&gt;=t.maxResolution)return!1;const n=e.zoom;return n&gt;t.minZoom&amp;&amp;n&lt;=t.maxZoom}var Lst=class extends Rst{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&amp;&amp;(this.render=t.render),t.map&amp;&amp;this.setMap(t.map),this.addChangeListener(&quot;source&quot;,this.handleSourcePropertyChange_),this.setSource(t.source?t.source:null)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(&quot;source&quot;)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():&quot;undefined&quot;}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&amp;&amp;(Xz(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&amp;&amp;(this.sourceChangeKey_=Zz(t,&quot;change&quot;,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(t=&gt;t([]))}getData(t){return this.renderer_&amp;&amp;this.rendered?this.renderer_.getData(t):null}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(&quot;map&quot;,t)}getMapInternal(){return this.get(&quot;map&quot;)}setMap(t){this.mapPrecomposeKey_&amp;&amp;(Xz(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&amp;&amp;(Xz(this.mapRenderKey_),this.mapRenderKey_=null),t&amp;&amp;(this.mapPrecomposeKey_=Zz(t,&quot;precompose&quot;,function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);nN(!e.some(function(t){return t.layer===i.layer}),67),e.push(i)},this),this.mapRenderKey_=Zz(this,&quot;change&quot;,t.render,t),this.changed())}setSource(t){this.set(&quot;source&quot;,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&amp;&amp;(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}},Bst=class extends Lst{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(&quot;preload&quot;)}setPreload(t){this.set(&quot;preload&quot;,t)}getUseInterimTilesOnError(){return this.get(&quot;useInterimTilesOnError&quot;)}setUseInterimTilesOnError(t){this.set(&quot;useInterimTilesOnError&quot;,t)}getData(t){return super.getData(t)}},zst=class extends i${constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Sz()}getData(t){return null}prepareFrame(t){return Sz()}renderFrame(t,e){return Sz()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(function(n,s){const r=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,r)}).bind(this)}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){2===t.target.getState()&amp;&amp;this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return 2!=e&amp;&amp;3!=e&amp;&amp;t.addEventListener(&quot;change&quot;,this.boundHandleImageChange_),0==e&amp;&amp;(t.load(),e=t.getState()),2==e}renderIfReadyAndVisible(){const t=this.getLayer();t&amp;&amp;t.getVisible()&amp;&amp;&quot;ready&quot;===t.getSourceState()&amp;&amp;t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},Nst=class extends pz{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}};const Vst=[];let $st=null;var Ust=class extends zst{constructor(t){super(t),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;$st||function(){const t=document.createElement(&quot;canvas&quot;);t.width=1,t.height=1,$st=t.getContext(&quot;2d&quot;)}(),$st.clearRect(0,0,1,1);try{$st.drawImage(t,e,i,1,1,0,0,1,1),n=$st.getImageData(0,0,1,1).data}catch(s){return $st=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return&quot;function&quot;==typeof e&amp;&amp;(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,r;if(t&amp;&amp;t.className===n&amp;&amp;(!i||t&amp;&amp;t.style.backgroundColor&amp;&amp;vz(L4(t.style.backgroundColor),L4(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&amp;&amp;(r=e.getContext(&quot;2d&quot;))}if(r&amp;&amp;r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&amp;&amp;(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement(&quot;div&quot;),s.className=n;let t=s.style;t.position=&quot;absolute&quot;,t.width=&quot;100%&quot;,t.height=&quot;100%&quot;,r=Uz();const e=r.canvas;s.appendChild(e),t=e.style,t.position=&quot;absolute&quot;,t.left=&quot;0&quot;,t.transformOrigin=&quot;top left&quot;,this.container=s,this.context=r}!this.containerReused&amp;&amp;i&amp;&amp;!this.container.style.backgroundColor&amp;&amp;(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=DN(i),s=ON(i),r=CN(i),o=wN(i);m4(e.coordinateToPixelTransform,n),m4(e.coordinateToPixelTransform,s),m4(e.coordinateToPixelTransform,r),m4(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;m4(a,n),m4(a,s),m4(a,r),m4(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new Nst(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(&quot;prerender&quot;,t,e)}postRender(t,e){this.dispatchRenderEvent_(&quot;postrender&quot;,t,e)}getRenderTransform(t,e,i,n,s,r,o){const a=n/e;return A4(this.tempTransform,s/2,r/2,a,-a,-i,-t[0]+o,-t[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},jst=class extends Ust{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new c$(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&amp;&amp;!n}getTile(t,e,i,n){const s=n.pixelRatio,r=n.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(t,e,i,s,r);return 3==a.getState()&amp;&amp;o.getUseInterimTilesOnError()&amp;&amp;o.getPreload()&gt;0&amp;&amp;(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=m4(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&amp;&amp;!lN(s,n))return null;const r=e.pixelRatio,o=e.viewState.projection,a=e.viewState,l=i.getRenderSource(),c=l.getTileGridForProjection(a.projection),h=l.getTilePixelRatio(e.pixelRatio);for(let u=c.getZForResolution(a.resolution);u&gt;=c.getMinZoom();--u){const t=c.getTileCoordForCoordAndZ(n,u),e=l.getTile(u,t[1],t[2],r,o);if(!(e instanceof Jz||e instanceof ZV)||e instanceof ZV&amp;&amp;4===e.getState())return null;if(2!==e.getState())continue;const i=c.getOrigin(u),s=b$(c.getTileSize(u)),d=c.getResolution(u),p=Math.floor(h*((n[0]-i[0])/d-t[1]*s[0])),f=Math.floor(h*((i[1]-n[1])/d-t[2]*s[1])),m=Math.round(h*l.getGutterForProjection(a.projection));return this.getImageData(e.getImage(),p+m,f+m)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&amp;&amp;super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,r=n.resolution,o=n.center,a=n.rotation,l=t.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getRevision(),d=h.getTileGridForProjection(s),p=d.getZForResolution(r,h.zDirection),f=d.getResolution(p);let m=t.extent;const g=t.viewState.resolution,A=h.getTilePixelRatio(l),v=Math.round(PN(m)/g*l),_=Math.round(TN(m)/g*l),b=i.extent&amp;&amp;UV(i.extent);b&amp;&amp;(m=IN(m,UV(i.extent)));const y=f*v/2/A,x=f*_/2/A,w=[o[0]-y,o[1]-x,o[0]+y,o[1]+x],C=d.getTileRangeForExtentAndZ(m,p),S={};S[p]={};const k=this.createLoadedTileFinder(h,s,S),E=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const T=a?MN(n.center,g,a,t.size):void 0;for(let z=C.minX;z&lt;=C.maxX;++z)for(let e=C.minY;e&lt;=C.maxY;++e){if(a&amp;&amp;!d.tileCoordIntersectsViewport([p,z,e],T))continue;const n=this.getTile(p,z,e,t);if(this.isDrawableTile(n)){const e=Ez(this);if(2==n.getState()){S[p][n.tileCoord.toString()]=n;let t=n.inTransition(e);t&amp;&amp;1!==i.opacity&amp;&amp;(n.endTransition(e),t=!1),!this.newTiles_&amp;&amp;(t||!this.renderedTiles.includes(n))&amp;&amp;(this.newTiles_=!0)}if(1===n.getAlpha(e,t.time))continue}const s=d.getTileCoordChildTileRange(n.tileCoord,M,E);let r=!1;s&amp;&amp;(r=k(p+1,s)),r||d.forEachTileCoordParentTileRange(n.tileCoord,k,M,E)}const I=f/r*l/A;A4(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-v/2,-_/2);const D=b4(this.pixelTransform);this.useContainer(e,D,this.getBackground(t));const O=this.context,P=O.canvas;v4(this.inversePixelTransform,this.pixelTransform),A4(this.tempTransform,v/2,_/2,I,I,0,-v/2,-_/2),P.width!=v||P.height!=_?(P.width=v,P.height=_):this.containerReused||O.clearRect(0,0,v,_),b&amp;&amp;this.clipUnrotated(O,t,b),h.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,t),this.renderedTiles.length=0;let R,F,L,B=Object.keys(S).map(Number);B.sort(fz),1!==i.opacity||this.containerReused&amp;&amp;!h.getOpaque(t.viewState.projection)?(R=[],F=[]):B=B.reverse();for(let z=B.length-1;z&gt;=0;--z){const e=B[z],i=h.getTilePixelSize(e,l,s),n=d.getResolution(e)/f,r=i[0]*n*I,o=i[1]*n*I,a=d.getTileCoordForCoordAndZ(DN(w),e),c=d.getTileCoordExtent(a),u=m4(this.tempTransform,[A*(c[0]-w[0])/f,A*(w[3]-c[3])/f]),m=A*h.getGutterForProjection(s),g=S[e];for(const s in g){const i=g[s],n=i.tileCoord,l=a[1]-n[1],c=Math.round(u[0]-(l-1)*r),d=a[2]-n[2],f=Math.round(u[1]-(d-1)*o),A=Math.round(u[0]-l*r),v=Math.round(u[1]-d*o),_=c-A,b=f-v,y=p===e,x=y&amp;&amp;1!==i.getAlpha(Ez(this),t.time);let w=!1;if(!x)if(R){L=[A,v,A+_,v,A+_,v+b,A,v+b];for(let t=0,i=R.length;t&lt;i;++t)if(p!==e&amp;&amp;e&lt;F[t]){const e=R[t];RN([A,v,A+_,v+b],[e[0],e[3],e[4],e[7]])&amp;&amp;(w||(O.save(),w=!0),O.beginPath(),O.moveTo(L[0],L[1]),O.lineTo(L[2],L[3]),O.lineTo(L[4],L[5]),O.lineTo(L[6],L[7]),O.moveTo(e[6],e[7]),O.lineTo(e[4],e[5]),O.lineTo(e[2],e[3]),O.lineTo(e[0],e[1]),O.clip())}R.push(L),F.push(e)}else O.clearRect(A,v,_,b);this.drawTileImage(i,t,A,v,_,b,m,y),R&amp;&amp;!x?(w&amp;&amp;O.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,h,i)}}return this.renderedRevision=u,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!gN(this.renderedExtent_,w),this.renderedExtent_=w,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(t,h,d,l,s,m,p,c.getPreload()),this.scheduleExpireCache(t,h),this.postRender(O,t),i.extent&amp;&amp;O.restore(),O.imageSmoothingEnabled=!0,D!==P.style.transform&amp;&amp;(P.style.transform=D),this.container}drawTileImage(t,e,i,n,s,r,o,a){const l=this.getTileImage(t);if(!l)return;const c=Ez(this),h=e.layerStatesArray[e.layerIndex],u=h.opacity*(a?t.getAlpha(c,e.time):1),d=u!==this.context.globalAlpha;d&amp;&amp;(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,o,o,l.width-2*o,l.height-2*o,i,n,s,r),d&amp;&amp;this.context.restore(),u!==h.opacity?e.animate=!0:a&amp;&amp;t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=(function(t,e,i){const n=Ez(t);n in i.usedTiles&amp;&amp;t.expireCache(i.viewState.projection,i.usedTiles[n])}).bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=Ez(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,s,r,o,a,l){const c=Ez(e);c in t.wantedTiles||(t.wantedTiles[c]={});const h=t.wantedTiles[c],u=t.tileQueue,d=i.getMinZoom(),p=t.viewState.rotation,f=p?MN(t.viewState.center,t.viewState.resolution,p,t.size):void 0;let m,g,A,v,_,b,y=0;for(b=d;b&lt;=o;++b)for(g=i.getTileRangeForExtentAndZ(r,b,g),A=i.getResolution(b),v=g.minX;v&lt;=g.maxX;++v)for(_=g.minY;_&lt;=g.maxY;++_)p&amp;&amp;!i.tileCoordIntersectsViewport([b,v,_],f)||(o-b&lt;=a?(++y,m=e.getTile(b,v,_,n,s),0==m.getState()&amp;&amp;(h[m.getKey()]=!0,u.isKeyQueued(m.getKey())||u.enqueue([m,c,i.getTileCoordCenter(m.tileCoord),A])),void 0!==l&amp;&amp;l(m)):e.useTile(b,v,_,s));e.updateCacheSize(y,s)}},Hst=class extends Bst{constructor(t){super(t)}createRenderer(){return new jst(this)}};function Gst(t,e){V4.expire()}var qst=class extends dz{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Sz()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;A4(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),v4(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,r,o,a){let l;const c=e.viewState;function h(t,e,i,n){return s.call(r,e,t?i:null,n)}const u=c.projection,d=mV(t.slice(),u),p=[[0,0]];if(u.canWrapX()&amp;&amp;n){const t=PN(u.getExtent());p.push([-t,0],[t,0])}const f=e.layerStatesArray,m=f.length,g=[],A=[];for(let _=0;_&lt;p.length;_++)for(let n=m-1;n&gt;=0;--n){const s=f[n],r=s.layer;if(r.hasRenderer()&amp;&amp;Fst(s,c)&amp;&amp;o.call(a,r)){const n=r.getRenderer(),o=r.getSource();if(n&amp;&amp;o){const r=o.getWrapX()?d:t,a=h.bind(null,s.managed);A[0]=r[0]+p[_][0],A[1]=r[1]+p[_][1],l=n.forEachFeatureAtCoordinate(A,e,i,a,g)}if(l)return l}}if(0===g.length)return;const v=1/g.length;return g.forEach((t,e)=&gt;t.distanceSq+=e*v),g.sort((t,e)=&gt;t.distanceSq-e.distanceSq),g.some(t=&gt;l=t.callback(t.feature,t.layer,t.geometry)),l}hasFeatureAtCoordinate(t,e,i,n,s,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,_z,this,s,r)}getMap(){return this.map_}renderFrame(t){Sz()}scheduleExpireIconCache(t){V4.canExpireCache()&amp;&amp;t.postRenderFunctions.push(Gst)}},Wst=class extends qst{constructor(t){super(t),this.fontChangeListenerKey_=Zz(t8,&quot;propertychange&quot;,t.redrawText.bind(t)),this.element_=document.createElement(&quot;div&quot;);const e=this.element_.style;e.position=&quot;absolute&quot;,e.width=&quot;100%&quot;,e.height=&quot;100%&quot;,e.zIndex=&quot;0&quot;,this.element_.className=N6+&quot; ol-layers&quot;;const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new Nst(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){Xz(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&amp;&amp;(this.element_.style.display=&quot;none&quot;,this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(&quot;precompose&quot;,t);const e=t.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),i=t.viewState;this.children_.length=0;const n=[];let s=null;for(let r=0,o=e.length;r&lt;o;++r){const o=e[r];t.layerIndex=r;const a=o.layer,l=a.getSourceState();if(!Fst(o,i)||&quot;ready&quot;!=l&amp;&amp;&quot;undefined&quot;!=l){a.unrender();continue}const c=a.render(t,s);!c||(c!==s&amp;&amp;(this.children_.push(c),s=c),&quot;getDeclutter&quot;in a&amp;&amp;n.push(a))}for(let r=n.length-1;r&gt;=0;--r)n[r].renderDeclutter(t);(function(t,e){const i=t.childNodes;for(let n=0;;++n){const s=i[n],r=e[n];if(!s&amp;&amp;!r)break;if(s!==r){if(!s){t.appendChild(r);continue}if(!r){t.removeChild(s),--n;continue}t.insertBefore(r,s)}}})(this.element_,this.children_),this.dispatchRenderEvent(&quot;postcompose&quot;,t),this.renderedVisible_||(this.element_.style.display=&quot;&quot;,this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};class Yst extends pz{constructor(t,e){super(t),this.layer=e}}class Zst extends Rst{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(&quot;layers&quot;,this.handleLayersChanged_),i?Array.isArray(i)?i=new est(i.slice(),{unique:!0}):nN(&quot;function&quot;==typeof i.getArray,43):i=new est(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xz),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Zz(t,&quot;add&quot;,this.handleLayersAdd_,this),Zz(t,&quot;remove&quot;,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Xz);xz(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i&lt;n;i++){const t=e[i];this.registerLayerListeners_(t),this.dispatchEvent(new Yst(&quot;addlayer&quot;,t))}this.changed()}registerLayerListeners_(t){const e=[Zz(t,&quot;propertychange&quot;,this.handleLayerChange_,this),Zz(t,&quot;change&quot;,this.handleLayerChange_,this)];t instanceof Zst&amp;&amp;e.push(Zz(t,&quot;addlayer&quot;,this.handleLayerGroupAdd_,this),Zz(t,&quot;removelayer&quot;,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ez(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Yst(&quot;addlayer&quot;,t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Yst(&quot;removelayer&quot;,t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Yst(&quot;addlayer&quot;,e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=Ez(e);this.listenerKeys_[i].forEach(Xz),delete this.listenerKeys_[i],this.dispatchEvent(new Yst(&quot;removelayer&quot;,e)),this.changed()}getLayers(){return this.get(&quot;layers&quot;)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e&lt;i;++e)this.dispatchEvent(new Yst(&quot;removelayer&quot;,t[e]))}this.set(&quot;layers&quot;,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});const n=this.getLayerState();let s=n.zIndex;!t&amp;&amp;void 0===n.zIndex&amp;&amp;(s=0);for(let r=i,o=e.length;r&lt;o;r++){const t=e[r];t.opacity*=n.opacity,t.visible=t.visible&amp;&amp;n.visible,t.maxResolution=Math.min(t.maxResolution,n.maxResolution),t.minResolution=Math.max(t.minResolution,n.minResolution),t.minZoom=Math.max(t.minZoom,n.minZoom),t.maxZoom=Math.min(t.maxZoom,n.maxZoom),void 0!==n.extent&amp;&amp;(t.extent=void 0!==t.extent?IN(t.extent,n.extent):n.extent),void 0===t.zIndex&amp;&amp;(t.zIndex=s)}return e}getSourceState(){return&quot;ready&quot;}}var Kst=Zst,Xst=class extends pz{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}},Qst=class extends Xst{constructor(t,e,i,n,s,r){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&amp;&amp;n,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),&quot;preventDefault&quot;in this.originalEvent&amp;&amp;this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),&quot;stopPropagation&quot;in this.originalEvent&amp;&amp;this.originalEvent.stopPropagation()}},Jst=class extends Cz{constructor(t,e){super(t),this.map_=t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Zz(i,&quot;pointerdown&quot;,this.handlePointerDown_,this),this.relayedListenerKey_=Zz(i,&quot;pointermove&quot;,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(&quot;touchmove&quot;,this.boundHandleTouchMove_,!!$z&amp;&amp;{passive:!1})}emulateClick_(t){let e=new Qst(sst.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Qst(sst.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;const e=new Qst(sst.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==sst.POINTERUP||e.type==sst.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else(e.type==sst.POINTERDOWN||e.type==sst.POINTERMOVE)&amp;&amp;(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Qst(sst.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&amp;&amp;!e.defaultPrevented&amp;&amp;!this.dragging_&amp;&amp;this.isMouseActionButton_(t)&amp;&amp;this.emulateClick_(this.down_),0===this.activePointers_.length&amp;&amp;(this.dragListenerKeys_.forEach(Xz),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new Qst(sst.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const i in t){const e=t[i];this.down_[i]=&quot;function&quot;==typeof e?yz:e}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Zz(t,sst.POINTERMOVE,this.handlePointerMove_,this),Zz(t,sst.POINTERUP,this.handlePointerUp_,this),Zz(this.element_,sst.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&amp;&amp;this.element_.getRootNode()!==t&amp;&amp;this.dragListenerKeys_.push(Zz(this.element_.getRootNode(),sst.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Qst(sst.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Qst(sst.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&amp;&amp;(&quot;boolean&quot;!=typeof t.cancelable||!0===t.cancelable)&amp;&amp;t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)&gt;this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)&gt;this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&amp;&amp;(Xz(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(&quot;touchmove&quot;,this.boundHandleTouchMove_),this.pointerdownListenerKey_&amp;&amp;(Xz(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xz),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};const trt=1/0;var ert={CENTER:&quot;center&quot;,RESOLUTION:&quot;resolution&quot;,ROTATION:&quot;rotation&quot;};function irt(t,e,i){return function(n,s,r,o,a){if(!n)return;if(!s&amp;&amp;!e)return n;const l=e?0:r[0]*s,c=e?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let d=t[0]+l/2+h,p=t[2]-l/2+h,f=t[1]+c/2+u,m=t[3]-c/2+u;d&gt;p&amp;&amp;(d=(p+d)/2,p=d),f&gt;m&amp;&amp;(f=(m+f)/2,m=f);let g=JN(n[0],d,p),A=JN(n[1],f,m);if(o&amp;&amp;i&amp;&amp;s){const t=30*s;g+=-t*Math.log(1+Math.max(0,d-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-p)/t),A+=-t*Math.log(1+Math.max(0,f-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-m)/t)}return[g,A]}}function nrt(t){return t}function srt(t,e,i,n){const s=PN(e)/i[0],r=TN(e)/i[1];return n?Math.min(t,Math.max(s,r)):Math.min(t,Math.min(s,r))}function rrt(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&amp;&amp;(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),JN(n,i/2,2*e)}function ort(t,e,i,n,s){return i=void 0===i||i,function(r,o,a,l){if(void 0!==r){const o=n?srt(t,n,a,s):t;return i&amp;&amp;l?rrt(r,o,e):JN(r,e,o)}}}function art(t,e){setTimeout(function(){t(e)},0)}function lrt(t){return!(t.sourceCenter&amp;&amp;t.targetCenter&amp;&amp;!uV(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function crt(t,e,i,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=t[0]*r-t[1]*o,l=t[1]*r+t[0]*o;return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,o=-o,[a*r-l*o,l*r+a*o]}var hrt=class extends s${constructor(t){super(),t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.projection_=TV(t.projection,&quot;EPSG:3857&quot;),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,t.projection&amp;&amp;xV(),t.center&amp;&amp;(t.center=VV(t.center)),t.extent&amp;&amp;(t.extent=UV(t.extent)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in ert)delete e[o];this.setProperties(e,!0);const i=function(t){let e,i,n;let s=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28;const o=void 0!==t.zoomFactor?t.zoomFactor:2,a=void 0!==t.multiWorld&amp;&amp;t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&amp;&amp;t.showFullExtent,h=TV(t.projection,&quot;EPSG:3857&quot;),u=h.getExtent();let d=t.constrainOnlyCenter,p=t.extent;if(!a&amp;&amp;!p&amp;&amp;h.isGlobal()&amp;&amp;(d=!1,p=u),void 0!==t.resolutions){const o=t.resolutions;i=o[s],n=void 0!==o[r]?o[r]:o[o.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,r,o,a){if(void 0!==s){const l=t[0],c=t[t.length-1],h=i?srt(l,i,o,n):l;if(a)return e?rrt(s,h,c):JN(s,c,h);const u=Math.min(h,s),d=Math.floor(mz(t,u,r));return t[d]&gt;h&amp;&amp;d&lt;t.length-1?t[d+1]:t[d]}}}(o,l,!d&amp;&amp;p,c):ort(i,n,l,!d&amp;&amp;p,c)}else{const a=(u?Math.max(PN(u),TN(u)):360*BN.degrees/h.getMetersPerUnit())/256/Math.pow(2,0),f=a/Math.pow(2,28);i=t.maxResolution,void 0!==i?s=0:i=a/Math.pow(o,s),n=t.minResolution,void 0===n&amp;&amp;(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(o,r):a/Math.pow(o,r):f),r=s+Math.floor(Math.log(i/n)/Math.log(o)),n=i/Math.pow(o,r-s),e=t.constrainResolution?function(t,e,i,n,s,r){return n=void 0===n||n,i=void 0!==i?i:0,function(o,a,l,c){if(void 0!==o){const h=s?srt(e,s,l,r):e;if(c)return n?rrt(o,h,i):JN(o,i,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(t)-u),p=-a*(.5-u)+.5,f=Math.min(h,o),m=Math.floor(Math.log(e/f)/Math.log(t)+p),g=Math.max(d,m);return JN(e/Math.pow(t,g),i,h)}}}(o,i,n,l,!d&amp;&amp;p,c):ort(i,n,l,!d&amp;&amp;p,c)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:o}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent)return irt(t.extent,t.constrainOnlyCenter,void 0===t.smoothExtentConstraint||t.smoothExtentConstraint);const e=TV(t.projection,&quot;EPSG:3857&quot;);if(!0!==t.multiWorld&amp;&amp;e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,irt(t,!1,!1)}return nrt}(t),s=i.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?function(t){return t=t||nV(5),function(e,i){return i?e:void 0!==e?Math.abs(e)&lt;=t?0:e:void 0}}():!1===e?xst:&quot;number&quot;==typeof e?function(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):xst}return yst}(t);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&amp;&amp;this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenter();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(n[3]-e[3]+e[1]-n[1]),i[1]-s/2*(n[0]-e[0]+e[2]-n[2])])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&amp;&amp;!this.getAnimating()&amp;&amp;this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i&lt;e.length;++i){let t=arguments[i];t.center&amp;&amp;(t=Object.assign({},t),t.center=VV(t.center,this.getProjection())),t.anchor&amp;&amp;(t=Object.assign({},t),t.anchor=VV(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i&gt;1&amp;&amp;&quot;function&quot;==typeof arguments[i-1]&amp;&amp;(e=arguments[i-1],--i);let n=0;for(;n&lt;i&amp;&amp;!this.isDef();++n){const t=arguments[n];t.center&amp;&amp;this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&amp;&amp;this.setResolution(t.resolution),void 0!==t.rotation&amp;&amp;this.setRotation(t.rotation)}if(n===i)return void(e&amp;&amp;art(e,!0));let s=Date.now(),r=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n&lt;i;++n){const t=arguments[n],i={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||Iz,callback:e};if(t.center&amp;&amp;(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=o,i.targetResolution=this.getResolutionForZoom(t.zoom),o=i.targetResolution):t.resolution&amp;&amp;(i.sourceResolution=o,i.targetResolution=t.resolution,o=i.targetResolution),void 0!==t.rotation){i.sourceRotation=a;const e=sV(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+e,a=i.targetRotation}lrt(i)?i.complete=!0:s+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]&gt;0}getInteracting(){return this.hints_[1]&gt;0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,i=this.animations_.length;e&lt;i;++e){const i=this.animations_[e];if(i[0].callback&amp;&amp;art(i[0].callback,!1),!t)for(let e=0,n=i.length;e&lt;n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&amp;&amp;(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i&gt;=0;--i){const n=this.animations_[i];let s=!0;for(let i=0,r=n.length;i&lt;r;++i){const r=n[i];if(r.complete)continue;const o=t-r.start;let a=r.duration&gt;0?o/r.duration:1;a&gt;=1?(r.complete=!0,a=1):s=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],i=r.targetCenter[0],n=r.targetCenter[1];this.nextCenter_=r.targetCenter,this.targetCenter_=[t+l*(i-t),e+l*(n-e)]}if(r.sourceResolution&amp;&amp;r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&amp;&amp;void 0!==r.targetRotation){const t=1===l?sV(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&amp;&amp;art(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&amp;&amp;void 0===this.updateAnimationKey_&amp;&amp;(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&amp;&amp;(i=[n[0]-e[0],n[1]-e[1]],dV(i,t-this.getRotation()),function(t,e){t[0]+=+e[0],t[1]+=+e[1]}(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();return void 0!==n&amp;&amp;void 0!==s&amp;&amp;(i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&amp;&amp;NV(t,this.getProjection())}getCenterInternal(){return this.get(ert.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get(&quot;constrainResolution&quot;)}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return $V(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();nN(e,1);const i=this.getResolution();nN(void 0!==i,2);const n=this.getRotation();return nN(void 0!==n,3),EN(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ert.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(UV(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=PN(t)/e[0],n=TN(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=Math.log(e/this.minResolution_)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(ert.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=Math.log(i/this.minResolution_)/e;return function(t){return Math.log(i/t)/e/n}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&amp;&amp;(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=crt(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&amp;&amp;(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=mz(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length&lt;=1)return 0;const e=JN(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],JN(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(nN(Array.isArray(t)||&quot;function&quot;==typeof t.getSimplifiedGeometry,24),Array.isArray(t))nN(!FN(t),25),i=D6(UV(t,this.getProjection()));else if(&quot;Circle&quot;===t.getType()){const e=UV(t.getExtent(),this.getProjection());i=D6(e),i.rotate(this.getRotation(),SN(e))}else{const e=zV();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),r=t.getStride();let o=1/0,a=1/0,l=-1/0,c=-1/0;for(let h=0,u=s.length;h&lt;u;h+=r){const t=s[h]*i-s[h+1]*n,e=s[h]*n+s[h+1]*i;o=Math.min(o,t),a=Math.min(a,e),l=Math.max(l,t),c=Math.max(c,e)}return[o,a,l,c]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&amp;&amp;e.nearest;let r;r=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?r:Math.max(a,r),a=this.getConstrainedResolution(a,s?0:1);const l=this.getRotation(),c=Math.sin(l),h=Math.cos(l),u=SN(o);u[0]+=(n[1]-n[3])/2*a,u[1]+=(n[0]-n[2])/2*a;const d=this.getConstrainedCenter([u[0]*h-u[1]*c,u[1]*h+u[0]*c],a),p=e.callback?e.callback:yz;void 0!==e.duration?this.animateInternal({resolution:a,center:d,duration:e.duration,easing:e.easing},p):(this.targetResolution_=a,this.targetCenter_=d,this.applyTargetState_(!1,!0),art(p,!0))}centerOn(t,e,i){this.centerOnInternal(VV(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(crt(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const r=this.padding_;if(r&amp;&amp;t){const o=this.getViewportSizeMinusPadding_(-i),a=crt(t,n,[o[0]/2+r[3],o[1]/2+r[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&amp;&amp;void 0!==this.getResolution()}adjustCenter(t){const e=NV(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&amp;&amp;VV(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&amp;&amp;(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&amp;&amp;(e=VV(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&amp;&amp;(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&amp;&amp;VV(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(ert.ROTATION)!==n&amp;&amp;this.set(ert.ROTATION,n),this.get(ert.RESOLUTION)!==r&amp;&amp;(this.set(ert.RESOLUTION,r),this.set(&quot;zoom&quot;,this.getZoom(),!0)),(!o||!this.get(ert.CENTER)||!uV(this.get(ert.CENTER),o))&amp;&amp;this.set(ert.CENTER,o),this.getAnimating()&amp;&amp;!t&amp;&amp;this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,n,r),a=this.constraints_.center(this.targetCenter_,o,r,!1,this.calculateCenterShift(this.targetCenter_,o,s,r));if(0===t&amp;&amp;!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!uV(this.getCenterInternal(),a))&amp;&amp;(this.getAnimating()&amp;&amp;this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:o,duration:t,easing:Tz,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,i){i=i&amp;&amp;VV(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}},urt=class extends s${constructor(t){super();const e=t.element;e&amp;&amp;!t.target&amp;&amp;!e.style.pointerEvents&amp;&amp;(e.style.pointerEvents=&quot;auto&quot;),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&amp;&amp;(this.render=t.render),t.target&amp;&amp;this.setTarget(t.target)}disposeInternal(){Wz(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&amp;&amp;Wz(this.element);for(let e=0,i=this.listenerKeys.length;e&lt;i;++e)Xz(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&amp;&amp;((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==yz&amp;&amp;this.listenerKeys.push(Zz(t,&quot;postrender&quot;,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=&quot;string&quot;==typeof t?document.getElementById(t):t}},drt=class extends urt{constructor(t){t=t||{},super({element:document.createElement(&quot;div&quot;),render:t.render,target:t.target}),this.ulElement_=document.createElement(&quot;ul&quot;),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:&quot;ol-attribution&quot;,i=void 0!==t.tipLabel?t.tipLabel:&quot;Attributions&quot;,n=void 0!==t.expandClassName?t.expandClassName:e+&quot;-expand&quot;,s=void 0!==t.collapseLabel?t.collapseLabel:&quot;\u203a&quot;,r=void 0!==t.collapseClassName?t.collapseClassName:e+&quot;-collapse&quot;;&quot;string&quot;==typeof s?(this.collapseLabel_=document.createElement(&quot;span&quot;),this.collapseLabel_.textContent=s,this.collapseLabel_.className=r):this.collapseLabel_=s;const o=void 0!==t.label?t.label:&quot;i&quot;;&quot;string&quot;==typeof o?(this.label_=document.createElement(&quot;span&quot;),this.label_.textContent=o,this.label_.className=n):this.label_=o;const a=this.collapsible_&amp;&amp;!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement(&quot;button&quot;),this.toggleButton_.setAttribute(&quot;type&quot;,&quot;button&quot;),this.toggleButton_.setAttribute(&quot;aria-expanded&quot;,String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(&quot;click&quot;,this.handleClick_.bind(this),!1);const l=this.element;l.className=e+&quot; &quot;+N6+&quot; &quot;+V6+(this.collapsed_&amp;&amp;this.collapsible_?&quot; &quot;+$6:&quot;&quot;)+(this.collapsible_?&quot;&quot;:&quot; ol-uncollapsible&quot;),l.appendChild(this.toggleButton_),l.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},i=[];let n=!0;const s=t.layerStatesArray;for(let r=0,o=s.length;r&lt;o;++r){const o=s[r];if(!Fst(o,t.viewState))continue;const a=o.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const c=l(t);if(c)if(n=n&amp;&amp;!1!==a.getAttributionsCollapsible(),Array.isArray(c))for(let t=0,n=c.length;t&lt;n;++t)c[t]in e||(i.push(c[t]),e[c[t]]=!0);else c in e||(i.push(c),e[c]=!0)}return this.overrideCollapsible_||this.setCollapsible(n),i}updateElement_(t){if(!t)return void(this.renderedVisible_&amp;&amp;(this.element.style.display=&quot;none&quot;,this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length&gt;0;if(this.renderedVisible_!=i&amp;&amp;(this.element.style.display=i?&quot;&quot;:&quot;none&quot;,this.renderedVisible_=i),!vz(e,this.renderedAttributions_)){Yz(this.ulElement_);for(let t=0,i=e.length;t&lt;i;++t){const i=document.createElement(&quot;li&quot;);i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($6),this.collapsed_?qz(this.collapseLabel_,this.label_):qz(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute(&quot;aria-expanded&quot;,String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&amp;&amp;(this.collapsible_=t,this.element.classList.toggle(&quot;ol-uncollapsible&quot;),this.userCollapsed_&amp;&amp;this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&amp;&amp;this.collapsed_!==t&amp;&amp;this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},prt=class extends urt{constructor(t){t=t||{},super({element:document.createElement(&quot;div&quot;),render:t.render,target:t.target});const e=void 0!==t.className?t.className:&quot;ol-rotate&quot;,i=void 0!==t.label?t.label:&quot;\u21e7&quot;,n=void 0!==t.compassClassName?t.compassClassName:&quot;ol-compass&quot;;this.label_=null,&quot;string&quot;==typeof i?(this.label_=document.createElement(&quot;span&quot;),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=t.tipLabel?t.tipLabel:&quot;Reset rotation&quot;,r=document.createElement(&quot;button&quot;);r.className=e+&quot;-reset&quot;,r.setAttribute(&quot;type&quot;,&quot;button&quot;),r.title=s,r.appendChild(this.label_),r.addEventListener(&quot;click&quot;,this.handleClick_.bind(this),!1);const o=this.element;o.className=e+&quot; &quot;+N6+&quot; &quot;+V6,o.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&amp;&amp;this.element.classList.add(z6)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&amp;&amp;(this.duration_&gt;0&amp;&amp;e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Tz}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t=&quot;rotate(&quot;+i+&quot;rad)&quot;;if(this.autoHide_){const t=this.element.classList.contains(z6);t||0!==i?t&amp;&amp;0!==i&amp;&amp;this.element.classList.remove(z6):this.element.classList.add(z6)}this.label_.style.transform=t}this.rotation_=i}},frt=class extends urt{constructor(t){t=t||{},super({element:document.createElement(&quot;div&quot;),target:t.target});const e=void 0!==t.className?t.className:&quot;ol-zoom&quot;,i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+&quot;-in&quot;,s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+&quot;-out&quot;,r=void 0!==t.zoomInLabel?t.zoomInLabel:&quot;+&quot;,o=void 0!==t.zoomOutLabel?t.zoomOutLabel:&quot;\u2013&quot;,a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:&quot;Zoom in&quot;,l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:&quot;Zoom out&quot;,c=document.createElement(&quot;button&quot;);c.className=n,c.setAttribute(&quot;type&quot;,&quot;button&quot;),c.title=a,c.appendChild(&quot;string&quot;==typeof r?document.createTextNode(r):r),c.addEventListener(&quot;click&quot;,this.handleClick_.bind(this,i),!1);const h=document.createElement(&quot;button&quot;);h.className=s,h.setAttribute(&quot;type&quot;,&quot;button&quot;),h.title=l,h.appendChild(&quot;string&quot;==typeof o?document.createTextNode(o):o),h.addEventListener(&quot;click&quot;,this.handleClick_.bind(this,-i),!1);const u=this.element;u.className=e+&quot; &quot;+N6+&quot; &quot;+V6,u.appendChild(c),u.appendChild(h),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_&gt;0?(e.getAnimating()&amp;&amp;e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Tz})):e.setZoom(n)}}};function mrt(t){t instanceof Lst?t.setMapInternal(null):t instanceof Kst&amp;&amp;t.getLayers().forEach(mrt)}function grt(t,e){if(t instanceof Lst)t.setMapInternal(e);else if(t instanceof Kst){const i=t.getLayers().getArray();for(let t=0,n=i.length;t&lt;n;++t)grt(i[t],e)}}var Art=class extends s${constructor(t){super();const e=function(t){let e=null;void 0!==t.keyboardEventTarget&amp;&amp;(e=&quot;string&quot;==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&amp;&amp;&quot;function&quot;==typeof t.layers.getLayers?t.layers:new Kst({layers:t.layers});let s,r,o;return i.layergroup=n,i.target=t.target,i.view=t.view instanceof hrt?t.view:new hrt,void 0!==t.controls&amp;&amp;(Array.isArray(t.controls)?s=new est(t.controls.slice()):(nN(&quot;function&quot;==typeof t.controls.getArray,47),s=t.controls)),void 0!==t.interactions&amp;&amp;(Array.isArray(t.interactions)?r=new est(t.interactions.slice()):(nN(&quot;function&quot;==typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new est(t.overlays.slice()):(nN(&quot;function&quot;==typeof t.overlays.getArray,49),o=t.overlays):o=new est,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:i}}(t=t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:zz,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement(&quot;div&quot;),this.viewport_.className=&quot;ol-viewport&quot;+(&quot;ontouchstart&quot;in window?&quot; ol-touch&quot;:&quot;&quot;),this.viewport_.style.position=&quot;relative&quot;,this.viewport_.style.overflow=&quot;hidden&quot;,this.viewport_.style.width=&quot;100%&quot;,this.viewport_.style.height=&quot;100%&quot;,this.overlayContainer_=document.createElement(&quot;div&quot;),this.overlayContainer_.style.position=&quot;absolute&quot;,this.overlayContainer_.style.zIndex=&quot;0&quot;,this.overlayContainer_.style.width=&quot;100%&quot;,this.overlayContainer_.style.height=&quot;100%&quot;,this.overlayContainer_.style.pointerEvents=&quot;none&quot;,this.overlayContainer_.className=&quot;ol-overlaycontainer&quot;,this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement(&quot;div&quot;),this.overlayContainerStopEvent_.style.position=&quot;absolute&quot;,this.overlayContainerStopEvent_.style.zIndex=&quot;0&quot;,this.overlayContainerStopEvent_.style.width=&quot;100%&quot;,this.overlayContainerStopEvent_.style.height=&quot;100%&quot;,this.overlayContainerStopEvent_.style.pointerEvents=&quot;none&quot;,this.overlayContainerStopEvent_.className=&quot;ol-overlaycontainer-stopevent&quot;,this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||function(t){t=t||{};const e=new est;return(void 0===t.zoom||t.zoom)&amp;&amp;e.push(new frt(t.zoomOptions)),(void 0===t.rotate||t.rotate)&amp;&amp;e.push(new prt(t.rotateOptions)),(void 0===t.attribution||t.attribution)&amp;&amp;e.push(new drt(t.attributionOptions)),e}(),this.interactions=e.interactions||Pst({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class extends class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,xz(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){nN(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=trt&amp;&amp;(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1&gt;&gt;1}heapify_(){let t;for(t=(this.elements_.length&gt;&gt;1)-1;t&gt;=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;for(;t&lt;n&gt;&gt;1;){const s=this.getLeftChildIndex_(t),r=this.getRightChildIndex_(t),o=r&lt;n&amp;&amp;i[r]&lt;i[s]?r:s;e[t]=e[o],i[t]=i[o],t=o}e[t]=s,i[t]=r,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],r=n[e];for(;e&gt;t;){const t=this.getParentIndex_(e);if(!(n[t]&gt;r))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=s,n[e]=r}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let r,o,a;for(o=0;o&lt;s;++o)r=e[o],a=t(r),a==trt?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=a,e[n++]=r);e.length=n,i.length=n,this.heapify_()}}{constructor(t,e){super(function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&amp;&amp;t[0].addEventListener(&quot;change&quot;,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(2===i||3===i||4===i){3!==i&amp;&amp;e.removeEventListener(&quot;change&quot;,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&amp;&amp;(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,s,r=0;for(;this.tilesLoading_&lt;t&amp;&amp;r&lt;e&amp;&amp;this.getCount()&gt;0;)n=this.dequeue()[0],s=n.getKey(),i=n.getState(),0===i&amp;&amp;!(s in this.tilesLoadingKeys_)&amp;&amp;(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,n.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(&quot;layergroup&quot;,this.handleLayerGroupChanged_),this.addChangeListener(&quot;view&quot;,this.handleViewChanged_),this.addChangeListener(&quot;size&quot;,this.handleSizeChanged_),this.addChangeListener(&quot;target&quot;,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&amp;&amp;!(t.view instanceof hrt)&amp;&amp;t.view.then(function(t){i.setView(new hrt(t))}),this.controls.addEventListener(&quot;add&quot;,(function(t){t.element.setMap(this)}).bind(this)),this.controls.addEventListener(&quot;remove&quot;,(function(t){t.element.setMap(null)}).bind(this)),this.interactions.addEventListener(&quot;add&quot;,(function(t){t.element.setMap(this)}).bind(this)),this.interactions.addEventListener(&quot;remove&quot;,(function(t){t.element.setMap(null)}).bind(this)),this.overlays_.addEventListener(&quot;add&quot;,(function(t){this.addOverlayInternal_(t.element)}).bind(this)),this.overlays_.addEventListener(&quot;remove&quot;,(function(t){const e=t.element.getId();void 0!==e&amp;&amp;delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}).bind(this)),this.controls.forEach((function(t){t.setMap(this)}).bind(this)),this.interactions.forEach((function(t){t.setMap(this)}).bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){grt(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&amp;&amp;(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,e,null,void 0!==i.layerFilter?i.layerFilter:_z,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(t){i.push(t)},e),i}getAllLayers(){const t=[];return function e(i){i.forEach(function(i){i instanceof Kst?e(i.getLayers()):t.push(i)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:_z,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=&quot;changedTouches&quot;in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(&quot;target&quot;)}getTargetElement(){const t=this.getTarget();return void 0!==t?&quot;string&quot;==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return NV(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?m4(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(&quot;layergroup&quot;)}setLayers(t){const e=this.getLayerGroup();if(t instanceof est)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e&lt;i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&amp;&amp;!n.ready)return!0;const s=i.layer.getSource();if(s&amp;&amp;s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=VV(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?m4(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(&quot;size&quot;)}getView(){return this.get(&quot;view&quot;)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(t,e,i,n,s){if(!t||!(i in t.wantedTiles)||!t.wantedTiles[i][e.getKey()])return trt;const r=t.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){const i=new Qst(e=e||t.type,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(&quot;pointerdown&quot;===i||&quot;wheel&quot;===i||&quot;keydown&quot;===i){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i&gt;=0;i--){const n=e[i];if(n.getMap()===this&amp;&amp;n.getActive()&amp;&amp;this.getTargetElement()&amp;&amp;(!n.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[0]||e[1]){const e=Date.now()-t.time&gt;8;i=e?0:8,n=e?0:2}}e.getTilesLoading()&lt;i&amp;&amp;(e.reprioritize(),e.loadMoreTiles(i,n))}t&amp;&amp;this.renderer_&amp;&amp;!t.animate&amp;&amp;(!0===this.renderComplete_?(this.hasListener(&quot;rendercomplete&quot;)&amp;&amp;this.renderer_.dispatchRenderEvent(&quot;rendercomplete&quot;,t),!1===this.loaded_&amp;&amp;(this.loaded_=!0,this.dispatchEvent(new Xst(&quot;loadend&quot;,this,t)))):!0===this.loaded_&amp;&amp;(this.loaded_=!1,this.dispatchEvent(new Xst(&quot;loadstart&quot;,this,t))));const i=this.postRenderFunctions_;for(let n=0,s=i.length;n&lt;s;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&amp;&amp;!this.getView().getAnimating()&amp;&amp;this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t&lt;e;++t)Xz(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(&quot;contextmenu&quot;,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(&quot;wheel&quot;,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Wz(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Wst(this)),this.mapBrowserEventHandler_=new Jst(this,this.moveTolerance_);for(const t in sst)this.mapBrowserEventHandler_.addEventListener(sst[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(&quot;contextmenu&quot;,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(&quot;wheel&quot;,this.boundHandleBrowserEvent_,!!$z&amp;&amp;{passive:!1});const e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Zz(i,&quot;keydown&quot;,this.handleBrowserEvent,this),Zz(i,&quot;keypress&quot;,this.handleBrowserEvent,this),Zz(e,&quot;resize&quot;,this.updateSize,this)]}else this.renderer_&amp;&amp;(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&amp;&amp;(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&amp;&amp;(Xz(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&amp;&amp;(Xz(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&amp;&amp;(this.updateViewportSize_(),this.viewPropertyListenerKey_=Zz(t,&quot;propertychange&quot;,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Zz(t,&quot;change&quot;,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&amp;&amp;(this.layerGroupPropertyListenerKeys_.forEach(Xz),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&amp;&amp;(this.handleLayerAdd_(new Yst(&quot;addlayer&quot;,t)),this.layerGroupPropertyListenerKeys_=[Zz(t,&quot;propertychange&quot;,this.render,this),Zz(t,&quot;change&quot;,this.render,this),Zz(t,&quot;addlayer&quot;,this.handleLayerAdd_,this),Zz(t,&quot;removelayer&quot;,this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&amp;&amp;cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e&lt;i;++e){const i=t[e].layer;i.hasRenderer()&amp;&amp;i.getRenderer().handleFontsChanged()}}render(){this.renderer_&amp;&amp;void 0===this.animationDelayKey_&amp;&amp;(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){mrt(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&amp;&amp;v$(e)&amp;&amp;i&amp;&amp;i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),r=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:EN(r.center,r.resolution,r.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:r,viewHints:n,wantedTiles:{},mapId:Ez(this),renderTargets:{}},r.nextCenter&amp;&amp;r.nextResolution){const t=isNaN(r.nextRotation)?r.rotation:r.nextRotation;s.nextExtent=EN(r.nextCenter,r.nextResolution,t,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&amp;&amp;(s.animate&amp;&amp;this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&amp;&amp;(!this.previousExtent_||!FN(this.previousExtent_)&amp;&amp;!gN(s.extent,this.previousExtent_))&amp;&amp;(this.dispatchEvent(new Xst(&quot;movestart&quot;,this,n)),this.previousExtent_=pN(this.previousExtent_)),this.previousExtent_&amp;&amp;!s.viewHints[0]&amp;&amp;!s.viewHints[1]&amp;&amp;!gN(s.extent,this.previousExtent_)&amp;&amp;(this.dispatchEvent(new Xst(&quot;moveend&quot;,this,s)),oN(s.extent,this.previousExtent_))),this.dispatchEvent(new Xst(&quot;postrender&quot;,this,s)),this.renderComplete_=this.hasListener(&quot;loadstart&quot;)||this.hasListener(&quot;loadend&quot;)||this.hasListener(&quot;rendercomplete&quot;)?!this.tileQueue_.getTilesLoading()&amp;&amp;!this.tileQueue_.getCount()&amp;&amp;!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=&gt;{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&amp;&amp;this.handleLayerRemove_(new Yst(&quot;removelayer&quot;,e)),this.set(&quot;layergroup&quot;,t)}setSize(t){this.set(&quot;size&quot;,t)}setTarget(t){this.set(&quot;target&quot;,t)}setView(t){if(!t||t instanceof hrt)return void this.set(&quot;view&quot;,t);this.set(&quot;view&quot;,new hrt);const e=this;t.then(function(t){e.setView(new hrt(t))})}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(n)&amp;&amp;!isNaN(s)&amp;&amp;(e=[n,s],!v$(e)&amp;&amp;(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&amp;&amp;console.warn(&quot;No map visible because the map container&#39;s width or height are 0.&quot;))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&amp;&amp;i.height&amp;&amp;(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}},vrt=(()=&gt;(function(t){t[t.z0=0]=&quot;z0&quot;,t[t.z10=10]=&quot;z10&quot;,t[t.z20=20]=&quot;z20&quot;,t[t.z40=40]=&quot;z40&quot;,t[t.z60=60]=&quot;z60&quot;,t[t.z80=80]=&quot;z80&quot;,t[t.z100=100]=&quot;z100&quot;}(vrt||(vrt={})),vrt))();class _rt{constructor(t){Object.assign(this,t)}static fromOLView(t){return new _rt({zoom:t.getZoom(),center:t.getProperties().center,extent:t.calculateExtent(),resolution:t.getResolution(),minResolution:t.getMinResolution(),maxResolution:t.getMaxResolution(),projection:t.getProjection(),viewportSize:t.viewportSize_})}toURL(){const t=DV(this.center);return`@${t[1].toFixed(7)},${t[0].toFixed(7)},${this.zoom}z`}toLocateEvent(){return new qU({center:this.center,zoom:this.zoom})}}const brt=[&quot;root&quot;],yrt=[&quot;*&quot;];let xrt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.ngZone=t,this.changeDetectionRef=e,this.mapService=i,this.mapConfigService=n,this.mapStateService=s,this.offlineService=r,this.workerService=o,this.horizontalCenterShiftPixels=0,this.cursor=&quot;default&quot;,this.viewChange$=new S,this.animatingMinimumZoom=!1}ngOnInit(){this.changeDetectionRef.detach(),this.mapService.init(),this.mapService.locateEvents$.pipe(FO(),Ej(0)).subscribe(t=&gt;{this.ngZone.runOutsideAngular(()=&gt;{if(!function(){const e=document.createElement(&quot;canvas&quot;);for(const i of wrt)try{const t=e.getContext(i);if(t)return t.getExtension(&quot;WEBGL_lose_context&quot;).loseContext(),!0}catch(t){}return!1}())throw new Error(&quot;Impossible de r\xe9cup\xe9rer le contexte WebGL. Veuillez rafraichir l&#39;onglet ou fermer puis r\xe9ouvrir votre navigateur.&quot;);this.createMap(t.center,t.zoom)})}),this.subscriptions.push(this.workerService.applicationHealth$.pipe(M(t=&gt;!!(null==t?void 0:t.maintenance)),Mf(),Sf(1)).subscribe(t=&gt;{this.map.updateSize()}))}ngOnDestroy(){super.ngOnDestroy(),this.mapService.destroy()}createMap(t,e){let i=1;this.mapStateService.minimumZoom$.pipe(FO()).subscribe(t=&gt;{i=t});const n=new hrt({minZoom:i,maxZoom:20,smoothResolutionConstraint:!1}),s=this.computeRealCenter(new qU({center:t,zoom:e}),n);n.setCenter(s.center),n.setZoom(s.zoom);const r=new Hst({zIndex:vrt.z0});this.map=new Art({target:this.rootElement.nativeElement,view:n,layers:[r],controls:[],interactions:Pst({keyboard:!1,doubleClickZoom:!1,pinchRotate:!1,shiftDragZoom:!1})}),n.on(&quot;change&quot;,()=&gt;this.viewChange$.next()),n.on(&quot;change:resolution&quot;,()=&gt;this.viewChange$.next()),this.map.on(&quot;pointerdrag&quot;,()=&gt;this.viewChange$.next()),this.subscriptions.push(qm(this.map,&quot;pointermove&quot;).pipe(FM(16,hf,{leading:!1,trailing:!0})).subscribe(t=&gt;{t.dragging?&quot;grabbing&quot;!==this.cursor&amp;&amp;(this.cursor=this.map.getTargetElement().style.cursor=&quot;move&quot;):(this.mapService.emitPointerMoveEvent(t),this.map.hasFeatureAtPixel(this.map.getEventPixel(t.originalEvent),{hitTolerance:3,layerFilter:t=&gt;t.selectable})?&quot;pointer&quot;!==this.cursor&amp;&amp;(this.cursor=this.map.getTargetElement().style.cursor=&quot;pointer&quot;):&quot;default&quot;!==this.cursor&amp;&amp;(this.cursor=this.map.getTargetElement().style.cursor=&quot;default&quot;))}),qm(this.map.getTargetElement(),&quot;mouseup&quot;).subscribe(()=&gt;{&quot;default&quot;!==this.cursor&amp;&amp;(this.cursor=this.map.getTargetElement().style.cursor=&quot;default&quot;)}),this.mapService.locateEvents$.subscribe(t=&gt;{n.cancelAnimations(),n.animate(this.computeRealCenter(t,n))}),this.mapService.flyToEvents$.subscribe(t=&gt;{n.cancelAnimations();const e=this.computeRealCenter(t,n);lN(n.calculateExtent(),e.center)?n.animate(e):function(t,e){jp(this,void 0,void 0,function*(){return new Promise(i=&gt;{const n=2e3,s=t.getZoom();let r=2,o=!1;function a(t){--r,!o&amp;&amp;(0===r||!t)&amp;&amp;(o=!0,i(t))}t.animate({center:e,duration:n},a),t.animate({zoom:s-2,duration:n/2},{zoom:s,duration:n/2},a)})})}(n,e.center)}),this.mapService.fitEvents$.subscribe(t=&gt;{n.cancelAnimations(),n.fit(t.polygon,{duration:t.duration,padding:[100,100,100,100+this.horizontalCenterShiftPixels]})}),this.mapService.zoomEvents$.subscribe(t=&gt;{const e=n.getConstrainedResolution(n.getResolutionForZoom(n.getZoom()+t));n.cancelAnimations();const i=n.getCenter();n.animate({resolution:e,center:[i[0]+this.horizontalCenterShiftPixels/2*(t&gt;0?1:-.5)*e,i[1]],duration:250,easing:Tz})}),this.mapConfigService.preloadMapTiles$.subscribe(t=&gt;{r.setPreload(t?1/0:0)}),this.mapConfigService.baseLayer$.subscribe(t=&gt;{r.setSource(t.source),r.once(&quot;prerender&quot;,e=&gt;{r.getRenderer().container.className=t.layerClass?t.layerClass:&quot;ol-layer&quot;})}),this.offlineService.offlineConfig$.subscribe(t=&gt;{t?(r.setExtent(t.mercatorExtent),r.getSource().tileGrid=C$({minZoom:t.minZoom,maxZoom:t.maxZoom})):(r.setExtent(null),r.getSource().tileGrid=C$())}),this.mapStateService.minimumZoom$.pipe(Sf(1),df(60)).subscribe(t=&gt;{t!==n.getMinZoom()&amp;&amp;(n.getZoom()&lt;t?(this.animatingMinimumZoom=!0,n.cancelAnimations(),n.animate({zoom:t,duration:250,easing:Tz}),setTimeout(()=&gt;{n.setMinZoom(t),this.animatingMinimumZoom=!1,this.viewChange$.next()},250)):n.setMinZoom(t))}),this.viewChange$.pipe(gf(()=&gt;!this.animatingMinimumZoom),FM(50,hf,{leading:!1,trailing:!0})).subscribe(()=&gt;{this.mapService.updateViewState(_rt.fromOLView(this.map.getView()))}));const o=Mq(10).subscribe(()=&gt;{this.map.isRendered()?(this.viewChange$.next(),o.unsubscribe()):this.map.updateSize()})}onWindowResize(){this.map&amp;&amp;this.viewChange$.next()}computeRealCenter(t,e){const i=t.zoom?e.getResolutionForZoom(t.zoom):e.getResolution();return t.center[0]-=this.horizontalCenterShiftPixels/2*i,t}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(Ec),Da(kj),Da(HU),Da(vq),Da(hW),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-map&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(brt,7),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.rootElement=t.first)}},hostBindings:function(t,e){1&amp;t&amp;&amp;Ha(&quot;resize&quot;,function(){return e.onWindowResize()},!1,Fs)},inputs:{horizontalCenterShiftPixels:&quot;horizontalCenterShiftPixels&quot;},exportAs:[&quot;map&quot;],features:[$o],ngContentSelectors:yrt,decls:3,vars:0,consts:[[1,&quot;map&quot;],[&quot;root&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,0,1),Qa(2),Fa())},styles:[&quot;.map[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}&quot;],changeDetection:0}),t})();const wrt=[&quot;experimental-webgl&quot;,&quot;webgl&quot;,&quot;webkit-3d&quot;,&quot;moz-webgl&quot;];function Crt(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,10),Ra(1,&quot;mat-icon&quot;,11),xl(2,&quot;access_time&quot;),Fa(),Ra(3,&quot;div&quot;,12),lh(4,&quot;timeago&quot;),xl(5),lh(6,&quot;date&quot;),Fa(),Fa()),2&amp;t){const t=Za();Sr(3),Ja(&quot;title&quot;,ch(4,2,1e3*t.aircraft.timestamp)),Sr(2),Cl(&quot; &quot;,uh(6,4,1e3*t.aircraft.timestamp,&quot;yyyy-MM-dd HH:mm:ss z&quot;,t.useUTCDates&amp;&amp;&quot;+00&quot;),&quot; &quot;)}}let Srt=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.changeDetectorRef=t,this.mapConfigService=e,this.showTimestamp=!1,this.useUTCDates=!1}ngOnInit(){this.ensureMandatoryInputParams(&quot;aircraft&quot;),this.subscriptions.push(this.mapConfigService.useUTCDates$.subscribe(t=&gt;{this.useUTCDates=t,this.changeDetectorRef.markForCheck()}))}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(HU))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-aircraft-item-small&quot;]],inputs:{aircraft:&quot;aircraft&quot;,showTimestamp:&quot;showTimestamp&quot;},features:[$o],decls:23,vars:8,consts:[[1,&quot;aircraft-item&quot;],[1,&quot;aircraft-item__col1&quot;],[1,&quot;u-flex&quot;,&quot;d-flex-center&quot;],[1,&quot;aircraft-item__flag&quot;,3,&quot;flag&quot;],[1,&quot;d-flex-column&quot;],[1,&quot;aircraft-item__name&quot;],[1,&quot;aircraft-item__type&quot;],[&quot;class&quot;,&quot;aircraft-item__timestamp&quot;,&quot;title&quot;,&quot;Derni\xe8re r\xe9ception&quot;,4,&quot;ngIf&quot;],[1,&quot;aircraft-item__col2&quot;],[1,&quot;aircraft-item__label&quot;],[&quot;title&quot;,&quot;Derni\xe8re r\xe9ception&quot;,1,&quot;aircraft-item__timestamp&quot;],[1,&quot;mini-icon&quot;,&quot;mr-1&quot;],[3,&quot;title&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),Ra(2,&quot;div&quot;,2),La(3,&quot;app-flag&quot;,3),Ra(4,&quot;div&quot;,4),Ra(5,&quot;strong&quot;,5),xl(6),Fa(),Ra(7,&quot;small&quot;,6),xl(8),Fa(),Fa(),Fa(),ra(9,Crt,7,8,&quot;div&quot;,7),Fa(),Ra(10,&quot;div&quot;,8),Ra(11,&quot;div&quot;),Ra(12,&quot;span&quot;,9),xl(13,&quot;ICAO&quot;),Fa(),xl(14),Fa(),Ra(15,&quot;div&quot;),Ra(16,&quot;span&quot;,9),xl(17,&quot;Reg&quot;),Fa(),xl(18),Fa(),Ra(19,&quot;div&quot;),Ra(20,&quot;span&quot;,9),xl(21,&quot;Callsign&quot;),Fa(),xl(22),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(3),Oa(&quot;flag&quot;,e.aircraft.country.flag),Sr(3),Sl(&quot;&quot;,e.aircraft.callsign||&quot;?&quot;,&quot; / &quot;,e.aircraft.icao,&quot;&quot;),Sr(2),wl(e.aircraft.type||&quot;?&quot;),Sr(1),Oa(&quot;ngIf&quot;,e.showTimestamp),Sr(5),Cl(&quot; &quot;,e.aircraft.icao,&quot;&quot;),Sr(4),Cl(&quot; &quot;,e.aircraft.registration||&quot;?&quot;,&quot;&quot;),Sr(4),Cl(&quot; &quot;,e.aircraft.callsign||&quot;?&quot;,&quot;&quot;))},directives:[aQ,Nd,hE],pipes:[VL,ep],styles:[&quot;[_nghost-%COMP%]{flex:1;display:block;position:relative}.aircraft-item[_ngcontent-%COMP%]{font-size:12px;line-height:16px;display:flex}.aircraft-item__col1[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.aircraft-item__col2[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:right}.aircraft-item__flag[_ngcontent-%COMP%]{margin-right:4px}.aircraft-item__name[_ngcontent-%COMP%]{font-size:14px}.aircraft-item__type[_ngcontent-%COMP%]{line-height:1em;font-size:11px}.aircraft-item__timestamp[_ngcontent-%COMP%]{margin-top:4px;display:flex;align-items:center;color:gray}.aircraft-item__timestamp[_ngcontent-%COMP%] &gt; .mat-icon[_ngcontent-%COMP%]{font-size:1em;height:1em;width:1em;margin-right:.3em;margin-left:.3em}.aircraft-item__label[_ngcontent-%COMP%]{color:gray;font-size:10px}&quot;],changeDetection:0}),t})();function krt(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,9),xl(1,&quot; Chargement en cours... &quot;),Fa())}function Ert(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,10),xl(1),Fa()),2&amp;t){const t=Za(2);Sr(1),Cl(&quot; &quot;,t.entitySelection.error,&quot; &quot;)}}function Mrt(t,e){if(1&amp;t&amp;&amp;(ra(0,krt,2,0,&quot;div&quot;,7),ra(1,Ert,2,1,&quot;div&quot;,8)),2&amp;t){const t=Za();Oa(&quot;ngIf&quot;,!t.entitySelection.error),Sr(1),Oa(&quot;ngIf&quot;,t.entitySelection.error)}}function Trt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-ship-item-small&quot;,13),2&amp;t&amp;&amp;Oa(&quot;ship&quot;,Za(2).entitySelection.entity)(&quot;showTimestamp&quot;,!0)}function Irt(t,e){1&amp;t&amp;&amp;La(0,&quot;app-aircraft-item-small&quot;,14),2&amp;t&amp;&amp;Oa(&quot;aircraft&quot;,Za(2).entitySelection.entity)(&quot;showTimestamp&quot;,!0)}function Drt(t,e){if(1&amp;t&amp;&amp;(ra(0,Trt,1,2,&quot;app-ship-item-small&quot;,11),ra(1,Irt,1,2,&quot;app-aircraft-item-small&quot;,12)),2&amp;t){const t=Za();Oa(&quot;ngIf&quot;,t.entitySelection.type===t.EntityType.Ship),Sr(1),Oa(&quot;ngIf&quot;,t.entitySelection.type===t.EntityType.Aircraft)}}const Ort=function(t,e){return[t,e]};let Prt=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.mapService=t,this.selectionService=e,this.EntityType=OH,this.hasPosition=!0}ngOnChanges(t){var e,i,n,s;t.entitySelection&amp;&amp;(this.hasPosition=pU(null===(i=null===(e=t.entitySelection.currentValue)||void 0===e?void 0:e.entity)||void 0===i?void 0:i.lon)&amp;&amp;pU(null===(s=null===(n=t.entitySelection.currentValue)||void 0===n?void 0:n.entity)||void 0===s?void 0:s.lat))}locate(){this.mapService.pingLocation([this.entitySelection.entity.lon,this.entitySelection.entity.lat]),this.mapService.centerOnLonLat([this.entitySelection.entity.lon,this.entitySelection.entity.lat])}locateAndZoom(){this.mapService.locate([this.entitySelection.entity.lon,this.entitySelection.entity.lat])}removeSelection(){this.selectionService.toggleSelection(this.entitySelection.type,this.entitySelection.id)}}return t.\u0275fac=function(e){return new(e||t)(Da(kj),Da(dW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-entity-selection&quot;]],inputs:{entitySelection:&quot;entitySelection&quot;},features:[$o,he],decls:15,vars:9,consts:[[1,&quot;entity-selection&quot;,&quot;mat-elevation-z8&quot;],[1,&quot;entity-selection__background-icon&quot;],[3,&quot;ngIf&quot;],[1,&quot;d-flex&quot;],[&quot;mat-button&quot;,&quot;&quot;,1,&quot;entity-selection__action&quot;,3,&quot;title&quot;,&quot;disabled&quot;,&quot;click&quot;,&quot;dblclick&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Ouvrir la fiche d\xe9taill\xe9e&quot;,1,&quot;entity-selection__action&quot;,3,&quot;routerLink&quot;],[&quot;mat-button&quot;,&quot;&quot;,&quot;title&quot;,&quot;Supprimer de la s\xe9lection&quot;,1,&quot;entity-selection__action&quot;,3,&quot;click&quot;],[&quot;class&quot;,&quot;pa-3 u-relative u-flex&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;pa-1 u-relative u-flex error-message mat-small&quot;,4,&quot;ngIf&quot;],[1,&quot;pa-3&quot;,&quot;u-relative&quot;,&quot;u-flex&quot;],[1,&quot;pa-1&quot;,&quot;u-relative&quot;,&quot;u-flex&quot;,&quot;error-message&quot;,&quot;mat-small&quot;],[&quot;class&quot;,&quot;pa-1&quot;,3,&quot;ship&quot;,&quot;showTimestamp&quot;,4,&quot;ngIf&quot;],[&quot;class&quot;,&quot;pa-1&quot;,3,&quot;aircraft&quot;,&quot;showTimestamp&quot;,4,&quot;ngIf&quot;],[1,&quot;pa-1&quot;,3,&quot;ship&quot;,&quot;showTimestamp&quot;],[1,&quot;pa-1&quot;,3,&quot;aircraft&quot;,&quot;showTimestamp&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;mat-icon&quot;,1),xl(2),Fa(),ra(3,Mrt,2,2,&quot;ng-template&quot;,2),ra(4,Drt,2,2,&quot;ng-template&quot;,2),Ra(5,&quot;div&quot;,3),Ra(6,&quot;button&quot;,4),Ha(&quot;click&quot;,function(){return e.locate()})(&quot;dblclick&quot;,function(){return e.locateAndZoom()}),Ra(7,&quot;mat-icon&quot;),xl(8,&quot;center_focus_strong&quot;),Fa(),Fa(),Ra(9,&quot;button&quot;,5),Ra(10,&quot;mat-icon&quot;),xl(11,&quot;info&quot;),Fa(),Fa(),Ra(12,&quot;button&quot;,6),Ha(&quot;click&quot;,function(){return e.removeSelection()}),Ra(13,&quot;mat-icon&quot;),xl(14,&quot;close&quot;),Fa(),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(2),wl(e.entitySelection.type===e.EntityType.Ship?&quot;directions_boat&quot;:&quot;flight&quot;),Sr(1),Oa(&quot;ngIf&quot;,!e.entitySelection.entity),Sr(1),Oa(&quot;ngIf&quot;,e.entitySelection.entity),Sr(2),Oa(&quot;title&quot;,e.hasPosition?&quot;Centrer la vue (double-clic = zoom)&quot;:&quot;Ce navire n&#39;a pas de position&quot;)(&quot;disabled&quot;,!e.entitySelection.entity||!e.hasPosition),Sr(3),Oa(&quot;routerLink&quot;,ih(6,Ort,e.entitySelection.type+&quot;s&quot;,e.entitySelection.id)))},directives:[hE,Nd,Ry,fF,V2,Srt],styles:[&quot;[_nghost-%COMP%]{display:block;position:relative;overflow:hidden}.entity-selection[_ngcontent-%COMP%]{background-color:#f7f7f7;width:292px;min-height:93px;margin-bottom:8px;position:relative;overflow:hidden;display:flex;flex-direction:column;pointer-events:all}.entity-selection__background-icon[_ngcontent-%COMP%]{position:absolute;font-size:136px;left:-64px;color:#ededed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.entity-selection__action[_ngcontent-%COMP%]{flex:1;min-width:inherit;padding:inherit}&quot;],changeDetection:0}),t})();var Rrt=i(3078),Frt=class{constructor(t){this.rbush_=new Rrt(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Ez(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,s=e.length;n&lt;s;n++){const s=t[n],r=e[n],o={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:r};i[n]=o,this.items_[Ez(r)]=o}this.rbush_.load(i)}remove(t){const e=Ez(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[Ez(e)];gN([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n&lt;s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return wz(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return dN(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function Lrt(t){return new v8({fill:Brt(t,&quot;&quot;),stroke:zrt(t,&quot;&quot;),text:Nrt(t),image:Vrt(t)})}function Brt(t,e){const i=t[e+&quot;fill-color&quot;];if(i)return new h4({color:i})}function zrt(t,e){const i=t[e+&quot;stroke-width&quot;],n=t[e+&quot;stroke-color&quot;];if(i||n)return new L6({width:i,color:n,lineCap:t[e+&quot;stroke-line-cap&quot;],lineJoin:t[e+&quot;stroke-line-join&quot;],lineDash:t[e+&quot;stroke-line-dash&quot;],lineDashOffset:t[e+&quot;stroke-line-dash-offset&quot;],miterLimit:t[e+&quot;stroke-miter-limit&quot;]})}function Nrt(t){const e=t[&quot;text-value&quot;];return e?new b8({text:e,font:t[&quot;text-font&quot;],maxAngle:t[&quot;text-max-angle&quot;],offsetX:t[&quot;text-offset-x&quot;],offsetY:t[&quot;text-offset-y&quot;],overflow:t[&quot;text-overflow&quot;],placement:t[&quot;text-placement&quot;],scale:t[&quot;text-scale&quot;],rotateWithView:t[&quot;text-rotate-with-view&quot;],rotation:t[&quot;text-rotation&quot;],textAlign:t[&quot;text-align&quot;],justify:t[&quot;text-justify&quot;],textBaseline:t[&quot;text-baseline&quot;],padding:t[&quot;text-padding&quot;],fill:Brt(t,&quot;text-&quot;),backgroundFill:Brt(t,&quot;text-background-&quot;),stroke:zrt(t,&quot;text-&quot;),backgroundStroke:zrt(t,&quot;text-background-&quot;)}):void 0}function Vrt(t){const e=t[&quot;icon-src&quot;],i=t[&quot;icon-img&quot;];if(e||i)return new H4({src:e,img:i,imgSize:t[&quot;icon-img-size&quot;],anchor:t[&quot;icon-anchor&quot;],anchorOrigin:t[&quot;icon-anchor-origin&quot;],anchorXUnits:t[&quot;icon-anchor-x-units&quot;],anchorYUnits:t[&quot;icon-anchor-y-units&quot;],color:t[&quot;icon-color&quot;],crossOrigin:t[&quot;icon-cross-origin&quot;],offset:t[&quot;icon-offset&quot;],displacement:t[&quot;icon-displacement&quot;],opacity:t[&quot;icon-opacity&quot;],scale:t[&quot;icon-scale&quot;],rotation:t[&quot;icon-rotation&quot;],rotateWithView:t[&quot;icon-rotate-with-view&quot;],size:t[&quot;icon-size&quot;],declutterMode:t[&quot;icon-declutter-mode&quot;]});const n=t[&quot;shape-points&quot;];if(n){const e=&quot;shape-&quot;;return new h8({points:n,fill:Brt(t,e),stroke:zrt(t,e),radius:t[&quot;shape-radius&quot;],radius1:t[&quot;shape-radius1&quot;],radius2:t[&quot;shape-radius2&quot;],angle:t[&quot;shape-angle&quot;],displacement:t[&quot;shape-displacement&quot;],rotation:t[&quot;shape-rotation&quot;],rotateWithView:t[&quot;shape-rotate-with-view&quot;],scale:t[&quot;shape-scale&quot;],declutterMode:t[&quot;shape-declutter-mode&quot;]})}const s=t[&quot;circle-radius&quot;];if(s){const e=&quot;circle-&quot;;return new d8({radius:s,fill:Brt(t,e),stroke:zrt(t,e),displacement:t[&quot;circle-displacement&quot;],scale:t[&quot;circle-scale&quot;],rotation:t[&quot;circle-rotation&quot;],rotateWithView:t[&quot;circle-rotate-with-view&quot;],declutterMode:t[&quot;circle-declutter-mode&quot;]})}}var $rt=class extends Lst{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&amp;&amp;t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&amp;&amp;t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&amp;&amp;t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(&quot;renderOrder&quot;)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Rrt(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(&quot;renderOrder&quot;,t)}setStyle(t){let e;if(void 0===t)e=m8;else if(null===t)e=null;else if(&quot;function&quot;==typeof t)e=t;else if(t instanceof v8)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let e=0;e&lt;i;++e){const i=t[e];n[e]=i instanceof v8?i:Lrt(i)}e=n}else e=Lrt(t);this.style_=e,this.styleFunction_=null===t?void 0:function(t){let e;if(&quot;function&quot;==typeof t)e=t;else{let i;Array.isArray(t)?i=t:(nN(&quot;function&quot;==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()}};const Urt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},jrt=[Urt.FILL],Hrt=[Urt.STROKE],Grt=[Urt.BEGIN_PATH],qrt=[Urt.CLOSE_PATH];var Wrt=Urt,Yrt=class{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},Zrt=class extends Yrt{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let o=0,a=t.length;o&lt;a;o+=e)n[0]=t[o],n[1]=t[o+1],lN(i,n)&amp;&amp;(s[r++]=n[0],s[r++]=n[1]);return r}appendFlatLineCoordinates(t,e,i,n,s,r){const o=this.coordinates;let a=o.length;const l=this.getBufferedMaxExtent();r&amp;&amp;(e+=n);let c=t[e],h=t[e+1];const u=this.tmpCoordinate_;let d,p,f,m=!0;for(d=e+n;d&lt;i;d+=n)u[0]=t[d],u[1]=t[d+1],f=uN(l,u),f!==p?(m&amp;&amp;(o[a++]=c,o[a++]=h,m=!1),o[a++]=u[0],o[a++]=u[1]):1===f?(o[a++]=u[0],o[a++]=u[1],m=!1):m=!0,c=u[0],h=u[1],p=f;return(s&amp;&amp;m||d===e+n)&amp;&amp;(o[a++]=c,o[a++]=h),a}drawCustomCoordinates_(t,e,i,n,s){for(let r=0,o=i.length;r&lt;o;++r){const o=i[r],a=this.appendFlatLineCoordinates(t,e,o,n,!1,!1);s.push(a),e=o}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const s=t.getType(),r=t.getStride(),o=this.coordinates.length;let a,l,c,h,u;switch(s){case&quot;MultiPolygon&quot;:a=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();u=0;for(let t=0,i=e.length;t&lt;i;++t){const i=[];u=this.drawCustomCoordinates_(a,u,e[t],r,i),h.push(i)}this.instructions.push([Wrt.CUSTOM,o,h,t,i,a6]),this.hitDetectionInstructions.push([Wrt.CUSTOM,o,h,t,n||i,a6]);break;case&quot;Polygon&quot;:case&quot;MultiLineString&quot;:c=[],a=&quot;Polygon&quot;==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),r,c),this.instructions.push([Wrt.CUSTOM,o,c,t,i,o6]),this.hitDetectionInstructions.push([Wrt.CUSTOM,o,c,t,n||i,o6]);break;case&quot;LineString&quot;:case&quot;Circle&quot;:a=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,r,!1,!1),this.instructions.push([Wrt.CUSTOM,o,l,t,i,r6]),this.hitDetectionInstructions.push([Wrt.CUSTOM,o,l,t,n||i,r6]);break;case&quot;MultiPoint&quot;:a=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,r),l&gt;o&amp;&amp;(this.instructions.push([Wrt.CUSTOM,o,l,t,i,r6]),this.hitDetectionInstructions.push([Wrt.CUSTOM,o,l,t,n||i,r6]));break;case&quot;Point&quot;:a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([Wrt.CUSTOM,o,l,t,i]),this.hitDetectionInstructions.push([Wrt.CUSTOM,o,l,t,n||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[Wrt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Wrt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,s,r=-1;for(e=0;e&lt;i;++e)n=t[e],s=n[0],s==Wrt.END_GEOMETRY?r=e:s==Wrt.BEGIN_GEOMETRY&amp;&amp;(n[2]=e,gz(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=B6(e||q6)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=B6(t||K6);const n=e.getLineCap();i.lineCap=void 0!==n?n:W6;const s=e.getLineDash();i.lineDash=s?s.slice():Y6;const r=e.getLineDashOffset();i.lineDashOffset=r||0;const o=e.getLineJoin();i.lineJoin=void 0!==o?o:Z6;const a=e.getWidth();i.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();i.miterLimit=void 0!==l?l:10,i.lineWidth&gt;this.maxLineWidth&amp;&amp;(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[Wrt.SET_FILL_STYLE,e];return&quot;string&quot;!=typeof e&amp;&amp;i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Wrt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(&quot;string&quot;!=typeof i||t.currentFillStyle!=i)&amp;&amp;(void 0!==i&amp;&amp;this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,s=t.lineDash,r=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&amp;&amp;!vz(t.currentLineDash,s)||t.currentLineDashOffset!=r||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&amp;&amp;(void 0!==i&amp;&amp;e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=r,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Wrt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&amp;&amp;(this.bufferedMaxExtent_=oN(this.maxExtent),this.maxLineWidth&gt;0)&amp;&amp;rN(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},Krt=class extends Zrt{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const s=this.state,r=void 0!==s.fillStyle,o=void 0!==s.strokeStyle,a=i.length;this.instructions.push(Grt),this.hitDetectionInstructions.push(Grt);for(let l=0;l&lt;a;++l){const s=i[l],r=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,s,n,!0,!o),c=[Wrt.MOVE_TO_LINE_TO,r,a];this.instructions.push(c),this.hitDetectionInstructions.push(c),o&amp;&amp;(this.instructions.push(qrt),this.hitDetectionInstructions.push(qrt)),e=s}return r&amp;&amp;(this.instructions.push(jrt),this.hitDetectionInstructions.push(jrt)),o&amp;&amp;(this.instructions.push(Hrt),this.hitDetectionInstructions.push(Hrt)),e}drawCircle(t,e){const i=this.state;if(void 0===i.fillStyle&amp;&amp;void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_FILL_STYLE,q6]),void 0!==i.strokeStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const n=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length;this.appendFlatLineCoordinates(n,0,n.length,s,!1,!1);const o=[Wrt.CIRCLE,r];this.instructions.push(Grt,o),this.hitDetectionInstructions.push(Grt,o),void 0!==i.fillStyle&amp;&amp;(this.instructions.push(jrt),this.hitDetectionInstructions.push(jrt)),void 0!==i.strokeStyle&amp;&amp;(this.instructions.push(Hrt),this.hitDetectionInstructions.push(Hrt)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state;if(void 0===i.fillStyle&amp;&amp;void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_FILL_STYLE,q6]),void 0!==i.strokeStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const n=t.getEnds(),s=t.getOrientedFlatCoordinates(),r=t.getStride();this.drawFlatCoordinatess_(s,0,n,r),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state;if(void 0===i.fillStyle&amp;&amp;void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_FILL_STYLE,q6]),void 0!==i.strokeStyle&amp;&amp;this.hitDetectionInstructions.push([Wrt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const n=t.getEndss(),s=t.getOrientedFlatCoordinates(),r=t.getStride();let o=0;for(let a=0,l=n.length;a&lt;l;++a)o=this.drawFlatCoordinatess_(s,o,n[a],r);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i&lt;n;++i)e[i]=i6(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&amp;&amp;this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&amp;&amp;this.updateStrokeStyle(t,this.applyStroke)}};function Xrt(t,e,i,n,s){let r,o,a,l,c,h,u,d,p,f,m=i,g=i,A=0,v=0,_=i;for(o=i;o&lt;n;o+=s){const i=e[o],n=e[o+1];void 0!==c&amp;&amp;(p=i-c,f=n-h,l=Math.sqrt(p*p+f*f),void 0!==u&amp;&amp;(v+=a,r=Math.acos((u*p+d*f)/(a*l)),r&gt;t&amp;&amp;(v&gt;A&amp;&amp;(A=v,m=_,g=o),v=0,_=o-s)),a=l,u=p,d=f),c=i,h=n}return v+=l,v&gt;A?[_,o]:[m,g]}const Qrt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Jrt={Circle:Krt,Default:Zrt,Image:class extends Zrt{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([Wrt.DRAW_IMAGE,s,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wrt.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([Wrt.DRAW_IMAGE,s,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wrt.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Zrt{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),o=[Wrt.MOVE_TO_LINE_TO,s,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Wrt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Y6,0],Grt);const n=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(n,0,n.length,s),this.hitDetectionInstructions.push(Hrt),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Wrt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Grt);const n=t.getEnds(),s=t.getFlatCoordinates(),r=t.getStride();let o=0;for(let a=0,l=n.length;a&lt;l;++a)o=this.drawFlatCoordinates_(s,o,n[a],r);this.hitDetectionInstructions.push(Hrt),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&amp;&amp;t.lastStroke!=this.coordinates.length&amp;&amp;this.instructions.push(Hrt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&amp;&amp;t.lastStroke!=this.coordinates.length&amp;&amp;(this.instructions.push(Hrt),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Grt)}},Polygon:Krt,Text:class extends Zrt{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_=&quot;&quot;,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_=&quot;&quot;,this.fillKey_=&quot;&quot;,this.strokeKey_=&quot;&quot;,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textState_;if(&quot;&quot;===this.text_||!i||!this.textFillState_&amp;&amp;!this.textStrokeState_)return;const n=this.coordinates;let s=n.length;const r=t.getType();let o=null,a=t.getStride();if(&quot;line&quot;!==i.placement||&quot;LineString&quot;!=r&amp;&amp;&quot;MultiLineString&quot;!=r&amp;&amp;&quot;Polygon&quot;!=r&amp;&amp;&quot;MultiPolygon&quot;!=r){let l=i.overflow?null:[];switch(r){case&quot;Point&quot;:case&quot;MultiPoint&quot;:o=t.getFlatCoordinates();break;case&quot;LineString&quot;:o=t.getFlatMidpoint();break;case&quot;Circle&quot;:o=t.getCenter();break;case&quot;MultiLineString&quot;:o=t.getFlatMidpoints(),a=2;break;case&quot;Polygon&quot;:o=t.getFlatInteriorPoint(),i.overflow||l.push(o[2]/this.resolution),a=3;break;case&quot;MultiPolygon&quot;:const e=t.getFlatInteriorPoints();o=[];for(let t=0,n=e.length;t&lt;n;t+=3)i.overflow||l.push(e[t+2]/this.resolution),o.push(e[t],e[t+1]);if(0===o.length)return;a=2}const c=this.appendFlatPointCoordinates(o,a);if(c===s)return;if(l&amp;&amp;(c-s)/2!=o.length/a){let t=s/2;l=l.filter((e,i)=&gt;{const s=n[2*(t+i)]===o[i*a]&amp;&amp;n[2*(t+i)+1]===o[i*a+1];return s||--t,s})}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&amp;&amp;(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&amp;&amp;(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&amp;&amp;(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=i.padding;if(h!=J6&amp;&amp;(i.scale[0]&lt;0||i.scale[1]&lt;0)){let t=i.padding[0],e=i.padding[1],n=i.padding[2],s=i.padding[3];i.scale[0]&lt;0&amp;&amp;(e=-e,s=-s),i.scale[1]&lt;0&amp;&amp;(t=-t,n=-n),h=[t,e,n,s]}const u=this.pixelRatio;this.instructions.push([Wrt.DRAW_IMAGE,s,c,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==J6?J6:h.map(function(t){return t*u}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,l]);const d=1/u;this.hitDetectionInstructions.push([Wrt.DRAW_IMAGE,s,c,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,void 0,this.declutterImageWithText_,h,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,l]),this.endGeometry(e)}else{if(!RN(this.getBufferedMaxExtent(),t.getExtent()))return;let l;if(o=t.getFlatCoordinates(),&quot;LineString&quot;==r)l=[o.length];else if(&quot;MultiLineString&quot;==r)l=t.getEnds();else if(&quot;Polygon&quot;==r)l=t.getEnds().slice(0,1);else if(&quot;MultiPolygon&quot;==r){const e=t.getEndss();l=[];for(let t=0,i=e.length;t&lt;i;++t)l.push(e[t][0])}this.beginGeometry(t,e);const c=i.textAlign;let h,u=0;for(let t=0,e=l.length;t&lt;e;++t){if(null==c){const e=Xrt(i.maxAngle,o,u,l[t],a);u=e[0],h=e[1]}else h=l[t];for(let t=u;t&lt;h;t+=a)n.push(o[t],o[t+1]);const e=n.length;u=l[t],this.drawChars_(s,e),s=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&amp;&amp;(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||X6,justify:e.justify,textBaseline:e.textBaseline||Q6,scale:e.scale});const r=this.fillKey_;i&amp;&amp;(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,r=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=Qrt[n.textBaseline],c=this.textOffsetY_*a,h=this.text_,u=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Wrt.DRAW_CHARS,t,e,l,n.overflow,o,n.maxAngle,a,c,s,u*a,h,r,1]),this.hitDetectionInstructions.push([Wrt.DRAW_CHARS,t,e,l,n.overflow,o,n.maxAngle,1,c,s,u,h,r,1/a])}setTextStyle(t,e){let i,n,s;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=B6(e.getColor()||q6)):(n=null,this.textFillState_=n);const r=t.getStroke();if(r){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const t=r.getLineDash(),e=r.getLineDashOffset(),i=r.getWidth(),n=r.getMiterLimit();s.lineCap=r.getLineCap()||W6,s.lineDash=t?t.slice():Y6,s.lineDashOffset=void 0===e?0:e,s.lineJoin=r.getLineJoin()||Z6,s.lineWidth=void 0===i?1:i,s.miterLimit=void 0===n?10:n,s.strokeStyle=B6(r.getColor()||K6)}else s=null,this.textStrokeState_=s;i=this.textState_;const o=t.getFont()||G6;s8(o);const a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=o,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Q6,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||J6,i.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),c=t.getOffsetY(),h=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||&quot;&quot;,this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==h&amp;&amp;h,this.textRotation_=void 0===u?0:u,this.strokeKey_=s?(&quot;string&quot;==typeof s.strokeStyle?s.strokeStyle:Ez(s.strokeStyle))+s.lineCap+s.lineDashOffset+&quot;|&quot;+s.lineWidth+s.lineJoin+s.miterLimit+&quot;[&quot;+s.lineDash.join()+&quot;]&quot;:&quot;&quot;,this.textKey_=i.font+i.scale+(i.textAlign||&quot;?&quot;)+(i.justify||&quot;?&quot;)+(i.textBaseline||&quot;?&quot;),this.fillKey_=n?&quot;string&quot;==typeof n.fillStyle?n.fillStyle:&quot;|&quot;+Ez(n.fillStyle):&quot;&quot;}else this.text_=&quot;&quot;;this.declutterImageWithText_=e}}};var tot=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():&quot;0&quot;;let n=this.buildersByZIndex_[i];void 0===n&amp;&amp;(n={},this.buildersByZIndex_[i]=n);let s=n[e];return void 0===s&amp;&amp;(s=new(0,Jrt[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s),s}};function eot(t,e,i,n,s,r,o,a,l,c,h,u){let d=t[e],p=t[e+1],f=0,m=0,g=0,A=0;function v(){f=d,m=p,d=t[e+=n],p=t[e+1],A+=g,g=Math.sqrt((d-f)*(d-f)+(p-m)*(p-m))}do{v()}while(e&lt;i-n&amp;&amp;A+g&lt;r);let _=0===g?0:(r-A)/g;const b=rV(f,d,_),y=rV(m,p,_),x=e-n,w=A,C=r+a*l(c,s,h);for(;e&lt;i-n&amp;&amp;A+g&lt;C;)v();_=0===g?0:(C-A)/g;const S=rV(f,d,_),k=rV(m,p,_);let E;if(u){const t=[b,y,S,k];x4(t,0,4,2,u,t,t),E=t[0]&gt;t[2]}else E=b&gt;S;const M=Math.PI,T=[],I=x+n===e;let D;if(g=0,A=w,d=t[e=x],p=t[e+1],I)return v(),D=Math.atan2(p-m,d-f),E&amp;&amp;(D+=D&gt;0?-M:M),T[0]=[(S+b)/2,(k+y)/2,(C-r)/2,D,s],T;for(let O=0,P=(s=s.replace(/\n/g,&quot; &quot;)).length;O&lt;P;){v();let t=Math.atan2(p-m,d-f);if(E&amp;&amp;(t+=t&gt;0?-M:M),void 0!==D){let e=t-D;if(e+=e&gt;M?-2*M:e&lt;-M?2*M:0,Math.abs(e)&gt;o)return null}D=t;const u=O;let b=0;for(;O&lt;P;++O){const t=a*l(c,s[E?P-O-1:O],h);if(e+n&lt;i&amp;&amp;A+g&lt;r+b+t/2)break;b+=t}if(O===u)continue;const y=E?s.substring(P-u,P-O):s.substring(u,O);_=0===g?0:(r+b/2-A)/g;const x=rV(f,d,_),w=rV(m,p,_);T.push([x,w,b/2,t,y]),r+=b}return T}const iot=[1/0,1/0,-1/0,-1/0],not=[],sot=[],rot=[],oot=[];function aot(t){return t[3].declutterBox}const lot=new RegExp(&quot;[&quot;+String.fromCharCode(1425)+&quot;-&quot;+String.fromCharCode(2303)+String.fromCharCode(64285)+&quot;-&quot;+String.fromCharCode(65023)+String.fromCharCode(65136)+&quot;-&quot;+String.fromCharCode(65276)+String.fromCharCode(67584)+&quot;-&quot;+String.fromCharCode(69631)+String.fromCharCode(124928)+&quot;-&quot;+String.fromCharCode(126975)+&quot;]&quot;);function cot(t,e){return(&quot;start&quot;===e||&quot;end&quot;===e)&amp;&amp;!lot.test(t)&amp;&amp;(e=&quot;start&quot;===e?&quot;left&quot;:&quot;right&quot;),Qrt[e]}function hot(t,e,i){return i&gt;0&amp;&amp;t.push(&quot;\n&quot;,&quot;&quot;),t.push(e,&quot;&quot;),t}var uot=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const s=t+e+i+n;if(this.labels_[s])return this.labels_[s];const r=n?this.strokeStates[n]:null,o=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,c=[a.scale[0]*l,a.scale[1]*l],h=Array.isArray(t),u=a.justify?Qrt[a.justify]:cot(Array.isArray(t)?t[0]:t,a.textAlign||X6),d=n&amp;&amp;r.lineWidth?r.lineWidth:0,p=h?t:t.split(&quot;\n&quot;).reduce(hot,[]),{width:f,height:m,widths:g,heights:A,lineWidths:v}=function(t,e){const i=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,h=e.length;c&lt;=h;c+=2){const u=e[c];if(&quot;\n&quot;===u||c===h){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const d=e[c+1]||t.font,p=a8(d,u);i.push(p),o+=p;const f=r8(d);n.push(f),l=Math.max(l,f)}return{width:r,height:a,widths:i,heights:n,lineWidths:s}}(a,p),_=f+d,b=[],y=(_+2)*c[0],x=(m+d)*c[1],w={width:y&lt;0?Math.floor(y):Math.ceil(y),height:x&lt;0?Math.floor(x):Math.ceil(x),contextInstructions:b};(1!=c[0]||1!=c[1])&amp;&amp;b.push(&quot;scale&quot;,c),n&amp;&amp;(b.push(&quot;strokeStyle&quot;,r.strokeStyle),b.push(&quot;lineWidth&quot;,d),b.push(&quot;lineCap&quot;,r.lineCap),b.push(&quot;lineJoin&quot;,r.lineJoin),b.push(&quot;miterLimit&quot;,r.miterLimit),b.push(&quot;setLineDash&quot;,[r.lineDash]),b.push(&quot;lineDashOffset&quot;,r.lineDashOffset)),i&amp;&amp;b.push(&quot;fillStyle&quot;,o.fillStyle),b.push(&quot;textBaseline&quot;,&quot;middle&quot;),b.push(&quot;textAlign&quot;,&quot;center&quot;);const C=.5-u;let S=u*_+C*d;const k=[],E=[];let M,T=0,I=0,D=0,O=0;for(let P=0,R=p.length;P&lt;R;P+=2){const t=p[P];if(&quot;\n&quot;===t){I+=T,T=0,S=u*_+C*d,++O;continue}const e=p[P+1]||a.font;e!==M&amp;&amp;(n&amp;&amp;k.push(&quot;font&quot;,e),i&amp;&amp;E.push(&quot;font&quot;,e),M=e),T=Math.max(T,A[D]);const s=[t,S+C*g[D]+u*(g[D]-v[O]),.5*(d+T)+I];S+=g[D],n&amp;&amp;k.push(&quot;strokeText&quot;,s),i&amp;&amp;E.push(&quot;fillText&quot;,s),++D}return Array.prototype.push.apply(b,k),Array.prototype.push.apply(b,E),this.labels_[s]=w,w}replayTextBackground_(t,e,i,n,s,r,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&amp;&amp;(this.alignFill_=r[2],this.fill_(t)),o&amp;&amp;(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,m){let g=i-(o*=u[0]),A=n-(a*=u[1]);const v=s+l&gt;t?t-l:s,_=r+c&gt;e?e-c:r,b=p[3]+v*u[0]+p[1],y=p[0]+_*u[1]+p[2],x=g-p[3],w=A-p[0];let C;return(f||0!==h)&amp;&amp;(not[0]=x,oot[0]=x,not[1]=w,sot[1]=w,sot[0]=x+b,rot[0]=sot[0],rot[1]=w+y,oot[1]=rot[1]),0!==h?(C=A4([1,0,0,1,0,0],i,n,1,1,h,-i,-n),m4(C,not),m4(C,sot),m4(C,rot),m4(C,oot),dN(Math.min(not[0],sot[0],rot[0],oot[0]),Math.min(not[1],sot[1],rot[1],oot[1]),Math.max(not[0],sot[0],rot[0],oot[0]),Math.max(not[1],sot[1],rot[1],oot[1]),iot)):dN(Math.min(x,x+b),Math.min(w,w+y),Math.max(x,x+b),Math.max(w,w+y),iot),d&amp;&amp;(g=Math.round(g),A=Math.round(A)),{drawImageX:g,drawImageY:A,drawImageW:v,drawImageH:_,originX:l,originY:c,declutterBox:{minX:iot[0],minY:iot[1],maxX:iot[2],maxY:iot[3],value:m},canvasTransform:C,scale:u}}replayImageOrLabel_(t,e,i,n,s,r,o){const a=n.declutterBox,l=t.canvas,c=o?o[2]*n.scale[0]/2:0;return a.minX-c&lt;=l.width/e&amp;&amp;a.maxX+c&gt;=0&amp;&amp;a.minY-c&lt;=l.height/e&amp;&amp;a.maxY+c&gt;=0&amp;&amp;(!(!r&amp;&amp;!o)&amp;&amp;this.replayTextBackground_(t,not,sot,rot,oot,r,o),function(t,e,i,n,s,r,o,a,l,c,h){t.save(),1!==i&amp;&amp;(t.globalAlpha*=i),e&amp;&amp;t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,c),t.scale(h[0],h[1]),function(t,e){const i=t.contextInstructions;for(let n=0,s=i.length;n&lt;s;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):h[0]&lt;0||h[1]&lt;0?(t.translate(l,c),t.scale(h[0],h[1]),t.drawImage(n,s,r,o,a,0,0,o,a)):t.drawImage(n,s,r,o,a,l,c,o*h[0],a*h[1]),t.restore()}(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=m4(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&amp;&amp;t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const s=this.textStates[e],r=this.createLabel(t,e,n,i),o=this.strokeStates[i],a=this.pixelRatio,l=cot(Array.isArray(t)?t[0]:t,s.textAlign||X6),c=Qrt[s.textBaseline||Q6],h=o&amp;&amp;o.lineWidth?o.lineWidth:0;return{label:r,anchorX:l*(r.width/a-2*s.scale[0])+2*(.5-l)*h,anchorY:c*r.height/a+2*(.5-c)*h}}execute_(t,e,i,n,s,r,o,a){let l;this.pixelCoordinates_&amp;&amp;vz(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=y4(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]}(this.renderedTransform_,i));let c=0;const h=n.length;let u,d,p,f,m,g,A,v,_,b,y,x,w=0,C=0,S=0,k=null,E=null;const M=this.coordinateCache_,T=this.viewRotation_,I=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},O=this.instructions!=n||this.overlaps?0:200;let P,R,F,L;for(;c&lt;h;){const i=n[c];switch(i[0]){case Wrt.BEGIN_GEOMETRY:P=i[1],L=i[3],P.getGeometry()?void 0===o||RN(o,L.getExtent())?++c:c=i[2]+1:c=i[2];break;case Wrt.BEGIN_PATH:C&gt;O&amp;&amp;(this.fill_(t),C=0),S&gt;O&amp;&amp;(t.stroke(),S=0),!C&amp;&amp;!S&amp;&amp;(t.beginPath(),f=NaN,m=NaN),++c;break;case Wrt.CIRCLE:w=i[1];const n=l[w],h=l[w+1],B=l[w+2]-n,z=l[w+3]-h,N=Math.sqrt(B*B+z*z);t.moveTo(n+N,h),t.arc(n,h,N,0,2*Math.PI,!0),++c;break;case Wrt.CLOSE_PATH:t.closePath(),++c;break;case Wrt.CUSTOM:w=i[1],u=i[2];const V=i[4],$=6==i.length?i[5]:void 0;D.geometry=i[3],D.feature=P,c in M||(M[c]=[]);const U=M[c];$?$(l,w,u,2,U):(U[0]=l[w],U[1]=l[w+1],U.length=2),V(U,D),++c;break;case Wrt.DRAW_IMAGE:w=i[1],u=i[2],v=i[3],d=i[4],p=i[5];let j=i[6];const H=i[7],G=i[8],q=i[9],W=i[10];let Y=i[11];const Z=i[12];let K=i[13];const X=i[14],Q=i[15];if(!v&amp;&amp;i.length&gt;=20){_=i[19],b=i[20],y=i[21],x=i[22];const t=this.drawLabelWithPointPlacement_(_,b,y,x);v=t.label,i[3]=v,d=(t.anchorX-i[23])*this.pixelRatio,i[4]=d,p=(t.anchorY-i[24])*this.pixelRatio,i[5]=p,j=v.height,i[6]=j,K=v.width,i[13]=K}let J,tt,et,it;i.length&gt;25&amp;&amp;(J=i[25]),i.length&gt;17?(tt=i[16],et=i[17],it=i[18]):(tt=J6,et=!1,it=!1),W&amp;&amp;I?Y+=T:!W&amp;&amp;!I&amp;&amp;(Y-=T);let nt=0;for(;w&lt;u;w+=2){if(J&amp;&amp;J[nt++]&lt;K/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(v.width,v.height,l[w],l[w+1],K,j,d,p,G,q,Y,Z,s,tt,et||it,P),n=[t,e,v,i,H,et?k:null,it?E:null];if(a){if(&quot;none&quot;===X)continue;if(&quot;obstacle&quot;===X){a.insert(i.declutterBox);continue}{let t,e;if(Q){const i=u-w;if(!Q[i]){Q[i]=n;continue}if(t=Q[i],delete Q[i],e=aot(t),a.collides(e))continue}if(a.collides(i.declutterBox))continue;t&amp;&amp;(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++c;break;case Wrt.DRAW_CHARS:const st=i[1],rt=i[2],ot=i[3],at=i[4];x=i[5];const lt=i[6],ct=i[7],ht=i[8];y=i[9];const ut=i[10];_=i[11],b=i[12];const dt=[i[13],i[13]],pt=this.textStates[b],ft=pt.font,mt=[pt.scale[0]*ct,pt.scale[1]*ct];let gt;ft in this.widths_?gt=this.widths_[ft]:(gt={},this.widths_[ft]=gt);const At=h6(l,st,rt,2),vt=Math.abs(mt[0])*l8(ft,_,gt);if(at||vt&lt;=At){const i=eot(l,st,rt,2,_,(At-vt)*Qrt[this.textStates[b].textAlign],lt,Math.abs(mt[0]),l8,ft,gt,I?0:this.viewRotation_);t:if(i){const n=[];let s,r,o,l,c;if(y)for(s=0,r=i.length;s&lt;r;++s){c=i[s],o=c[4],l=this.createLabel(o,b,&quot;&quot;,y),d=c[2]+(mt[0]&lt;0?-ut:ut),p=ot*l.height+2*(.5-ot)*ut*mt[1]/mt[0]-ht;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,d,p,0,0,c[3],dt,!1,J6,!1,P);if(a&amp;&amp;a.collides(r.declutterBox))break t;n.push([t,e,l,r,1,null,null])}if(x)for(s=0,r=i.length;s&lt;r;++s){c=i[s],o=c[4],l=this.createLabel(o,b,x,&quot;&quot;),d=c[2],p=ot*l.height-ht;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,d,p,0,0,c[3],dt,!1,J6,!1,P);if(a&amp;&amp;a.collides(r.declutterBox))break t;n.push([t,e,l,r,1,null,null])}a&amp;&amp;a.load(n.map(aot));for(let t=0,e=n.length;t&lt;e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++c;break;case Wrt.END_GEOMETRY:if(void 0!==r){P=i[1];const t=r(P,L);if(t)return t}++c;break;case Wrt.FILL:O?C++:this.fill_(t),++c;break;case Wrt.MOVE_TO_LINE_TO:for(w=i[1],u=i[2],R=l[w],F=l[w+1],g=R+.5|0,A=F+.5|0,(g!==f||A!==m)&amp;&amp;(t.moveTo(R,F),f=g,m=A),w+=2;w&lt;u;w+=2)R=l[w],F=l[w+1],g=R+.5|0,A=F+.5|0,(w==u-2||g!==f||A!==m)&amp;&amp;(t.lineTo(R,F),f=g,m=A);++c;break;case Wrt.SET_FILL_STYLE:k=i,this.alignFill_=i[2],C&amp;&amp;(this.fill_(t),C=0,S&amp;&amp;(t.stroke(),S=0)),t.fillStyle=i[1],++c;break;case Wrt.SET_STROKE_STYLE:E=i,S&amp;&amp;(t.stroke(),S=0),this.setStrokeStyle_(t,i),++c;break;case Wrt.STROKE:O?S++:t.stroke(),++c;break;default:++c}}C&amp;&amp;this.fill_(t),S&amp;&amp;t.stroke()}execute(t,e,i,n,s,r){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,s)}};const dot=[&quot;Polygon&quot;,&quot;Circle&quot;,&quot;LineString&quot;,&quot;Image&quot;,&quot;Text&quot;,&quot;Default&quot;],pot={};var fot=class{constructor(t,e,i,n,s,r){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&amp;&amp;(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n)i[t]=new uot(this.resolution_,this.pixelRatio_,this.overlaps_,n[t])}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e&lt;n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,r){const o=2*(n=Math.round(n))+1,a=A4(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),l=!this.hitDetectionContext_;l&amp;&amp;(this.hitDetectionContext_=Uz(o,o));const c=this.hitDetectionContext_;let h;c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o,c.canvas.height=o):l||c.clearRect(0,0,o,o),void 0!==this.renderBuffer_&amp;&amp;(h=[1/0,1/0,-1/0,-1/0],vN(h,t),rN(h,e*(this.renderBuffer_+n),h));const u=function(t){if(void 0!==pot[t])return pot[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let r=0;r&lt;=t;++r)for(let s=0;s&lt;=t;++s){const o=r*r+s*s;if(o&gt;i)break;let a=n[o];a||(a=[],n[o]=a),a.push(4*((t+r)*e+(t+s))+3),r&gt;0&amp;&amp;a.push(4*((t-r)*e+(t+s))+3),s&gt;0&amp;&amp;(a.push(4*((t+r)*e+(t-s))+3),r&gt;0&amp;&amp;a.push(4*((t-r)*e+(t-s))+3))}const s=[];for(let r=0,o=n.length;r&lt;o;++r)n[r]&amp;&amp;s.push(...n[r]);return pot[t]=s,s}(n);let d;function p(t,e){const i=c.getImageData(0,0,o,o).data;for(let a=0,l=u.length;a&lt;l;a++)if(i[u[a]]&gt;0){if(!r||&quot;Image&quot;!==d&amp;&amp;&quot;Text&quot;!==d||r.includes(t)){const i=(u[a]-3)/4,r=n-i%o,l=n-(i/o|0),c=s(t,e,r*r+l*l);if(c)return c}c.clearRect(0,0,o,o);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);let m,g,A,v,_;for(f.sort(fz),m=f.length-1;m&gt;=0;--m){const t=f[m].toString();for(A=this.executorsByZIndex_[t],g=dot.length-1;g&gt;=0;--g)if(d=dot[g],v=A[d],void 0!==v&amp;&amp;(_=v.executeHitDetection(c,a,i,p,h),_))return _}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],s=e[2],r=e[3],o=[i,n,i,r,s,r,s,n];return y4(o,0,8,2,t,o),o}isEmpty(){return wz(this.executorsByZIndex_)}execute(t,e,i,n,s,r,o){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,c,h,u,d,p;for(a.sort(fz),this.maxExtent_&amp;&amp;(t.save(),this.clip(t,i)),r=r||dot,o&amp;&amp;a.reverse(),l=0,c=a.length;l&lt;c;++l){const c=a[l].toString();for(d=this.executorsByZIndex_[c],h=0,u=r.length;h&lt;u;++h)p=d[r[h]],void 0!==p&amp;&amp;p.execute(t,e,i,n,s,o)}this.maxExtent_&amp;&amp;t.restore()}},mot=class extends Yrt{constructor(t,e,i,n,s,r,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_=&quot;&quot;,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,i,n){if(!this.image_)return;const s=y4(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&amp;&amp;(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&amp;&amp;(l+=this.viewRotation_);for(let c=0,h=s.length;c&lt;h;c+=2){const t=s[c]-this.imageAnchorX_,e=s[c+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,n=e+this.imageAnchorY_;A4(o,i,n,1,1,l,-i,-n),r.setTransform.apply(r,o),r.translate(i,n),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&amp;&amp;(r.globalAlpha=a)}drawText_(t,e,i,n){if(!this.textState_||&quot;&quot;===this.text_)return;this.textFillState_&amp;&amp;this.setContextFillState_(this.textFillState_),this.textStrokeState_&amp;&amp;this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=y4(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let o=this.textRotation_;for(this.textRotateWithView_&amp;&amp;(o+=this.viewRotation_);e&lt;i;e+=n){const t=s[e]+this.textOffsetX_,i=s[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.translate(t-this.textOffsetX_,i-this.textOffsetY_),r.rotate(o),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&amp;&amp;r.strokeText(this.text_,0,0),this.textFillState_&amp;&amp;r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&amp;&amp;r.strokeText(this.text_,t,i),this.textFillState_&amp;&amp;r.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,s){const r=this.context_,o=y4(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);let a=o.length;s&amp;&amp;(a-=2);for(let l=2;l&lt;a;l+=2)r.lineTo(o[l],o[l+1]);return s&amp;&amp;r.closePath(),i}drawRings_(t,e,i,n){for(let s=0,r=i.length;s&lt;r;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e}drawCircle(t){if(RN(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&amp;&amp;this.setContextFillState_(this.fillState_),this.strokeState_&amp;&amp;this.setContextStrokeState_(this.strokeState_);const e=function(t,e,i){const n=t.getFlatCoordinates();if(n){const s=t.getStride();return y4(n,0,n.length,s,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&amp;&amp;r.fill(),this.strokeState_&amp;&amp;r.stroke()}&quot;&quot;!==this.text_&amp;&amp;this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case&quot;Point&quot;:this.drawPoint(t);break;case&quot;LineString&quot;:this.drawLineString(t);break;case&quot;Polygon&quot;:this.drawPolygon(t);break;case&quot;MultiPoint&quot;:this.drawMultiPoint(t);break;case&quot;MultiLineString&quot;:this.drawMultiLineString(t);break;case&quot;MultiPolygon&quot;:this.drawMultiPolygon(t);break;case&quot;GeometryCollection&quot;:this.drawGeometryCollection(t);break;case&quot;Circle&quot;:this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);!i||!RN(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i&lt;n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&amp;&amp;this.drawImages_(e,0,e.length,i),&quot;&quot;!==this.text_&amp;&amp;this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&amp;&amp;this.drawImages_(e,0,e.length,i),&quot;&quot;!==this.text_&amp;&amp;this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),RN(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(&quot;&quot;!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(RN(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const s=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,o=s.length;t&lt;o;++t)n=this.moveToLineTo_(i,n,s[t],r,!1);e.stroke()}if(&quot;&quot;!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),RN(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&amp;&amp;this.setContextFillState_(this.fillState_),this.strokeState_&amp;&amp;this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&amp;&amp;e.fill(),this.strokeState_&amp;&amp;e.stroke()}if(&quot;&quot;!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&amp;&amp;(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),RN(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&amp;&amp;this.setContextFillState_(this.fillState_),this.strokeState_&amp;&amp;this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const s=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,o=s.length;t&lt;o;++t)n=this.drawRings_(i,n,s[t],r);this.fillState_&amp;&amp;e.fill(),this.strokeState_&amp;&amp;e.stroke()}if(&quot;&quot;!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&amp;&amp;(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&amp;&amp;(i.lineCap=t.lineCap,e.lineCap=t.lineCap),vz(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&amp;&amp;(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&amp;&amp;(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&amp;&amp;(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&amp;&amp;(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&amp;&amp;(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:X6;i?(i.font!=t.font&amp;&amp;(i.font=t.font,e.font=t.font),i.textAlign!=n&amp;&amp;(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&amp;&amp;(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:B6(e||q6)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),r=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),l=n||Y6;this.strokeState_={lineCap:void 0!==i?i:W6,lineDash:1===this.pixelRatio_?l:l.map(t=&gt;t*this.pixelRatio_),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==r?r:Z6,lineWidth:(void 0!==o?o:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:B6(t||K6)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:B6(t||q6)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),s=i.getLineDashOffset(),r=i.getLineJoin(),o=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:W6,lineDash:n||Y6,lineDashOffset:s||0,lineJoin:void 0!==r?r:Z6,lineWidth:void 0!==o?o:1,miterLimit:void 0!==a?a:10,strokeStyle:B6(t||K6)}}else this.textStrokeState_=null;const n=t.getFont(),s=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),c=t.getText(),h=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:void 0!==n?n:G6,textAlign:void 0!==h?h:X6,textBaseline:void 0!==u?u:Q6},this.text_=void 0!==c?Array.isArray(c)?c.reduce((t,e,i)=&gt;t+(i%2?&quot; &quot;:e),&quot;&quot;):c:&quot;&quot;,this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==o&amp;&amp;o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=&quot;&quot;}};const got=.5,Aot={Point:function(t,e,i,n,s){const r=i.getImage(),o=i.getText();let a;if(r){if(2!=r.getImageState())return;let l=t;if(s){const c=r.getDeclutterMode();if(&quot;none&quot;!==c)if(l=s,&quot;obstacle&quot;===c){const s=t.getBuilder(i.getZIndex(),&quot;Image&quot;);s.setImageStyle(r,a),s.drawPoint(e,n)}else o&amp;&amp;o.getText()&amp;&amp;(a={})}const c=l.getBuilder(i.getZIndex(),&quot;Image&quot;);c.setImageStyle(r,a),c.drawPoint(e,n)}if(o&amp;&amp;o.getText()){let r=t;s&amp;&amp;(r=s);const l=r.getBuilder(i.getZIndex(),&quot;Text&quot;);l.setTextStyle(o,a),l.drawText(e,n)}},LineString:function(t,e,i,n,s){const r=i.getStroke();if(r){const s=t.getBuilder(i.getZIndex(),&quot;LineString&quot;);s.setFillStrokeStyle(null,r),s.drawLineString(e,n)}const o=i.getText();if(o&amp;&amp;o.getText()){const r=(s||t).getBuilder(i.getZIndex(),&quot;Text&quot;);r.setTextStyle(o),r.drawText(e,n)}},Polygon:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(r||o){const s=t.getBuilder(i.getZIndex(),&quot;Polygon&quot;);s.setFillStrokeStyle(r,o),s.drawPolygon(e,n)}const a=i.getText();if(a&amp;&amp;a.getText()){const r=(s||t).getBuilder(i.getZIndex(),&quot;Text&quot;);r.setTextStyle(a),r.drawText(e,n)}},MultiPoint:function(t,e,i,n,s){const r=i.getImage(),o=i.getText();let a;if(r){if(2!=r.getImageState())return;let l=t;if(s){const c=r.getDeclutterMode();if(&quot;none&quot;!==c)if(l=s,&quot;obstacle&quot;===c){const s=t.getBuilder(i.getZIndex(),&quot;Image&quot;);s.setImageStyle(r,a),s.drawMultiPoint(e,n)}else o&amp;&amp;o.getText()&amp;&amp;(a={})}const c=l.getBuilder(i.getZIndex(),&quot;Image&quot;);c.setImageStyle(r,a),c.drawMultiPoint(e,n)}if(o&amp;&amp;o.getText()){let r=t;s&amp;&amp;(r=s);const l=r.getBuilder(i.getZIndex(),&quot;Text&quot;);l.setTextStyle(o,a),l.drawText(e,n)}},MultiLineString:function(t,e,i,n,s){const r=i.getStroke();if(r){const s=t.getBuilder(i.getZIndex(),&quot;LineString&quot;);s.setFillStrokeStyle(null,r),s.drawMultiLineString(e,n)}const o=i.getText();if(o&amp;&amp;o.getText()){const r=(s||t).getBuilder(i.getZIndex(),&quot;Text&quot;);r.setTextStyle(o),r.drawText(e,n)}},MultiPolygon:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(o||r){const s=t.getBuilder(i.getZIndex(),&quot;Polygon&quot;);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,n)}const a=i.getText();if(a&amp;&amp;a.getText()){const r=(s||t).getBuilder(i.getZIndex(),&quot;Text&quot;);r.setTextStyle(a),r.drawText(e,n)}},GeometryCollection:function(t,e,i,n,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o&lt;a;++o)Aot[r[o].getType()](t,r[o],i,n,s)},Circle:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(r||o){const s=t.getBuilder(i.getZIndex(),&quot;Circle&quot;);s.setFillStrokeStyle(r,o),s.drawCircle(e,n)}const a=i.getText();if(a&amp;&amp;a.getText()){const r=(s||t).getBuilder(i.getZIndex(),&quot;Text&quot;);r.setTextStyle(a),r.drawText(e,n)}}};function vot(t,e){return parseInt(Ez(t),10)-parseInt(Ez(e),10)}function _ot(t,e){const i=bot(t,e);return i*i}function bot(t,e){return.5*t/e}function yot(t,e,i,n,s,r,o){let a=!1;const l=i.getImage();if(l){const t=l.getImageState();2==t||3==t?l.unlistenImageChange(s):(0==t&amp;&amp;l.load(),l.listenImageChange(s),a=!0)}return function(t,e,i,n,s,r){const o=i.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,s);i.getRenderer()?xot(t,a,i,e):Aot[a.getType()](t,a,i,e,r)}(t,e,i,n,r,o),a}function xot(t,e,i,n){if(&quot;GeometryCollection&quot;!=e.getType())t.getBuilder(i.getZIndex(),&quot;Default&quot;).drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer());else{const s=e.getGeometries();for(let e=0,r=s.length;e&lt;r;++e)xot(t,s[e],i,n)}}var wot=class extends Ust{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,s=e.viewState,r=s.center,o=s.resolution,a=s.projection,l=s.rotation,c=a.getExtent(),h=this.getLayer().getSource(),u=e.pixelRatio,d=e.viewHints,p=!(d[0]||d[1]),f=this.compositionContext_,m=Math.round(e.size[0]*u),g=Math.round(e.size[1]*u),A=h.getWrapX()&amp;&amp;a.canWrapX(),v=A?PN(c):null,_=A?Math.ceil((n[2]-c[2])/v)+1:1;let b=A?Math.floor((n[0]-c[0])/v):0;do{const e=this.getRenderTransform(r,o,l,u,m,g,b*v);t.execute(f,1,e,l,p,void 0,i)}while(++b&lt;_)}setupCompositionContext_(){if(1!==this.opacity_){const t=Uz(this.context.canvas.width,this.context.canvas.height,Vst);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,jz(this.compositionContext_),Vst.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&amp;&amp;(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(function(t,e,i){f4(t,e,0,0,i,0,0)})(this.pixelTransform,1/i,1/i),v4(this.inversePixelTransform,this.pixelTransform);const s=b4(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const r=this.context,o=r.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&amp;&amp;(!l||l.isEmpty()))return null;const c=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);o.width!=c||o.height!=h?(o.width=c,o.height=h,o.style.transform!==s&amp;&amp;(o.style.transform=s)):this.containerReused||r.clearRect(0,0,c,h),this.preRender(r,t);const u=t.viewState;this.opacity_=n.opacity,this.setupCompositionContext_();let d=!1,p=!0;if(n.extent&amp;&amp;this.clipping){const e=UV(n.extent);p=RN(e,t.extent),d=p&amp;&amp;!cN(e,t.extent),d&amp;&amp;this.clipUnrotated(this.compositionContext_,t,e)}return p&amp;&amp;this.renderWorlds(a,t),d&amp;&amp;this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(r,t),this.renderedRotation_!==u.rotation&amp;&amp;(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((function(e){if(!this.hitDetectionImageData_&amp;&amp;!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];m4(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,s=this.renderedProjection_,r=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],l=t[0]*got,c=t[1]*got;a.push(this.getRenderTransform(e,i,n,got,l,c,0).slice());const h=o.getSource(),u=s.getExtent();if(h.getWrapX()&amp;&amp;s.canWrapX()&amp;&amp;!cN(u,r)){let t=r[0];const s=PN(u);let o,h=0;for(;t&lt;u[0];)--h,o=s*h,a.push(this.getRenderTransform(e,i,n,got,l,c,o).slice()),t+=s;for(h=0,t=r[2];t&gt;u[2];)++h,o=s*h,a.push(this.getRenderTransform(e,i,n,got,l,c,o).slice()),t-=s}this.hitDetectionImageData_=function(t,e,i,n,s,r,o){const a=Uz(t[0]*got,t[1]*got);a.imageSmoothingEnabled=!1;const l=a.canvas,c=new mot(a,got,s,null,o),h=i.length,u=Math.floor(16777215/h),d={};for(let f=1;f&lt;=h;++f){const t=i[f-1],e=t.getStyleFunction()||n;if(!n)continue;let o=e(t,r);if(!o)continue;Array.isArray(o)||(o=[o]);const a=&quot;#&quot;+(&quot;000000&quot;+(f*u).toString(16)).slice(-6);for(let i=0,n=o.length;i&lt;n;++i){const e=o[i],n=e.getGeometryFunction()(t);if(!n||!RN(s,n.getExtent()))continue;const r=e.clone(),l=r.getFill();l&amp;&amp;l.setColor(a);const c=r.getStroke();c&amp;&amp;(c.setColor(a),c.setLineDash(null)),r.setText(void 0);const h=e.getImage();if(h&amp;&amp;0!==h.getOpacity()){const t=h.getImageSize();if(!t)continue;const e=Uz(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=a,e.fillRect(0,0,i.width,i.height),r.setImage(new H4({img:i,imgSize:t,anchor:h.getAnchor(),anchorXUnits:&quot;pixels&quot;,anchorYUnits:&quot;pixels&quot;,offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const u=r.getZIndex()||0;let p=d[u];p||(p={},d[u]=p,p.Polygon=[],p.Circle=[],p.LineString=[],p.Point=[]),p[n.getType().replace(&quot;Multi&quot;,&quot;&quot;)].push(n,r)}}const p=Object.keys(d).map(Number).sort(fz);for(let f=0,m=p.length;f&lt;m;++f){const t=d[p[f]];for(const i in t){const n=t[i];for(let t=0,i=n.length;t&lt;i;t+=2){c.setStyle(n[t+1]);for(let i=0,s=e.length;i&lt;s;++i)c.setTransform(e[i]),c.drawGeometry(n[t])}}}return a.getImageData(0,0,l.width,l.height)}(t,a,this.renderedFeatures_,o.getStyleFunction(),r,i,n)}e(function(t,e,i){const n=[];if(i){const s=Math.floor(Math.round(t[0])*got),r=Math.floor(Math.round(t[1])*got),o=4*(JN(s,0,i.width-1)+JN(r,0,i.height-1)*i.width),a=i.data[o+2]+256*(i.data[o+1]+256*i.data[o]),l=Math.floor(16777215/e.length);a&amp;&amp;a%l==0&amp;&amp;n.push(e[a/l-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))}forEachFeatureAtCoordinate(t,e,i,n,s){if(!this.replayGroup_)return;const r=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},c=function(t,e,i){const r=Ez(t),o=l[r];if(o){if(!0!==o&amp;&amp;i&lt;o.distanceSq){if(0===i)return l[r]=!0,s.splice(s.lastIndexOf(o),1),n(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return l[r]=!0,n(t,a,e);s.push(l[r]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}};let h;const u=[this.replayGroup_];return this.declutterExecutorGroup&amp;&amp;u.push(this.declutterExecutorGroup),u.some(n=&gt;h=n.forEachFeatureAtCoordinate(t,r,o,i,c,n===this.declutterExecutorGroup&amp;&amp;e.declutterTree?e.declutterTree.all().map(t=&gt;t.value):null)),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&amp;&amp;this.replayGroup_&amp;&amp;t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[0],s=t.viewHints[1],r=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&amp;&amp;!r&amp;&amp;n||!o&amp;&amp;s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,c=l.projection,h=l.resolution,u=t.pixelRatio,d=e.getRevision(),p=e.getRenderBuffer();let f=e.getRenderOrder();void 0===f&amp;&amp;(f=vot);const m=l.center.slice(),g=rN(a,p*h),A=g.slice(),v=[g.slice()],_=c.getExtent();if(i.getWrapX()&amp;&amp;c.canWrapX()&amp;&amp;!cN(_,t.extent)){const t=PN(_),e=Math.max(PN(g)/2,t);g[0]=_[0]-e,g[2]=_[2]+e,mV(m,c);const i=LN(v[0],c);i[0]&lt;_[0]&amp;&amp;i[2]&lt;_[2]?v.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]&gt;_[0]&amp;&amp;i[2]&gt;_[2]&amp;&amp;v.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&amp;&amp;this.renderedResolution_==h&amp;&amp;this.renderedRevision_==d&amp;&amp;this.renderedRenderOrder_==f&amp;&amp;cN(this.wrappedRenderedExtent_,g))return vz(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new tot(bot(h,u),g,h,u);let y;this.getLayer().getDeclutter()&amp;&amp;(y=new tot(bot(h,u),g,h,u));const x=zV();let w;if(x){for(let t=0,e=v.length;t&lt;e;++t){const e=$V(v[t]);i.loadFeatures(e,jV(h),x)}w=PV(x,c)}else for(let D=0,O=v.length;D&lt;O;++D)i.loadFeatures(v[D],h,c);const C=_ot(h,u);let S=!0;const k=(function(t){let i;const n=t.getStyleFunction()||e.getStyleFunction();if(n&amp;&amp;(i=n(t,h)),i){const e=this.renderFeature(t,C,i,b,w,y);S=S&amp;&amp;!e}}).bind(this),E=$V(g),M=i.getFeaturesInExtent(E);f&amp;&amp;M.sort(f);for(let D=0,O=M.length;D&lt;O;++D)k(M[D]);this.renderedFeatures_=M,this.ready=S;const T=b.finish(),I=new fot(g,h,u,i.getOverlaps(),T,e.getRenderBuffer());return y&amp;&amp;(this.declutterExecutorGroup=new fot(g,h,u,i.getOverlaps(),y.finish(),e.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=d,this.renderedRenderOrder_=f,this.renderedExtent_=A,this.wrappedRenderedExtent_=g,this.renderedCenter_=m,this.renderedProjection_=c,this.replayGroup_=I,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,r){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a&lt;l;++a)o=yot(n,t,i[a],e,this.boundHandleStyleImageChange_,s,r)||o;else o=yot(n,t,i,e,this.boundHandleStyleImageChange_,s,r);return o}},Cot=class extends $rt{constructor(t){super(t)}createRenderer(){return new wot(this)}};function Sot(t,e){return[[-1/0,-1/0,1/0,1/0]]}function kot(t,e){return function(i,n,s,r,o){const a=this;!function(t,e,i,n,s,r,o){const a=new XMLHttpRequest;a.open(&quot;GET&quot;,&quot;function&quot;==typeof t?t(i,n,s):t,!0),&quot;arraybuffer&quot;==e.getType()&amp;&amp;(a.responseType=&quot;arraybuffer&quot;),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status&gt;=200&amp;&amp;a.status&lt;300){const t=e.getType();let n;&quot;json&quot;==t||&quot;text&quot;==t?n=a.responseText:&quot;xml&quot;==t?(n=a.responseXML,n||(n=(new DOMParser).parseFromString(a.responseText,&quot;application/xml&quot;))):&quot;arraybuffer&quot;==t&amp;&amp;(n=a.response),n?r(e.readFeatures(n,{extent:i,featureProjection:s}),e.readProjection(n)):o()}else o()},a.onerror=o,a.send()}(t,e,i,n,s,function(t,e){a.addFeatures(t),void 0!==r&amp;&amp;r(t)},o||yz)}}class Eot extends pz{constructor(t,e,i){super(t),this.feature=e,this.features=i}}var Mot=class extends o${constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:&quot;ready&quot;,wrapX:void 0===t.wrapX||t.wrapX}),this.loader_=yz,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&amp;&amp;(nN(this.format_,7),this.loader_=kot(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:Sot;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,n;this.featuresRtree_=e?new Frt:null,this.loadedExtentsRtree_=new Frt,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&amp;&amp;(i=t.features,n=i.getArray()),!e&amp;&amp;void 0===i&amp;&amp;(i=new est(n)),void 0!==n&amp;&amp;this.addFeaturesInternal(n),void 0!==i&amp;&amp;this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Ez(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&amp;&amp;this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&amp;&amp;this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Eot(&quot;addfeature&quot;,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[Zz(e,&quot;change&quot;,this.handleFeatureChange_,this),Zz(e,&quot;propertychange&quot;,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return void 0!==n&amp;&amp;(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&amp;&amp;(nN(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let s=0,r=t.length;s&lt;r;s++){const e=t[s],n=Ez(e);this.addToIndex_(n,e)&amp;&amp;i.push(e)}for(let s=0,r=i.length;s&lt;r;s++){const t=i[s],r=Ez(t);this.setupChangeEvents_(r,t);const o=t.getGeometry();if(o){const i=o.getExtent();e.push(i),n.push(t)}else this.nullGeometryFeatures_[r]=t}if(this.featuresRtree_&amp;&amp;this.featuresRtree_.load(e,n),this.hasListener(&quot;addfeature&quot;))for(let s=0,r=i.length;s&lt;r;s++)this.dispatchEvent(new Eot(&quot;addfeature&quot;,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(&quot;addfeature&quot;,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(&quot;removefeature&quot;,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(&quot;add&quot;,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}).bind(this)),t.addEventListener(&quot;remove&quot;,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}).bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(Xz);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=(function(t){this.removeFeatureInternal(t)}).bind(this);this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&amp;&amp;this.featuresCollection_.clear(),this.featuresRtree_&amp;&amp;this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Eot(&quot;clear&quot;);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&amp;&amp;this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&amp;&amp;this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&amp;&amp;(t=this.featuresRtree_.getAll(),wz(this.nullGeometryFeatures_)||Az(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&amp;&amp;e.canWrapX()&amp;&amp;this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=function(t,e){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];LN(t,e);const n=PN(i);if(PN(t)&gt;n)return[[i[0],t[1],i[2],t[3]]];if(t[0]&lt;i[0])return[[t[0]+n,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]&gt;i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-n,t[3]]]}return[t]}(t,e);return[].concat(...i.map(t=&gt;this.featuresRtree_.getInExtent(t)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let s=null;const r=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||_z,this.featuresRtree_.forEachInExtent(a,function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e.closestPointXY(i,n,r,o),o&lt;l){s=t;const e=Math.sqrt(o);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=Ez(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&amp;&amp;this.featuresRtree_.insert(t,e)):this.featuresRtree_&amp;&amp;this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&amp;&amp;this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const s=e.getId();if(void 0!==s){const t=s.toString();this.idIndex_[t]!==e&amp;&amp;(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Eot(&quot;changefeature&quot;,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:Ez(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&amp;&amp;wz(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let r=0,o=s.length;r&lt;o;++r){const t=s[r];n.forEachInExtent(t,function(e){return cN(e.extent,t)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Eot(&quot;featuresloadstart&quot;)),this.loader_.call(this,t,e,i,(function(t){--this.loadingExtentsCount_,this.dispatchEvent(new Eot(&quot;featuresloadend&quot;,void 0,t))}).bind(this),(function(){--this.loadingExtentsCount_,this.dispatchEvent(new Eot(&quot;featuresloaderror&quot;))}).bind(this)),n.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length&lt;4)&amp;&amp;this.loadingExtentsCount_&gt;0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(e){if(gN(e.extent,t))return i=e,!0}),i&amp;&amp;e.remove(i)}removeFeature(t){if(!t)return;const e=Ez(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&amp;&amp;this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&amp;&amp;this.changed()}removeFeatureInternal(t){const e=Ez(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Xz),delete this.featureChangeKeys_[e];const n=t.getId();return void 0!==n&amp;&amp;delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Eot(&quot;removefeature&quot;,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){nN(this.format_,7),this.url_=t,this.setLoader(kot(t,this.format_))}};const Tot=[0,0,0,0],Iot=[];class Dot extends pz{constructor(t,e,i){super(t),this.features=e,this.mapBrowserEvent=i}}function Oot(t,e){return t.index-e.index}function Pot(t,e,i){const n=e.geometry;if(&quot;Circle&quot;===n.getType()){let s=n;if(1===e.index){const e=zV();e&amp;&amp;(s=s.clone().transform(e,i));const n=pV(s.getCenter(),VV(t)),r=Math.sqrt(n)-s.getRadius();return r*r}}const s=VV(t);return Iot[0]=VV(e.segment[0]),Iot[1]=VV(e.segment[1]),function(t,e){return pV(t,hV(t,e))}(s,Iot)}function Rot(t,e,i){const n=e.geometry;if(&quot;Circle&quot;===n.getType()&amp;&amp;1===e.index){let e=n;const s=zV();return s&amp;&amp;(e=e.clone().transform(s,i)),NV(e.getClosestPoint(VV(t)))}const s=VV(t);return Iot[0]=VV(e.segment[0]),Iot[1]=VV(e.segment[1]),NV(hV(s,Iot))}function Fot(){const t=g8();return function(e,i){return t.Point}}var Lot=class extends ast{constructor(t){let e;if(super(t),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:_st,this.defaultDeleteCondition_=function(t){return function(t){const e=t.originalEvent;return e.altKey&amp;&amp;!(e.metaKey||e.ctrlKey)&amp;&amp;!e.shiftKey}(t)&amp;&amp;function(t){return t.type==sst.SINGLECLICK}(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:ust,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Frt,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Cot({source:new Mot({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Fot(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&amp;&amp;(this.source_=t.source,e=new est(this.source_.getFeatures()),this.source_.addEventListener(&quot;addfeature&quot;,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(&quot;removefeature&quot;,this.handleSourceRemove_.bind(this))),!e)throw new Error(&quot;The modify interaction requires features, a source or a layer&quot;);t.hitDetection&amp;&amp;(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(&quot;add&quot;,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(&quot;remove&quot;,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const i=this.SEGMENT_WRITERS_[e.getType()];i&amp;&amp;i(t,e)}const i=this.getMap();i&amp;&amp;i.isRendered()&amp;&amp;this.getActive()&amp;&amp;this.handlePointerAtPixel_(this.lastPixel_,i),t.addEventListener(&quot;change&quot;,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new est;const i=this.featuresBeingModified_.getArray();for(let t=0,n=e.length;t&lt;n;++t){const n=e[t];for(let t=0,e=n.length;t&lt;e;++t){const e=n[t].feature;e&amp;&amp;!i.includes(e)&amp;&amp;this.featuresBeingModified_.push(e)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new Dot(&quot;modifystart&quot;,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&amp;&amp;0===this.features_.getLength()&amp;&amp;(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(&quot;change&quot;,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&amp;&amp;i.push(e)});for(let n=i.length-1;n&gt;=0;--n){const t=i[n];for(let e=this.dragSegments_.length-1;e&gt;=0;--e)this.dragSegments_[e][0]===t&amp;&amp;this.dragSegments_.splice(e,1);e.remove(t)}}setActive(t){this.vertexFeature_&amp;&amp;!t&amp;&amp;(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&amp;&amp;this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&amp;&amp;this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)}writeMultiPointGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const s=i[n],r={feature:t,geometry:e,depth:[n],index:n,segment:[s,s]};this.rBush_.insert(e.getExtent(),r)}}writeLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length-1;n&lt;s;++n){const s=i.slice(n,n+2),r={feature:t,geometry:e,index:n,segment:s};this.rBush_.insert(sN(s),r)}}writeMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const s=i[n];for(let i=0,r=s.length-1;i&lt;r;++i){const r=s.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:r};this.rBush_.insert(sN(r),o)}}}writePolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const s=i[n];for(let i=0,r=s.length-1;i&lt;r;++i){const r=s.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:r};this.rBush_.insert(sN(r),o)}}}writeMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const s=i[n];for(let i=0,r=s.length;i&lt;r;++i){const r=s[i];for(let s=0,o=r.length-1;s&lt;o;++s){const o=r.slice(s,s+2),a={feature:t,geometry:e,depth:[i,n],index:s,segment:o};this.rBush_.insert(sN(o),a)}}}}writeCircleGeometry_(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},s={feature:t,geometry:e,index:1,segment:[i,i]},r=[n,s];n.featureSegments=r,s.featureSegments=r,this.rBush_.insert(fN(i),n);let o=e;const a=zV();if(a&amp;&amp;this.getMap()){const t=this.getMap().getView().getProjection();o=o.clone().transform(a,t),o=O6(o).transform(t,a)}this.rBush_.insert(o.getExtent(),s)}writeGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let n=0;n&lt;i.length;++n){const e=i[n];this.SEGMENT_WRITERS_[e.getType()](t,e)}}createOrUpdateVertexFeature_(t,e,i){let n=this.vertexFeature_;return n?n.getGeometry().setCoordinates(t):(n=new l4(new g6(t)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n)),n.set(&quot;features&quot;,e),n.set(&quot;geometries&quot;,i),n}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,!t.map.getView().getInteracting()&amp;&amp;t.type==sst.POINTERMOVE&amp;&amp;!this.handlingDownUpSequence&amp;&amp;this.handlePointerMove_(t),this.vertexFeature_&amp;&amp;this.deleteCondition_(t)&amp;&amp;(e=!(t.type!=sst.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==sst.SINGLECLICK&amp;&amp;(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&amp;&amp;!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],n=[];for(let s=0,r=this.dragSegments_.length;s&lt;r;++s){const r=this.dragSegments_[s],o=r[0],a=o.feature;i.includes(a)||i.push(a);const l=o.geometry;n.includes(l)||n.push(l);const c=o.depth;let h;const u=o.segment,d=r[1];for(;e.length&lt;l.getStride();)e.push(u[d][e.length]);switch(l.getType()){case&quot;Point&quot;:h=e,u[0]=e,u[1]=e;break;case&quot;MultiPoint&quot;:h=l.getCoordinates(),h[o.index]=e,u[0]=e,u[1]=e;break;case&quot;LineString&quot;:h=l.getCoordinates(),h[o.index+d]=e,u[d]=e;break;case&quot;MultiLineString&quot;:case&quot;Polygon&quot;:h=l.getCoordinates(),h[c[0]][o.index+d]=e,u[d]=e;break;case&quot;MultiPolygon&quot;:h=l.getCoordinates(),h[c[1]][c[0]][o.index+d]=e,u[d]=e;break;case&quot;Circle&quot;:if(u[0]=e,u[1]=e,0===o.index)this.changingFeature_=!0,l.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;const i=t.map.getView().getProjection();let n=fV(VV(l.getCenter()),VV(e));const s=zV();if(s){const t=l.clone().transform(s,i);t.setRadius(n),n=t.transform(i,s).getRadius()}l.setRadius(n),this.changingFeature_=!1}}h&amp;&amp;this.setGeometryCoordinates_(l,h)}this.createOrUpdateVertexFeature_(e,i,n)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const n=t.map.getView().getProjection(),s=[],r=i.getGeometry().getCoordinates(),o=sN([r]),a=this.rBush_.getInExtent(o),l={};a.sort(Oot);for(let i=0,c=a.length;i&lt;c;++i){const o=a[i],c=o.segment;let h=Ez(o.geometry);const u=o.depth;if(u&amp;&amp;(h+=&quot;-&quot;+u.join(&quot;-&quot;)),l[h]||(l[h]=new Array(2)),&quot;Circle&quot;!==o.geometry.getType()||1!==o.index)if(!uV(c[0],r)||l[h][0])if(!uV(c[1],r)||l[h][1])Ez(c)in this.vertexSegments_&amp;&amp;!l[h][0]&amp;&amp;!l[h][1]&amp;&amp;this.insertVertexCondition_(t)&amp;&amp;s.push(o);else{if(l[h][0]&amp;&amp;0===l[h][0].index){let t=o.geometry.getCoordinates();switch(o.geometry.getType()){case&quot;LineString&quot;:case&quot;MultiLineString&quot;:continue;case&quot;MultiPolygon&quot;:t=t[u[1]];case&quot;Polygon&quot;:if(o.index!==t[u[0]].length-2)continue}}this.dragSegments_.push([o,1]),l[h][1]=o}else this.dragSegments_.push([o,0]),l[h][0]=o;else uV(Rot(e,o,n),r)&amp;&amp;!l[h][0]&amp;&amp;(this.dragSegments_.push([o,0]),l[h][0]=o)}s.length&amp;&amp;this.willModifyFeatures_(t,[s]);for(let t=s.length-1;t&gt;=0;--t)this.insertVertex_(s[t],r)}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e&gt;=0;--e){const i=this.dragSegments_[e][0],n=i.geometry;if(&quot;Circle&quot;===n.getType()){const e=n.getCenter(),s=i.featureSegments[0],r=i.featureSegments[1];s.segment[0]=e,s.segment[1]=e,r.segment[0]=e,r.segment[1]=e,this.rBush_.update(fN(e),s);let o=n;const a=zV();if(a){const e=t.map.getView().getProjection();o=o.clone().transform(a,e),o=O6(o).transform(e,a)}this.rBush_.update(o.getExtent(),r)}else this.rBush_.update(sN(i.segment),i)}return this.featuresBeingModified_&amp;&amp;(this.dispatchEvent(new Dot(&quot;modifyend&quot;,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,i){const n=i||e.getCoordinateFromPixel(t),s=e.getView().getProjection(),r=function(t,e){return Pot(n,t,s)-Pot(n,e,s)};let o,a;if(this.hitDetection_&amp;&amp;e.forEachFeatureAtPixel(t,(t,e,i)=&gt;{if(&quot;Point&quot;===(i=i||t.getGeometry()).getType()&amp;&amp;this.features_.getArray().includes(t)){a=i;const e=i.getFlatCoordinates().slice(0,2);o=[{feature:t,geometry:i,segment:[e,e]}]}return!0},{layerFilter:&quot;object&quot;==typeof this.hitDetection_?t=&gt;t===this.hitDetection_:void 0}),!o){const t=$V(rN(UV(fN(n,Tot)),e.getView().getResolution()*this.pixelTolerance_,Tot));o=this.rBush_.getInExtent(t)}if(o&amp;&amp;o.length&gt;0){const i=o.sort(r)[0],l=i.segment;let c=Rot(n,i,s);const h=e.getPixelFromCoordinate(c);let u=fV(t,h);if(a||u&lt;=this.pixelTolerance_){const t={};if(t[Ez(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-n[0],this.delta_[1]=c[1]-n[1]),&quot;Circle&quot;===i.geometry.getType()&amp;&amp;1===i.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[i.feature],[i.geometry]);else{const n=e.getPixelFromCoordinate(l[0]),s=e.getPixelFromCoordinate(l[1]),r=pV(h,n),a=pV(h,s);u=Math.sqrt(Math.min(r,a)),this.snappedToVertex_=u&lt;=this.pixelTolerance_,this.snappedToVertex_&amp;&amp;(c=r&gt;a?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[i.feature],[i.geometry]);const d={};d[Ez(i.geometry)]=!0;for(let e=1,i=o.length;e&lt;i;++e){const i=o[e].segment;if(!(uV(l[0],i[0])&amp;&amp;uV(l[1],i[1])||uV(l[0],i[1])&amp;&amp;uV(l[1],i[0])))break;{const n=Ez(o[e].geometry);n in d||(d[n]=!0,t[Ez(i)]=!0)}}}return void(this.vertexSegments_=t)}}this.vertexFeature_&amp;&amp;(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const i=t.segment,n=t.feature,s=t.geometry,r=t.depth,o=t.index;let a;for(;e.length&lt;s.getStride();)e.push(0);switch(s.getType()){case&quot;MultiLineString&quot;:case&quot;Polygon&quot;:a=s.getCoordinates(),a[r[0]].splice(o+1,0,e);break;case&quot;MultiPolygon&quot;:a=s.getCoordinates(),a[r[1]][r[0]].splice(o+1,0,e);break;case&quot;LineString&quot;:a=s.getCoordinates(),a.splice(o+1,0,e);break;default:return}this.setGeometryCoordinates_(s,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(s,o,r,1);const c={segment:[i[0],e],feature:n,geometry:s,depth:r,index:o};l.insert(sN(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[e,i[1]],feature:n,geometry:s,depth:r,index:o+1};l.insert(sN(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&amp;&amp;this.lastPointerEvent_.type!=sst.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&amp;&amp;this.dispatchEvent(new Dot(&quot;modifyend&quot;,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let i,n,s,r,o,a,l,c,h,u,d,p=!1;for(o=t.length-1;o&gt;=0;--o)s=t[o],u=s[0],d=Ez(u.feature),u.depth&amp;&amp;(d+=&quot;-&quot;+u.depth.join(&quot;-&quot;)),d in e||(e[d]={}),0===s[1]?(e[d].right=u,e[d].index=u.index):1==s[1]&amp;&amp;(e[d].left=u,e[d].index=u.index+1);for(d in e){switch(h=e[d].right,l=e[d].left,a=e[d].index,c=a-1,u=void 0!==l?l:h,c&lt;0&amp;&amp;(c=0),r=u.geometry,n=r.getCoordinates(),i=n,p=!1,r.getType()){case&quot;MultiLineString&quot;:n[u.depth[0]].length&gt;2&amp;&amp;(n[u.depth[0]].splice(a,1),p=!0);break;case&quot;LineString&quot;:n.length&gt;2&amp;&amp;(n.splice(a,1),p=!0);break;case&quot;MultiPolygon&quot;:i=i[u.depth[1]];case&quot;Polygon&quot;:i=i[u.depth[0]],i.length&gt;4&amp;&amp;(a==i.length-1&amp;&amp;(a=0),i.splice(a,1),p=!0,0===a&amp;&amp;(i.pop(),i.push(i[0]),c=i.length-1))}if(p){this.setGeometryCoordinates_(r,n);const e=[];if(void 0!==l&amp;&amp;(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==h&amp;&amp;(this.rBush_.remove(h),e.push(h.segment[1])),void 0!==l&amp;&amp;void 0!==h){const t={depth:u.depth,feature:u.feature,geometry:u.geometry,index:c,segment:e};this.rBush_.insert(sN(t.segment),t)}this.updateSegmentIndices_(r,a,u.depth,-1),this.vertexFeature_&amp;&amp;(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(s){s.geometry===t&amp;&amp;(void 0===i||void 0===s.depth||vz(s.depth,i))&amp;&amp;s.index&gt;e&amp;&amp;(s.index+=n)})}};class Bot extends q4{constructor(t,e,i){super(),void 0!==i&amp;&amp;void 0===e?this.setFlatCoordinates(i,t):this.setCenterAndRadius(t,e=e||0,i)}clone(){const t=new Bot(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,r=t-s[0],o=e-s[1],a=r*r+o*o;if(a&lt;n){if(0===a)for(let t=0;t&lt;this.stride;++t)i[t]=s[t];else{const t=this.getRadius()/Math.sqrt(a);i[0]=s[0]+t*r,i[1]=s[1]+t*o;for(let e=2;e&lt;this.stride;++e)i[e]=s[e]}return i.length=this.stride,a}return n}containsXY(t,e){const i=this.flatCoordinates,n=t-i[0],s=e-i[1];return n*n+s*s&lt;=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return dN(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return&quot;Circle&quot;}intersectsExtent(t){if(RN(t,this.getExtent())){const e=this.getCenter();return t[0]&lt;=e[0]&amp;&amp;t[2]&gt;=e[0]||t[1]&lt;=e[1]&amp;&amp;t[3]&gt;=e[1]||yN(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let s=1;s&lt;e;++s)n[e+s]=t[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=Q4(n,0,t);n[s++]=n[0]+e;for(let r=1,o=this.stride;r&lt;o;++r)n[s++]=n[r];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(x4(i,0,i.length,n,t,e,i)),this.changed()}translate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(w4(i,0,i.length,n,t,e,i)),this.changed()}}var zot=Bot;class Not extends pz{constructor(t,e){super(t),this.feature=e}}function Vot(t,e){return eV(t[0],t[1],e[0],e[1])}function $ot(t,e){const i=t.length;return e&lt;0?t[e+i]:e&gt;=i?t[e-i]:t[e]}function Uot(t,e,i){let n,s;e&lt;i?(n=e,s=i):(n=i,s=e);const r=Math.ceil(n),o=Math.floor(s);if(r&gt;o)return Vot(Yot(t,n),Yot(t,s));let a=0;n&lt;r&amp;&amp;(a+=Vot(Yot(t,n),$ot(t,r))),o&lt;s&amp;&amp;(a+=Vot($ot(t,o),Yot(t,s)));for(let l=r;l&lt;o-1;++l)a+=Vot($ot(t,l),$ot(t,l+1));return a}function jot(t,e,i){if(e instanceof d6)Got(t,e.getCoordinates(),!1,i);else if(e instanceof f6){const n=e.getCoordinates();for(let e=0,s=n.length;e&lt;s;++e)Got(t,n[e],!1,i)}else if(e instanceof I6){const n=e.getCoordinates();for(let e=0,s=n.length;e&lt;s;++e)Got(t,n[e],!0,i)}else if(e instanceof R6){const n=e.getCoordinates();for(let e=0,s=n.length;e&lt;s;++e){const s=n[e];for(let e=0,n=s.length;e&lt;n;++e)Got(t,s[e],!0,i)}}else if(e instanceof M4){const n=e.getGeometries();for(let e=0;e&lt;n.length;++e)jot(t,n[e],i)}}const Hot={index:-1,endIndex:NaN};function Got(t,e,i,n){const s=t[0],r=t[1];for(let o=0,a=e.length-1;o&lt;a;++o){const t=Wot(s,r,e[o],e[o+1]);if(0===t.squaredDistance){const s=o+t.along;return void n.push({coordinates:e,ring:i,startIndex:s,endIndex:s})}}}const qot={along:0,squaredDistance:0};function Wot(t,e,i,n){const s=i[0],r=i[1],o=n[0]-s,a=n[1]-r;let l=0,c=s,h=r;return(0!==o||0!==a)&amp;&amp;(l=JN(((t-s)*o+(e-r)*a)/(o*o+a*a),0,1),c+=o*l,h+=a*l),qot.along=l,qot.squaredDistance=oV(eV(t,e,c,h),10),qot}function Yot(t,e){const i=t.length;let n=Math.floor(e);const s=e-n;n&gt;=i?n-=i:n&lt;0&amp;&amp;(n+=i);let r=n+1;r&gt;=i&amp;&amp;(r-=i);const o=t[n],a=o[0],l=o[1],c=t[r];return[a+(c[0]-a)*s,l+(c[1]-l)*s]}function Zot(){const t=g8();return function(e,i){return t[e.getGeometry().getType()]}}var Kot=class extends ast{constructor(t){const e=t;e.stopDown||(e.stopDown=bz),super(e),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case&quot;Point&quot;:case&quot;MultiPoint&quot;:return&quot;Point&quot;;case&quot;LineString&quot;:case&quot;MultiLineString&quot;:return&quot;LineString&quot;;case&quot;Polygon&quot;:case&quot;MultiPolygon&quot;:return&quot;Polygon&quot;;case&quot;Circle&quot;:return&quot;Circle&quot;;default:throw new Error(&quot;Invalid type: &quot;+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:&quot;Polygon&quot;===this.mode_?3:2,this.maxPoints_=&quot;Circle&quot;===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:_z,this.geometryLayout_=t.geometryLayout?t.geometryLayout:&quot;XY&quot;;let i=t.geometryFunction;if(!i){const t=this.mode_;if(&quot;Circle&quot;===t)i=function(t,e,i){const n=e||new zot([NaN,NaN]),s=VV(t[0]),r=pV(s,VV(t[t.length-1]));n.setCenterAndRadius(s,Math.sqrt(r),this.geometryLayout_);const o=zV();return o&amp;&amp;n.transform(i,o),n};else{let e;&quot;Point&quot;===t?e=g6:&quot;LineString&quot;===t?e=d6:&quot;Polygon&quot;===t&amp;&amp;(e=I6),i=function(i,n,s){return n?n.setCoordinates(&quot;Polygon&quot;===t?i[0].length?[i[0].concat([i[0][0]])]:[]:i,this.geometryLayout_):n=new e(i,this.geometryLayout_),n}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Cot({source:new Mot({useSpatialIndex:!1,wrapX:!!t.wrapX&amp;&amp;t.wrapX}),style:t.style?t.style:Zot(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:fst,this.freehandCondition_=t.freehand?ust:t.freehandCondition?t.freehandCondition:gst,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(&quot;active&quot;,this.updateState_)}setTrace(t){let e;e=t?!0===t?ust:t:pst,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){&quot;contextmenu&quot;===t.originalEvent.type&amp;&amp;t.originalEvent.preventDefault(),this.freehand_=&quot;Point&quot;!==this.mode_&amp;&amp;this.freehandCondition_(t);let e=t.type===sst.POINTERMOVE,i=!0;return!this.freehand_&amp;&amp;this.lastDragTime_&amp;&amp;t.type===sst.POINTERDRAG&amp;&amp;(Date.now()-this.lastDragTime_&gt;=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&amp;&amp;void 0!==this.downTimeout_&amp;&amp;(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&amp;&amp;t.type===sst.POINTERDRAG&amp;&amp;null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&amp;&amp;t.type===sst.POINTERDOWN?i=!1:e&amp;&amp;this.getPointerCount()&lt;2?(i=t.type===sst.POINTERMOVE,i&amp;&amp;this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&amp;&amp;t.originalEvent.preventDefault()):(&quot;mouse&quot;===t.originalEvent.pointerType||t.type===sst.POINTERDRAG&amp;&amp;void 0===this.downTimeout_)&amp;&amp;this.handlePointerMove_(t)):t.type===sst.DBLCLICK&amp;&amp;(i=!1),super.handleEvent(t)&amp;&amp;i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new Qst(sst.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=sN([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(0===n.length)return;const s=function(t,e){const i=[];for(let n=0;n&lt;e.length;++n)jot(t,e[n].getGeometry(),i);return i}(t.coordinate,n);s.length&amp;&amp;(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex&lt;=t.endIndex;i===t.startIndex&lt;=e?i&amp;&amp;e&gt;t.endIndex||!i&amp;&amp;e&lt;t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&amp;&amp;e&lt;t.endIndex||!i&amp;&amp;e&gt;t.endIndex)&amp;&amp;this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t&lt;e){const n=Math.ceil(t);let s=Math.floor(e);s===e&amp;&amp;(s-=1),i=s-n+1}else{const n=Math.floor(t);let s=Math.ceil(e);s===e&amp;&amp;(s+=1),i=n-s+1}i&gt;0&amp;&amp;this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e&lt;i){const s=Math.ceil(e);let r=Math.floor(i);r===i&amp;&amp;(r-=1);for(let e=s;e&lt;=r;++e)n.push($ot(t.coordinates,e))}else{const s=Math.floor(e);let r=Math.ceil(i);r===i&amp;&amp;(r+=1);for(let e=s;e&gt;=r;--e)n.push($ot(t.coordinates,e))}n.length&amp;&amp;this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active||-1===e.targetIndex&amp;&amp;fV(e.startPx,t.pixel)&lt;this.snapTolerance_)return;const i=function(t,e,i,n){const s=t[0],r=t[1];let o=1/0,a=-1,l=NaN;for(let u=0;u&lt;e.targets.length;++u){const t=e.targets[u],i=t.coordinates;let n,c=1/0;for(let e=0;e&lt;i.length-1;++e){const t=Wot(s,r,i[e],i[e+1]);t.squaredDistance&lt;c&amp;&amp;(c=t.squaredDistance,n=e+t.along)}c&lt;o&amp;&amp;(o=c,t.ring&amp;&amp;e.targetIndex===u&amp;&amp;(t.endIndex&gt;t.startIndex?n&lt;t.startIndex&amp;&amp;(n+=i.length):t.endIndex&lt;t.startIndex&amp;&amp;n&gt;t.startIndex&amp;&amp;(n-=i.length)),l=n,a=u)}const c=e.targets[a];let h=c.ring;if(e.targetIndex===a&amp;&amp;h){const t=Yot(c.coordinates,l);fV(i.getPixelFromCoordinate(t),e.startPx)&gt;n&amp;&amp;(h=!1)}if(h){const t=c.coordinates,e=t.length,i=c.startIndex,n=l;if(i&lt;n){const s=Uot(t,i,n);Uot(t,i,n-e)&lt;s&amp;&amp;(l-=e)}else{const s=Uot(t,i,n);Uot(t,i,n+e)&lt;s&amp;&amp;(l+=e)}}return Hot.index=a,Hot.endIndex=l,Hot}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[i.index];this.addTracedCoordinates_(t,t.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(e.targets[e.targetIndex],i.endIndex);e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const s=Yot(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&amp;&amp;(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&amp;&amp;this.startDrawing_(t.coordinate),!n&amp;&amp;this.freehand_?this.finishDrawing():!this.freehand_&amp;&amp;(!n||&quot;Point&quot;===this.mode_)&amp;&amp;(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&amp;&amp;this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&amp;&amp;this.abortDrawing()}return!e&amp;&amp;this.stopClick_&amp;&amp;t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&amp;&amp;(!this.freehand_&amp;&amp;this.shouldHandle_||this.freehand_&amp;&amp;!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],s=e[1]-i[1],r=n*n+s*s;if(this.shouldHandle_=this.freehand_?r&gt;this.squaredClickTolerance_:r&lt;=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const r=this.mode_;if(&quot;Point&quot;===r)i=!0;else if(&quot;Circle&quot;===r)i=2===this.sketchCoords_.length;else if(&quot;LineString&quot;===r)n=!e&amp;&amp;this.sketchCoords_.length&gt;this.minPoints_;else if(&quot;Polygon&quot;===r){const t=this.sketchCoords_;n=t[0].length&gt;this.minPoints_,s=[t[0][0],t[0][t[0].length-2]],s=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(n){const e=this.getMap();for(let n=0,r=s.length;n&lt;r;n++){const r=s[n],o=e.getPixelFromCoordinate(r),a=t[0]-o[0],l=t[1]-o[1],c=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(a*a+l*l)&lt;=c,i){this.finishCoordinate_=r;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new l4(new g6(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new l4);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new d6(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=G4(this.geometryLayout_);for(;t.length&lt;i;)t.push(0);this.finishCoordinate_=t,&quot;Point&quot;===this.mode_?this.sketchCoords_=t.slice():&quot;Polygon&quot;===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&amp;&amp;(this.sketchLine_=new l4(new d6(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new l4,this.geometryName_&amp;&amp;this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Not(&quot;drawstart&quot;,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),s=G4(this.geometryLayout_);let r,o;for(;t.length&lt;s;)t.push(0);&quot;Point&quot;===this.mode_?o=this.sketchCoords_:&quot;Polygon&quot;===this.mode_?(r=this.sketchCoords_[0],o=r[r.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&amp;&amp;(t=this.finishCoordinate_.slice())):(r=this.sketchCoords_,o=r[r.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&amp;&amp;this.sketchPoint_.getGeometry().setCoordinates(t),&quot;Polygon&quot;===i.getType()&amp;&amp;&quot;Polygon&quot;!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&amp;&amp;this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const r=this.mode_;&quot;LineString&quot;===r||&quot;Circle&quot;===r?(this.finishCoordinate_=t.slice(),s=this.sketchCoords_,s.length&gt;=this.maxPoints_&amp;&amp;(this.freehand_?s.pop():n=!0),s.push(t.slice()),this.geometryFunction_(s,e,i)):&quot;Polygon&quot;===r&amp;&amp;(s=this.sketchCoords_[0],s.length&gt;=this.maxPoints_&amp;&amp;(this.freehand_?s.pop():n=!0),s.push(t.slice()),n&amp;&amp;(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n&amp;&amp;this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s&lt;t;++s){let t;if(&quot;LineString&quot;===n||&quot;Circle&quot;===n){if(t=this.sketchCoords_,t.splice(-2,1),t.length&gt;=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,i),&quot;Polygon&quot;===e.getType()&amp;&amp;this.sketchLine_&amp;&amp;this.createOrUpdateCustomSketchLine_(e)}else if(&quot;Polygon&quot;===n){t=this.sketchCoords_[0],t.splice(-2,1);const n=this.sketchLine_.getGeometry();if(t.length&gt;=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}n.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();&quot;LineString&quot;===this.mode_?(e.pop(),this.geometryFunction_(e,i,n)):&quot;Polygon&quot;===this.mode_&amp;&amp;(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),&quot;MultiPoint&quot;===this.type_?t.setGeometry(new v6([e])):&quot;MultiLineString&quot;===this.type_?t.setGeometry(new f6([e])):&quot;MultiPolygon&quot;===this.type_&amp;&amp;t.setGeometry(new R6([e])),this.dispatchEvent(new Not(&quot;drawend&quot;,t)),this.features_&amp;&amp;this.features_.push(t),this.source_&amp;&amp;this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&amp;&amp;this.dispatchEvent(new Not(&quot;drawabort&quot;,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&amp;&amp;this.startDrawing_(t[0]),&quot;LineString&quot;===e||&quot;Circle&quot;===e)n=this.sketchCoords_;else{if(&quot;Polygon&quot;!==e)return;n=this.sketchCoords_&amp;&amp;this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&amp;&amp;n.shift(),n.pop();for(let r=0;r&lt;t.length;r++)this.addToDrawing_(t[r]);const s=t[t.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new l4(new g6(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Not(&quot;drawstart&quot;,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&amp;&amp;t.push(this.sketchFeature_),this.sketchLine_&amp;&amp;t.push(this.sketchLine_),this.sketchPoint_&amp;&amp;t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&amp;&amp;this.abortDrawing(),this.overlay_.setMap(e?t:null)}};function Xot(t){return t.feature?t.feature:t.element?t.element:void 0}const Qot=[];var Jot=class extends ast{constructor(t){const e=t=t||{};e.handleDownEvent||(e.handleDownEvent=_z),e.stopDown||(e.stopDown=bz),super(e),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new Frt,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(t,e){e=void 0===e||e;const i=Ez(t),n=t.getGeometry();if(n){const e=this.GEOMETRY_SEGMENTERS_[n.getType()];if(e){this.indexedFeaturesExtents_[i]=n.getExtent([1/0,1/0,-1/0,-1/0]);const s=[];if(e(s,n),1===s.length)this.rBush_.insert(sN(s[0]),{feature:t,segment:s[0]});else if(s.length&gt;1){const e=s.map(t=&gt;sN(t)),i=s.map(e=&gt;({feature:t,segment:e}));this.rBush_.load(e,i)}}}e&amp;&amp;(this.featureChangeListenerKeys_[i]=Zz(t,&quot;change&quot;,this.handleFeatureChange_,this))}forEachFeatureAdd_(t){this.addFeature(t)}forEachFeatureRemove_(t){this.removeFeature(t)}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&amp;&amp;(t=this.source_.getFeatures()),t}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e&amp;&amp;(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),super.handleEvent(t)}handleFeatureAdd_(t){const e=Xot(t);this.addFeature(e)}handleFeatureRemove_(t){const e=Xot(t);this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=Ez(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);return e.length&amp;&amp;(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,e){const i=void 0===e||e,n=Ez(t),s=this.indexedFeaturesExtents_[n];if(s){const e=this.rBush_,i=[];e.forEachInExtent(s,function(e){t===e.feature&amp;&amp;i.push(e)});for(let t=i.length-1;t&gt;=0;--t)e.remove(i[t])}i&amp;&amp;(Xz(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(t){const e=this.getMap(),i=this.featuresListenerKeys_,n=this.getFeatures_();e&amp;&amp;(i.forEach(Xz),i.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),super.setMap(t),t&amp;&amp;(this.features_?i.push(Zz(this.features_,&quot;add&quot;,this.handleFeatureAdd_,this),Zz(this.features_,&quot;remove&quot;,this.handleFeatureRemove_,this)):this.source_&amp;&amp;i.push(Zz(this.source_,&quot;addfeature&quot;,this.handleFeatureAdd_,this),Zz(this.source_,&quot;removefeature&quot;,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))}snapTo(t,e,i){const n=sN([i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),s=this.rBush_.getInExtent(n),r=s.length;if(0===r)return null;const o=i.getView().getProjection(),a=VV(e);let l,c=1/0;const h=this.pixelTolerance_*this.pixelTolerance_,u=()=&gt;{if(l){const e=i.getPixelFromCoordinate(l);if(pV(t,e)&lt;=h)return{vertex:l,vertexPixel:[Math.round(e[0]),Math.round(e[1])]}}return null};if(this.vertex_){for(let e=0;e&lt;r;++e){const t=s[e];&quot;Circle&quot;!==t.feature.getGeometry().getType()&amp;&amp;t.segment.forEach(t=&gt;{const e=VV(t),i=pV(a,e);i&lt;c&amp;&amp;(l=t,c=i)})}const t=u();if(t)return t}if(this.edge_){for(let e=0;e&lt;r;++e){let t=null;const i=s[e];if(&quot;Circle&quot;===i.feature.getGeometry().getType()){let e=i.feature.getGeometry();const n=zV();n&amp;&amp;(e=e.clone().transform(n,o)),t=NV(cV(a,e))}else{const[e,n]=i.segment;n&amp;&amp;(Qot[0]=VV(e),Qot[1]=VV(n),t=hV(a,Qot))}if(t){const e=pV(a,t);e&lt;c&amp;&amp;(l=t,c=e)}}const t=u();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}segmentCircleGeometry_(t,e){const i=this.getMap().getView().getProjection();let n=e;const s=zV();s&amp;&amp;(n=n.clone().transform(s,i));const r=O6(n);s&amp;&amp;r.transform(i,s);const o=r.getCoordinates()[0];for(let a=0,l=o.length-1;a&lt;l;++a)t.push(o.slice(a,a+2))}segmentGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let n=0;n&lt;i.length;++n){const e=this.GEOMETRY_SEGMENTERS_[i[n].getType()];e&amp;&amp;e(t,i[n])}}segmentLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length-1;n&lt;s;++n)t.push(i.slice(n,n+2))}segmentMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const e=i[n];for(let i=0,n=e.length-1;i&lt;n;++i)t.push(e.slice(i,i+2))}}segmentMultiPointGeometry_(t,e){e.getCoordinates().forEach(e=&gt;{t.push([e])})}segmentMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const e=i[n];for(let i=0,n=e.length;i&lt;n;++i){const n=e[i];for(let e=0,i=n.length-1;e&lt;i;++e)t.push(n.slice(e,e+2))}}}segmentPointGeometry_(t,e){t.push([e.getCoordinates()])}segmentPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n&lt;s;++n){const e=i[n];for(let i=0,n=e.length-1;i&lt;n;++i)t.push(e.slice(i,i+2))}}};let tat=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.ngZone=t,this.annotationsService=e,this.interactionsService=i,this.mapService=n,this.mapStateService=s,this.tooltipsService=r,this.modifyCollection=new est,this.updatingGeomFromLayer=!1}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z80}),this.layer.selectable=!0,this.map.addLayer(this.layer),this.subscriptions.push(this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.layer.selectable=t}),this.annotationsService.annotations$.pipe(M(t=&gt;t.filter(t=&gt;t.visible))).subscribe(t=&gt;{this.source.clear(!0),this.source.addFeatures(t.map(t=&gt;new vtt(t)))}),QT([this.annotationsService.editedAnnotation$.pipe(M(t=&gt;!!t),Mf()),this.annotationsService.editedAnnotationGeomType$]).pipe(df(16)).subscribe(([t,e])=&gt;{this.ngZone.runOutsideAngular(()=&gt;{this.removeInteractions(),t&amp;&amp;this.createInteractions(e)})}),this.mapStateService.showAnnotationsLayer$.subscribe(t=&gt;{this.layer.setVisible(t)})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})})),this.subscriptions.push(this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}createInteractions(t){const e=this.annotationsService.editedAnnotation$.value;let i=this.source.forEachFeature(t=&gt;{if(t.annotation.id===e.id)return t});i||(i=new vtt(e),this.source.addFeature(i)),i.setEditingStyle(),this.editedFeature=i,this.modifyCollection.clear(),this.modifyCollection.push(i),this.modifyInteraction=new Lot({features:this.modifyCollection,style:ptt,condition:_st}),this.map.addInteraction(this.modifyInteraction);const n=new est;this.drawInteraction=new Kot({type:t,features:n,style:ptt,condition:_st}),this.map.addInteraction(this.drawInteraction),this.snapInteraction=new Jot({features:this.modifyCollection,pixelTolerance:20}),this.map.addInteraction(this.snapInteraction),this.drawInteraction.on(&quot;drawstart&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;annotation: drawstart&quot;}),this.modifyInteraction.setActive(!1),this.editedFeature.setGeometry(t.feature.getGeometry()),this.editedFeature.setEditingStyle(),this.updateEditedAnnotationGeometry(null)}),this.drawInteraction.on(&quot;drawend&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;annotation: drawend&quot;}),this.modifyInteraction.setActive(!0),this.updateEditedAnnotationGeometry(t.feature)}),this.drawInteraction.on(&quot;drawabort&quot;,t=&gt;{this.modifyInteraction.setActive(!0)}),this.modifyInteraction.on(&quot;modifyend&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;annotation: modifyend&quot;}),this.updateEditedAnnotationGeometry(t.features.pop())}),this.annotationsService.editedAnnotation$.pipe(Sf(1),Xg(t=&gt;!!t),M(t=&gt;t.color),Mf()).subscribe(t=&gt;{this.editedFeature.updateColor(t)}),this.annotationsService.editedAnnotation$.pipe(Sf(1),Xg(t=&gt;!!t),M(t=&gt;t.name),Mf()).subscribe(t=&gt;{this.editedFeature.updateName(t)}),this.annotationsService.editedAnnotation$.pipe(Sf(1),Xg(t=&gt;!!t),M(t=&gt;t.geom),Mf(),gf(()=&gt;!this.updatingGeomFromLayer)).subscribe(t=&gt;{this.editedFeature.setGeometry(ctt.readGeometry(t)),this.editedFeature.setEditingStyle()})}updateEditedAnnotationGeometry(t){this.updatingGeomFromLayer=!0,this.annotationsService.updateEditedAnnotationGeom(t?ctt.writeGeometryObject(t.getGeometry()):null),this.updatingGeomFromLayer=!1}removeInteractions(){this.editedFeature&amp;&amp;(this.editedFeature=null),this.drawInteraction&amp;&amp;this.map.removeInteraction(this.drawInteraction),this.modifyInteraction&amp;&amp;this.map.removeInteraction(this.modifyInteraction),this.snapInteraction&amp;&amp;this.map.removeInteraction(this.snapInteraction)}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.interactionsService.clickOnEntity(OH.Annotation,t.annotation),!0),{layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){this.layer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,e=&gt;{const[i,n]=DV(t.coordinate);return e.annotation.lon=i,e.annotation.lat=n,this.tooltipsService.hoverEntity(OH.Annotation,e.annotation),!0},{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||this.tooltipsService.hoverEntity(OH.Annotation,null))}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(PH),Da(gW),Da(kj),Da(vq),Da(mW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-annotations-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();var eat=class extends Ust{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,s=n.resolution,r=this.getLayer().getSource(),o=t.viewHints;let a=t.extent;if(void 0!==e.extent&amp;&amp;(a=IN(a,UV(e.extent))),!o[0]&amp;&amp;!o[1]&amp;&amp;!FN(a))if(r){const t=r.getImage(a,s,i,n.projection);t&amp;&amp;(this.loadImage(t)?this.image_=t:4===t.getState()&amp;&amp;(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=m4(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&amp;&amp;!lN(s,n))return null;const r=this.image_.getExtent(),o=this.image_.getImage(),a=PN(r),l=Math.floor(o.width*((n[0]-r[0])/a));if(l&lt;0||l&gt;=o.width)return null;const c=TN(r),h=Math.floor(o.height*((r[3]-n[1])/c));return h&lt;0||h&gt;=o.height?null:this.getImageData(o,l,h)}renderFrame(t,e){const i=this.image_,n=i.getExtent(),s=i.getResolution(),r=i.getPixelRatio(),o=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,c=l.center,h=a*s/(l.resolution*r),u=t.extent,d=l.resolution,p=l.rotation,f=Math.round(PN(u)/d*a),m=Math.round(TN(u)/d*a);A4(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,p,-f/2,-m/2),v4(this.inversePixelTransform,this.pixelTransform);const g=b4(this.pixelTransform);this.useContainer(e,g,this.getBackground(t));const A=this.context,v=A.canvas;v.width!=f||v.height!=m?(v.width=f,v.height=m):this.containerReused||A.clearRect(0,0,f,m);let _=!1,b=!0;if(o.extent){const e=UV(o.extent);b=RN(e,t.extent),_=b&amp;&amp;!cN(e,t.extent),_&amp;&amp;this.clipUnrotated(A,t,e)}const y=i.getImage(),x=A4(this.tempTransform,f/2,m/2,h,h,0,r*(n[0]-c[0])/s,r*(c[1]-n[3])/s);this.renderedResolution=s*a/r;const w=y.width*x[0],C=y.height*x[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,t),b&amp;&amp;w&gt;=.5&amp;&amp;C&gt;=.5){const t=x[4],e=x[5],i=o.opacity;let n;1!==i&amp;&amp;(n=A.globalAlpha,A.globalAlpha=i),A.drawImage(y,0,0,+y.width,+y.height,t,e,w,C),1!==i&amp;&amp;(A.globalAlpha=n)}return this.postRender(A,t),_&amp;&amp;A.restore(),A.imageSmoothingEnabled=!0,g!==v.style.transform&amp;&amp;(v.style.transform=g),this.container}},iat=class extends Cz{constructor(t,e,i,n){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n}changed(){this.dispatchEvent(&quot;change&quot;)}getExtent(){return this.extent}getImage(){return Sz()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){Sz()}},nat=class extends iat{constructor(t,e,i,n,s){super(t,e,i,void 0!==s?0:2),this.loader_=void 0!==s?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=3):this.state=2,this.changed()}load(){0==this.state&amp;&amp;(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}},sat=class extends eat{constructor(t){super(t),this.vectorRenderer_=new wot(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return new Promise(t=&gt;t([]));const e=m4(this.coordinateToVectorPixelTransform_,m4(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,i=t.viewState,n=i.resolution,s=t.viewHints,r=this.vectorRenderer_;let o=t.extent;1!==this.layerImageRatio_&amp;&amp;(o=o.slice(0),function(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}(o,this.layerImageRatio_));const a=PN(o)/n,l=TN(o)/n;if(!s[0]&amp;&amp;!s[1]&amp;&amp;!FN(o)){r.useContainer(null,null);const s=r.context,c=t.layerStatesArray[t.layerIndex];s.globalAlpha=c.opacity;const h=Object.assign({},c,{opacity:1}),u=Object.assign({},t,{declutterTree:new Rrt(9),extent:o,size:[a,l],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let d=!0;const p=new nat(o,n,e,s.canvas,function(t){r.prepareFrame(u)&amp;&amp;r.replayGroupChanged&amp;&amp;(r.clipping=!1,r.renderFrame(u,null)&amp;&amp;(r.renderDeclutter(u),d=!1),t())});p.addEventListener(&quot;change&quot;,(function(){if(2!==p.getState())return;this.image_=d?null:p;const t=p.getResolution(),n=p.getPixelRatio(),s=t*e/n;this.renderedResolution=s,this.coordinateToVectorPixelTransform_=A4(this.coordinateToVectorPixelTransform_,a/2,l/2,1/s,-1/s,0,-i.center[0],-i.center[1])}).bind(this)),p.load()}return this.image_&amp;&amp;(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,i,n,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,n,s):super.forEachFeatureAtCoordinate(t,e,i,n,s)}},rat=class extends $rt{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new sat(this)}};const oat=[[8.384360674740835,87.82361750161175],[145.5581976913369,87.3646953231962],[-325.5581976913369,87.82361750161175],[-215.5581976913369,87.82361750161175],[-161.8917180108592,84.22628942426208],[-125.29445893479551,82.48154130920918],[-90.38109747487815,82.85349004122665],[-51.70487751530814,84.93555635380527],[8.384360674740835,87.82361750161175]],aat=[[-214.4418023086631,87.3646953231962],[-163.45686807900947,76.14556732608256],[-131.70883908792965,69.37134141076518],[-100.821870205822,67.53592431503803],[-66.90449925088507,72.20470505499345],[-34.75841798028466,81.27137179020501],[-214.4418023086631,87.3646953231962]];function lat(t){let e=mj(t,!0);return e=&quot;81033ffffffffff&quot;===t?oat:&quot;8003fffffffffff&quot;===t?aat:cat(e),new I6([e.map(t=&gt;IV(t))])}function cat(t){const e=t[0][0],i=t[0][1];return t.map(([t,n])=&gt;(Math.abs(t-e)&gt;180&amp;&amp;(e&gt;0?t+=360:t-=360),Math.abs(n-i)&gt;90&amp;&amp;(i&gt;0?n+=180:n-=180),[t,n]))}function hat(t){const e=cat(xj(t,!0)),i=_j(t),[n]=PU([fj(i).reverse()],e[0]);3===e.length&amp;&amp;e.splice(1,1);let s=e[0],r=e[1];return s=uat(s[0],s[1],n[0],n[1],.15),r=uat(r[0],r[1],n[0],n[1],.15),e.push(r),e.push(s),e}function uat(t,e,i,n,s){return[t+(i-t)*s,e+(n-e)*s]}function dat(t){if(t.length&lt;2)return!1;for(let e=0;e&lt;t.length;e++)for(let i=e+1;i&lt;t.length;i++){const n=t[i];if(t[e].some(t=&gt;n.some(e=&gt;LU(t,e))))return[e,i]}return!1}class pat extends l4{constructor(t){super(),this.h3index=t,super.setGeometry(lat(t))}static New(t){return new pat(t)}}new v8({stroke:new L6({color:&quot;#cc0000&quot;,width:1}),fill:new h4({color:&quot;#ff00001a&quot;})});const fat=new v8({stroke:new L6({color:&quot;#ff0000&quot;,width:1}),fill:new h4({color:&quot;#ff00004a&quot;})}),mat=[&quot;#F1C40F&quot;,&quot;#27AE60&quot;,&quot;#9B59B6&quot;,&quot;#3498DB&quot;,&quot;#E74C3C&quot;,&quot;#1ABC9C&quot;,&quot;#E67E22&quot;,&quot;#16A085&quot;,&quot;#C0392B&quot;,&quot;#8E44AD&quot;,&quot;#2980B9&quot;,&quot;#F39C12&quot;,&quot;#2ECC71&quot;,&quot;#D35400&quot;],gat={1:1,2:1,3:1,4:2,5:3,6:3,7:4,8:5,9:5,10:6,11:7,12:7,13:8,14:8,15:9,16:9,17:10,18:11,19:12,20:12,21:12},Aat={1:0,2:0,3:0,4:1,5:2,6:2,7:3,8:4,9:4,10:5,11:6,12:7,13:7,14:8,15:9,16:9,17:10,18:10,19:10,20:10,21:10},vat=mat.map(t=&gt;new v8({stroke:new L6({color:t,width:1}),fill:new h4({color:&quot;rgba(0, 0, 255, 0)&quot;})}));let _at=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s){super(),this.configService=t,this.drawingService=e,this.mapConfigService=i,this.mapService=n,this.mapStateService=s}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new rat({source:this.source,zIndex:vrt.z20}),this.map.addLayer(this.layer),this.subscriptions.push(this.mapStateService.selectableHexagons$.subscribe(t=&gt;{this.layer.selectable=t,!t&amp;&amp;this.hoveredHexagonFeature&amp;&amp;(this.hoveredHexagonFeature.setStyle(vat[this.hexagonsResolution()]),this.hoveredHexagonFeature=null)}),this.mapStateService.showHexagonsLayer$.subscribe(t=&gt;{this.layer.setVisible(t)}),QT([this.mapStateService.showHexagonsLayer$,this.mapService.view$]).pipe(Sf(1),gf(([t,e])=&gt;t&amp;&amp;!!e),df(200)).subscribe(([t,e])=&gt;this.refreshFeatures(e)),this.mapService.pointerMove$.pipe(gf(()=&gt;this.layer.selectable)).subscribe(t=&gt;{this.handleMoveEvent(t)})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;this.handleClickEvent(t)))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}refreshFeatures(t){this.source.clear(!0);let e=this.hexagonsResolution();const i=SU.fromOLExtent(t.extent).scale(1.2);let n=this.generateFeatures(i,e);n.forEach(t=&gt;{t.setStyle(vat[e])}),this.source.addFeatures(n),this.mapConfigService.debugH3Trace$.value&amp;&amp;(e-=1,e&gt;=1&amp;&amp;(n=this.generateFeatures(i,e),n.forEach(t=&gt;{t.setStyle(vat[e])}),this.source.addFeatures(n)),e-=1,e&gt;=1&amp;&amp;(n=this.generateFeatures(i,e),n.forEach(t=&gt;{t.setStyle(vat[e])}),this.source.addFeatures(n)))}generateFeatures(t,e){return t.getBoundedPolygons().map(t=&gt;Aj(t,e,!0)).flat().map(t=&gt;new pat(t))}hexagonsResolution(){return(this.mapConfigService.highHexagonsResolution$.value?gat:Aat)[Math.round(this.map.getView().getZoom())]}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.configService.devMode&amp;&amp;console.log(&quot;DEBUG: select hexagon&quot;,t.h3index),this.drawingService.selectHexagon(t.h3index),!0),{layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){const e=this.map.forEachFeatureAtPixel(t.pixel,t=&gt;t,{layerFilter:t=&gt;t===this.layer});e?e!==this.hoveredHexagonFeature&amp;&amp;(this.hoveredHexagonFeature&amp;&amp;this.hoveredHexagonFeature.setStyle(vat[this.hexagonsResolution()]),e.setStyle(fat),this.hoveredHexagonFeature=e):this.hoveredHexagonFeature&amp;&amp;(this.hoveredHexagonFeature.setStyle(vat[this.hexagonsResolution()]),this.hoveredHexagonFeature=null)}}return t.\u0275fac=function(e){return new(e||t)(Da(jU),Da(RH),Da(HU),Da(kj),Da(vq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-hexagons-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class bat extends l4{constructor(t){super(),this.edgeGroup=t,this.setGeometry(new I6(this.edgeGroup.edges.map(t=&gt;hat(t).map(t=&gt;IV(t))))),this.setStyle(new v8({stroke:new L6({color:this.edgeGroup.color,width:1}),fill:new h4({color:`${this.edgeGroup.color}9f`})}))}}const yat=new L6({color:&quot;#ff0000aa&quot;,width:4});class xat extends l4{constructor(t,e){super(),this.h3index=t,this.color=e,this.setId(t),this.setGeometry(new I6([hat(t).map(t=&gt;IV(t))])),this.resetStyle()}resetStyle(){this.setStyle(this.color?new v8({stroke:new L6({color:this.color,width:1}),fill:new h4({color:`${this.color}9f`})}):vat[function(t){return parseInt(t.charAt(2),16)}(this.h3index)])}enableHighlightedStyle(){const t=[fat,new v8({stroke:new L6({color:this.color,width:1}),fill:new h4({color:`${this.color}9f`})})],[e,i]=yj(this.h3index),n=new d6([IV(FU(fj(e))),IV(FU(fj(i)))]);n.applyTransform(t=&gt;(Object.assign(t,function(t,e){if(4!==t.length)throw new Error(`Invalid line length. Expected 4, got ${t.length}`);const i=(t[2]-t[0])/2,n=(t[3]-t[1])/2,s=t[0]+i,r=t[1]+n;return[s-e*i,r-e*n,s+e*i,r+e*n]}(t,.5)),null)),t.push(new v8({geometry:n,stroke:yat})),n.forEachSegment((e,i)=&gt;{const n=i[0]-e[0],s=i[1]-e[1],r=Math.sqrt(n*n+s*s)/8,o=Math.atan2(s,n),a=new d6([i,[i[0]-1.5*r,i[1]+r]]);a.rotate(o,i);const l=new d6([i,[i[0]-1.5*r,i[1]-r]]);l.rotate(o,i),t.push(new v8({geometry:a,stroke:yat})),t.push(new v8({geometry:l,stroke:yat}))}),this.setStyle(t)}}const wat=[&quot;#1e88e5&quot;,&quot;#5e35b1&quot;,&quot;#64b5f6&quot;,&quot;#311b92&quot;,&quot;#d1c4e9&quot;,&quot;#9575cd&quot;,&quot;#1a237e&quot;,&quot;#1e88e5&quot;,&quot;#bbdefb&quot;,&quot;#3949ab&quot;,&quot;#7986cb&quot;],Cat=wat.map(t=&gt;SH(t)),Sat=[&quot;#900C3F&quot;,&quot;#FF5733&quot;,&quot;#3D3D6B&quot;,&quot;#FFC300&quot;,&quot;#511849&quot;,&quot;#FF8D1A&quot;,&quot;#2A7B9B&quot;,&quot;#C70039&quot;,&quot;#44be77&quot;,&quot;#c4b320&quot;,&quot;#00BAAD&quot;,&quot;#7a9b38&quot;],kat=Sat.concat(Sat,Sat,Sat,Sat),Eat=Array(kat.length).fill(!0);function Mat(t){const e=kat.findIndex(e=&gt;e===t);Eat[e]=!0}class Tat{constructor(t,e){this.edges=t,this.color=null!=e?e:function(){const t=Eat.findIndex(t=&gt;t);return Eat[t]=!1,kat[t]}()}contains(t){return this.edges.includes(t)}remove(t){const e=this.edges.indexOf(t);if(-1!==e)return this.edges.splice(e,1);throw new Error(&quot;group cannot remove missing index&quot;+t)}shouldSplit(){const t=[new Tat([this.edges[0]],this.color)];if(this.edges.slice(1).forEach(e=&gt;{t.some(t=&gt;t.addIfLinked(e))||t.push(new Tat([e]))}),t.length&gt;=2){let e=!1;for(;!e;){const i=dat(t.map(t=&gt;t.edges.map(t=&gt;xj(t,!0)).flat()));i&amp;&amp;(t[i[0]].merge(t[i[1]]),Mat(t.splice(i[1],1)[0].color)),e=!i}}return t.length&gt;1&amp;&amp;t}addIfLinked(t){const e=xj(t,!0),i=this.edges.map(t=&gt;xj(t,!0)).flat().some(t=&gt;e.some(e=&gt;LU(e,t)));return i&amp;&amp;this.edges.push(t),i}merge(t){this.edges.push(...t.edges)}}let Iat=(()=&gt;{class t{constructor(t){this.workerService=t,this.selectedEdgeGroups$=new Qp([]),this.searchQuery$=new Qp(null),this.searchResult$=new Qp(null)}toggleEdge(t){const e=this.selectedEdgeGroups$.value,i=e.findIndex(e=&gt;e.contains(t));let n=null;if(-1!==i){const s=e[i];if(s.remove(t),0===s.edges.length)n=e.splice(i,1)[0];else if(s.edges.length&gt;=2){const t=s.shouldSplit();t&amp;&amp;e.splice(i,1,...t)}}else if(e.some(e=&gt;e.addIfLinked(t))){const t=dat(e.map(t=&gt;t.edges.map(t=&gt;xj(t,!0)).flat()));t&amp;&amp;(e[t[0]].merge(e[t[1]]),n=e.splice(t[1],1)[0])}else e.push(new Tat([t]));n&amp;&amp;Mat(n.color),this.selectedEdgeGroups$.next(e)}resetEdgeGroups(){this.selectedEdgeGroups$.next([])}search(t){return jp(this,void 0,void 0,function*(){this.searchResult$.next(null),this.searchResult$.next({query:lU(t),results:yield this.workerService.ships.searchForShipsPassages(this.selectedEdgeGroups$.value,eq(t.interval.start),eq(t.interval.end)+XG)})})}}return t.\u0275fac=function(e){return new(e||t)(Mn(Jj))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Dat=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.configService=t,this.mapService=e,this.mapStateService=i,this.movesService=n}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.gridSource=new Mot({features:[]}),this.gridLayer=new rat({source:this.gridSource,zIndex:vrt.z80}),this.map.addLayer(this.gridLayer),this.gridLayer.selectable=!0,this.selectionSource=new Mot({features:[]}),this.selectionLayer=new rat({source:this.selectionSource,zIndex:vrt.z80}),this.map.addLayer(this.selectionLayer),this.subscriptions.push(this.movesService.selectedEdgeGroups$.subscribe(t=&gt;{this.refreshSelectedEdgeGroupsFeatures(t)}),this.mapStateService.showEdgesLayer$.subscribe(t=&gt;{this.gridLayer.setVisible(t)}),QT([this.mapStateService.showEdgesLayer$,this.mapService.view$]).pipe(Sf(1),gf(([t,e])=&gt;t&amp;&amp;!!e),df(200)).subscribe(([t,e])=&gt;this.refreshGridFeatures(e)),this.mapService.pointerMove$.pipe(gf(()=&gt;this.gridLayer.getVisible())).subscribe(t=&gt;{this.handleMoveEvent(t)})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;this.handleClickEvent(t)))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.gridLayer),this.map.removeLayer(this.selectionLayer)}refreshGridFeatures(t){this.gridSource.clear(!0);const e=SU.fromOLExtent(t.extent).scale(t.zoom&lt;=5?1.1:t.zoom&lt;=9?1.5:2);let i=this.edgesResolution();const n=[this.generateFeatures(e,i)];i-=1,i&gt;=1&amp;&amp;n.push(this.generateFeatures(e,i)),i-=1,i&gt;=1&amp;&amp;t.zoom&lt;8&amp;&amp;n.push(this.generateFeatures(e,i)),this.gridSource.addFeatures(n.flat())}refreshSelectedEdgeGroupsFeatures(t){this.selectionSource.clear(!0),this.selectionSource.addFeatures(t.map(t=&gt;new bat(t)))}generateFeatures(t,e){return t.getBoundedPolygons().map(t=&gt;Aj(t,e,!0)).flat().map(t=&gt;function(t){var e=ij(t),i=e[0],n=e[1],s=WU._calloc(6,KU);ZU.getH3UnidirectionalEdgesFromHexagon(i,n,s);var r=cj(s,6);return WU._free(s),r}(t)).flat().filter(t=&gt;{const e=vj(t),i=_j(t),n=function(t){var e=ij(t),i=e[0],n=e[1];return ZU.h3IsValid(i,n)?ZU.h3GetResolution(i,n):-1}(e),s=gj(e,n-1),r=gj(i,n-1);return 2===n||n&gt;2&amp;&amp;s===r}).map(t=&gt;new xat(t))}edgesResolution(){return Math.min(gat[Math.round(this.map.getView().getZoom())],6)}handleClickEvent(t){this.gridLayer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.configService.devMode&amp;&amp;console.log(&quot;DEBUG: select h3 edge&quot;,t.h3index),this.movesService.toggleEdge(t.h3index),!0),{layerFilter:t=&gt;t===this.gridLayer})}handleMoveEvent(t){const e=this.map.forEachFeatureAtPixel(t.pixel,t=&gt;t,{layerFilter:t=&gt;t===this.gridLayer});e?e!==this.hoveredEdgeFeature&amp;&amp;(this.hoveredEdgeFeature&amp;&amp;this.hoveredEdgeFeature.resetStyle(),e.enableHighlightedStyle(),this.hoveredEdgeFeature=e):this.hoveredEdgeFeature&amp;&amp;(this.hoveredEdgeFeature.resetStyle(),this.hoveredEdgeFeature=null)}}return t.\u0275fac=function(e){return new(e||t)(Da(jU),Da(kj),Da(vq),Da(Iat))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-edges-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class Oat extends l4{constructor(t){super({geometry:new R6(t.h3indexes.map(t=&gt;lat(t)))}),this.zone=t}}const Pat=Sat.map(t=&gt;new v8({stroke:new L6({color:t,width:1}),fill:new h4({color:`${t}1a`})})),Rat=new v8({text:new b8({font:&quot;12px Calibri,sans-serif&quot;,fill:new h4({color:&quot;#000&quot;}),stroke:new L6({color:&quot;#fff&quot;,width:3})})});let Fat=(()=&gt;{class t extends Eq{constructor(t){super(),this.zonesLayerService=t}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z40}),this.map.addLayer(this.layer),this.subscriptions.push(this.zonesLayerService.zones$.subscribe(t=&gt;{this.source.clear(!0),this.source.addFeatures(t.map((t,e)=&gt;{const i=new Oat(t);return i.setStyle(function(){return Rat.getText().setText(t.name),[Pat[e%Pat.length],Rat]}),i}))}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}}return t.\u0275fac=function(e){return new(e||t)(Da(AW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-zones-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const Lat=34962,Bat=[&quot;experimental-webgl&quot;,&quot;webgl&quot;,&quot;webkit-3d&quot;,&quot;moz-webgl&quot;];function zat(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!Fz},e);const i=Bat.length;for(let s=0;s&lt;i;++s)try{const i=t.getContext(Bat[s],e);if(i)return i}catch(n){}return null}function Nat(t){switch(t){case Lat:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}var Vat=class{constructor(t,e){this.array=null,this.type=t,nN(t===Lat||34963===t,62),this.usage=void 0!==e?e:35044}ofSize(t){this.array=new(Nat(this.type))(t)}fromArray(t){this.array=Nat(this.type).from(t)}fromArrayBuffer(t){this.array=new(Nat(this.type))(t)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}},$at=class{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();const i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||&quot;\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n&quot;),e.compileShader(i);const n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||&quot;\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n&quot;),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,&quot;a_position&quot;),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,&quot;u_screenSize&quot;),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,&quot;u_opacity&quot;),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,&quot;u_image&quot;),this.uniforms_=[],t.uniforms&amp;&amp;Object.keys(t.uniforms).forEach((function(i){this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})}).bind(this))}getGL(){return this.gl_}init(t){const e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const t=0,n=e.RGBA,s=0,r=e.RGBA,o=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,n,i[0],i[1],s,r,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(t,e,i,n){const s=this.getGL(),r=t.size;if(s.bindFramebuffer(s.FRAMEBUFFER,e?e.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!e){const e=Ez(s.canvas);if(!t.renderTargets[e]){const i=s.getContextAttributes();i&amp;&amp;i.preserveDrawingBuffer&amp;&amp;(s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),t.renderTargets[e]=!0}}s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,r[0],r[1]),s.uniform1i(this.renderTargetTextureLocation_,0),s.uniform1f(this.renderTargetOpacityLocation_,t.layerStatesArray[t.layerIndex].opacity),this.applyUniforms(t),i&amp;&amp;i(s,t),s.drawArrays(s.TRIANGLES,0,6),n&amp;&amp;n(s,t)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(t){const e=this.getGL();let i,n=1;this.uniforms_.forEach(function(s){if(i=&quot;function&quot;==typeof s.value?s.value(t):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,s.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,i.width,i.height,0,e.UNSIGNED_BYTE,new Uint8Array(i.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.uniform1i(s.location,n++);else if(Array.isArray(i))switch(i.length){case 2:return void e.uniform2f(s.location,i[0],i[1]);case 3:return void e.uniform3f(s.location,i[0],i[1],i[2]);case 4:return void e.uniform4f(s.location,i[0],i[1],i[2],i[3]);default:return}else&quot;number&quot;==typeof i&amp;&amp;e.uniform1f(s.location,i)})}};function Uat(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const jat={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},Hat={};function Gat(t){return&quot;shared/&quot;+t}let qat=0;function Wat(t){switch(t){case jat.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case jat.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case jat.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case jat.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Yat=class extends dz{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?Gat(t.canvasCacheKey):function(){const t=&quot;unique/&quot;+qat;return qat+=1,t}(),this.canvas_=function(t){let e=Hat[t];if(!e){const i=document.createElement(&quot;canvas&quot;);i.style.position=&quot;absolute&quot;,i.style.left=&quot;0&quot;,e={users:0,canvas:i},Hat[t]=e}return e.users+=1,e.canvas}(this.canvasCacheKey_),this.gl_=zat(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(&quot;webglcontextlost&quot;,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(&quot;webglcontextrestored&quot;,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],t.uniforms&amp;&amp;this.setUniforms(t.uniforms);const e=this.getGL();this.postProcessPasses_=t.postProcesses?t.postProcesses.map(function(t){return new $at({webGlContext:e,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new $at({webGlContext:e})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[];for(const e in t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}}canvasCacheKeyMatches(t){return this.canvasCacheKey_===Gat(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.getGL(),i=Ez(t);let n=this.bufferCache_[i];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=n),e.bindBuffer(t.getType(),n.webGlBuffer)}flushBufferData(t){const e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.getGL(),i=Ez(t),n=this.bufferCache_[i];n&amp;&amp;!e.isContextLost()&amp;&amp;e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener(&quot;webglcontextlost&quot;,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(&quot;webglcontextrestored&quot;,this.boundHandleWebGLContextRestored_),function(t){const e=Hat[t];if(!e||(e.users-=1,e.users&gt;0))return;const i=zat(e.canvas).getExtension(&quot;WEBGL_lose_context&quot;);i&amp;&amp;i.loseContext(),delete Hat[t]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(t,e){const i=this.getGL(),n=this.getCanvas(),s=t.size,r=t.pixelRatio;n.width=s[0]*r,n.height=s[1]*r,n.style.width=s[0]+&quot;px&quot;,n.style.height=s[1]+&quot;px&quot;;for(let o=this.postProcessPasses_.length-1;o&gt;=0;o--)this.postProcessPasses_[o].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(t,e,i){const n=this.getGL(),s=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,s[0],s[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,i?n.ZERO:n.ONE_MINUS_SRC_ALPHA)}drawElements(t,e){const i=this.getGL();this.getExtension(&quot;OES_element_index_uint&quot;),i.drawElements(i.TRIANGLES,e-t,i.UNSIGNED_INT,4*t)}finalizeDraw(t,e,i){for(let n=0,s=this.postProcessPasses_.length;n&lt;s;n++)n===s-1?this.postProcessPasses_[n].apply(t,null,e,i):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(t){const e=t.size,i=t.viewState.rotation,n=t.pixelRatio,s=d4(this.offsetScaleMatrix_);!function(t,e,i){p4(t,f4(u4,e,0,0,i,0,0))}(s,2/e[0],2/e[1]);const r=d4(this.offsetRotateMatrix_);0!==i&amp;&amp;function(t,e){const i=Math.cos(e),n=Math.sin(e);p4(t,f4(u4,i,n,-n,i,0,0))}(r,-i),this.setUniformMatrixValue(&quot;u_offsetScaleMatrix&quot;,Uat(this.tmpMat4_,s)),this.setUniformMatrixValue(&quot;u_offsetRotateMatrix&quot;,Uat(this.tmpMat4_,r)),this.setUniformFloatValue(&quot;u_time&quot;,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(&quot;u_zoom&quot;,t.viewState.zoom),this.setUniformFloatValue(&quot;u_resolution&quot;,t.viewState.resolution),this.setUniformFloatValue(&quot;u_pixelRatio&quot;,n),this.setUniformFloatVec2(&quot;u_sizePx&quot;,[e[0],e[1]])}applyUniforms(t){const e=this.getGL();let i,n=0;this.uniforms_.forEach((function(s){if(i=&quot;function&quot;==typeof s.value?s.value(t):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,s.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&amp;&amp;s.prevValue!==i&amp;&amp;(s.prevValue=i,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)),e.uniform1i(this.getUniformLocation(s.name),n++);else if(Array.isArray(i)&amp;&amp;6===i.length)this.setUniformMatrixValue(s.name,Uat(this.tmpMat4_,i));else if(Array.isArray(i)&amp;&amp;i.length&lt;=4)switch(i.length){case 2:return void e.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);case 3:return void e.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);case 4:return void e.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);default:return}else&quot;number&quot;==typeof i&amp;&amp;e.uniform1f(this.getUniformLocation(s.name),i)}).bind(this))}useProgram(t,e){this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const i=this.getGL(),n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}getProgram(t,e){const i=this.getGL(),n=this.compileShader(t,i.FRAGMENT_SHADER),s=this.compileShader(e,i.VERTEX_SHADER),r=i.createProgram();if(i.attachShader(r,n),i.attachShader(r,s),i.linkProgram(r),!i.getShaderParameter(n,i.COMPILE_STATUS)){const t=`Fragment shader compliation failed: ${i.getShaderInfoLog(n)}`;throw new Error(t)}if(i.deleteShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(t)}if(i.deleteShader(s),!i.getProgramParameter(r,i.LINK_STATUS)){const t=`GL program linking failed: ${i.getShaderInfoLog(s)}`;throw new Error(t)}return r}getUniformLocation(t){return void 0===this.uniformLocations_[t]&amp;&amp;(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]}getAttributeLocation(t){return void 0===this.attribLocations_[t]&amp;&amp;(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]}makeProjectionTransform(t,e){const i=t.size,n=t.viewState.rotation,s=t.viewState.resolution,r=t.viewState.center;return d4(e),A4(e,0,0,2/(s*i[0]),2/(s*i[1]),-n,-r[0],-r[1]),e}setUniformFloatValue(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.getGL().uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,i,n,s){const r=this.getAttributeLocation(t);r&lt;0||(this.getGL().enableVertexAttribArray(r),this.getGL().vertexAttribPointer(r,e,i,!1,n,s))}enableAttributes(t){const e=function(t){let e=0;for(let i=0;i&lt;t.length;i++){const n=t[i];e+=n.size*Wat(n.type)}return e}(t);let i=0;for(let n=0;n&lt;t.length;n++){const s=t[n];this.enableAttributeArray_(s.name,s.size,s.type||5126,e,i),i+=s.size*Wat(s.type)}}handleWebGLContextLost(){xz(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(t,e,i){const n=this.getGL();i=i||n.createTexture();const s=n.RGBA,r=n.RGBA,o=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,s,r,o,e):n.texImage2D(n.TEXTURE_2D,0,s,t[0],t[1],0,r,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i}};class Zat extends zst{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=[1,0,0,1,0,0],this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,t.addChangeListener(&quot;map&quot;,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(&quot;precompose&quot;)){const n=new Nst(&quot;precompose&quot;,void 0,e,t);i.dispatchEvent(n)}}dispatchPostComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(&quot;postcompose&quot;)){const n=new Nst(&quot;postcompose&quot;,void 0,e,t);i.dispatchEvent(n)}}reset(t){this.uniforms_=t.uniforms,this.helper&amp;&amp;this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&amp;&amp;(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,i=!0,n=-1;for(let r=0,o=t.layerStatesArray.length;r&lt;o;r++){const s=t.layerStatesArray[r].layer,o=s.getRenderer();if(!(o instanceof Zat)){i=!0;continue}const a=s.getClassName();if((i||a!==e)&amp;&amp;(n+=1,i=!1),e=a,o===this)break}const s=&quot;map/&quot;+t.mapId+&quot;/group/&quot;+n;(!this.helper||!this.helper.canvasCacheKeyMatches(s))&amp;&amp;(this.removeHelper(),this.helper=new Yat({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),e&amp;&amp;(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){A4(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new Nst(t,this.inversePixelTransform_,i,e);n.dispatchEvent(s)}}preRender(t,e){this.dispatchRenderEvent_(&quot;prerender&quot;,t,e)}postRender(t,e){this.dispatchRenderEvent_(&quot;postrender&quot;,t,e)}}var Kat=Zat;const Xat=new Uint8Array(4);function Qat(t,e){const i=256,n=255;return(e=e||[])[0]=Math.floor(t/i/i/i)/n,e[1]=Math.floor(t/i/i)%i/n,e[2]=Math.floor(t/i)%i/n,e[3]=t%i/n,e}i(9205);var Jat=class extends Kat{constructor(t,e){const i=e.uniforms||{},n=[1,0,0,1,0,0];i.u_projectionMatrix=n,super(t,{uniforms:i,postProcesses:e.postProcesses}),this.ready=!1,this.sourceRevision_=-1,this.verticesBuffer_=new Vat(Lat,35048),this.hitVerticesBuffer_=new Vat(Lat,35048),this.indicesBuffer_=new Vat(34963,35048),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.hitDetectionEnabled_=!(!e.hitFragmentShader||!e.hitVertexShader),this.hitVertexShader_=e.hitVertexShader,this.hitFragmentShader_=e.hitFragmentShader;const s=e.attributes?e.attributes.map(function(t){return{name:&quot;a_&quot;+t.name,size:1,type:jat.FLOAT}}):[];this.attributes=[{name:&quot;a_position&quot;,size:2,type:jat.FLOAT},{name:&quot;a_index&quot;,size:1,type:jat.FLOAT}].concat(s),this.hitDetectionAttributes=[{name:&quot;a_position&quot;,size:2,type:jat.FLOAT},{name:&quot;a_index&quot;,size:1,type:jat.FLOAT},{name:&quot;a_hitColor&quot;,size:4,type:jat.FLOAT},{name:&quot;a_featureUid&quot;,size:1,type:jat.FLOAT}].concat(s),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=[1/0,1/0,-1/0,-1/0],this.currentTransform_=n,this.renderTransform_=[1,0,0,1,0,0],this.invertRenderTransform_=[1,0,0,1,0,0],this.renderInstructions_=new Float32Array(0),this.hitRenderInstructions_=new Float32Array(0),this.generateBuffersRun_=0,this.worker_=function(){const t=&#39;const e=&quot;GENERATE_POLYGON_BUFFERS&quot;,t=&quot;GENERATE_POINT_BUFFERS&quot;,n=&quot;GENERATE_LINE_STRING_BUFFERS&quot;,r=&quot;undefined&quot;!=typeof navigator&amp;&amp;void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():&quot;&quot;;r.includes(&quot;firefox&quot;);r.includes(&quot;safari&quot;)&amp;&amp;!r.includes(&quot;chrom&quot;)&amp;&amp;(r.includes(&quot;version/15.4&quot;)||/cpu (os|iphone os) 15_4 like mac os x/.test(r)),r.includes(&quot;webkit&quot;)&amp;&amp;r.includes(&quot;edge&quot;),r.includes(&quot;macintosh&quot;),&quot;undefined&quot;!=typeof WorkerGlobalScope&amp;&amp;&quot;undefined&quot;!=typeof OffscreenCanvas&amp;&amp;(self,WorkerGlobalScope),function(){let e=!1;try{const t=Object.defineProperty({},&quot;passive&quot;,{get:function(){e=!0}});window.addEventListener(&quot;_&quot;,null,t),window.removeEventListener(&quot;_&quot;,null,t)}catch(e){}}();const o={1:&quot;The view center is not defined&quot;,2:&quot;The view resolution is not defined&quot;,3:&quot;The view rotation is not defined&quot;,4:&quot;`image` and `src` cannot be provided at the same time&quot;,5:&quot;`imgSize` must be set when `image` is provided&quot;,7:&quot;`format` must be set when `url` is set&quot;,8:&quot;Unknown `serverType` configured&quot;,9:&quot;`url` must be configured or set using `#setUrl()`&quot;,10:&quot;The default `geometryFunction` can only handle `Point` geometries&quot;,11:&quot;`options.featureTypes` must be an Array&quot;,12:&quot;`options.geometryName` must also be provided when `options.bbox` is set&quot;,13:&quot;Invalid corner&quot;,14:&quot;Invalid color&quot;,15:&quot;Tried to get a value for a key that does not exist in the cache&quot;,16:&quot;Tried to set a value for a key that is used already&quot;,17:&quot;`resolutions` must be sorted in descending order&quot;,18:&quot;Either `origin` or `origins` must be configured, never both&quot;,19:&quot;Number of `tileSizes` and `resolutions` must be equal&quot;,20:&quot;Number of `origins` and `resolutions` must be equal&quot;,22:&quot;Either `tileSize` or `tileSizes` must be configured, never both&quot;,24:&quot;Invalid extent or geometry provided as `geometry`&quot;,25:&quot;Cannot fit empty extent provided as `geometry`&quot;,26:&quot;Features must have an id set&quot;,27:&quot;Features must have an id set&quot;,28:\&#39;`renderMode` must be `&quot;hybrid&quot;` or `&quot;vector&quot;`\&#39;,30:&quot;The passed `feature` was already added to the source&quot;,31:&quot;Tried to enqueue an `element` that was already added to the queue&quot;,32:&quot;Transformation matrix cannot be inverted&quot;,33:&quot;Invalid units&quot;,34:&quot;Invalid geometry layout&quot;,36:&quot;Unknown SRS type&quot;,37:&quot;Unknown geometry type found&quot;,38:&quot;`styleMapValue` has an unknown type&quot;,39:&quot;Unknown geometry type&quot;,40:&quot;Expected `feature` to have a geometry&quot;,41:&quot;Expected an `ol/style/Style` or an array of `ol/style/Style.js`&quot;,42:&quot;Question unknown, the answer is 42&quot;,43:&quot;Expected `layers` to be an array or a `Collection`&quot;,47:&quot;Expected `controls` to be an array or an `ol/Collection`&quot;,48:&quot;Expected `interactions` to be an array or an `ol/Collection`&quot;,49:&quot;Expected `overlays` to be an array or an `ol/Collection`&quot;,50:&quot;`options.featureTypes` should be an Array&quot;,51:&quot;Either `url` or `tileJSON` options must be provided&quot;,52:&quot;Unknown `serverType` configured&quot;,53:&quot;Unknown `tierSizeCalculation` configured&quot;,55:&quot;The {-y} placeholder requires a tile grid with extent&quot;,56:&quot;mapBrowserEvent must originate from a pointer event&quot;,57:&quot;At least 2 conditions are required&quot;,59:&quot;Invalid command found in the PBF&quot;,60:&quot;Missing or invalid `size`&quot;,61:&quot;Cannot determine IIIF Image API version from provided image information JSON&quot;,62:&quot;A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`&quot;,64:&quot;Layer opacity must be a number&quot;,66:&quot;`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`&quot;,67:&quot;A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both&quot;,68:&quot;A VectorTile source can only be rendered if it has a projection compatible with the view projection&quot;};class i extends Error{constructor(e){const t=o[e];super(t),this.code=e,this.name=&quot;AssertionError&quot;,this.message=t}}function s(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function a(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],s=t[1],a=t[2],u=t[3],x=t[4],f=t[5];return e[0]=u/n,e[1]=-s/n,e[2]=-a/n,e[3]=o/n,e[4]=(a*f-u*x)/n,e[5]=-(o*f-s*x)/n,e}new Array(6);var u={exports:{}};function x(e,t,n){n=n||2;var r,o,i,s,a,u,x,y=t&amp;&amp;t.length,d=y?t[0]*n:e.length,h=f(e,0,d,n,!0),v=[];if(!h||h.next===h.prev)return v;if(y&amp;&amp;(h=function(e,t,n,r){var o,i,s,a=[];for(o=0,i=t.length;o&lt;i;o++)(s=f(e,t[o]*r,o&lt;i-1?t[o+1]*r:e.length,r,!1))===s.next&amp;&amp;(s.steiner=!0),a.push(w(s));for(a.sort(p),o=0;o&lt;a.length;o++)n=l(n=g(a[o],n),n.next);return n}(e,t,h,n)),e.length&gt;80*n){r=i=e[0],o=s=e[1];for(var b=n;b&lt;d;b+=n)(a=e[b])&lt;r&amp;&amp;(r=a),(u=e[b+1])&lt;o&amp;&amp;(o=u),a&gt;i&amp;&amp;(i=a),u&gt;s&amp;&amp;(s=u);x=0!==(x=Math.max(i-r,s-o))?1/x:0}return c(h,v,n,r,o,x),v}function f(e,t,n,r,o){var i,s;if(o===B(e,t,n,r)&gt;0)for(i=t;i&lt;n;i+=r)s=U(i,e[i],e[i+1],s);else for(i=n-r;i&gt;=t;i-=r)s=U(i,e[i],e[i+1],s);return s&amp;&amp;M(s,s.next)&amp;&amp;(z(s),s=s.next),s}function l(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!M(r,r.next)&amp;&amp;0!==Z(r.prev,r,r.next))r=r.next;else{if(z(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,s){if(e){!s&amp;&amp;i&amp;&amp;function(e,t,n,r){var o=e;do{null===o.z&amp;&amp;(o.z=m(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,s,a,u,x=1;do{for(n=e,e=null,i=null,s=0;n;){for(s++,r=n,a=0,t=0;t&lt;x&amp;&amp;(a++,r=r.nextZ);t++);for(u=x;a&gt;0||u&gt;0&amp;&amp;r;)0!==a&amp;&amp;(0===u||!r||n.z&lt;=r.z)?(o=n,n=n.nextZ,a--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,x*=2}while(s&gt;1)}(o)}(e,r,o,i);for(var a,u,x=e;e.prev!==e.next;)if(a=e.prev,u=e.next,i?d(e,r,o,i):y(e))t.push(a.i/n),t.push(e.i/n),t.push(u.i/n),z(e),e=u.next,x=u.next;else if((e=u)===x){s?1===s?c(e=h(l(e),t,n),t,n,r,o,i,2):2===s&amp;&amp;v(e,t,n,r,o,i):c(l(e),t,n,r,o,i,1);break}}}function y(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)&gt;=0)return!1;for(var o=e.next.next;o!==e.prev;){if(A(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&amp;&amp;Z(o.prev,o,o.next)&gt;=0)return!1;o=o.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,s=e.next;if(Z(o,i,s)&gt;=0)return!1;for(var a=o.x&lt;i.x?o.x&lt;s.x?o.x:s.x:i.x&lt;s.x?i.x:s.x,u=o.y&lt;i.y?o.y&lt;s.y?o.y:s.y:i.y&lt;s.y?i.y:s.y,x=o.x&gt;i.x?o.x&gt;s.x?o.x:s.x:i.x&gt;s.x?i.x:s.x,f=o.y&gt;i.y?o.y&gt;s.y?o.y:s.y:i.y&gt;s.y?i.y:s.y,l=m(a,u,t,n,r),c=m(x,f,t,n,r),y=e.prevZ,d=e.nextZ;y&amp;&amp;y.z&gt;=l&amp;&amp;d&amp;&amp;d.z&lt;=c;){if(y!==e.prev&amp;&amp;y!==e.next&amp;&amp;A(o.x,o.y,i.x,i.y,s.x,s.y,y.x,y.y)&amp;&amp;Z(y.prev,y,y.next)&gt;=0)return!1;if(y=y.prevZ,d!==e.prev&amp;&amp;d!==e.next&amp;&amp;A(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&amp;&amp;Z(d.prev,d,d.next)&gt;=0)return!1;d=d.nextZ}for(;y&amp;&amp;y.z&gt;=l;){if(y!==e.prev&amp;&amp;y!==e.next&amp;&amp;A(o.x,o.y,i.x,i.y,s.x,s.y,y.x,y.y)&amp;&amp;Z(y.prev,y,y.next)&gt;=0)return!1;y=y.prevZ}for(;d&amp;&amp;d.z&lt;=c;){if(d!==e.prev&amp;&amp;d!==e.next&amp;&amp;A(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&amp;&amp;Z(d.prev,d,d.next)&gt;=0)return!1;d=d.nextZ}return!0}function h(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!M(o,i)&amp;&amp;F(o,r,r.next,i)&amp;&amp;k(o,i)&amp;&amp;k(i,o)&amp;&amp;(t.push(o.i/n),t.push(r.i/n),t.push(i.i/n),z(r),z(r.next),r=e=i),r=r.next}while(r!==e);return l(r)}function v(e,t,n,r,o,i){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&amp;&amp;E(s,a)){var u=S(s,a);return s=l(s,s.next),u=l(u,u.next),c(s,t,n,r,o,i),void c(u,t,n,r,o,i)}a=a.next}s=s.next}while(s!==e)}function p(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,s=-1/0;do{if(i&lt;=r.y&amp;&amp;i&gt;=r.next.y&amp;&amp;r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a&lt;=o&amp;&amp;a&gt;s){if(s=a,a===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x&lt;r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(o===s)return n;var u,x=n,f=n.x,l=n.y,c=1/0;r=n;do{o&gt;=r.x&amp;&amp;r.x&gt;=f&amp;&amp;o!==r.x&amp;&amp;A(i&lt;l?o:s,i,f,l,i&lt;l?s:o,i,r.x,r.y)&amp;&amp;(u=Math.abs(i-r.y)/(o-r.x),k(r,e)&amp;&amp;(u&lt;c||u===c&amp;&amp;(r.x&gt;n.x||r.x===n.x&amp;&amp;b(n,r)))&amp;&amp;(n=r,c=u)),r=r.next}while(r!==x);return n}(e,t);if(!n)return t;var r=S(n,e),o=l(n,n.next);return l(r,r.next),t===n?o:t}function b(e,t){return Z(e.prev,e,t.prev)&lt;0&amp;&amp;Z(t.next,e,e.next)&lt;0}function m(e,t,n,r,o){return(e=1431655765&amp;((e=858993459&amp;((e=252645135&amp;((e=16711935&amp;((e=32767*(e-n)*o)|e&lt;&lt;8))|e&lt;&lt;4))|e&lt;&lt;2))|e&lt;&lt;1))|(t=1431655765&amp;((t=858993459&amp;((t=252645135&amp;((t=16711935&amp;((t=32767*(t-r)*o)|t&lt;&lt;8))|t&lt;&lt;4))|t&lt;&lt;2))|t&lt;&lt;1))&lt;&lt;1}function w(e){var t=e,n=e;do{(t.x&lt;n.x||t.x===n.x&amp;&amp;t.y&lt;n.y)&amp;&amp;(n=t),t=t.next}while(t!==e);return n}function A(e,t,n,r,o,i,s,a){return(o-s)*(t-a)-(e-s)*(i-a)&gt;=0&amp;&amp;(e-s)*(r-a)-(n-s)*(t-a)&gt;=0&amp;&amp;(n-s)*(i-a)-(o-s)*(r-a)&gt;=0}function E(e,t){return e.next.i!==t.i&amp;&amp;e.prev.i!==t.i&amp;&amp;!function(e,t){var n=e;do{if(n.i!==e.i&amp;&amp;n.next.i!==e.i&amp;&amp;n.i!==t.i&amp;&amp;n.next.i!==t.i&amp;&amp;F(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&amp;&amp;(k(e,t)&amp;&amp;k(t,e)&amp;&amp;function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y&gt;i!=n.next.y&gt;i&amp;&amp;n.next.y!==n.y&amp;&amp;o&lt;(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&amp;&amp;(r=!r),n=n.next}while(n!==e);return r}(e,t)&amp;&amp;(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||M(e,t)&amp;&amp;Z(e.prev,e,e.next)&gt;0&amp;&amp;Z(t.prev,t,t.next)&gt;0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&amp;&amp;e.y===t.y}function F(e,t,n,r){var o=I(Z(e,t,n)),i=I(Z(e,t,r)),s=I(Z(n,r,e)),a=I(Z(n,r,t));return o!==i&amp;&amp;s!==a||(!(0!==o||!T(e,n,t))||(!(0!==i||!T(e,r,t))||(!(0!==s||!T(n,e,r))||!(0!==a||!T(n,t,r)))))}function T(e,t,n){return t.x&lt;=Math.max(e.x,n.x)&amp;&amp;t.x&gt;=Math.min(e.x,n.x)&amp;&amp;t.y&lt;=Math.max(e.y,n.y)&amp;&amp;t.y&gt;=Math.min(e.y,n.y)}function I(e){return e&gt;0?1:e&lt;0?-1:0}function k(e,t){return Z(e.prev,e,e.next)&lt;0?Z(e,t,e.next)&gt;=0&amp;&amp;Z(e,e.prev,t)&gt;=0:Z(e,t,e.prev)&lt;0||Z(e,e.next,t)&lt;0}function S(e,t){var n=new R(e.i,e.x,e.y),r=new R(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function U(e,t,n,r){var o=new R(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&amp;&amp;(e.prevZ.nextZ=e.nextZ),e.nextZ&amp;&amp;(e.nextZ.prevZ=e.prevZ)}function R(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,t,n,r){for(var o=0,i=t,s=n-r;i&lt;n;i+=r)o+=(e[s]-e[i])*(e[i+1]+e[s+1]),s=i;return o}u.exports=x,u.exports.default=x,x.deviation=function(e,t,n,r){var o=t&amp;&amp;t.length,i=o?t[0]*n:e.length,s=Math.abs(B(e,0,i,n));if(o)for(var a=0,u=t.length;a&lt;u;a++){var x=t[a]*n,f=a&lt;u-1?t[a+1]*n:e.length;s-=Math.abs(B(e,x,f,n))}var l=0;for(a=0;a&lt;r.length;a+=3){var c=r[a]*n,y=r[a+1]*n,d=r[a+2]*n;l+=Math.abs((e[c]-e[d])*(e[y+1]-e[c+1])-(e[c]-e[y])*(e[d+1]-e[c+1]))}return 0===s&amp;&amp;0===l?0:Math.abs((l-s)/s)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o&lt;e.length;o++){for(var i=0;i&lt;e[o].length;i++)for(var s=0;s&lt;t;s++)n.vertices.push(e[o][i][s]);o&gt;0&amp;&amp;(r+=e[o-1].length,n.holes.push(r))}return n};const P=[],C={vertexPosition:0,indexPosition:0};function N(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function _(e,t,n,r,o,i){const s=3+o,a=e[t+0],u=e[t+1],x=P;x.length=o;for(let n=0;n&lt;x.length;n++)x[n]=e[t+2+n];let f=i?i.vertexPosition:0,l=i?i.indexPosition:0;const c=f/s;return N(n,f,a,u,0),x.length&amp;&amp;n.set(x,f+3),f+=s,N(n,f,a,u,1),x.length&amp;&amp;n.set(x,f+3),f+=s,N(n,f,a,u,2),x.length&amp;&amp;n.set(x,f+3),f+=s,N(n,f,a,u,3),x.length&amp;&amp;n.set(x,f+3),f+=s,r[l++]=c,r[l++]=c+1,r[l++]=c+3,r[l++]=c+1,r[l++]=c+2,r[l++]=c+3,C.vertexPosition=f,C.indexPosition=l,C}function L(e,t,n,r,o,i,a,u,x,f){const l=5+u.length,c=i.length/l,y=[e[t+0],e[t+1]],d=[e[n],e[n+1]],h=s(f,[...y]),v=s(f,[...d]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function g(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],s=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),a=[(n[0]-e[0])/s,(n[1]-e[1])/s],u=0===r||0===s?0:Math.acos((x=a[0]*o[0]+a[1]*o[1],f=-1,l=1,Math.min(Math.max(x,f),l)));var x,f,l;return a[0]*i[0]+a[1]*i[1]&gt;0?u:2*Math.PI-u}const b=null!==o;let m=0,w=0;if(null!==r){m=g(h,v,s(f,[...[e[r],e[r+1]]]))}if(b){w=g(v,h,s(f,[...[e[o],e[o+1]]]))}i.push(y[0],y[1],d[0],d[1],p(0,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(1,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(2,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(3,m,w)),i.push(...u),a.push(c,c+1,c+2,c+1,c+3,c+2)}function G(e,t,n,r,o){const i=2+o;let s=t;const a=e.slice(s,s+o);s+=o;const x=e[s++];let f=0;const l=new Array(x-1);for(let t=0;t&lt;x;t++)f+=e[s++],t&lt;x-1&amp;&amp;(l[t]=f);const c=e.slice(s,s+2*f),y=u.exports(c,l,2);for(let e=0;e&lt;y.length;e++)r.push(y[e]+n.length/i);for(let e=0;e&lt;c.length;e+=2)n.push(c[e],c[e+1],...a);return s+2*f}const O=self;O.onmessage=r=&gt;{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesCount,r=t+n,i=new Float32Array(o.renderInstructions),s=i.length/r,a=4*s*(n+e),u=new Uint32Array(6*s),x=new Float32Array(a);let f;for(let e=0;e&lt;i.length;e+=r)f=_(i,e,x,u,n,f);const l=Object.assign({vertexBuffer:x.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);O.postMessage(l,[x.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesCount,r=2,i=new Float32Array(o.renderInstructions);let s=0;const u=o.renderInstructionsTransform,x=[1,0,0,1,0,0];let f,l;for(a(x,u);s&lt;i.length;){l=Array.from(i.slice(s,s+n)),s+=n,f=i[s++];for(let n=0;n&lt;f-1;n++)L(i,s+n*r,s+(n+1)*r,n&gt;0?s+(n-1)*r:null,n&lt;f-2?s+(n+2)*r:null,e,t,l,0,x);s+=f*r}const c=Uint32Array.from(t),y=Float32Array.from(e),d=Object.assign({vertexBuffer:y.buffer,indexBuffer:c.buffer,renderInstructions:i.buffer},o);O.postMessage(d,[y.buffer,c.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesCount,r=new Float32Array(o.renderInstructions);let i=0;for(;i&lt;r.length;)i=G(r,i,e,t,n);const s=Uint32Array.from(t),a=Float32Array.from(e),u=Object.assign({vertexBuffer:a.buffer,indexBuffer:s.buffer,renderInstructions:r.buffer},o);O.postMessage(u,[a.buffer,s.buffer,r.buffer]);break}}};&#39;;return new Worker(&quot;undefined&quot;==typeof Blob?&quot;data:application/javascript;base64,&quot;+Buffer.from(t,&quot;binary&quot;).toString(&quot;base64&quot;):URL.createObjectURL(new Blob([t],{type:&quot;application/javascript&quot;})))}(),this.worker_.addEventListener(&quot;message&quot;,(function(t){const e=t.data;if(&quot;GENERATE_POINT_BUFFERS&quot;===e.type){const i=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,v4(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):(this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.generateBuffersRun===this.generateBuffersRun_&amp;&amp;(this.ready=!0)),this.getLayer().changed()}}).bind(this)),this.featureCache_={},this.featureCount_=0;const r=this.getLayer().getSource();this.sourceListenKeys_=[Zz(r,&quot;addfeature&quot;,this.handleSourceFeatureAdded_,this),Zz(r,&quot;changefeature&quot;,this.handleSourceFeatureChanged_,this),Zz(r,&quot;removefeature&quot;,this.handleSourceFeatureDelete_,this),Zz(r,&quot;clear&quot;,this.handleSourceFeatureClear_,this)],r.forEachFeature((function(t){this.featureCache_[Ez(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}).bind(this))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&amp;&amp;(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new class{constructor(t,e){this.helper_=t;const i=t.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){vz(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t&lt;0||e&lt;0||t&gt;this.size_[0]||e&gt;=this.size_[1])return Xat[0]=0,Xat[1]=0,Xat[2]=0,Xat[3]=0,Xat;this.readAll();const i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return Xat[0]=this.data_[4*i],Xat[1]=this.data_[4*i+1],Xat[2]=this.data_[4*i+2],Xat[3]=this.data_[4*i+3],Xat}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)}}(this.helper))}handleSourceFeatureAdded_(t){const e=t.feature;this.featureCache_[Ez(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature;this.featureCache_[Ez(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){delete this.featureCache_[Ez(t.feature)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const i=t.viewState.projection,n=this.getLayer().getSource().getWrapX()&amp;&amp;i.canWrapX(),s=i.getExtent(),r=t.extent,o=n?PN(s):null,a=n?Math.ceil((r[2]-s[2])/o)+1:1,l=n?Math.floor((r[0]-s[0])/o):0;let c=l;const h=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(t,this.currentTransform_),g4(this.currentTransform_,c*o,0),p4(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.drawElements(0,h)}while(++c&lt;a);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const u=this.helper.getCanvas();return this.hitDetectionEnabled_&amp;&amp;(this.renderHitDetection(t,l,a,o),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),u}prepareFrameInternal(t){const e=this.getLayer(),i=e.getSource(),n=t.viewState,s=!t.viewHints[0]&amp;&amp;!t.viewHints[1],r=!gN(this.previousExtent_,t.extent),o=this.sourceRevision_&lt;i.getRevision();if(o&amp;&amp;(this.sourceRevision_=i.getRevision()),s&amp;&amp;(r||o)){const s=n.projection,r=n.resolution,o=e instanceof $rt?e.getRenderBuffer():0,a=rN(t.extent,o*r);i.loadFeatures(a,r,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);const i=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==i)&amp;&amp;(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){const t=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==t)&amp;&amp;(this.hitRenderInstructions_=new Float32Array(t))}let n,s;const r=[],o=[];let a,l=0,c=0;for(const u in this.featureCache_){if(n=this.featureCache_[u],s=n.geometry,!s||&quot;Point&quot;!==s.getType())continue;let t;r[0]=s.getFlatCoordinates()[0],r[1]=s.getFlatCoordinates()[1],m4(e,r),a=Qat(c+6,o),this.renderInstructions_[l++]=r[0],this.renderInstructions_[l++]=r[1],this.hitDetectionEnabled_&amp;&amp;(this.hitRenderInstructions_[c++]=r[0],this.hitRenderInstructions_[c++]=r[1],this.hitRenderInstructions_[c++]=a[0],this.hitRenderInstructions_[c++]=a[1],this.hitRenderInstructions_[c++]=a[2],this.hitRenderInstructions_[c++]=a[3],this.hitRenderInstructions_[c++]=Number(u));for(let e=0;e&lt;this.customAttributes.length;e++)t=this.customAttributes[e].callback(n.feature,n.properties),this.renderInstructions_[l++]=t,this.hitDetectionEnabled_&amp;&amp;(this.hitRenderInstructions_[c++]=t)}const h={id:0,type:&quot;GENERATE_POINT_BUFFERS&quot;,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(h.projectionTransform=e,h.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){const t={id:0,type:&quot;GENERATE_POINT_BUFFERS&quot;,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};t.projectionTransform=e,t.hitDetection=!0,this.worker_.postMessage(t,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}forEachFeatureAtCoordinate(t,e,i,n,s){if(nN(this.hitDetectionEnabled_,66),!this.hitRenderInstructions_)return;const r=m4(e.coordinateToPixelTransform,t.slice()),o=this.hitRenderTarget_.readPixel(r[0]/2,r[1]/2),a=function(t){let e=0;const i=256,n=255;return e+=Math.round(t[0]*i*i*i*n),e+=Math.round(t[1]*i*i*n),e+=Math.round(t[2]*i*n),e+=Math.round(t[3]*n),e}([o[0]/255,o[1]/255,o[2]/255,o[3]/255]),l=Math.floor(this.hitRenderInstructions_[a]).toString(),c=this.getLayer().getSource().getFeatureByUid(l);return c?n(c,this.getLayer(),null):void 0}renderHitDetection(t,e,i,n){if(!this.hitVerticesBuffer_.getSize())return;let s=e;this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_,t),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),g4(this.currentTransform_,s*n,0),p4(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t);const e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}while(++s&lt;i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(t){Xz(t)}),this.sourceListenKeys_=null,super.disposeInternal()}};const tlt={};function elt(t){if(&quot;number&quot;==typeof t)return 1;if(&quot;boolean&quot;==typeof t)return 8;if(&quot;string&quot;==typeof t)return function(t){return O4.test(t)&amp;&amp;(t=R4(t)),D4.test(t)||t.startsWith(&quot;rgba(&quot;)||t.startsWith(&quot;rgb(&quot;)}(t)?6:2;if(!Array.isArray(t))throw new Error(`Unhandled value type: ${JSON.stringify(t)}`);const e=t;if(e.every(function(t){return&quot;number&quot;==typeof t}))return 3===e.length||4===e.length?20:16;if(&quot;string&quot;!=typeof e[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const i=tlt[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.getReturnType(e.slice(1))}function ilt(t){const e=t.toString();return e.includes(&quot;.&quot;)?e:e+&quot;.0&quot;}function nlt(t){if(t.length&lt;2||t.length&gt;4)throw new Error(&quot;`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.&quot;);return`vec${t.length}(${t.map(ilt).join(&quot;, &quot;)})`}function slt(t,e){return void 0===t.stringLiteralsMap[e]&amp;&amp;(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function rlt(t,e,i){if(Array.isArray(e)&amp;&amp;&quot;string&quot;==typeof e[0]){const n=tlt[e[0]];if(void 0===n)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return n.toGlsl(t,e.slice(1),i)}const n=elt(e);if((1&amp;n)&gt;0)return ilt(e);if((8&amp;n)&gt;0)return e.toString();if((2&amp;n)&gt;0&amp;&amp;(void 0===i||2==i))return function(t,e){return ilt(slt(t,e))}(t,e.toString());if((4&amp;n)&gt;0&amp;&amp;(void 0===i||4==i))return function(t){const e=L4(t).slice();return e.length&lt;4&amp;&amp;e.push(1),nlt(e.map(function(t,e){return e&lt;3?t/255:t}))}(e);if((16&amp;n)&gt;0)return nlt(e);throw new Error(`Unexpected expression ${e} (expected type ${i})`)}function olt(t){if(!(1&amp;elt(t)))throw new Error(`A numeric value was expected, got ${JSON.stringify(t)} instead`)}function alt(t){for(let e=0;e&lt;t.length;e++)olt(t[e])}function llt(t){if(!(2&amp;elt(t)))throw new Error(`A string value was expected, got ${JSON.stringify(t)} instead`)}function clt(t){if(!(8&amp;elt(t)))throw new Error(`A boolean value was expected, got ${JSON.stringify(t)} instead`)}function hlt(t,e){if(t.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${t.length} instead`)}function ult(t,e){if(t.length&lt;e)throw new Error(`At least ${e} arguments were expected, got ${t.length} instead`)}function dlt(t,e){if(t.length&gt;e)throw new Error(`At most ${e} arguments were expected, got ${t.length} instead`)}function plt(t){if(t.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${t} instead`)}function flt(t,e){if(!function(t){return Math.log2(t)%1==0}(e))throw new Error(`Could not infer only one type from the following expression: ${JSON.stringify(t)}`)}function mlt(t){return&quot;u_var_&quot;+t}tlt.get={getReturnType:function(t){return 31},toGlsl:function(t,e){hlt(e,1),llt(e[0]);const i=e[0].toString();return t.attributes.includes(i)||t.attributes.push(i),(t.inFragmentShader?&quot;v_&quot;:&quot;a_&quot;)+i}},tlt.var={getReturnType:function(t){return 31},toGlsl:function(t,e){hlt(e,1),llt(e[0]);const i=e[0].toString();return t.variables.includes(i)||t.variables.push(i),mlt(i)}},tlt.palette={getReturnType:function(t){return 4},toGlsl:function(t,e){hlt(e,2),olt(e[0]);const i=rlt(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error(&quot;The second argument of palette must be an array&quot;);const s=n.length,r=new Uint8Array(4*s);for(let l=0;l&lt;s;l++){const t=n[l];let e;if(&quot;string&quot;==typeof t)e=F4(t);else{if(!Array.isArray(t))throw new Error(&quot;The second argument of palette must be an array of strings or colors&quot;);const i=t.length;if(4===i)e=t;else{if(3!==i)throw new Error(`Expected palette color to have 3 or 4 values, got ${i}`);e=[t[0],t[1],t[2],1]}}const i=4*l;r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2],r[i+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[]);const o=`u_paletteTextures[${t.paletteTextures.length}]`,a=new class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}(o,r);return t.paletteTextures.push(a),`texture2D(${o}, vec2((${i} + 0.5) / ${s}.0, 0.5))`}};const glt=&quot;getBandValue&quot;;function Alt(t){return{getReturnType:function(t){return 8},toGlsl:function(e,i){hlt(i,2);let n=31;for(let t=0;t&lt;i.length;t++)n&amp;=elt(i[t]);if(0===n)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(i)} instead`);return n&amp;=-5,`(${rlt(e,i[0],n)} ${t} ${rlt(e,i[1],n)})`}}}function vlt(t){return{getReturnType:function(t){return 8},toGlsl:function(e,i){ult(i,2);for(let t=0;t&lt;i.length;t++)clt(i[t]);let n=&quot;&quot;;return n=i.map(t=&gt;rlt(e,t)).join(` ${t} `),n=`(${n})`,n}}}tlt.band={getReturnType:function(t){return 1},toGlsl:function(t,e){ult(e,1),dlt(e,3);const i=e[0];if(!(glt in t.functions)){let e=&quot;&quot;;const i=t.bandCount||1;for(let t=0;t&lt;i;t++){const n=Math.floor(t/4);let s=t%4;t===i-1&amp;&amp;1===s&amp;&amp;(s=3),e+=`\n          if (band == ${t+1}.0) {\n            return texture2D(u_tileTextures[${n}], v_textureCoord + vec2(dx, dy))[${s}];\n          }\n        `}t.functions[glt]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / u_texturePixelWidth;\n          float dy = yOffset / u_texturePixelHeight;\n          ${e}\n        }\n      `}const n=rlt(t,i),s=rlt(t,e[1]||0),r=rlt(t,e[2]||0);return`${glt}(${n}, ${s}, ${r})`}},tlt.time={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,0),&quot;u_time&quot;}},tlt.zoom={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,0),&quot;u_zoom&quot;}},tlt.resolution={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,0),&quot;u_resolution&quot;}},tlt[&quot;*&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} * ${rlt(t,e[1])})`}},tlt[&quot;/&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} / ${rlt(t,e[1])})`}},tlt[&quot;+&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} + ${rlt(t,e[1])})`}},tlt[&quot;-&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} - ${rlt(t,e[1])})`}},tlt.clamp={getReturnType:function(t){return 1},toGlsl:function(t,e){hlt(e,3),alt(e);const i=rlt(t,e[1]),n=rlt(t,e[2]);return`clamp(${rlt(t,e[0])}, ${i}, ${n})`}},tlt[&quot;%&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`mod(${rlt(t,e[0])}, ${rlt(t,e[1])})`}},tlt[&quot;^&quot;]={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,2),alt(e),`pow(${rlt(t,e[0])}, ${rlt(t,e[1])})`}},tlt.abs={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`abs(${rlt(t,e[0])})`}},tlt.floor={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`floor(${rlt(t,e[0])})`}},tlt.round={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`floor(${rlt(t,e[0])} + 0.5)`}},tlt.ceil={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`ceil(${rlt(t,e[0])})`}},tlt.sin={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`sin(${rlt(t,e[0])})`}},tlt.cos={getReturnType:function(t){return 1},toGlsl:function(t,e){return hlt(e,1),alt(e),`cos(${rlt(t,e[0])})`}},tlt.atan={getReturnType:function(t){return 1},toGlsl:function(t,e){return ult(e,1),dlt(e,2),alt(e),2===e.length?`atan(${rlt(t,e[0])}, ${rlt(t,e[1])})`:`atan(${rlt(t,e[0])})`}},tlt[&quot;&gt;&quot;]={getReturnType:function(t){return 8},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} &gt; ${rlt(t,e[1])})`}},tlt[&quot;&gt;=&quot;]={getReturnType:function(t){return 8},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} &gt;= ${rlt(t,e[1])})`}},tlt[&quot;&lt;&quot;]={getReturnType:function(t){return 8},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} &lt; ${rlt(t,e[1])})`}},tlt[&quot;&lt;=&quot;]={getReturnType:function(t){return 8},toGlsl:function(t,e){return hlt(e,2),alt(e),`(${rlt(t,e[0])} &lt;= ${rlt(t,e[1])})`}},tlt[&quot;==&quot;]=Alt(&quot;==&quot;),tlt[&quot;!=&quot;]=Alt(&quot;!=&quot;),tlt[&quot;!&quot;]={getReturnType:function(t){return 8},toGlsl:function(t,e){return hlt(e,1),clt(e[0]),`(!${rlt(t,e[0])})`}},tlt.all=vlt(&quot;&amp;&amp;&quot;),tlt.any=vlt(&quot;||&quot;),tlt.between={getReturnType:function(t){return 8},toGlsl:function(t,e){hlt(e,3),alt(e);const i=rlt(t,e[1]),n=rlt(t,e[2]),s=rlt(t,e[0]);return`(${s} &gt;= ${i} &amp;&amp; ${s} &lt;= ${n})`}},tlt.array={getReturnType:function(t){return 16},toGlsl:function(t,e){ult(e,2),dlt(e,4),alt(e);const i=e.map(function(e){return rlt(t,e,1)});return`vec${e.length}(${i.join(&quot;, &quot;)})`}},tlt.color={getReturnType:function(t){return 4},toGlsl:function(t,e){ult(e,3),dlt(e,4),alt(e),3===e.length&amp;&amp;e.push(1);const i=e.map(function(e,i){return rlt(t,e,1)+(i&lt;3?&quot; / 255.0&quot;:&quot;&quot;)});return`vec${e.length}(${i.join(&quot;, &quot;)})`}},tlt.interpolate={getReturnType:function(t){let e=5;for(let i=3;i&lt;t.length;i+=2)e&amp;=elt(t[i]);return e},toGlsl:function(t,e,i){plt(e),ult(e,6);const n=e[0];let s;switch(n[0]){case&quot;linear&quot;:s=1;break;case&quot;exponential&quot;:s=n[1];break;default:s=null}if(!s)throw new Error(`Invalid interpolation type for &quot;interpolate&quot; operator, received: ${JSON.stringify(n)}`);i=void 0!==i?i:31;const r=tlt.interpolate.getReturnType(e)&amp;i;flt(e,r);const o=rlt(t,e[1]),a=ilt(s);let l=&quot;&quot;;for(let c=2;c&lt;e.length-2;c+=2){const i=rlt(t,e[c]),n=l||rlt(t,e[c+1],r),s=rlt(t,e[c+2]);l=`mix(${n}, ${rlt(t,e[c+3],r)}, pow(clamp((${o} - ${i}) / (${s} - ${i}), 0.0, 1.0), ${a}))`}return l}},tlt.match={getReturnType:function(t){let e=31;for(let i=2;i&lt;t.length;i+=2)e&amp;=elt(t[i]);return e&amp;=elt(t[t.length-1]),e},toGlsl:function(t,e,i){plt(e),ult(e,4),i=void 0!==i?i:31;const n=tlt.match.getReturnType(e)&amp;i;flt(e,n);const s=rlt(t,e[0]),r=rlt(t,e[e.length-1],n);let o=null;for(let a=e.length-3;a&gt;=1;a-=2)o=`(${s} == ${rlt(t,e[a])} ? ${rlt(t,e[a+1],n)} : ${o||r})`;return o}},tlt.case={getReturnType:function(t){let e=31;for(let i=1;i&lt;t.length;i+=2)e&amp;=elt(t[i]);return e&amp;=elt(t[t.length-1]),e},toGlsl:function(t,e,i){(function(t){if(t.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${t} instead`)})(e),ult(e,3),i=void 0!==i?i:31;const n=tlt.case.getReturnType(e)&amp;i;flt(e,n);for(let o=0;o&lt;e.length-1;o+=2)clt(e[o]);const s=rlt(t,e[e.length-1],n);let r=null;for(let o=e.length-3;o&gt;=0;o-=2)r=`(${rlt(t,e[o])} ? ${rlt(t,e[o+1],n)} : ${r||s})`;return r}};class _lt{constructor(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression=&quot;vec2(1.0)&quot;,this.rotationExpression=&quot;0.0&quot;,this.offsetExpression=&quot;vec2(0.0)&quot;,this.colorExpression=&quot;vec4(1.0)&quot;,this.texCoordExpression=&quot;vec4(0.0, 0.0, 1.0, 1.0)&quot;,this.discardExpression=&quot;false&quot;,this.rotateWithView=!1}addUniform(t){return this.uniforms.push(t),this}addAttribute(t){return this.attributes.push(t),this}addVarying(t,e,i){return this.varyings.push({name:t,type:e,expression:i}),this}setSizeExpression(t){return this.sizeExpression=t,this}setRotationExpression(t){return this.rotationExpression=t,this}setSymbolOffsetExpression(t){return this.offsetExpression=t,this}setColorExpression(t){return this.colorExpression=t,this}setTextureCoordinateExpression(t){return this.texCoordExpression=t,this}setFragmentDiscardExpression(t){return this.discardExpression=t,this}setSymbolRotateWithView(t){return this.rotateWithView=t,this}getSizeExpression(){return this.sizeExpression}getOffsetExpression(){return this.offsetExpression}getColorExpression(){return this.colorExpression}getTextureCoordinateExpression(){return this.texCoordExpression}getFragmentDiscardExpression(){return this.discardExpression}getSymbolVertexShader(t){const e=this.rotateWithView?&quot;u_offsetScaleMatrix * u_offsetRotateMatrix&quot;:&quot;u_offsetScaleMatrix&quot;;let i=this.attributes,n=this.varyings;return t&amp;&amp;(i=i.concat(&quot;vec4 a_hitColor&quot;),n=n.concat({name:&quot;v_hitColor&quot;,type:&quot;vec4&quot;,expression:&quot;a_hitColor&quot;})),`precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n${this.uniforms.map(function(t){return&quot;uniform &quot;+t+&quot;;&quot;}).join(&quot;\n&quot;)}\nattribute vec2 a_position;\nattribute float a_index;\n${i.map(function(t){return&quot;attribute &quot;+t+&quot;;&quot;}).join(&quot;\n&quot;)}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${n.map(function(t){return&quot;varying &quot;+t.type+&quot; &quot;+t.name+&quot;;&quot;}).join(&quot;\n&quot;)}\nvoid main(void) {\n  mat4 offsetMatrix = ${e};\n  vec2 halfSize = ${this.sizeExpression} * 0.5;\n  vec2 offset = ${this.offsetExpression};\n  float angle = ${this.rotationExpression};\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ${this.texCoordExpression};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n${n.map(function(t){return&quot;  &quot;+t.name+&quot; = &quot;+t.expression+&quot;;&quot;}).join(&quot;\n&quot;)}\n}`}getSymbolFragmentShader(t){const e=t?&quot;  if (gl_FragColor.a &lt; 0.1) { discard; } gl_FragColor = v_hitColor;&quot;:&quot;&quot;;let i=this.varyings;return t&amp;&amp;(i=i.concat({name:&quot;v_hitColor&quot;,type:&quot;vec4&quot;,expression:&quot;a_hitColor&quot;})),`precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n${this.uniforms.map(function(t){return&quot;uniform &quot;+t+&quot;;&quot;}).join(&quot;\n&quot;)}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${i.map(function(t){return&quot;varying &quot;+t.type+&quot; &quot;+t.name+&quot;;&quot;}).join(&quot;\n&quot;)}\nvoid main(void) {\n  if (${this.discardExpression}) { discard; }\n  gl_FragColor = ${this.colorExpression};\n  gl_FragColor.rgb *= gl_FragColor.a;\n${e}\n}`}}var blt=class extends Lst{constructor(t){super(Object.assign({},t)),this.parseResult_=function(t){const e=t.symbol,i=void 0!==e.size?e.size:1,n=e.color||&quot;white&quot;,s=e.textureCoord||[0,0,1,1],r=e.offset||[0,0],o=void 0!==e.opacity?e.opacity:1,a=void 0!==e.rotation?e.rotation:0,l={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},c=rlt(l,i,17),h=rlt(l,r,16),u=rlt(l,s,16),d=rlt(l,a,1),p={inFragmentShader:!0,variables:l.variables,attributes:[],stringLiteralsMap:l.stringLiteralsMap,functions:{}},f=rlt(p,n,4),m=rlt(p,o,1);let g=&quot;1.0&quot;;const A=`vec2(${rlt(p,i,17)}).x`;switch(e.symbolType){case&quot;square&quot;:case&quot;image&quot;:break;case&quot;circle&quot;:g=`(1.0-smoothstep(1.-4./${A},1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))`;break;case&quot;triangle&quot;:const t=&quot;(v_quadCoord*2.-1.)&quot;,i=`(atan(${t}.x,${t}.y))`;g=`(1.0-smoothstep(.5-3./${A},.5,cos(floor(.5+${i}/2.094395102)*2.094395102-${i})*length(${t})))`;break;default:throw new Error(&quot;Unexpected symbol type: &quot;+e.symbolType)}const v=(new _lt).setSizeExpression(`vec2(${c})`).setRotationExpression(d).setSymbolOffsetExpression(h).setTextureCoordinateExpression(u).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression(`vec4(${f}.rgb, ${f}.a * ${m} * ${g})`);if(t.filter){const e=rlt(p,t.filter,8);v.setFragmentDiscardExpression(`!${e}`)}const _={};if(p.variables.forEach(function(e){const i=mlt(e);v.addUniform(`float ${i}`),_[i]=function(){if(!t.variables||void 0===t.variables[e])throw new Error(`The following variable is missing from the style: ${e}`);let i=t.variables[e];return&quot;string&quot;==typeof i&amp;&amp;(i=slt(l,i)),void 0!==i?i:-9999999}}),&quot;image&quot;===e.symbolType&amp;&amp;e.src){const t=new Image;t.crossOrigin=void 0===e.crossOrigin?&quot;anonymous&quot;:e.crossOrigin,t.src=e.src,v.addUniform(&quot;sampler2D u_texture&quot;).setColorExpression(v.getColorExpression()+&quot; * texture2D(u_texture, v_texCoord)&quot;),_.u_texture=t}return p.attributes.forEach(function(t){l.attributes.includes(t)||l.attributes.push(t),v.addVarying(`v_${t}`,&quot;float&quot;,`a_${t}`)}),l.attributes.forEach(function(t){v.addAttribute(`float a_${t}`)}),{builder:v,attributes:l.attributes.map(function(t){return{name:t,callback:function(e,i){let n=i[t];return&quot;string&quot;==typeof n&amp;&amp;(n=slt(l,n)),void 0!==n?n:-9999999}}}),uniforms:_}}(t.style),this.styleVariables_=t.style.variables||{},this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new Jat(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&amp;&amp;this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&amp;&amp;this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:this.parseResult_.attributes})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}};var ylt,xlt=function(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},wlt=function(t,e){return t[0]==e[0]&amp;&amp;t[1]==e[1]};!function(){function t(t,e){for(let i=t.length-1;i&gt;0;i--)(t[i][0]&gt;e&amp;&amp;t[i-1][0]&lt;e||t[i][0]&lt;e&amp;&amp;t[i-1][0]&gt;e)&amp;&amp;t.splice(i,0,[e,(e-t[i][0])/(t[i-1][0]-t[i][0])*(t[i-1][1]-t[i][1])+t[i][1]])}function e(t,e){for(let i=t.length-1;i&gt;0;i--)(t[i][1]&gt;e&amp;&amp;t[i-1][1]&lt;e||t[i][1]&lt;e&amp;&amp;t[i-1][1]&gt;e)&amp;&amp;t.splice(i,0,[(e-t[i][1])/(t[i-1][1]-t[i][1])*(t[i-1][0]-t[i][0])+t[i][0],e])}ylt=function(i,n){var s=&quot;Polygon&quot;===n.getType();if(!s&amp;&amp;&quot;MultiPolygon&quot;!==n.getType())return null;var r=n.getCoordinates();return s&amp;&amp;(r=[r]),r.forEach(function(n){n.forEach(function(n){t(n,i[0]),t(n,i[2]),e(n,i[1]),e(n,i[3])})}),r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t[0]&lt;i[0]?t[0]=i[0]:t[0]&gt;i[2]&amp;&amp;(t[0]=i[2]),t[1]&lt;i[1]?t[1]=i[1]:t[1]&gt;i[3]&amp;&amp;(t[1]=i[3])})})}),s?new I6(r[0]):new R6(r)}}();var Clt=function(t,e,i,n){var s=[];!1!==n&amp;&amp;s.push(t);var r=xlt(t,e);if(r){var o=Math.round(r/i);if(o&gt;1)for(var a=(e[0]-t[0])/o,l=(e[1]-t[1])/o,c=1;c&lt;o;c++)s.push([t[0]+a*c,t[1]+l*c])}return s.push(e),s};d6.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),i=[],n=1;n&lt;e.length;n++)i=i.concat(Clt(e[n-1],e[n],t,1===n));return new d6(i)},f6.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){for(var n=[],s=1;s&lt;e.length;s++)n=n.concat(Clt(e[s-1],e[s],t,1===s));i.push(n)}),new f6(i)},I6.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){for(var n=[],s=1;s&lt;e.length;s++)n=n.concat(Clt(e[s-1],e[s],t,1===s));i.push(n)}),new I6(i)},R6.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){var n=[];i.push(n),e.forEach(function(e){for(var i=[],s=1;s&lt;e.length;s++)i=i.concat(Clt(e[s-1],e[s],t,1===s));n.push(i)})}),new R6(i)},zot.prototype.intersection=function(t,e){if(t.sampleAt){var i=rN(this.getCenter().concat(this.getCenter()),this.getRadius());t=(t=ylt(i,t)).simplify(e);var n=this.getCenter(),s=this.getRadius(),r=t.sampleAt(e).getCoordinates();switch(t.getType()){case&quot;Polygon&quot;:r=[r];case&quot;MultiPolygon&quot;:var o=!1,a=[];return r.forEach(function(t){var e=[];a.push(e),t.forEach(function(t){var i=[];e.push(i),t.forEach(function(t){var e=xlt(n,t);e&gt;s?(o=!0,i.push([n[0]+s/e*(t[0]-n[0]),n[1]+s/e*(t[1]-n[1])])):i.push(t)})})}),o?&quot;Polygon&quot;===t.getType()?new I6(a[0]):new R6(a):t}}else console.warn(&quot;[ol/geom/Circle~intersection] Unsupported geometry type: &quot;+t.getType());return t},d6.prototype.splitAt=function(t,e){var i;if(!t)return[this];if(e||(e=1e-10),t.length&amp;&amp;t[0].length){var n=[this];for(i=0;i&lt;t.length;i++){for(var s=[],r=0;r&lt;n.length;r++){var o=n[r].splitAt(t[i],e);s=s.concat(o)}n=s}return n}if(wlt(t,this.getFirstCoordinate())||wlt(t,this.getLastCoordinate()))return[this];var a=this.getCoordinates(),l=[a[0]],c=[];for(i=0;i&lt;a.length-1;i++)if(!wlt(a[i],a[i+1])){if(wlt(t,a[i+1]))l.push(a[i+1]),c.push(new d6(l)),l=[];else if(!wlt(t,a[i])){var h,u=!1;a[i][0]==a[i+1][0]?(h=(a[i][1]-t[1])/(a[i][1]-a[i+1][1]),u=a[i][0]==t[0]&amp;&amp;0&lt;h&amp;&amp;h&lt;=1):a[i][1]==a[i+1][1]?(h=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]),u=a[i][1]==t[1]&amp;&amp;0&lt;h&amp;&amp;h&lt;=1):(h=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]),u=Math.abs(h-(a[i][1]-t[1])/(a[i][1]-a[i+1][1]))&lt;=e&amp;&amp;0&lt;h&amp;&amp;h&lt;=1),u&amp;&amp;(l.push(t),c.push(new d6(l)),l=[t])}l.push(a[i+1])}return l.length&gt;1&amp;&amp;c.push(new d6(l)),c.length?c:[this]};var Slt=class extends v8{constructor(t){super({stroke:(t=t||{}).stroke,text:t.text,zIndex:t.zIndex,geometry:t.geometry}),this.setRenderer(this._render.bind(this)),this._visible=!1!==t.visible,&quot;function&quot;==typeof t.width?this._widthFn=t.width:this.setWidth(t.width),this.setWidth2(t.width2),&quot;function&quot;==typeof t.color?this._colorFn=t.color:this.setColor(t.color),this.setColor2(t.color2),this.setLineCap(t.lineCap),this.setArrow(t.arrow),this.setArrowSize(t.arrowSize),this.setArrowColor(t.arrowColor),this._offset=[0,0],this.setOffset(t.offset0,0),this.setOffset(t.offset1,1),this._noOverlap=t.noOverlap}setWidth(t){this._width=t||0}setWidth2(t){this._width2=t}getOffset(t){return this._offset[t]}setOffset(t,e){switch(t=Math.max(0,parseFloat(t)),e){case 0:this._offset[0]=t;break;case 1:this._offset[1]=t}}setLineCap(t){this._lineCap=&quot;round&quot;===t?&quot;round&quot;:&quot;butt&quot;}getWidth(t,e){return this._widthFn?this._widthFn(t,e):this._width+((&quot;number&quot;==typeof this._width2?this._width2:this._width)-this._width)*e}setColor(t){try{this._color=L4(t)}catch(e){this._color=[0,0,0,1]}}setColor2(t){try{this._color2=L4(t)}catch(e){this._color2=null}}setArrowColor(t){try{this._acolor=P4(t)}catch(e){this._acolor=null}}getColor(t,e){if(this._colorFn)return P4(this._colorFn(t,e));var i=this._color,n=this._color2||this._color;return&quot;rgba(&quot;+ +Math.round(i[0]+(n[0]-i[0])*e)+&quot;,&quot;+Math.round(i[1]+(n[1]-i[1])*e)+&quot;,&quot;+Math.round(i[2]+(n[2]-i[2])*e)+&quot;,&quot;+(i[3]+(n[3]-i[3])*e)+&quot;)&quot;}getArrow(){return this._arrow}setArrow(t){this._arrow=parseInt(t),(this._arrow&lt;-1||this._arrow&gt;2)&amp;&amp;(this._arrow=0)}getArrowSize(){return this._arrowSize||[16,16]}setArrowSize(t){Array.isArray(t)?this._arrowSize=t:&quot;number&quot;==typeof t&amp;&amp;(this._arrowSize=[t,t])}drawArrow(t,e,i,n,s){var r=this.getArrowSize()[0]*s,o=xlt(e,i),a=(e[0]-i[0])/o,l=(e[1]-i[1])/o;n=Math.max(this.getArrowSize()[1]/2,n/2)*s,t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-r*a+n*l,e[1]-r*l-n*a),t.lineTo(e[0]-r*a-n*l,e[1]-r*l+n*a),t.lineTo(e[0],e[1]),t.fill()}_render(t,e){if(&quot;LineString&quot;===e.geometry.getType()){var i,n,s,r=e.context;if(!this._visible){var o=e.pixelRatio/e.resolution,a=Math.cos(e.rotation),l=Math.sin(e.rotation);n=e.geometry.getCoordinates();var c=t[0][0]-n[0][0]*o*a-n[0][1]*o*l,h=t[0][1]-n[0][0]*o*l+n[0][1]*o*a;for(t=[],i=0;s=n[i];i++)t[i]=[c+s[0]*o*a+s[1]*o*l,h+s[0]*o*l-s[1]*o*a,s[2]]}var u=this.getArrowSize()[0]*e.pixelRatio;r.save(),this.getOffset(0)&amp;&amp;this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&amp;&amp;this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length&gt;1&amp;&amp;(-1===this.getArrow()||2===this.getArrow())&amp;&amp;(s=this._splitAsize(t,u),r.fillStyle=this._acolor?this._acolor:this.getColor(e.feature,0),this.drawArrow(r,s[0],s[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length&gt;1&amp;&amp;this.getArrow()&gt;0&amp;&amp;(s=this._splitAsize(t,u,!0),r.fillStyle=this._acolor?this._acolor:this.getColor(e.feature,1),this.drawArrow(r,s[0],s[1],this.getWidth(e.feature,1),e.pixelRatio));var d=this._splitInto(t,255,2),p=0,f=d.length;if(r.lineJoin=&quot;round&quot;,r.lineCap=this._lineCap||&quot;butt&quot;,d.length&gt;1)for(p=0;p&lt;d.length;p++){var m=p/f;for(n=d[p],r.lineWidth=this.getWidth(e.feature,m)*e.pixelRatio,r.strokeStyle=this.getColor(e.feature,m),r.beginPath(),r.moveTo(n[0][0],n[0][1]),i=1;s=n[i];i++)r.lineTo(s[0],s[1]);r.stroke()}r.restore()}}_splitAsize(t,e,i){var n,s,r,o,a=0;for(n=r=i?t.pop():t.shift();t.length;){if(s=i?t.pop():t.shift(),a+(o=xlt(n,s))&gt;e){o=xlt(n=[n[0]+(s[0]-n[0])*(e-a)/o,n[1]+(s[1]-n[1])*(e-a)/o],r),i?(t.push(s),t.push(n),t.push([n[0]+(r[0]-n[0])/o,n[1]+(r[1]-n[1])/o])):(t.unshift(s),t.unshift(n),t.unshift([n[0]+(r[0]-n[0])/o,n[1]+(r[1]-n[1])/o]));break}a+=o,n=s}return[r,n]}_splitInto(t,e,i){var n,s,r,o=this._noOverlap?1:.9,a=[],l=0;for(n=1;s=t[n];n++)l+=xlt(t[n-1],s);var c=Math.max(i||2,l/(e||255)),h=t[0];l=0;var u=[h];for(n=1,s=t[1];n&lt;t.length;){var d=s[0]-h[0],p=s[1]-h[1];if(l+(r=Math.sqrt(d*d+p*p))&gt;c){var f=(c-l)/r;u.push([h[0]+d*f,h[1]+p*f]),a.push(u),u=[h=[h[0]+d*f*o,h[1]+p*f*o]],l=0}else l+=r,u.push(h=s),s=t[++n]}return a.push(u),a}};const klt=[13e3,12500,12e3,11500,11e3,10500,1e4,9500,9e3,8500,8500,7500,7e3,6500,6e3,5500,5e3,4500,4e3,3500,3e3,2500,2e3,1500,1200,1e3,800,600,400,300,200,100],Elt=[&quot;#ff0000&quot;,&quot;#ff00e4&quot;,&quot;#d800ff&quot;,&quot;#ae00ff&quot;,&quot;#9600ff&quot;,&quot;#7800ff&quot;,&quot;#6000ff&quot;,&quot;#4e00ff&quot;,&quot;#3600ff&quot;,&quot;#2400ff&quot;,&quot;#1200ff&quot;,&quot;#0000ff&quot;,&quot;#001eff&quot;,&quot;#0030ff&quot;,&quot;#0054ff&quot;,&quot;#0078ff&quot;,&quot;#0096ff&quot;,&quot;#00a8ff&quot;,&quot;#00c0ff&quot;,&quot;#00eaff&quot;,&quot;#00ffe4&quot;,&quot;#00ffd2&quot;,&quot;#00ff9c&quot;,&quot;#00ff72&quot;,&quot;#00ff36&quot;,&quot;#00ff0c&quot;,&quot;#1eff00&quot;,&quot;#42ff00&quot;,&quot;#ccff00&quot;,&quot;#f0ff00&quot;,&quot;#ffea00&quot;,&quot;#ffe062&quot;],Mlt=Elt.map(t=&gt;SH(t));function Tlt(t){return(t*=.3048)&lt;=100?&quot;#ffffff&quot;:Elt[klt.findIndex(e=&gt;e&lt;t)]}class Ilt extends l4{constructor(t,e,i,n){super({geometry:new d6([IV(t),IV(e)])}),super.setStyle(new Slt({color:Tlt(i),color2:Tlt(n),width:2}))}}class Dlt extends l4{constructor(t){super({geometry:new g6(IV([t.lon,t.lat]))}),this.position=t;const[e,i,n]=function(t){return(t*=.3048)&lt;=100?[255,255,255]:Mlt[klt.findIndex(e=&gt;e&lt;t)]}(t.altitude);this.set(&quot;red&quot;,e,!0),this.set(&quot;green&quot;,i,!0),this.set(&quot;blue&quot;,n,!0)}}class Olt extends l4{constructor(t,e){super({geometry:new g6(IV([t.lon,t.lat]))}),this.position=t;const i=Cat[e];this.set(&quot;red&quot;,i[0],!0),this.set(&quot;green&quot;,i[1],!0),this.set(&quot;blue&quot;,i[2],!0)}}const Plt=wat.map(t=&gt;new v8({stroke:new L6({color:t,width:2})})),Rlt=wat.map(t=&gt;new v8({stroke:new L6({color:t,lineDash:[5,15],width:2})}));class Flt extends l4{constructor(t,e,i){super({geometry:new d6([IV(t),IV(e)])}),super.setStyle(i)}}let Llt=(()=&gt;{class t{constructor(t,e,i){this.eventsService=t,this.fleetsService=e,this.selectionService=i,this.trails$=new Qp([]),QT([this.eventsService.additionalShipTrail$,this.fleetsService.fleetTrails$,this.selectionService.trails$]).subscribe(([t,e,i])=&gt;{this.trails$.next([t,...e,...i].filter(t=&gt;!!t))})}clear(){this.trails$.next([])}}return t.\u0275fac=function(e){return new(e||t)(Mn(vW),Mn(yW),Mn(dW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),Blt=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.interactionsService=t,this.mapConfigService=e,this.mapService=i,this.mapStateService=n,this.tooltipsService=s,this.trailsLayerService=r,this.pointerMoveSubscription=new d,this.show=!1}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.positionsSource=new Mot({features:[]}),this.positionsLayer=new blt({source:this.positionsSource,zIndex:vrt.z60,style:{symbol:{symbolType:&quot;circle&quot;,size:9,color:[&quot;color&quot;,[&quot;get&quot;,&quot;red&quot;],[&quot;get&quot;,&quot;green&quot;],[&quot;get&quot;,&quot;blue&quot;]],offset:[0,0]}}}),this.positionsLayer.selectable=!0,this.map.addLayer(this.positionsLayer),this.trailSource=new Mot({features:[],wrapX:!1}),this.trailsLayer=new Cot({source:this.trailSource,zIndex:vrt.z60,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.map.addLayer(this.trailsLayer),this.subscriptions.push(this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.positionsLayer.selectable=t})),this.subscriptions.push(this.mapStateService.showTrailsLayer$.subscribe(t=&gt;{this.show=t,this.updatePositionsLayerVisibility(),this.trailsLayer.setVisible(this.show),this.show?this.pointerMoveSubscription=this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}):this.pointerMoveSubscription.unsubscribe()})),this.subscriptions.push(this.trailsLayerService.trails$.pipe(Mf((t,e)=&gt;function(t,e){return t.length===e.length&amp;&amp;t.every((t,i)=&gt;t===e[i])}(t,e))).subscribe(t=&gt;{const e=[],i=[];t.filter(t=&gt;{var e;return!!(null===(e=t[0])||void 0===e?void 0:e.ship)}).forEach((t,n)=&gt;{e.push(...t.map(t=&gt;new Olt(t,n%wat.length))),i.push(...function(t,e){if(t.length&lt;2)return[];const i=[];for(let n=1;n&lt;t.length;n++){const s=t[n-1],r=t[n];i.push(new Flt([s.lon,s.lat],[r.lon,r.lat],(t[n-1].gap?Rlt:Plt)[e%wat.length]))}return i}(t,n))}),t.filter(t=&gt;{var e;return!!(null===(e=t[0])||void 0===e?void 0:e.aircraft)}).forEach((t,n)=&gt;{e.push(...t.map(t=&gt;new Dlt(t))),i.push(...function(t,e){if(t.length&lt;2)return[];const i=[];for(let n=1;n&lt;t.length;n++){const e=t[n-1],s=t[n];i.push(new Ilt([e.lon,e.lat],[s.lon,s.lat],e.altitude,s.altitude))}return i}(t))}),this.trailSource.clear(!0),this.positionsSource.clear(!0),this.trailSource.addFeatures(i),this.positionsSource.addFeatures(e)})),this.subscriptions.push(this.mapService.view$.subscribe(()=&gt;{this.updatePositionsLayerVisibility()})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;this.handleClickEvent(t)))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.positionsLayer),this.map.removeLayer(this.trailsLayer),this.pointerMoveSubscription.unsubscribe()}handleClickEvent(t){this.positionsLayer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(t.position.ship?this.interactionsService.clickOnEntity(OH.ShipPosition,t.position):t.position.aircraft&amp;&amp;this.interactionsService.clickOnEntity(OH.AircraftPosition,t.position),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.positionsLayer})}handleMoveEvent(t){if(this.positionsLayer.selectable){let e=!1,i=!1;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(t.position.ship?(e=!0,this.tooltipsService.hoverEntity(OH.ShipPosition,t.position)):t.position.aircraft&amp;&amp;(i=!0,this.tooltipsService.hoverEntity(OH.AircraftPosition,t.position)),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.positionsLayer}),e||this.tooltipsService.hoverEntity(OH.ShipPosition,null),i||this.tooltipsService.hoverEntity(OH.AircraftPosition,null)}}updatePositionsLayerVisibility(){const t=this.mapService.view$.value;this.positionsLayer.setVisible(this.show&amp;&amp;t&amp;&amp;(!this.mapConfigService.hidePositionsInLowZooms$.value||t.zoom&gt;=8))}}return t.\u0275fac=function(e){return new(e||t)(Da(gW),Da(HU),Da(kj),Da(vq),Da(mW),Da(Llt))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-trails-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class zlt{constructor(t){if(this.hexCode={0:&quot;0000&quot;,1:&quot;0001&quot;,2:&quot;0010&quot;,3:&quot;0011&quot;,4:&quot;0100&quot;,5:&quot;0101&quot;,6:&quot;0110&quot;,7:&quot;0111&quot;,8:&quot;1000&quot;,9:&quot;1001&quot;,a:&quot;1010&quot;,b:&quot;1011&quot;,c:&quot;1100&quot;,d:&quot;1101&quot;,e:&quot;1110&quot;,f:&quot;1111&quot;},this.bits=&quot;&quot;,null!=t){15===t.length&amp;&amp;(this.bits+=&quot;0000&quot;);for(let e=0;e&lt;t.length;e++)this.bits+=this.hexCode[t[e]]}}getLiteral(){const t=this.getLiteralArr();let e=`${t[0]}`;for(let i=1;i&lt;t.length;i++)(i-1)%3==0&amp;&amp;(e+=&quot;-&quot;),e+=`${t[i]}`;return e}getLiteralEdge(t){const e=this.getLiteralArr(),i=t.getLiteralArr();let n=`${e[0]}`;for(let s=1;s&lt;e.length-1;s++)(s-1)%3==0&amp;&amp;(n+=&quot;-&quot;),n+=`${e[s]}`;return n+=` / ${e[e.length-1]}-${i[i.length-1]}`,n}getLiteralArr(){const t=[];t.push(this.getFaceNb());for(let e=1;e&lt;=15;e++){const i=this.getCellNb(e);7!==i&amp;&amp;t.push(i)}return t}getFaceNb(){let t=&quot;&quot;;for(let e=12;e&lt;19;e++)t=this.bits[e]+t;return t=this.reverse(t),parseInt(t,2)}getCellNb(t){let e=&quot;&quot;;const i=16+3*t;for(let n=i;n&lt;i+3;n++)e=this.bits[n]+e;return e=this.reverse(e),parseInt(e,2)}reverse(t){return t.split(&quot;&quot;).reverse().join(&quot;&quot;)}}function Nlt(t){const e=t.getGeometry(),i=new L6({color:mat[t.element.edge?t.element.res:t.element.res+1],lineCap:&quot;square&quot;,width:4}),n=[new v8({stroke:i})];return t.element.edge&amp;&amp;e.forEachSegment((e,s)=&gt;{const r=Math.atan2(s[1]-e[1],s[0]-e[0]),o=5+10*Math.pow(12-t.element.res,2),a=new d6([s,[s[0]-o,s[1]+o]]);a.rotate(r,s);const l=new d6([s,[s[0]-o,s[1]-o]]);l.rotate(r,s),n.push(new v8({geometry:a,stroke:i})),n.push(new v8({geometry:l,stroke:i}))}),n}class Vlt extends l4{constructor(t,e){super({geometry:2===e.length?new d6(e):new I6(e)}),this.element=t,super.setStyle(Nlt)}static New(t){return new Vlt(t,Vlt.PointsArr(t))}static PointsArr(t){let e=[];if(bj(t.h3index)){const i=vj(t.h3index),n=_j(t.h3index),s=fj(i),r=fj(n);t.edge=!0,t.lat=r[0],t.lon=r[1];const o=new zlt(i),a=new zlt(n);t.literal=o.getLiteralEdge(a),e.push(IV([s[1],s[0]])),e.push(IV([r[1],r[0]])),t.shift&amp;&amp;Vlt.shift(e,15-t.res)}else{const i=fj(t.h3index);t.edge=!1,t.lat=i[0],t.lon=i[1];const n=new zlt(t.h3index);t.literal=n.getLiteral(),e=[mj(t.h3index,!0).map(t=&gt;IV(t))]}return e}static shift(t,e){const i=t[0],n=t[1],s=Math.atan2(n[1]-i[1],n[0]-i[0]),r=4*e,o=[Math.sin(s)*r+i[0],-Math.cos(s)*r+i[1]],a=[Math.sin(s)*r+n[0],-Math.cos(s)*r+n[1]];t[0]=o,t[1]=a}}class $lt{static reversedEdge(t){const e=yj(t);return function(t,e){var i=ij(t),n=i[0],s=i[1],r=ij(e);return aj(ZU.getH3UnidirectionalEdge(n,s,r[0],r[1]))}(e[1],e[0])}}let Ult=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.h3TracesLayerService=t,this.interactionsService=e,this.tooltipsService=i,this.mapConfigService=n,this.mapService=s,this.mapStateService=r}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.h3ElementsSource=new Mot({features:[]}),this.h3ElementsLayer=new Cot({source:this.h3ElementsSource,zIndex:vrt.z20,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.h3ElementsLayer.selectable=!0,this.map.addLayer(this.h3ElementsLayer),this.subscriptions.push(this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.h3ElementsLayer.selectable=t})),this.subscriptions.push(this.mapService.view$.subscribe(t=&gt;{t&amp;&amp;this.h3ElementsLayer.setVisible(!this.mapConfigService.hidePositionsInLowZooms$.value||t.zoom&gt;=8)})),this.subscriptions.push(this.h3TracesLayerService.trails$.subscribe(t=&gt;{this.h3ElementsSource.clear(!0),this.mapConfigService.debugH3Trace$.value&amp;&amp;this.h3ElementsSource.addFeatures(t.map(jlt).flat())})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.handleClickEvent(t)})),this.subscriptions.push(this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.h3ElementsLayer)}handleClickEvent(t){this.h3ElementsLayer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.interactionsService.clickOnEntity(OH.H3Element,t.element),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.h3ElementsLayer})}handleMoveEvent(t){this.h3ElementsLayer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.tooltipsService.hoverEntity(OH.H3Element,t.element),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.h3ElementsLayer})||this.tooltipsService.hoverEntity(OH.H3Element,null))}}return t.\u0275fac=function(e){return new(e||t)(Da(ZH),Da(gW),Da(mW),Da(HU),Da(kj),Da(vq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-h3traces-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();function jlt(t){const e=t.elements,i=[],n={};for(let s=1;s&lt;e.length;s++){const t=e[s];bj(t.h3index)&amp;&amp;(n[t.h3index]=1,n[$lt.reversedEdge(t.h3index)]&amp;&amp;(t.shift=!0)),i.push(Vlt.New(t))}return i}class Hlt extends Jat{prepareFrameInternal(t){const e=this.getLayer(),i=e.getSource(),n=t.viewState,s=!t.viewHints[0]&amp;&amp;!t.viewHints[1],r=!gN(this.previousExtent_,t.extent),o=this.sourceRevision_&lt;i.getRevision();return o&amp;&amp;(this.sourceRevision_=i.getRevision()),(s&amp;&amp;r||o)&amp;&amp;(clearTimeout(this.pendingBufferRefresh),this.pendingBufferRefresh=setTimeout(()=&gt;{if(!this.helper)return;const s=n.projection,r=n.resolution,o=e instanceof $rt?e.getRenderBuffer():0,a=rN(t.extent,o*r);i.loadFeatures(a,r,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()},300)),this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}}var Glt=(()=&gt;(function(t){t[t.Ship=0]=&quot;Ship&quot;,t[t.Point=1]=&quot;Point&quot;,t[t.Beacon=2]=&quot;Beacon&quot;,t[t.Helicopter=3]=&quot;Helicopter&quot;}(Glt||(Glt={})),Glt))();const qlt={aircraft:&quot;/assets/images/aircraft.png&quot;,ship:&quot;/assets/images/ship.png&quot;,point:&quot;/assets/images/point.png&quot;,beacon:&quot;/assets/images/beacon.png&quot;,helicopter:&quot;/assets/images/helicopter.png&quot;},Wlt={};let Ylt=(()=&gt;{class t{init(){return jp(this,void 0,void 0,function*(){yield Promise.all(Object.entries(qlt).map(([t,e])=&gt;jp(this,void 0,void 0,function*(){Wlt[t]=yield function(t){return jp(this,void 0,void 0,function*(){return new Promise(e=&gt;{const i=new Image;i.src=t,i.onload=()=&gt;{e(i)}})})}(e)})))})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})();class Zlt extends Lst{createRenderer(){const t=new Hlt(this,{attributes:[{name:&quot;angle&quot;,callback:t=&gt;t.ship.beacon?.4:t.ship.course},{name:&quot;red&quot;,callback:t=&gt;t.iconColor[0]},{name:&quot;green&quot;,callback:t=&gt;t.iconColor[1]},{name:&quot;blue&quot;,callback:t=&gt;t.iconColor[2]},{name:&quot;alpha&quot;,callback:t=&gt;t.ship.visible?t.ship.transparent?.5:1:0},{name:&quot;iconKey&quot;,callback:t=&gt;t.iconKey}],uniforms:{u_texture_point:Wlt.point,u_texture_ship:Wlt.ship,u_texture_beacon:Wlt.beacon,u_texture_helicopter:Wlt.helicopter,u_iconSize:12},vertexShader:&quot;\nprecision mediump float;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_iconSize;\n\nattribute vec2 a_position;\nattribute float a_index;\nattribute float a_angle;\nattribute float a_red;\nattribute float a_green;\nattribute float a_blue;\nattribute float a_alpha;\nattribute float a_iconKey;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nvarying float v_iconKey;\nvarying float v_alpha;\n\nvoid main(void) {\n  vec2 size = vec2(u_iconSize);\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  vec2 offset = vec2(0.0);\n  float offsetX = a_index == 0.0 || a_index == 3.0 ? offset.x - size.x / 2.0 : offset.x + size.x / 2.0;\n  float offsetY = a_index == 0.0 || a_index == 1.0 ? offset.y - size.y / 2.0 : offset.y + size.y / 2.0;\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n\n  vec4 texCoord = vec4(0.0, 0.0, 1.0, 1.0);\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.q;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.p;\n  v_texCoord = vec2(u, v);\n\n  if (a_iconKey != 1.0) {\n    vec2 rotationVector = vec2(sin(a_angle), cos(a_angle));\n    vec2 centeredTexCoord = v_texCoord - 0.5;\n    vec2 rotatedPosition = vec2(\n      centeredTexCoord.x * rotationVector.y + centeredTexCoord.y * rotationVector.x,\n      centeredTexCoord.y * rotationVector.y - centeredTexCoord.x * rotationVector.x\n    ) + 0.5;\n    v_texCoord = rotatedPosition;\n  }\n\n  v_color = vec4(a_red, a_green, a_blue, a_alpha);\n  v_iconKey = a_iconKey;\n  v_alpha = a_alpha;\n}\n&quot;,fragmentShader:&quot;\nprecision mediump float;\n\nuniform sampler2D u_texture_ship;\nuniform sampler2D u_texture_point;\nuniform sampler2D u_texture_beacon;\nuniform sampler2D u_texture_helicopter;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nvarying float v_iconKey;\nvarying float v_alpha;\n\nvoid main(void) {\n  if (v_alpha == 0.0) {\n    discard;\n  }\n  vec4 textureColor;\n  if (v_iconKey == 0.0) {\n    textureColor = texture2D(u_texture_ship, v_texCoord);\n  } else if (v_iconKey == 1.0) {\n    textureColor = texture2D(u_texture_point, v_texCoord);\n  } else if (v_iconKey == 2.0) {\n    textureColor = texture2D(u_texture_beacon, v_texCoord);\n  } else if (v_iconKey == 3.0) {\n    textureColor = texture2D(u_texture_helicopter, v_texCoord);\n  } else {\n    // error\n  }\n  gl_FragColor = v_color * textureColor;\n  gl_FragColor.rgb *= gl_FragColor.a;\n}\n&quot;,hitVertexShader:&quot;\nprecision mediump float;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_iconSize;\n\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_hitColor;\nattribute float a_angle;\nattribute float a_iconKey;\nattribute float a_alpha;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_hitColor;\nvarying float v_iconKey;\nvarying float v_alpha;\n\nvoid main(void) {\n  float size = u_iconSize;\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  float offsetX = a_index == 0.0 || a_index == 3.0 ? -size / 2.0 : size / 2.0;\n  float offsetY = a_index == 0.0 || a_index == 1.0 ? -size / 2.0 : size / 2.0;\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n\n  vec4 texCoord = vec4(0.0, 0.0, 1.0, 1.0);\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.q;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.p;\n  v_texCoord = vec2(u, v);\n\n  if (a_iconKey != 1.0) {\n    vec2 rotationVector = vec2(sin(a_angle), cos(a_angle));\n    vec2 centeredTexCoord = vec2(u, v) - 0.5;\n    vec2 rotatedPosition = vec2(\n      centeredTexCoord.x * rotationVector.y + centeredTexCoord.y * rotationVector.x,\n      centeredTexCoord.y * rotationVector.y - centeredTexCoord.x * rotationVector.x\n    ) + 0.5;\n    v_texCoord = rotatedPosition;\n  }\n\n  v_hitColor = a_hitColor;\n  v_iconKey = a_iconKey;\n  v_alpha = a_alpha;\n}\n&quot;,hitFragmentShader:&quot;\nprecision mediump float;\n\nuniform sampler2D u_texture_ship;\nuniform sampler2D u_texture_point;\nuniform sampler2D u_texture_beacon;\nuniform sampler2D u_texture_helicopter;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_hitColor;\nvarying float v_iconKey;\nvarying float v_alpha;\n\nvoid main(void) {\n  if (v_alpha == 0.0) {\n    discard;\n  }\n  vec4 textureColor;\n  if (v_iconKey == 0.0) {\n    textureColor = texture2D(u_texture_ship, v_texCoord);\n  } else if (v_iconKey == 1.0) {\n    textureColor = texture2D(u_texture_point, v_texCoord);\n  } else if (v_iconKey == 2.0) {\n    textureColor = texture2D(u_texture_beacon, v_texCoord);\n  } else if (v_iconKey == 3.0) {\n    textureColor = texture2D(u_texture_helicopter, v_texCoord);\n  } else {\n    // error\n  }\n  if (textureColor.a &lt; 0.1) {\n    discard;\n  }\n\n  gl_FragColor = v_hitColor;\n}\n&quot;});return t.renderDeclutter=function(){},t}disposeInternal(){this.renderer_.dispose(),super.disposeInternal()}}const Klt=CH(&quot;#000000&quot;),Xlt=CH(&quot;#f31717&quot;),Qlt=CH(&quot;#fddb21&quot;),Jlt=CH(&quot;#3fd830&quot;);class tct extends l4{constructor(t,e){super({geometry:new g6(IV(e&gt;0?ect(t,e):[t.lon,t.lat]))}),this.ship=t}updateStyle(t){this.ship.visible?(this.iconColor=t.colorModeShipType?this.ship.shipType.rgbColor:this.ship.colorResultTimestamp&gt;=t.absoluteImportantTimestamp?Xlt:this.ship.colorResultTimestamp&gt;=t.absoluteMinimumTimestamp?Qlt:Jlt,this.iconKey=this.ship.sarAircraft?Glt.Helicopter:this.ship.beacon?Glt.Beacon:this.ship.stationary?Glt.Point:Glt.Ship):this.iconColor=Klt}updateShip(t,e){e&gt;0?this.extrapolatePosition(e):this.ship.lon!==t.lon&amp;&amp;this.ship.lat!==t.lat&amp;&amp;super.getGeometry().setCoordinates(IV([t.lon,t.lat])),this.ship=t}extrapolatePosition(t){t&gt;0&amp;&amp;super.getGeometry().setCoordinates(IV(ect(this.ship,t)))}}function ect(t,e){const{lon:i,lat:n,course:s,numberSog:r,timestamp:o}=t,a=e-o;return a&gt;0?function([t,e],i,n){const s=6378137;let r=e*Math.PI/180,o=t*Math.PI/180;return r=Math.asin(Math.sin(r)*Math.cos(i/s)+Math.cos(r)*Math.sin(i/s)*Math.cos(n)),o+=Math.atan2(Math.sin(n)*Math.sin(i/s)*Math.cos(r),Math.cos(i/s)-Math.sin(r)*Math.sin(r)),[180*o/Math.PI,180*r/Math.PI]}([i,n],a*r/1.944,s):[i,n]}let ict=(()=&gt;{class t{constructor(t,e,i){this.fleetsService=t,this.mapConfigService=e,this.selectionService=i,this.selectedShips$=new Qp([]),QT([this.fleetsService.selectedFleet$.pipe(M(t=&gt;t?t.ships:[])),this.selectionService.entities$.pipe(M(t=&gt;t.filter(t=&gt;!!t.entity&amp;&amp;t.type===OH.Ship).map(t=&gt;t.entity)))]).subscribe(([t,e])=&gt;{const i=function(t){const e={};for(const i of t)e[i.mmsi]=i;return Object.values(e)}([].concat(...t,...e));this.mapConfigService.updateSelectedShipsFilter(i.map(t=&gt;t.mmsi)),this.selectedShips$.next(i)})}}return t.\u0275fac=function(e){return new(e||t)(Mn(yW),Mn(HU),Mn(dW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),nct=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d){super(),this.ngZone=t,this.configService=e,this.exportService=i,this.historyService=n,this.interactionsService=s,this.mapConfigService=r,this.mapService=o,this.mapStateService=a,this.offlineService=l,this.selectedShipsService=c,this.shipsService=h,this.workerService=u,this.tooltipsService=d,this.shipFeaturesByArea=new Map,this.timestampByArea=new Map,this.oldTimestamp=-1,this.viewedAreas=[],this.chunkedFeedUpdateByArea=new Map,this.selectedShipsFeaturesByMMSI=new Map,this.rendererIconSizeUniform$=new S}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new Zlt({source:this.source,zIndex:vrt.z80}),this.layer.selectable=!0,this.map.addLayer(this.layer);const t=()=&gt;{if(this.layer.getRenderer().helper){this.layer.removeEventListener(&quot;change&quot;,t);const e=this.layer.getRenderer().helper.uniforms_.find(t=&gt;&quot;u_iconSize&quot;===t.name);this.rendererIconSizeUniform$.next(e),this.layer.getRenderer().helper.getCanvas().addEventListener(&quot;webglcontextlost&quot;,t=&gt;{if(this.mapService.hasBooted$.value)throw new Error(&quot;Le contexte WebGL a \xe9t\xe9 perdu (les navires et avions ne sont plus affichables). Veuillez rafraichir l&#39;onglet ou fermer puis r\xe9ouvrir votre navigateur.&quot;)},{once:!0})}};this.layer.addEventListener(&quot;change&quot;,t),this.subscriptions.push(QT([this.mapService.view$,this.rendererIconSizeUniform$]).subscribe(([t,e])=&gt;{if(!t)return;const i=Math.min(Math.round((t.zoom-4)/12*16+12),28);i!==e.value&amp;&amp;(e.value=i,this.layer.changed()),this.viewedAreas=cz(SU.fromOLExtent(this.mapService.view$.value.extent).toLatLonExtent()).map(t=&gt;t.id)}),this.mapStateService.showShipsLayer$.subscribe(t=&gt;{t||(this.shipFeaturesByArea.clear(),this.timestampByArea.clear(),this.source.clear(!0)),setTimeout(()=&gt;{this.layer.setVisible(t)})}),this.mapStateService.showShipsLayer$.pipe(Sf(1),gf(t=&gt;t)).subscribe(()=&gt;{for(const t of this.selectedShipsFeaturesByMMSI.values())this.source.hasFeature(t)||this.source.addFeature(t)}),this.offlineService.isOffline$.pipe(hg(),gf(([t,e])=&gt;t!==e)).subscribe(()=&gt;{this.shipFeaturesByArea.clear(),this.timestampByArea.clear(),this.source.clear(!0)}),this.mapConfigService.manualMapFetch$.subscribe(()=&gt;{this.shipFeaturesByArea.clear(),this.timestampByArea.clear(),this.source.clear(!0)}),this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.layer.selectable=t}),this.mapConfigService.shipFilter$.subscribe(t=&gt;{this.configService.devMode&amp;&amp;console.time(`ships-layer: update ${this.shipsService.shipsCount$.value} ship states`),this.source.forEachFeature(e=&gt;{dq(e.ship,t),e.updateStyle(t)}),this.configService.devMode&amp;&amp;console.timeEnd(`ships-layer: update ${this.shipsService.shipsCount$.value} ship states`),this.shipFilter=t,this.source.changed()}),this.mapConfigService.enableHistoryModeExtrapolation$.subscribe(t=&gt;{if(t&amp;&amp;this.historyService.timestamp$.value&gt;0){const t=this.historyService.timestamp$.value;this.source.forEachFeature(e=&gt;{e.ship.stationary||e.extrapolatePosition(t)})}else this.source.forEachFeature(t=&gt;{const{lon:e,lat:i}=t.ship;t.setGeometry(new g6(IV([e,i])))});this.source.changed()}),this.historyService.timestamp$.subscribe(t=&gt;{(0===t&amp;&amp;this.oldTimestamp&gt;0||t&gt;0&amp;&amp;0===this.oldTimestamp)&amp;&amp;(this.shipFeaturesByArea.clear(),this.timestampByArea.clear(),this.source.clear(!0),0===t&amp;&amp;this.oldTimestamp&gt;0&amp;&amp;this.source.addFeatures([...this.selectedShipsFeaturesByMMSI.values()])),this.oldTimestamp=t}),this.mapConfigService.restrictedAreaLonLat$.subscribe(()=&gt;{this.shipFeaturesByArea.clear(),this.timestampByArea.clear(),this.source.clear(!0)}),this.workerService.areaShipsFeeds$.subscribe(t=&gt;{if(!t.chunked||t.start){const e=(this.shipFeaturesByArea.get(t.area.id)||[]).reduce((t,e)=&gt;(t[e.ship.mmsi]=e,t),{});this.chunkedFeedUpdateByArea.set(t.area.id,{featuresByMMSI:e,additions:[],updates:[]})}const e=this.chunkedFeedUpdateByArea.get(t.area.id);e||console.log(&quot;missing previous feedUpdate&quot;,[...this.chunkedFeedUpdateByArea.keys()],`id=${t.area.id} chunked=${t.chunked} start=${t.start} end=${t.end} length=${t.data.length}`);let i=t.data;const n=!this.mapConfigService.manualMapFetch$.value&amp;&amp;this.mapConfigService.restrictedAreaLonLat$.value;if(n){const[t,e,s,r]=n;i=i.filter(i=&gt;t&lt;=i.lon&amp;&amp;i.lon&lt;=s&amp;&amp;e&lt;=i.lat&amp;&amp;i.lat&lt;=r)}const s=this.mapConfigService.enableHistoryModeExtrapolation$.value&amp;&amp;this.historyService.timestamp$.value&gt;0?this.historyService.timestamp$.value:0,r=[];i.filter(t=&gt;t.lon).forEach(t=&gt;{dq(t,this.shipFilter);let i=e.featuresByMMSI[t.mmsi];i?(i.updateShip(t,s),e.updates.push(i)):(i=new tct(t,s),r.push(i)),i.updateStyle(this.shipFilter),delete e.featuresByMMSI[t.mmsi]}),this.source.addFeatures(r),e.additions=e.additions.concat(r),(!t.chunked||t.end)&amp;&amp;(Object.values(e.featuresByMMSI).forEach(t=&gt;{this.source.hasFeature(t)&amp;&amp;this.source.removeFeature(t)}),this.shipFeaturesByArea.set(t.area.id,e.updates.concat(e.additions)),this.timestampByArea.set(t.area.id,Date.now()),this.chunkedFeedUpdateByArea.delete(t.area.id),this.refreshTotalShipsCount())}),this.selectedShipsService.selectedShips$.subscribe(t=&gt;{const e=this.historyService.timestamp$.value;if(e&gt;0)return;const i=[],n=[],s=new Map;t.forEach(t=&gt;{dq(t,this.shipFilter);let r=this.selectedShipsFeaturesByMMSI.get(t.mmsi);r?(r.updateShip(t,e),n.push(r)):(r=new tct(t,e),i.push(r)),s.set(t.mmsi,r),r.updateStyle(this.shipFilter),this.selectedShipsFeaturesByMMSI.delete(t.mmsi)}),[...this.selectedShipsFeaturesByMMSI.values()].forEach(t=&gt;{this.source.hasFeature(t)&amp;&amp;this.source.removeFeature(t)}),this.source.addFeatures(i),this.selectedShipsFeaturesByMMSI=s})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})})),this.subscriptions.push(QT([this.mapService.view$.pipe(Sf(1),FM(500,hf,{leading:!1,trailing:!0})),this.mapConfigService.shipFilter$,this.workerService.areaShipsFeeds$.pipe(df(300,Ym))]).subscribe(([t])=&gt;{const e=this.source.getFeaturesInExtent(t.extent).filter(t=&gt;t.ship.visible).map(t=&gt;t.ship);if(e.length&lt;200){const t=e.sort((t,e)=&gt;t.mmsi&lt;e.mmsi?-1:1);this.shipsService.shipsInView$.next(t)}else this.shipsService.shipsInView$.next([]);this.shipsService.shipsInViewCount$.next(e.length)}),this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}),Mq(6e4).pipe(gf(()=&gt;!this.mapConfigService.manualMapFetch$.value&amp;&amp;!this.historyService.timestamp$.value&amp;&amp;!this.offlineService.isOffline$.value)).subscribe(()=&gt;{nz({category:&quot;app&quot;,message:&quot;ship-layer: cleanup&quot;});const t=Date.now();for(const[e,i]of this.timestampByArea.entries())this.viewedAreas.includes(e)||i&lt;t-18e4&amp;&amp;((this.shipFeaturesByArea.get(e)||[]).forEach(t=&gt;{this.source.hasFeature(t)&amp;&amp;this.source.removeFeature(t)}),this.shipFeaturesByArea.delete(e),this.timestampByArea.delete(e))})),this.exportService.registerVisibleShipsCallback(t=&gt;this.source.getFeaturesInExtent(null!=t?t:this.map.getView().calculateExtent()).map(t=&gt;t.ship).filter(t=&gt;t.visible))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.configService.devMode&amp;&amp;console.log(&quot;DEBUG: select ship&quot;,t.ship),this.interactionsService.clickOnEntity(OH.Ship,t.ship),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){this.layer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.tooltipsService.hoverEntity(OH.Ship,t.ship),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||this.tooltipsService.hoverEntity(OH.Ship,null))}refreshTotalShipsCount(){let t=0;for(const e of this.shipFeaturesByArea.values())t+=e.length;this.shipsService.shipsCount$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(jU),Da(aW),Da(Dj),Da(gW),Da(HU),Da(kj),Da(vq),Da(hW),Da(ict),Da(uW),Da(Jj),Da(mW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ships-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class sct extends l4{constructor(t){super({geometry:new g6(IV([t.lon,t.lat])),rotation:t.radiansTrack}),this.aircraft=t}updateAircraft(t){this.aircraft.lon!==t.lon&amp;&amp;this.aircraft.lat!==t.lat&amp;&amp;(super.getGeometry().setCoordinates(IV([t.lon,t.lat])),super.set(&quot;rotation&quot;,t.radiansTrack)),this.aircraft=t}}let rct=(()=&gt;{class t{constructor(){this.aircraftsInView$=new Qp([])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),oct=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o,a,l,c,h,u){super(),this.changeDetectorRef=t,this.ngZone=e,this.aircraftsService=i,this.configService=n,this.exportService=s,this.historyService=r,this.interactionsService=o,this.mapService=a,this.mapConfigService=l,this.mapStateService=c,this.tooltipsService=h,this.workerService=u,this.aircraftsFeaturesByArea=new Map,this.oldTimestamp=-1}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.changeDetectorRef.detach(),this.source=new Mot({features:[]}),this.layer=new blt({source:this.source,zIndex:vrt.z80,style:{filter:[&quot;==&quot;,[&quot;get&quot;,&quot;visible&quot;],1],symbol:{symbolType:&quot;image&quot;,src:&quot;assets/images/aircraft.png&quot;,size:[&quot;interpolate&quot;,[&quot;linear&quot;],[&quot;zoom&quot;],4,12,10,30],rotation:[&quot;get&quot;,&quot;rotation&quot;],offset:[0,0]}}}),this.layer.selectable=!0,this.map.addLayer(this.layer),this.subscriptions.push(this.mapStateService.showAircraftsLayer$.subscribe(t=&gt;{t||(this.aircraftsFeaturesByArea.clear(),this.source.clear(!0)),setTimeout(()=&gt;{this.layer.setVisible(t)})}),this.mapConfigService.manualMapFetch$.subscribe(()=&gt;{this.aircraftsFeaturesByArea.clear(),this.source.clear(!0)}),this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.layer.selectable=t}),this.mapConfigService.aircraftFilter$.subscribe(t=&gt;{this.configService.devMode&amp;&amp;console.time(&quot;aircrafts-layer: update aircraft states&quot;),this.source.forEachFeature(e=&gt;{t.apply(e)}),this.configService.devMode&amp;&amp;console.timeEnd(&quot;aircrafts-layer: update aircraft states&quot;),this.aircraftFilter=t,this.source.changed()}),this.historyService.timestamp$.subscribe(t=&gt;{(0===t&amp;&amp;this.oldTimestamp&gt;0||t&gt;0&amp;&amp;0===this.oldTimestamp)&amp;&amp;(this.aircraftsFeaturesByArea.clear(),this.source.clear(!0)),this.oldTimestamp=t}),this.mapConfigService.restrictedAreaLonLat$.subscribe(()=&gt;{this.aircraftsFeaturesByArea.clear(),this.source.clear(!0)}),this.workerService.areaAircraftsFeeds$.subscribe(t=&gt;{const e=(this.aircraftsFeaturesByArea.get(t.area.id)||[]).reduce((t,e)=&gt;(t[e.aircraft.icao]=e,t),{}),i=[],n=[];let s=t.data;const r=!this.mapConfigService.manualMapFetch$.value&amp;&amp;this.mapConfigService.restrictedAreaLonLat$.value;if(r){const[t,e,i,n]=r;s=s.filter(s=&gt;t&lt;=s.lon&amp;&amp;s.lon&lt;=i&amp;&amp;e&lt;=s.lat&amp;&amp;s.lat&lt;=n)}s.forEach(t=&gt;{let s=e[t.icao];s?(s.updateAircraft(t),n.push(s)):(s=new sct(t),i.push(s)),this.aircraftFilter.apply(s),delete e[t.icao]}),Object.values(e).forEach(t=&gt;{this.source.hasFeature(t)&amp;&amp;this.source.removeFeature(t)}),this.source.addFeatures(i),this.aircraftsFeaturesByArea.set(t.area.id,n.concat(i)),this.source.changed()})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})})),this.subscriptions.push(QT([this.mapService.view$.pipe(Sf(1),FM(500,hf,{leading:!1,trailing:!0})),this.workerService.areaAircraftsFeeds$.pipe(df(16))]).subscribe(([t])=&gt;{const e=this.source.getFeaturesInExtent(t.extent).filter(t=&gt;t.aircraft.visible).map(t=&gt;t.aircraft);if(e.length&lt;200){const t=e.sort((t,e)=&gt;t.icao&lt;e.icao?-1:1);this.aircraftsService.aircraftsInView$.next(t)}else this.aircraftsService.aircraftsInView$.next([])}),this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)})),this.exportService.registerVisibleAircraftsCallback(t=&gt;this.source.getFeaturesInExtent(null!=t?t:this.map.getView().calculateExtent()).map(t=&gt;t.aircraft).filter(t=&gt;t.visible))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.configService.devMode&amp;&amp;console.log(&quot;DEBUG: select aircraft&quot;,JSON.stringify(t.aircraft,null,2)),this.interactionsService.clickOnEntity(OH.Aircraft,t.aircraft),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){this.layer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.tooltipsService.hoverEntity(OH.Aircraft,t.aircraft),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||this.tooltipsService.hoverEntity(OH.Aircraft,null))}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(iu),Da(rct),Da(jU),Da(aW),Da(Dj),Da(gW),Da(kj),Da(HU),Da(vq),Da(mW),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-aircrafts-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class act extends l4{constructor(t){super({geometry:new g6(IV([t.lon,t.lat]))}),this.alert=t,this.set(&quot;red&quot;,t.rgbVecColor[0],!0),this.set(&quot;green&quot;,t.rgbVecColor[1],!0),this.set(&quot;blue&quot;,t.rgbVecColor[2],!0)}}let lct=(()=&gt;{class t{constructor(t,e,i){this.alertsService=t,this.fleetsService=e,this.selectionService=i,this.alerts$=new Qp([]),QT([this.alertsService.alerts$,this.fleetsService.fleetAlerts$,this.selectionService.alerts$]).subscribe(([t,e,i])=&gt;{this.alerts$.next([...t,...e,...i])})}}return t.\u0275fac=function(e){return new(e||t)(Mn(IH),Mn(yW),Mn(dW))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:&quot;root&quot;}),t})(),cct=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.ngZone=t,this.alertsLayerService=e,this.interactionsService=i,this.mapService=n,this.mapStateService=s,this.tooltipsService=r}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new blt({source:this.source,zIndex:vrt.z60,style:{symbol:{symbolType:&quot;triangle&quot;,size:18,color:[&quot;color&quot;,[&quot;get&quot;,&quot;red&quot;],[&quot;get&quot;,&quot;green&quot;],[&quot;get&quot;,&quot;blue&quot;]],offset:[0,0]}}}),this.layer.selectable=!0,this.map.addLayer(this.layer),this.subscriptions.push(this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.layer.selectable=t})),this.subscriptions.push(this.alertsLayerService.alerts$.subscribe(t=&gt;{const e=t.map(t=&gt;new act(t));this.source.clear(!0),this.source.addFeatures(e)}),this.mapStateService.showAlertsLayer$.subscribe(t=&gt;{this.layer.setVisible(t)})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})})),this.subscriptions.push(this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.interactionsService.clickOnEntity(OH.Alert,t.alert),!0),{layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){this.layer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.tooltipsService.hoverEntity(OH.Alert,t.alert),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||this.tooltipsService.hoverEntity(OH.Alert,null))}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(lct),Da(gW),Da(kj),Da(vq),Da(mW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-alerts-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const hct=LH.reduce((t,e)=&gt;(t[e.key]=SH(e.color),t),{}),uct=SH(&quot;grey&quot;);class dct extends l4{constructor(t){super({geometry:new g6(IV([t.lon,t.lat]))}),this.event=t;const e=hct[t.type]||uct;this.set(&quot;red&quot;,e[0],!0),this.set(&quot;green&quot;,e[1],!0),this.set(&quot;blue&quot;,e[2],!0)}static New(t){return new dct(t)}}let pct=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r){super(),this.ngZone=t,this.eventsLayerService=e,this.interactionsService=i,this.mapService=n,this.mapStateService=s,this.tooltipsService=r}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new blt({source:this.source,zIndex:vrt.z60,style:{symbol:{symbolType:&quot;circle&quot;,size:9,color:[&quot;color&quot;,[&quot;get&quot;,&quot;red&quot;],[&quot;get&quot;,&quot;green&quot;],[&quot;get&quot;,&quot;blue&quot;]],offset:[0,0]}}}),this.layer.selectable=!0,this.map.addLayer(this.layer),this.subscriptions.push(this.mapStateService.featuresSelectable$.subscribe(t=&gt;{this.layer.selectable=t})),this.subscriptions.push(this.eventsLayerService.events$.subscribe(t=&gt;{const e=t.map(dct.New);this.source.clear(!0),this.source.addFeatures(e)}),this.mapStateService.showEventsLayer$.subscribe(t=&gt;{this.layer.setVisible(t)})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})})),this.subscriptions.push(this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}handleClickEvent(t){this.layer.selectable&amp;&amp;this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.interactionsService.clickOnEntity(OH.Event,t.event),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})}handleMoveEvent(t){this.layer.selectable&amp;&amp;(this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.tooltipsService.hoverEntity(OH.Event,t.event),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||this.tooltipsService.hoverEntity(OH.Event,null))}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(YH),Da(gW),Da(kj),Da(vq),Da(mW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-events-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class fct extends l4{constructor(t,e){super({geometry:new R6(t.h3indexes.map(t=&gt;lat(t)))}),this.port=t,this.color=Sat[e],this.name=`${t.label} - ${t.iso3.toUpperCase()}\n${t.sourcesLabels}`}}const mct=Sat.map(t=&gt;new v8({stroke:new L6({color:t,width:1}),fill:new h4({color:`${t}1a`})})),gct=new v8({text:new b8({font:&quot;11px Calibri,sans-serif&quot;,fill:new h4({color:&quot;#000&quot;}),stroke:new L6({color:&quot;#fff&quot;,width:3})})});let Act=(()=&gt;{class t extends Eq{constructor(t,e,i,n,s,r,o){super(),this.ngZone=t,this.configService=e,this.interactionsService=i,this.mapService=n,this.mapStateService=s,this.portsService=r,this.workerService=o}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z40,visible:!1}),this.layer.selectable=!0,this.map.addLayer(this.layer),this.subscriptions.push(QT([this.mapStateService.showPortsLayer$,this.mapService.view$]).pipe(M(([t,e])=&gt;t&amp;&amp;e&amp;&amp;e.zoom&gt;=9),Mf()).subscribe(t=&gt;{this.layer.setVisible(t)}),this.portsService.ports$.pipe(gf(t=&gt;null!==t)).subscribe(t=&gt;{this.source.clear(!0),this.source.addFeatures(t.map((t,e)=&gt;{const i=e%mct.length,n=new fct(t,i);return n.setStyle(function(){return gct.getText().setText(n.name),[mct[i],gct]}),n}))})),this.eventListeners.push(this.map.on(&quot;click&quot;,t=&gt;{this.ngZone.run(()=&gt;{this.handleClickEvent(t)})}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}handleClickEvent(t){return jp(this,void 0,void 0,function*(){if(this.layer.selectable){const e=this.map.getFeaturesAtPixel(t.pixel,{hitTolerance:3,layerFilter:t=&gt;t===this.layer});if(e.length&gt;0){this.configService.devMode&amp;&amp;console.log(&quot;DEBUG: select ports&quot;,e.map(t=&gt;t.port));const[i,n]=DV(t.coordinate),s={kind:OH.PortClickEvent,lon:i,lat:n,ports:e.map(t=&gt;Object.assign(Object.assign({},t.port),{color:t.color}))};this.interactionsService.clickOnEntity(OH.PortClickEvent,s)}}})}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(jU),Da(gW),Da(kj),Da(vq),Da(kW),Da(Jj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ports-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var vct=class extends s${constructor(t){super(),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement(&quot;div&quot;),this.element.className=void 0!==t.className?t.className:&quot;ol-overlay-container ol-selectable&quot;,this.element.style.position=&quot;absolute&quot;,this.element.style.pointerEvents=&quot;auto&quot;,this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:&quot;&quot;,visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(&quot;element&quot;,this.handleElementChanged),this.addChangeListener(&quot;map&quot;,this.handleMapChanged),this.addChangeListener(&quot;offset&quot;,this.handleOffsetChanged),this.addChangeListener(&quot;position&quot;,this.handlePositionChanged),this.addChangeListener(&quot;positioning&quot;,this.handlePositioningChanged),void 0!==t.element&amp;&amp;this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||&quot;top-left&quot;),void 0!==t.position&amp;&amp;this.setPosition(t.position)}getElement(){return this.get(&quot;element&quot;)}getId(){return this.id}getMap(){return this.get(&quot;map&quot;)||null}getOffset(){return this.get(&quot;offset&quot;)}getPosition(){return this.get(&quot;position&quot;)}getPositioning(){return this.get(&quot;positioning&quot;)}handleElementChanged(){Yz(this.element);const t=this.getElement();t&amp;&amp;this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&amp;&amp;(Wz(this.element),Xz(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Zz(t,&quot;postrender&quot;,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(&quot;element&quot;,t)}setMap(t){this.set(&quot;map&quot;,t)}setOffset(t){this.set(&quot;offset&quot;,t)}setPosition(t){this.set(&quot;position&quot;,t)}performAutoPan(){this.autoPan&amp;&amp;this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(&quot;position&quot;))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[Hz(n),Gz(n)]),r=void 0===(t=t||{}).margin?20:t.margin;if(!cN(i,s)){const n=s[0]-i[0],o=i[2]-s[2],a=s[1]-i[1],l=i[3]-s[3],c=[0,0];if(n&lt;0?c[0]=n-r:o&lt;0&amp;&amp;(c[0]=Math.abs(o)+r),a&lt;0?c[1]=a-r:l&lt;0&amp;&amp;(c[1]=Math.abs(l)+r),0!==c[0]||0!==c[1]){const i=e.getView().getCenterInternal(),n=e.getPixelFromCoordinateInternal(i);if(!n)return;const s=[n[0]+c[0],n[1]+c[1]],r=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(s),duration:r.duration,easing:r.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}setPositioning(t){this.set(&quot;positioning&quot;,t)}setVisible(t){this.rendered.visible!==t&amp;&amp;(this.element.style.display=t?&quot;&quot;:&quot;none&quot;,this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let r=&quot;0%&quot;,o=&quot;0%&quot;;&quot;bottom-right&quot;==s||&quot;center-right&quot;==s||&quot;top-right&quot;==s?r=&quot;-100%&quot;:(&quot;bottom-center&quot;==s||&quot;center-center&quot;==s||&quot;top-center&quot;==s)&amp;&amp;(r=&quot;-50%&quot;),&quot;bottom-left&quot;==s||&quot;bottom-center&quot;==s||&quot;bottom-right&quot;==s?o=&quot;-100%&quot;:(&quot;center-left&quot;==s||&quot;center-center&quot;==s||&quot;center-right&quot;==s)&amp;&amp;(o=&quot;-50%&quot;);const a=`translate(${r}, ${o}) translate(${Math.round(t[0]+n[0])+&quot;px&quot;}, ${Math.round(t[1]+n[1])+&quot;px&quot;})`;this.rendered.transform_!=a&amp;&amp;(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}};class _ct extends l4{constructor(t){super({id:t.mmsi,geometry:new g6(IV(t.position))}),this.positionIndex=0,this.ship=t,this.setStyle(new v8({image:new H4({src:&quot;/assets/images/ship.png&quot;,rotation:t.course,opacity:t.visible?1:0,color:t.shipType.color})}))}}const bct=[&quot;root&quot;],yct=[&quot;*&quot;];function xct(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}const wct=[0,-20];let Cct=(()=&gt;{class t{constructor(){this.positioning=&quot;bottom-center&quot;,this.className=&quot;&quot;,this.offset=wct,this.stopEvent=!0,this.autoPositioning=!1,this.opacity=1,this.webMercatorCoordinates=!1}ngOnInit(){this.overlay=new vct({element:this.rootElement.nativeElement,positioning:this.positioning,offset:this.offset,stopEvent:this.stopEvent,insertFirst:!1,className:`ol-overlay-container ol-selectable ${this.className} ${this.autoPositioning?&quot;overlay-hidden&quot;:&quot;overlay-positioning-bottom-center&quot;}`,position:this.getPosition()}),this.map.addOverlay(this.overlay),this.autoPositioning&amp;&amp;setTimeout(()=&gt;{this.updatePositioning(),this.overlay.getElement().parentElement.classList.remove(&quot;overlay-hidden&quot;)})}ngOnChanges(t){this.overlay&amp;&amp;(t.positioning&amp;&amp;this.overlay.setPositioning(this.positioning),t.offset&amp;&amp;this.overlay.setOffset(this.offset),(t.latitude||t.longitude)&amp;&amp;(this.overlay.setPosition(this.getPosition()),this.autoPositioning&amp;&amp;this.updatePositioning()))}getPosition(){return this.webMercatorCoordinates?[this.longitude,this.latitude]:IV([this.longitude,this.latitude])}ngOnDestroy(){this.map.removeOverlay(this.overlay)}updatePositioning(){if(!this.map||!this.map.getTargetElement())return;const t=xct(this.map.getTargetElement(),this.map.getSize()),e=this.overlay.getElement(),i=xct(e,[Hz(e),Gz(e)]);if(e.parentElement.className=e.parentElement.className.replace(/ ?overlay-positioning-\S+/g,&quot;&quot;),cN(t,i))this.overlay.setPositioning(&quot;bottom-center&quot;),this.overlay.setOffset(wct),e.parentElement.classList.add(&quot;overlay-positioning-bottom-center&quot;);else{const n=i[0]-t[0],s=t[2]-i[2],r=i[1]-t[1],o=t[3]-i[3],a=[0,0];n&lt;0?a[0]=n-20:s&lt;0&amp;&amp;(a[0]=Math.abs(s)+20),r&lt;0?a[1]=r-20:o&lt;0&amp;&amp;(a[1]=Math.abs(o)+20);let l=&quot;bottom&quot;,c=&quot;center&quot;,h=0,u=0;if(0!==a[0]){if(l=&quot;center&quot;,0===a[1]){const e=i[3]-i[1];i[3]+e/2+20&gt;=t[3]&amp;&amp;(a[1]=e/2)}a[0]&gt;0?(c=&quot;right&quot;,u=-20):(c=&quot;left&quot;,u=20)}0!==a[1]&amp;&amp;(a[1]&gt;0?(l=&quot;bottom&quot;,h=-20):(l=&quot;top&quot;,h=20));const d=`${l}-${c}`;this.overlay.setPositioning(d),this.overlay.setOffset([u,h]),e.parentElement.classList.add(`overlay-positioning-${d}`)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-map-tooltip&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh(bct,7),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.rootElement=t.first)}},inputs:{map:&quot;map&quot;,latitude:&quot;latitude&quot;,longitude:&quot;longitude&quot;,positioning:&quot;positioning&quot;,className:&quot;className&quot;,offset:&quot;offset&quot;,stopEvent:&quot;stopEvent&quot;,autoPositioning:&quot;autoPositioning&quot;,opacity:&quot;opacity&quot;,webMercatorCoordinates:&quot;webMercatorCoordinates&quot;},features:[he],ngContentSelectors:yct,decls:3,vars:2,consts:[[&quot;root&quot;,&quot;&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Xa(),Ra(0,&quot;div&quot;,null,0),Qa(2),Fa()),2&amp;t&amp;&amp;ll(&quot;opacity&quot;,e.opacity)},styles:[&quot;.overlay-hidden{opacity:0}\n&quot;],encapsulation:2,changeDetection:0}),t})();const Sct=function(t){return{transform:t}};let kct=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.mapConfigService=t,this.mapStateService=e,this.hdms=&quot;&quot;}ngOnInit(){this.ensureMandatoryInputParams(&quot;ship&quot;,&quot;animationTimestamp&quot;)}ngOnChanges(t){this.hdms=this.mapStateService.coordinateSystem$.value.format(this.ship.position)}}return t.\u0275fac=function(e){return new(e||t)(Da(HU),Da(vq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-playback-ship-tooltip&quot;]],inputs:{ship:&quot;ship&quot;,animationTimestamp:&quot;animationTimestamp&quot;},features:[$o,he],decls:48,vars:20,consts:[[1,&quot;ship-tooltip&quot;],[1,&quot;ship-tooltip__header&quot;],[1,&quot;ship-tooltip__flag&quot;,3,&quot;flag&quot;],[1,&quot;ship-tooltip__title&quot;],[1,&quot;ship-tooltip__name&quot;],[1,&quot;ship-tooltip__type&quot;],[1,&quot;ship-tooltip__row&quot;],[1,&quot;ship-tooltip__info-cell&quot;],[1,&quot;ship-tooltip__info-label&quot;],[3,&quot;vertical&quot;],[1,&quot;d-flex-center&quot;],[1,&quot;ship-tooltip__course-icon&quot;,3,&quot;ngStyle&quot;],[1,&quot;ship-tooltip__footer&quot;],[1,&quot;ship-tooltip__signal-label&quot;],[1,&quot;u-flex&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0),Ra(1,&quot;div&quot;,1),La(2,&quot;app-flag&quot;,2),Ra(3,&quot;div&quot;,3),Ra(4,&quot;strong&quot;,4),xl(5),Fa(),Ra(6,&quot;small&quot;,5),xl(7),Fa(),Fa(),Fa(),Ra(8,&quot;div&quot;,6),Ra(9,&quot;div&quot;,7),Ra(10,&quot;div&quot;,8),xl(11,&quot;MMSI&quot;),Fa(),Ra(12,&quot;strong&quot;),xl(13),Fa(),Fa(),La(14,&quot;mat-divider&quot;,9),Ra(15,&quot;div&quot;,7),Ra(16,&quot;div&quot;,8),xl(17,&quot;IMO&quot;),Fa(),Ra(18,&quot;strong&quot;),xl(19),Fa(),Fa(),La(20,&quot;mat-divider&quot;,9),Ra(21,&quot;div&quot;,7),Ra(22,&quot;div&quot;,8),xl(23,&quot;Callsign&quot;),Fa(),Ra(24,&quot;strong&quot;),xl(25),Fa(),Fa(),Fa(),La(26,&quot;mat-divider&quot;),Ra(27,&quot;div&quot;,6),Ra(28,&quot;div&quot;,7),Ra(29,&quot;div&quot;,8),xl(30,&quot;Vitesse / Cap&quot;),Fa(),Ra(31,&quot;strong&quot;,10),xl(32),Ra(33,&quot;mat-icon&quot;,11),xl(34,&quot;arrow_right_alt&quot;),Fa(),Fa(),Fa(),La(35,&quot;mat-divider&quot;,9),Ra(36,&quot;div&quot;,7),Ra(37,&quot;div&quot;,8),xl(38,&quot;Position&quot;),Fa(),Ra(39,&quot;strong&quot;),xl(40),Fa(),Fa(),Fa(),Ra(41,&quot;div&quot;,12),Ra(42,&quot;span&quot;,13),xl(43,&quot;R\xe9ception (estim\xe9e) :\xa0&quot;),Fa(),Ra(44,&quot;strong&quot;,14),Ra(45,&quot;span&quot;),xl(46),lh(47,&quot;date&quot;),Fa(),Fa(),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(2),Oa(&quot;flag&quot;,e.ship.country.flag),Sr(3),wl(e.ship.name||&quot;?&quot;),Sr(2),wl(e.ship.shipType.label),Sr(6),wl(e.ship.mmsi),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.ship.imo||&quot;?&quot;),Sr(1),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.ship.callsign||&quot;?&quot;),Sr(7),Sl(&quot; &quot;,e.ship.speed,&quot; kt / &quot;,(180*e.ship.course/3.14159).toFixed(0),&quot;\xb0 &quot;),Sr(1),Oa(&quot;ngStyle&quot;,eh(18,Sct,&quot;rotate(&quot;+(e.ship.course-1.570795)+&quot;rad)&quot;)),Sr(2),Oa(&quot;vertical&quot;,!0),Sr(5),wl(e.hdms),Sr(6),wl(uh(47,14,1e3*e.animationTimestamp,&quot;yyyy-MM-dd HH:mm:ss z&quot;,e.mapConfigService.useUTCDates$.value&amp;&amp;&quot;+00&quot;)))},directives:[aQ,Pq,hE,qd],pipes:[ep],styles:[&#39;.ship-tooltip[_ngcontent-%COMP%]{min-width:365px;background-color:#e7ecf0;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.2);border-radius:2px}.ship-tooltip[_ngcontent-%COMP%]:after{content:&quot; &quot;;position:absolute;border-width:12px;border-style:solid;border-color:transparent;pointer-events:none}.ship-tooltip__header[_ngcontent-%COMP%]{background-color:#cdd1d4;display:flex}.ship-tooltip__move-icon[_ngcontent-%COMP%]{cursor:move}.ship-tooltip__link[_ngcontent-%COMP%]{flex:1;padding:0;line-height:inherit;text-align:inherit;font-size:inherit;font-weight:inherit}.ship-tooltip__link[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.ship-tooltip__flag[_ngcontent-%COMP%]{margin:5px}.ship-tooltip__title[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0;flex:1}.ship-tooltip__name[_ngcontent-%COMP%]{font-size:1.2em}.ship-tooltip__type[_ngcontent-%COMP%]{font-size:.9em;color:#555}.ship-tooltip__row[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;font-size:.9em}.ship-tooltip__info-cell[_ngcontent-%COMP%]{padding:.4em;text-align:center}.ship-tooltip__info-label[_ngcontent-%COMP%]{color:gray;font-weight:500;padding-bottom:.2em}.ship-tooltip__course-icon[_ngcontent-%COMP%]{line-height:.7em;height:.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ship-tooltip__footer[_ngcontent-%COMP%]{background-color:#cdd1d4;padding-left:.4em;display:flex;align-items:center;font-size:.85em;line-height:36px}.ship-tooltip__signal-label[_ngcontent-%COMP%]{font-weight:500;color:#595959}  .overlay-positioning-center-right .ship-tooltip:after{top:50%;left:100%;margin-top:-12px;border-left-color:#cdd1d4}  .overlay-positioning-center-left .ship-tooltip:after{top:50%;right:100%;margin-top:-12px;border-right-color:#cdd1d4}  .overlay-positioning-bottom-center .ship-tooltip:after{top:100%;left:50%;margin-left:-12px;border-top-color:#cdd1d4}  .overlay-positioning-top-center .ship-tooltip:after{bottom:100%;left:50%;margin-left:-12px;border-bottom-color:#cdd1d4}&#39;],changeDetection:0}),t})();function Ect(t,e){if(1&amp;t&amp;&amp;(Ra(0,&quot;app-map-tooltip&quot;,1),La(1,&quot;app-playback-ship-tooltip&quot;,2),Fa()),2&amp;t){const t=Za();Oa(&quot;map&quot;,t.map)(&quot;latitude&quot;,t.hoveredPosition[1])(&quot;longitude&quot;,t.hoveredPosition[0])(&quot;stopEvent&quot;,!1)(&quot;autoPositioning&quot;,!0),Sr(1),Oa(&quot;ship&quot;,t.hoveredShip)(&quot;animationTimestamp&quot;,t.animationTimestamp)}}let Mct=(()=&gt;{class t extends Eq{constructor(t,e,i,n){super(),this.ngZone=t,this.elementRef=e,this.mapService=i,this.playbackService=n,this.hoveredShip=null,this.animationTimestamp=-1,this.hoveredPosition=null,this.featuresByMMSI={},this.layerRenderListener=null}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[],useSpatialIndex:!1}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z80}),this.map.addLayer(this.layer),this.overlay=new vct({element:this.elementRef.nativeElement,positioning:&quot;bottom-center&quot;,offset:[0,-20],stopEvent:!0,insertFirst:!1,className:&quot;ol-overlay-container ol-selectable hover-tooltip mat-elevation-z16 overlay-positioning-bottom-center&quot;}),this.map.addOverlay(this.overlay),this.subscriptions.push(QT([this.playbackService.active$,this.playbackService.shipsByMMSI$.pipe(M(t=&gt;!!t))]).pipe(df(16),M(([t,e])=&gt;t&amp;&amp;!e),Mf()).subscribe(t=&gt;{t?(this.bboxFeature=new l4(new f6([])),this.updateBboxFeatureGeometry(),this.source.addFeature(this.bboxFeature),this.layerRenderListener=this.layer.on(&quot;prerender&quot;,()=&gt;{this.updateBboxFeatureGeometry()})):this.bboxFeature&amp;&amp;(this.source.removeFeature(this.bboxFeature),this.bboxFeature=null,e$(this.layerRenderListener))}),this.playbackService.shipsByMMSI$.subscribe(t=&gt;jp(this,void 0,void 0,function*(){if(!t)return this.featuresByMMSI={},this.source.clear(!0),this.bboxFeature=null,void e$(this.layerRenderListener);this.bboxFeature&amp;&amp;(this.source.removeFeature(this.bboxFeature),this.bboxFeature=null,e$(this.layerRenderListener));const e=Object.values(t).filter(t=&gt;!this.featuresByMMSI[t.mmsi]).map(t=&gt;this.featuresByMMSI[t.mmsi]=new _ct(t));this.source.addFeatures(e)})),this.playbackService.animationTimestamp$.subscribe(t=&gt;{this.animationTimestamp=t,this.source.forEachFeature(t=&gt;{t.getGeometry().setCoordinates(IV(t.ship.position)),t.getStyle().getImage().setRotation(t.ship.course),t.getStyle().getImage().setOpacity(t.ship.visible?1:0)}),this.source.changed(),this.hoveredShip&amp;&amp;(this.hoveredPosition=this.hoveredShip.position)}),this.mapService.pointerMove$.subscribe(t=&gt;{this.ngZone.run(()=&gt;{this.handleMoveEvent(t)})}))}ngOnDestroy(){super.ngOnDestroy(),this.hoveredShip=null,this.map.removeOverlay(this.overlay),this.map.removeLayer(this.layer),e$(this.layerRenderListener)}handleMoveEvent(t){this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(this.hoveredShip=t.ship,this.hoveredPosition=DV(t.getGeometry().getCoordinates()),!0),{hitTolerance:3,layerFilter:t=&gt;t===this.layer})||(this.hoveredShip=null)}updateBboxFeatureGeometry(){const t=this.getRestrictedBoundingBox(),e=cat(t.getPolygon()).map(t=&gt;IV(t));NU(this.bboxFeature.getGeometry().getCoordinates()[0]||[],e)||(this.bboxFeature.getGeometry().setCoordinates([e]),this.playbackService.updateViewBox(t.toLatLonExtent()))}getRestrictedBoundingBox(){const t=_rt.fromOLView(this.map.getView()),e=Math.min(t.extent[2]-t.extent[0],IV([20,0])[0])/2,i=t.center[0]-e,n=t.center[0]+e,s=Math.min(t.extent[3]-t.extent[1],function(t){const[,e]=DV(t.center),[,i]=IV([0,e+7.5]),[,n]=IV([0,e-7.5]);return i-n}(t))/2;return SU.fromOLExtent([i,t.center[1]-s,n,t.center[1]+s]).scale(.8)}}return t.\u0275fac=function(e){return new(e||t)(Da(iu),Da(ec),Da(kj),Da(mq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-playback-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:1,vars:1,consts:[[&quot;className&quot;,&quot;mat-elevation-z16&quot;,3,&quot;map&quot;,&quot;latitude&quot;,&quot;longitude&quot;,&quot;stopEvent&quot;,&quot;autoPositioning&quot;,4,&quot;ngIf&quot;],[&quot;className&quot;,&quot;mat-elevation-z16&quot;,3,&quot;map&quot;,&quot;latitude&quot;,&quot;longitude&quot;,&quot;stopEvent&quot;,&quot;autoPositioning&quot;],[3,&quot;ship&quot;,&quot;animationTimestamp&quot;]],template:function(t,e){1&amp;t&amp;&amp;ra(0,Ect,2,7,&quot;app-map-tooltip&quot;,0),2&amp;t&amp;&amp;Oa(&quot;ngIf&quot;,e.hoveredShip)},directives:[Nd,Cct,kct],encapsulation:2}),t})(),Tct=(()=&gt;{class t extends Eq{constructor(t){super(),this.offlineService=t,this.layerRenderListener=null}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[],useSpatialIndex:!1}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z100}),this.map.addLayer(this.layer),this.subscriptions.push(this.offlineService.setupActive$.pipe(df(16),M(t=&gt;t),Mf()).subscribe(t=&gt;{t?(this.bboxFeature=new l4(new f6([])),this.updateBboxFeatureGeometry(),this.source.addFeature(this.bboxFeature),this.layerRenderListener=this.layer.on(&quot;prerender&quot;,()=&gt;{this.updateBboxFeatureGeometry()})):this.bboxFeature&amp;&amp;(this.source.removeFeature(this.bboxFeature),this.bboxFeature=null,e$(this.layerRenderListener))}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer),e$(this.layerRenderListener)}updateBboxFeatureGeometry(){const t=this.getRestrictedBoundingBox(),e=cat(t.getPolygon()).map(t=&gt;IV(t));NU(this.bboxFeature.getGeometry().getCoordinates()[0]||[],e)||(this.bboxFeature.getGeometry().setCoordinates([e]),this.offlineService.updateViewBox(t.toLatLonExtent()))}getRestrictedBoundingBox(){const t=_rt.fromOLView(this.map.getView()),e=Math.min(t.extent[2]-t.extent[0],IV([20,0])[0])/2,i=t.center[0]-e,n=t.center[0]+e,s=Math.min(t.extent[3]-t.extent[1],function(t){const[,e]=DV(t.center),[,i]=IV([0,e+7.5]),[,n]=IV([0,e-7.5]);return i-n}(t))/2;return SU.fromOLExtent([i,t.center[1]-s,n,t.center[1]+s]).scale(.8)}}return t.\u0275fac=function(e){return new(e||t)(Da(hW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-interaction-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const Ict=Math.floor(10),Dct=new v8({image:new h8({stroke:new L6({color:&quot;#010a40&quot;,lineDash:[Ict+4,16,2*Ict+4+1,18,2*Ict+4+1,16,2*Ict+4+1,18],width:4}),points:4,radius:30,angle:Math.PI/4})});class Oct extends l4{constructor(t){super({geometry:new g6(IV([t.lon,t.lat]))}),super.setStyle(Dct)}}let Pct=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.fleetsService=t,this.mapStateConfig=e,this.selectionService=i}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[]}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z100}),this.map.addLayer(this.layer),this.subscriptions.push(QT([this.fleetsService.selectedFleet$,this.selectionService.entities$.pipe(M(t=&gt;t.map(t=&gt;t.entity).filter(t=&gt;!!t)))]).subscribe(([t,e])=&gt;{this.layer.getSource().clear(!0);const i=[];t&amp;&amp;i.push(...t.ships.filter(t=&gt;pU(t.lon)&amp;&amp;pU(t.lat)).map(t=&gt;new CU(t.lon,t.lat))),e.length&amp;&amp;i.push(...e.filter(t=&gt;pU(t.lon)&amp;&amp;pU(t.lat)).map(t=&gt;new CU(t.lon,t.lat))),this.layer.getSource().addFeatures(i.map(t=&gt;new Oct(t)))}),this.mapStateConfig.showSelectionMarkers$.subscribe(t=&gt;{this.layer.setVisible(t)}))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}}return t.\u0275fac=function(e){return new(e||t)(Da(yW),Da(vq),Da(dW))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-selection-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const Rct=new v8({image:new d8});let Fct=(()=&gt;{class t extends Eq{constructor(t){super(),this.mapService=t}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[],useSpatialIndex:!1}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z100}),this.map.addLayer(this.layer),this.subscriptions.push(this.mapService.pingLocation$.subscribe(t=&gt;jp(this,void 0,void 0,function*(){yield this.animatePing(t)})))}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.layer)}animatePing(t){return jp(this,void 0,void 0,function*(){const e=new l4(new g6(IV(t)));e.setStyle(Rct),this.source.addFeature(e),this.flash(e),yield aU(3500),this.source.removeFeature(e)})}flash(t){const e=(new Date).getTime();let i=null;const n=n=&gt;{const s=n.frameState.time-e,r=s/3e3;if(s&gt;3e3)return void e$(i);const o=150-145*Tz(r),a=2*Tz(1-r),l=2*Math.PI*o/8,c=new v8({image:new d8({radius:o,stroke:new L6({color:`rgba(255, 0, 0, ${a})`,lineDash:[1*l/3,2*l/3],lineDashOffset:6*r*o,width:1+a})})}),h=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error(&quot;Only works for render events from Canvas 2D layers&quot;);const e=t.inversePixelTransform[0],i=t.frameState,n=p4(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),s=_ot(i.viewState.resolution,e);let r;const o=zV();return o&amp;&amp;(r=PV(o,i.viewState.projection)),new mot(t.context,e,i.extent,n,i.viewState.rotation,s,r)}(n);h.setStyle(c),h.drawGeometry(t.getGeometry().clone()),this.map.render()};i=this.layer.on(&quot;postrender&quot;,t=&gt;{n(t)})}}return t.\u0275fac=function(e){return new(e||t)(Da(kj))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-ping-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})(),Lct=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.mapService=t,this.measureService=e,this.pointerMoveSubscription=new d,this.createdTooltips=[]}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[],wrapX:!1}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z100}),this.map.addLayer(this.layer),this.subscriptions.push(this.measureService.active$.subscribe(t=&gt;{t?(this.drawInteraction=this.createInteraction(),this.map.addInteraction(this.drawInteraction)):this.stopInteraction()}))}ngOnDestroy(){super.ngOnDestroy(),this.clear()}clear(){this.source.clear(!0),this.stopInteraction(),this.createdTooltips.forEach(t=&gt;{this.map.removeOverlay(t)})}stopInteraction(){this.map.getViewport().removeEventListener(&quot;mouseout&quot;,this.mouseOutListener),this.pointerMoveSubscription.unsubscribe(),e$(this.drawChangeListener),this.map.removeInteraction(this.drawInteraction),this.map.removeOverlay(this.helpTooltipOverlay),this.map.removeOverlay(this.measureTooltipOverlay)}createInteraction(){return this.drawInteraction=new Kot({source:this.source,type:&quot;LineString&quot;,style:ptt,condition:_st}),this.createMeasureTooltip(),this.createHelpTooltip(),this.drawInteraction.on(&quot;drawstart&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;measure: drawstart&quot;}),this.sketchFeature=t.feature,this.sketchFeature.setStyle(this.getSketchFeatureStyle),this.drawChangeListener=this.sketchFeature.getGeometry().on(&quot;change&quot;,t=&gt;{const e=t.target;this.measureTooltipElement.innerHTML=jit(e),this.measureTooltipOverlay.setPosition(e.getLastCoordinate())})}),this.drawInteraction.on(&quot;drawend&quot;,()=&gt;{nz({category:&quot;app&quot;,message:&quot;measure: drawend&quot;});const t=this.measureTooltipOverlay,e=this.sketchFeature;this.measureTooltipOverlay.setOffset([0,-7]),this.sketchFeature.setStyle(this.getSketchFeatureStyle(this.sketchFeature)),this.sketchFeature=null;const i=function(){const t=document.createElement(&quot;button&quot;);return t.className=&quot;material-icons mat-icon&quot;,t.innerText=&quot;close&quot;,t.title=&quot;Supprimer la mesure&quot;,t.style.padding=&quot;0&quot;,t.style.marginRight=&quot;-8px&quot;,t.style.marginTop=&quot;-4px&quot;,t.style.marginBottom=&quot;-4px&quot;,t.style.borderTopRightRadius=&quot;4px&quot;,t.style.borderBottomRightRadius=&quot;4px&quot;,t.style.fontSize=&quot;1.5em&quot;,t.style.marginLeft=&quot;4px&quot;,t.style.color=&quot;inherit&quot;,t.style.backgroundColor=&quot;rgba(0, 0, 0, 0)&quot;,t.addEventListener(&quot;mouseover&quot;,()=&gt;{t.style.backgroundColor=&quot;rgba(0, 0, 0, 0.3)&quot;}),t.addEventListener(&quot;mouseout&quot;,()=&gt;{t.style.backgroundColor=&quot;rgba(0, 0, 0, 0)&quot;}),t}();i.addEventListener(&quot;click&quot;,()=&gt;{this.map.removeOverlay(t),this.source.removeFeature(e)}),this.measureTooltipElement.appendChild(i),this.createdTooltips.push(this.measureTooltipOverlay),this.measureTooltipElement=null,this.createMeasureTooltip(),e$(this.drawChangeListener)}),this.pointerMoveSubscription=this.mapService.pointerMove$.subscribe(t=&gt;{this.handleMoveEvent(t)}),this.mouseOutListener=()=&gt;{this.helpTooltipElement.classList.add(&quot;measure-layer__tooltip--hidden&quot;)},this.map.getViewport().addEventListener(&quot;mouseout&quot;,this.mouseOutListener),this.drawInteraction}createHelpTooltip(){this.helpTooltipElement&amp;&amp;this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement(&quot;div&quot;),this.helpTooltipElement.className=&quot;measure-layer__tooltip&quot;,this.helpTooltipOverlay=new vct({element:this.helpTooltipElement,className:&quot;measure-layer__unselectable&quot;,offset:[15,0],positioning:&quot;center-left&quot;}),this.map.addOverlay(this.helpTooltipOverlay)}createMeasureTooltip(){this.measureTooltipElement&amp;&amp;this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement(&quot;div&quot;),this.measureTooltipElement.className=&quot;measure-layer__tooltip measure-layer__tooltip--measure&quot;,this.measureTooltipOverlay=new vct({element:this.measureTooltipElement,offset:[0,-15],positioning:&quot;bottom-center&quot;,stopEvent:!0}),this.map.addOverlay(this.measureTooltipOverlay)}handleMoveEvent(t){if(t.dragging)return;let e=&quot;Cliquer pour d\xe9marrer la mesure&quot;;this.sketchFeature&amp;&amp;(e=this.drawInteraction.atFinish_(t)?&quot;Cliquer pour terminer la mesure&quot;:&quot;Cliquer pour ajouter un point&quot;),this.helpTooltipElement.innerHTML=e,this.helpTooltipOverlay.setPosition(t.coordinate),this.helpTooltipElement.classList.remove(&quot;measure-layer__tooltip--hidden&quot;)}getSketchFeatureStyle(t){const e=t.getGeometry(),i=[new v8({stroke:new L6({color:&quot;rgba(0, 0, 0, 0.8)&quot;,lineDash:[10,10],width:2})})];return e.forEachSegment((t,e)=&gt;{i.push(new v8({geometry:new d6([t,e]),text:new b8({text:Git(t,e),font:&quot;12px sans-serif&quot;,placement:&quot;line&quot;,textBaseline:&quot;bottom&quot;,overflow:!0,fill:new h4({color:&quot;#000000&quot;})})}))}),i}}return t.\u0275fac=function(e){return new(e||t)(Da(kj),Da(KH))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-measure-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},styles:[&#39;.measure-layer__tooltip{position:relative;background:rgba(0,0,0,.7);border-radius:4px;color:#fff;padding:4px 8px;opacity:.8;white-space:nowrap;font-size:12px}.measure-layer__tooltip--measure{display:flex;align-items:center}.measure-layer__tooltip--measure:before{border-top:6px solid rgba(0,0,0,.7);border-right:6px solid transparent;border-left:6px solid transparent;content:&quot;&quot;;position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measure-layer__tooltip--hidden{display:none}.measure-layer__unselectable{pointer-events:none;touch-action:none}\n&#39;],encapsulation:2,changeDetection:0}),t})();var Bct=class extends Lot{handleFeatureChange_(){}};class zct extends Jot{handleEvent(t){const e=[...t.pixel],i=super.handleEvent(t);return(t.pixel[0]!==e[0]||t.pixel[1]!==e[1])&amp;&amp;(t.snapped=!0),i}}const Nct=new L6({color:&quot;rgba(0, 0, 0, 0.8)&quot;,lineDash:[10,10],width:2}),Vct=new v8({stroke:Nct}),$ct=[&quot;root&quot;];let Uct=(()=&gt;{class t extends Eq{constructor(){super(...arguments),this.remove=new mh}ngOnDestroy(){super.ngOnDestroy(),this.map.removeOverlay(this.overlay)}ngOnChanges(t){if(t.tooltip){t.tooltip.firstChange&amp;&amp;(this.overlay=new vct({element:this.rootElement.nativeElement,offset:[0,-15],positioning:&quot;bottom-center&quot;,stopEvent:!0}),this.map.addOverlay(this.overlay));const e=t.tooltip.previousValue,i=t.tooltip.currentValue;(!e||i.coordinates[0]!==e.coordinates[0]||i.coordinates[1]!==e.coordinates[1])&amp;&amp;this.overlay.setPosition(this.tooltip.coordinates)}}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-waypoint-tooltip&quot;]],viewQuery:function(t,e){if(1&amp;t&amp;&amp;Mh($ct,7),2&amp;t){let t;Eh(t=Ih())&amp;&amp;(e.rootElement=t.first)}},inputs:{map:&quot;map&quot;,tooltip:&quot;tooltip&quot;},outputs:{remove:&quot;remove&quot;},features:[$o,he],decls:5,vars:1,consts:[[1,&quot;waypoint-tooltip&quot;],[&quot;root&quot;,&quot;&quot;],[1,&quot;waypoint-tooltip__remove-btn&quot;,&quot;material-icons&quot;,&quot;mat-icon&quot;,3,&quot;click&quot;]],template:function(t,e){1&amp;t&amp;&amp;(Ra(0,&quot;div&quot;,0,1),xl(2),Ra(3,&quot;button&quot;,2),Ha(&quot;click&quot;,function(){return e.remove.next()}),xl(4,&quot;close&quot;),Fa(),Fa()),2&amp;t&amp;&amp;(Sr(2),Cl(&quot; &quot;,e.tooltip.label,&quot; &quot;))},styles:[&#39;.waypoint-tooltip{position:relative;background:rgba(0,0,0,.7);border-radius:4px;color:#fff;padding:4px 8px;opacity:.8;white-space:nowrap;font-size:12px;display:flex;align-items:center}  .waypoint-tooltip:before{border-top:6px solid rgba(0,0,0,.7);border-right:6px solid transparent;border-left:6px solid transparent;content:&quot;&quot;;position:absolute;bottom:-6px;margin-left:-7px;left:50%}  .waypoint-tooltip__remove-btn{padding:0;border-top-right-radius:4px;border-bottom-right-radius:4px;font-size:1.5em;margin:-4px -8px -4px 4px;color:inherit;background-color:rgba(0,0,0,0)}  .waypoint-tooltip__remove-btn:hover{background-color:rgba(0,0,0,.3)}&#39;],changeDetection:0}),t})();function jct(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-waypoint-tooltip&quot;,1),Ha(&quot;remove&quot;,function(){const e=Le(t).index;return Za().emitRemoveEvent(e)}),Fa()}if(2&amp;t){const t=e.$implicit;Oa(&quot;map&quot;,Za().map)(&quot;tooltip&quot;,t)}}let Hct=(()=&gt;{class t extends Eq{constructor(){super(...arguments),this.remove=new mh,this.waypointTooltips=[]}ngOnDestroy(){super.ngOnDestroy()}ngOnChanges(t){t.pim&amp;&amp;this.buildWaypointTooltipsAndSegmentsLabels()}buildWaypointTooltipsAndSegmentsLabels(){const t=this.pim.feature.getGeometry().getCoordinates();if(t.length&lt;2)throw new Error(&quot;PIM invalide (2 points n\xe9cessaires)&quot;);const e=this.pim.waypoints;if(e.length&lt;1)throw new Error(&quot;PIM invalide (1 \xe9tape n\xe9cessaire)&quot;);let i=this.pim.waypoints[0].timestamp;this.waypointTooltips=[{coordinates:t[0],label:Gct(i)}];const n=[];for(let s=1;s&lt;t.length;s++){const r=t[s-1],o=t[s],a=e[s-1],l=Hit(r,o),c=Math.round(i+l/a.speed*3600),h=tq(c-i);i=c,this.waypointTooltips.push({coordinates:o,label:`ETA: ${Gct(i)}`}),n.push(`${a.speed} kt - ${h}\n${Git(r,o)}`)}this.pim.feature.setStyle(function(t,e){const i=[Vct];let n=0;return t.forEachSegment((t,s)=&gt;{const[r,o]=e[n].split(&quot;\n&quot;);i.push(new v8({geometry:new d6([t,s]),text:new b8({text:` ${r}\n`,font:&quot;12px sans-serif&quot;,placement:&quot;line&quot;,textBaseline:&quot;bottom&quot;,overflow:!0,fill:dtt})})),i.push(new v8({geometry:new d6([t,s]),text:new b8({text:o,font:&quot;12px sans-serif&quot;,placement:&quot;line&quot;,textBaseline:&quot;bottom&quot;,overflow:!0,fill:dtt})}));const a=s[0]-t[0],l=s[1]-t[1];if(0!==a||0!==l){const t=Math.atan2(l,a);i.push(new v8({geometry:new g6(s),image:new H4({src:&quot;assets/images/arrow-chevron.png&quot;,anchor:[.6,.5],rotateWithView:!0,rotation:-t})}))}n++}),i}(this.pim.feature.getGeometry(),n))}trackByIndex(t){return t}emitRemoveEvent(t){this.remove.next({pim:this.pim,index:t})}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=qi(t)))(i||t)}}(),t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-pim&quot;]],inputs:{map:&quot;map&quot;,pim:&quot;pim&quot;},outputs:{remove:&quot;remove&quot;},features:[$o,he],decls:1,vars:2,consts:[[3,&quot;map&quot;,&quot;tooltip&quot;,&quot;remove&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[3,&quot;map&quot;,&quot;tooltip&quot;,&quot;remove&quot;]],template:function(t,e){1&amp;t&amp;&amp;ra(0,jct,1,2,&quot;app-waypoint-tooltip&quot;,0),2&amp;t&amp;&amp;Oa(&quot;ngForOf&quot;,e.waypointTooltips)(&quot;ngForTrackBy&quot;,e.trackByIndex)},directives:[Bd,Uct],styles:[&quot;&quot;],changeDetection:0}),t})();function Gct(t){return ZG(1e3*t,&quot;yyyy-MM-dd HH:mm&quot;)}function qct(t,e){if(1&amp;t){const t=Va();Ra(0,&quot;app-pim&quot;,1),Ha(&quot;remove&quot;,function(e){return Le(t),Za().handleRemoveEvent(e)}),Fa()}if(2&amp;t){const t=e.$implicit;Oa(&quot;map&quot;,Za().map)(&quot;pim&quot;,t)}}var Wct=(()=&gt;(function(t){t.Idle=&quot;idle&quot;,t.Draw=&quot;draw&quot;,t.Modify=&quot;modify&quot;}(Wct||(Wct={})),Wct))();let Yct=(()=&gt;{class t extends Eq{constructor(t,e){super(),this.changeDetectorRef=t,this.pimService=e,this.pims=[],this.pointerMoveSubscription=new d,this.currentMode=Wct.Idle,this.lastFeatureSegmentsCount=1,this.isUpdatingPIMGeometry=!1,this.updatedPIMOriginalGeometryCoordinates=null,this.mouseOutListener=()=&gt;{this.helpTooltipOverlay.setPosition(null)}}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.source=new Mot({features:[],wrapX:!1}),this.layer=new Cot({source:this.source,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:vrt.z100}),this.map.addLayer(this.layer),this.subscriptions.push(this.pimService.active$.subscribe(t=&gt;{t?this.createInteractions():this.removeInteractions()}),this.pimService.nextStartDate$.subscribe(t=&gt;{if(this.currentMode===Wct.Draw){const e=this.pims[this.pims.length-1];e.waypoints[0].timestamp=t,this.updatePIMReference(e)}}),this.pimService.nextSpeed$.subscribe(t=&gt;{if(this.currentMode===Wct.Draw){const e=this.pims[this.pims.length-1],i=e.waypoints;i[i.length-1].speed=t,this.updatePIMReference(e)}}))}ngOnDestroy(){super.ngOnDestroy(),this.clear()}clear(){this.source.clear(!0),this.removeInteractions()}createInteractions(){this.createModifyInteraction(),this.createDrawInteraction(),this.snapInteraction=new zct({source:this.source,pixelTolerance:20}),this.map.addInteraction(this.snapInteraction),this.createHelpTooltip(),this.map.getViewport().addEventListener(&quot;mouseout&quot;,this.mouseOutListener)}removeInteractions(){this.map.getViewport().removeEventListener(&quot;mouseout&quot;,this.mouseOutListener),this.pointerMoveSubscription.unsubscribe(),e$(this.featureGeomChangeListener),this.map.removeInteraction(this.drawInteraction),this.map.removeInteraction(this.modifyInteraction),this.map.removeInteraction(this.snapInteraction),this.map.removeOverlay(this.helpTooltipOverlay)}createDrawInteraction(){this.drawInteraction=new Kot({type:&quot;LineString&quot;,source:this.source,style:ptt,condition:_st}),this.map.addInteraction(this.drawInteraction),this.drawInteraction.on(&quot;drawstart&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;pim: drawstart&quot;}),this.currentMode=Wct.Draw,this.map.removeInteraction(this.snapInteraction),this.modifyInteraction.setActive(!1);const e=t.feature,i={feature:e,waypoints:[{timestamp:this.pimService.nextStartDate$.value,speed:this.pimService.nextSpeed$.value}]};e.pim=i,this.pims.push(i),this.listenForDrawedGeometryChanges(e)}),this.drawInteraction.on(&quot;drawend&quot;,()=&gt;{nz({category:&quot;app&quot;,message:&quot;pim: drawend&quot;}),this.currentMode=Wct.Idle,this.map.addInteraction(this.snapInteraction),this.modifyInteraction.setActive(!0),e$(this.featureGeomChangeListener)}),this.drawInteraction.on(&quot;drawabort&quot;,()=&gt;{nz({category:&quot;app&quot;,message:&quot;pim: drawabort&quot;}),this.currentMode=Wct.Idle,this.map.addInteraction(this.snapInteraction),this.modifyInteraction.setActive(!0),e$(this.featureGeomChangeListener),this.pims.splice(this.pims.length-1,1)}),this.pointerMoveSubscription=qm(this.map,&quot;pointermove&quot;).pipe(nf(t=&gt;{this.helpTooltipOverlay.setPosition(t.coordinate)}),Ej(0)).subscribe(t=&gt;{this.handleMoveEvent(t),this.changeDetectorRef.detectChanges()})}createModifyInteraction(){this.modifyInteraction=new Bct({source:this.source,style:ptt,condition:_st}),this.map.addInteraction(this.modifyInteraction),this.modifyInteraction.on(&quot;modifystart&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;pim: modifystart&quot;}),this.currentMode=Wct.Modify,this.map.removeInteraction(this.snapInteraction);const e=t.features.item(0);this.listenForGeometryChanges(e)}),this.modifyInteraction.on(&quot;modifyend&quot;,t=&gt;{nz({category:&quot;app&quot;,message:&quot;pim: modifyend&quot;}),this.currentMode=Wct.Idle,this.map.addInteraction(this.snapInteraction),e$(this.featureGeomChangeListener)})}listenForGeometryChanges(t){this.updatedPIMOriginalGeometryCoordinates=t.getGeometry().getCoordinates(),this.lastFeatureSegmentsCount=this.updatedPIMOriginalGeometryCoordinates.length-1,this.featureGeomChangeListener=t.getGeometry().on(&quot;change&quot;,()=&gt;{const e=t.pim,i=t.getGeometry().getCoordinates(),n=i.length-1;if(n===this.lastFeatureSegmentsCount+1){for(let t=1;t&lt;n;t++){const[n,s]=i[t],[r,o]=this.updatedPIMOriginalGeometryCoordinates[t];if(n!==r||s!==o){e.waypoints.splice(t,0,{speed:this.pimService.nextSpeed$.value});break}}this.lastFeatureSegmentsCount=n,this.handleMoveEvent(this.lastMoveEvent)}this.updatePIMReference(e)})}listenForDrawedGeometryChanges(t){this.updatedPIMOriginalGeometryCoordinates=t.getGeometry().getCoordinates(),this.lastFeatureSegmentsCount=this.updatedPIMOriginalGeometryCoordinates.length-1,this.featureGeomChangeListener=t.getGeometry().on(&quot;change&quot;,()=&gt;{const e=t.pim,i=t.getGeometry().getCoordinates().length-1;i!==this.lastFeatureSegmentsCount&amp;&amp;(this.isUpdatingPIMGeometry||(i&gt;this.lastFeatureSegmentsCount?(e.waypoints.push({speed:this.pimService.nextSpeed$.value}),nz({category:&quot;app&quot;,message:&quot;pim: add waypoint&quot;})):(e.waypoints.splice(e.waypoints.length-1,1),nz({category:&quot;app&quot;,message:&quot;pim: remove waypoint&quot;}))),this.lastFeatureSegmentsCount=i,this.handleMoveEvent(this.lastMoveEvent)),this.isUpdatingPIMGeometry||this.updatePIMReference(e)})}createHelpTooltip(){this.helpTooltipElement&amp;&amp;this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement(&quot;div&quot;),this.helpTooltipElement.className=&quot;help-tooltip&quot;,this.helpTooltipOverlay=new vct({element:this.helpTooltipElement,offset:[15,0],className:&quot;help-tooltip__overlay&quot;,stopEvent:!1,positioning:&quot;center-left&quot;}),this.map.addOverlay(this.helpTooltipOverlay)}handleMoveEvent(t){this.lastMoveEvent=t;let e=&quot;&quot;;if(this.currentMode===Wct.Modify&amp;&amp;t.dragging)e=&quot;D\xe9placer pour modifier l&#39;\xe9tape&quot;;else if(t.snapped)switch(this.currentMode===Wct.Idle&amp;&amp;this.drawInteraction.getActive()&amp;&amp;this.drawInteraction.setActive(!1),this.currentMode){case Wct.Idle:e=&quot;Cliquer et maintenir pour ajouter une \xe9tape&quot;;break;case Wct.Modify:e=&quot;D\xe9placer pour modifier l&#39;\xe9tape&quot;}else switch(this.currentMode===Wct.Idle&amp;&amp;!this.drawInteraction.getActive()&amp;&amp;this.drawInteraction.setActive(!0),this.currentMode){case Wct.Idle:e=&quot;Cliquer pour d\xe9marrer un PIM&quot;;break;case Wct.Draw:e=this.drawInteraction.atFinish_(t.pixel)?&quot;Cliquer pour terminer le PIM&quot;:&quot;Cliquer pour ajouter une \xe9tape&quot;}this.helpTooltipElement.innerHTML=e}trackByIndex(t){return t}removePIM(t){if(this.source.hasFeature(t.feature)){this.source.removeFeature(t.feature);const e=this.pims.findIndex(e=&gt;e===t);this.pims.splice(e,1)}else this.drawInteraction.abortDrawing()}handleRemoveEvent(t){const e=t.pim,i=t.index;if(0===i||1===e.waypoints.length)return this.removePIM(e),void nz({category:&quot;app&quot;,message:&quot;pim: remove pim&quot;});if(this.currentMode===Wct.Draw&amp;&amp;this.pims[this.pims.length-1]===e&amp;&amp;i===e.waypoints.length)return;nz({category:&quot;app&quot;,message:&quot;pim: remove waypoint&quot;}),e.waypoints.splice(i===e.waypoints.length?i-1:i,1);const n=e.feature.getGeometry(),s=n.getCoordinates();s.splice(i,1),this.isUpdatingPIMGeometry=!0,n.setCoordinates(s),this.isUpdatingPIMGeometry=!1,this.pims[this.pims.length-1]===e&amp;&amp;this.currentMode===Wct.Draw&amp;&amp;(this.drawInteraction.sketchCoords_=s,this.drawInteraction.finishCoordinate_=s[i-1]),this.updatePIMReference(e),this.pimService.active$.value&amp;&amp;(this.map.removeInteraction(this.modifyInteraction),this.createModifyInteraction())}updatePIMReference(t){const e=this.pims.findIndex(e=&gt;e===t);if(-1===e)throw console.warn(&quot;PIM non trouv\xe9&quot;,t,this.pims),new Error(&quot;PIM non trouv\xe9&quot;);const i=Object.assign({},t);t.feature.pim=i,this.pims[e]=i}}return t.\u0275fac=function(e){return new(e||t)(Da(Ec),Da(rq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-pim-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:1,vars:2,consts:[[3,&quot;map&quot;,&quot;pim&quot;,&quot;remove&quot;,4,&quot;ngFor&quot;,&quot;ngForOf&quot;,&quot;ngForTrackBy&quot;],[3,&quot;map&quot;,&quot;pim&quot;,&quot;remove&quot;]],template:function(t,e){1&amp;t&amp;&amp;ra(0,qct,1,2,&quot;app-pim&quot;,0),2&amp;t&amp;&amp;Oa(&quot;ngForOf&quot;,e.pims)(&quot;ngForTrackBy&quot;,e.trackByIndex)},directives:[Bd,Hct],styles:[&quot;.help-tooltip{position:relative;background:rgba(0,0,0,.7);border-radius:4px;color:#fff;padding:4px 8px;opacity:.8;white-space:nowrap;font-size:12px}  .help-tooltip__overlay{pointer-events:none!important;touch-action:none}&quot;]}),t})();const Zct=&quot;1.3.0&quot;;function Kct(t,e){const i=[];Object.keys(e).forEach(function(t){null!=e[t]&amp;&amp;i.push(t+&quot;=&quot;+encodeURIComponent(e[t]))});const n=i.join(&quot;&amp;&quot;);return t=t.replace(/[?&amp;]$/,&quot;&quot;),(t+=t.includes(&quot;?&quot;)?&quot;&amp;&quot;:&quot;?&quot;)+n}var Xct=class extends P${constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!(!(&quot;TRANSPARENT&quot;in e)||e.TRANSPARENT),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const s=kV(i),r=this.getProjection();let o=this.getTileGrid();o||(o=this.getTileGridForProjection(s));const a=o.getZForResolution(e,this.zDirection),l=o.getTileCoordForCoordAndZ(t,a);if(o.getResolutions().length&lt;=l[0])return;let c=o.getResolution(l[0]),h=o.getTileCoordExtent(l,this.tmpExtent_),u=b$(o.getTileSize(l[0]),this.tmpSize);const d=this.gutter_;0!==d&amp;&amp;(u=A$(u,d,this.tmpSize),h=rN(h,c*d,h)),r&amp;&amp;r!==s&amp;&amp;(c=YV(r,s,t,c),h=LV(h,s,r),t=FV(t,s,r));const p={SERVICE:&quot;WMS&quot;,VERSION:Zct,REQUEST:&quot;GetFeatureInfo&quot;,FORMAT:&quot;image/png&quot;,TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,this.params_,n);const f=Math.floor((t[0]-h[0])/c),m=Math.floor((h[3]-t[1])/c);return p[this.v13_?&quot;I&quot;:&quot;X&quot;]=f,p[this.v13_?&quot;J&quot;:&quot;Y&quot;]=m,this.getRequestUrl_(l,u,h,1,r||s,p)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:&quot;WMS&quot;,VERSION:Zct,REQUEST:&quot;GetLegendGraphic&quot;,FORMAT:&quot;image/png&quot;};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(Array.isArray(t)&amp;&amp;1!==t.length)return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return Object.assign(i,e),Kct(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,s,r){const o=this.urls;if(!o)return;if(r.WIDTH=e[0],r.HEIGHT=e[1],r[this.v13_?&quot;CRS&quot;:&quot;SRS&quot;]=s.getCode(),&quot;STYLES&quot;in this.params_||(r.STYLES=&quot;&quot;),1!=n)switch(this.serverType_){case&quot;geoserver&quot;:const t=90*n+.5|0;&quot;FORMAT_OPTIONS&quot;in r?r.FORMAT_OPTIONS+=&quot;;dpi:&quot;+t:r.FORMAT_OPTIONS=&quot;dpi:&quot;+t;break;case&quot;mapserver&quot;:r.MAP_RESOLUTION=90*n;break;case&quot;carmentaserver&quot;:case&quot;qgis&quot;:r.DPI=90*n;break;default:nN(!1,52)}const a=s.getAxisOrientation(),l=i;if(this.v13_&amp;&amp;&quot;ne&quot;==a.substr(0,2)){let t;t=i[0],l[0]=i[1],l[1]=t,t=i[2],l[2]=i[3],l[3]=t}let c;return r.BBOX=l.join(&quot;,&quot;),c=1==o.length?o[0]:o[sV(JV(t),o.length)],Kct(c,r)}getTilePixelRatio(t){return this.hidpi_&amp;&amp;void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+&quot;-&quot;+this.params_[i];return e.join(&quot;/&quot;)}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=function(t,e){const i=(&quot;&quot;+t).split(&quot;.&quot;),n=&quot;1.3&quot;.split(&quot;.&quot;);for(let s=0;s&lt;Math.max(i.length,n.length);s++){const t=parseInt(i[s]||&quot;0&quot;,10),e=parseInt(n[s]||&quot;0&quot;,10);if(t&gt;e)return 1;if(e&gt;t)return-1}return 0}(this.params_.VERSION||Zct)&gt;=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length&lt;=t[0])return;1!=e&amp;&amp;(!this.hidpi_||void 0===this.serverType_)&amp;&amp;(e=1);const s=n.getResolution(t[0]);let r=n.getTileCoordExtent(t,this.tmpExtent_),o=b$(n.getTileSize(t[0]),this.tmpSize);const a=this.gutter_;0!==a&amp;&amp;(o=A$(o,a,this.tmpSize),r=rN(r,s*a,r)),1!=e&amp;&amp;(o=_$(o,e,this.tmpSize));const l={SERVICE:&quot;WMS&quot;,VERSION:Zct,REQUEST:&quot;GetMap&quot;,FORMAT:&quot;image/png&quot;,TRANSPARENT:!0};return Object.assign(l,this.params_),this.getRequestUrl_(t,o,r,e,i,l)}};function Qct(t){var e;return jp(this,void 0,void 0,function*(){const i=yield fetch(t);if(&quot;ANAIS-UI&quot;!==(null===(e=i.headers)||void 0===e?void 0:e.get(&quot;x-server&quot;))){const t=i.headers.get(&quot;content-type&quot;);throw new Error(`Le serveur n&#39;a pas bien r\xe9pondu${&quot;application/json&quot;!==t?` (re\xe7u: ${t}, attendu: application/json)`:&quot;&quot;}. Votre acc\xe8s \xe0 internet est-il bloqu\xe9 par un proxy ?`)}try{return yield i.json()}catch(n){throw new Error(`Donn\xe9es corrompues pour le fichier ${t}. JSON probablement malform\xe9 (${n.message})`)}})}const Jct=[{url:&quot;assets/geo/UK_6M_Limit.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#7a7a7a&quot;})})},{url:&quot;assets/geo/UK_12M_Limit.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#579f6f&quot;})})}],tht={limits36Nq:{assets:[{url:&quot;assets/geo/Limite_3milles_peche_WGS84_EPSG4326.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#ed791a&quot;})})},{url:&quot;assets/geo/Limite_6milles_bande_cotiere_peche_WGS84_EPSG4326.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#7a7a7a&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;nature&quot;),t.hoverable=!0}},ukLimits612Nq:{assets:Jct,transformFeature:t=&gt;{t.title=t.get(&quot;nature_of_&quot;)?&quot;Limite 6 nautiques UK&quot;:&quot;Limite 12 nautiques UK&quot;,t.hoverable=!0}},maritimeBoundaries:{assets:[{url:&quot;assets/geo/Delim_accord_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#090df6&quot;})})},{url:&quot;assets/geo/Lignes_base_droites_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#000000&quot;})})},{url:&quot;assets/geo/Lim_ext_MT_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#e31a1c&quot;})})},{url:&quot;assets/geo/Lim_ext_PC_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#732d2f&quot;})})},{url:&quot;assets/geo/Lim_ext_ZC_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#c36812&quot;})})},{url:&quot;assets/geo/Lim_ext_ZEE_WGS84.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#d60af5&quot;})})},{url:&quot;assets/geo/Lim_sans_accord_WGS84.geojson&quot;,style:new v8({stroke:new L6({lineDash:[2,5],width:2,color:&quot;#000000&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;nature&quot;),t.hoverable=!0}},mrcc:{assets:[{url:&quot;assets/geo/mrcc_2020-08-03.geojson&quot;,style:new v8({image:new H4({src:&quot;/assets/images/lifeline.png&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;name&quot;),t.hoverable=!0}},searchAndRescue:{assets:[{url:&quot;assets/geo/sar_2020-08-03.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#d9161e&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;name&quot;),t.hoverable=!0}},searchAndRescueRegions:{assets:[{url:&quot;assets/geo/french-srr.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#d95716&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;name&quot;),t.hoverable=!0}},shootingAreas:{assets:[{url:&quot;assets/geo/zonex.atlan.tirs.2021.corrected.geojson&quot;,style:new v8({stroke:new L6({width:2,color:&quot;#6500b7&quot;}),fill:new h4({color:&quot;#6500b710&quot;})})}],transformFeature:t=&gt;{t.title=t.get(&quot;zonex&quot;),t.hoverable=!1;const e=t.getStyle().clone();e.setText(new b8({text:t.title,font:&quot;12px sans-serif&quot;,placement:&quot;point&quot;,fill:dtt})),t.setStyle(e)}}};let eht=(()=&gt;{class t extends Eq{constructor(t,e,i){super(),this.mapConfigService=t,this.mapService=e,this.zonexService=i,this.featuresLoaded$=new S,this.assetsFeaturesByType={},this.previousHoveredFeatures=[]}ngOnInit(){this.ensureMandatoryInputParams(&quot;map&quot;),this.geoJSONReader=new ltt({featureProjection:this.map.getView().getProjection().getCode()}),this.pointsSource=new Mot({features:[]}),this.pointsLayer=new Cot({source:this.pointsSource,zIndex:vrt.z40,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.map.addLayer(this.pointsLayer),this.linesSource=new Mot({features:[]}),this.linesLayer=new rat({source:this.linesSource,zIndex:vrt.z40}),this.map.addLayer(this.linesLayer),this.eezLayer=new Hst({source:new Xct({url:&quot;https://geo.vliz.be/geoserver/gwc/service/wms&quot;,params:{SRS:&quot;EPSG:3857&quot;,LAYERS:&quot;MarineRegions:eez_boundaries&quot;}}),zIndex:vrt.z40,visible:!1}),this.map.addLayer(this.eezLayer),this.subscriptions.push(QT([this.mapConfigService.showMaritimeBoundariesLayer$,this.mapConfigService.show36NqLimitsLayer$,this.mapConfigService.showUK612NqLimitsLayer$,this.mapConfigService.showMRCCLayer$,this.mapConfigService.showSARLayer$,this.mapConfigService.showSRRLayer$,this.mapConfigService.showShootingAreasLayer$]).pipe(gf(([t,e,i,n,s,r,o])=&gt;t||e||i||n||s||r||o),FO()).subscribe(()=&gt;jp(this,void 0,void 0,function*(){yield this.fetchFeatures()})),this.featuresLoaded$.pipe(FO()).subscribe(()=&gt;{this.subscriptions.push(QT([this.mapConfigService.showMaritimeBoundariesLayer$,this.mapConfigService.show36NqLimitsLayer$,this.mapConfigService.showUK612NqLimitsLayer$,this.mapConfigService.showMRCCLayer$,this.mapConfigService.showSARLayer$,this.mapConfigService.showSRRLayer$,this.mapConfigService.showShootingAreasLayer$]).subscribe(([t,e,i,n,s,r,o])=&gt;{this.pointsSource.clear(!0),this.linesSource.clear(!0),t&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.maritimeBoundaries),e&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.limits36Nq),i&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.ukLimits612Nq),n&amp;&amp;this.pointsSource.addFeatures(this.assetsFeaturesByType.mrcc),s&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.searchAndRescue),r&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.searchAndRescueRegions),o&amp;&amp;this.linesSource.addFeatures(this.assetsFeaturesByType.shootingAreas)}))}),this.mapConfigService.showEEZLayer$.subscribe(t=&gt;{this.eezLayer.setVisible(t)}),this.mapService.pointerMove$.subscribe(t=&gt;{(this.pointsSource.getFeatures().length||this.linesSource.getFeatures().length)&amp;&amp;this.handleMoveEvent(t)}),this.zonexService.isConfiguringZonex$.subscribe(t=&gt;{this.pointsLayer.setVisible(!t),this.linesLayer.setVisible(!t),this.eezLayer.setVisible(!t&amp;&amp;this.mapConfigService.showEEZLayer$.value)})),this.createTooltip()}ngOnDestroy(){super.ngOnDestroy(),this.map.removeLayer(this.pointsLayer),this.map.removeLayer(this.linesLayer),this.map.removeLayer(this.eezLayer),this.map.removeOverlay(this.tooltipOverlay)}createTooltip(){this.tooltipElement&amp;&amp;this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=document.createElement(&quot;div&quot;),this.tooltipElement.className=&quot;additional-features-layer__tooltip&quot;,this.tooltipOverlay=new vct({element:this.tooltipElement,offset:[0,-10],positioning:&quot;bottom-center&quot;}),this.map.addOverlay(this.tooltipOverlay)}handleMoveEvent(t){const e=[];this.map.forEachFeatureAtPixel(t.pixel,t=&gt;(t.hoverable&amp;&amp;e.push(t),!1),{hitTolerance:3,layerFilter:t=&gt;t===this.pointsLayer||t===this.linesLayer});const i=e.filter(t=&gt;!this.previousHoveredFeatures.includes(t)),n=this.previousHoveredFeatures.filter(t=&gt;!e.includes(t));if(i.length&gt;0||n.length&gt;0){const t=e.map(t=&gt;t.title);this.tooltipElement.innerHTML=t.join(&#39;&lt;hr class=&quot;additional-features-layer__separator&quot;&gt;&#39;),this.previousHoveredFeatures=e}e.length&gt;0?(this.tooltipOverlay.setPosition(t.coordinate),this.tooltipElement.classList.remove(&quot;additional-features-layer__tooltip--hidden&quot;)):this.tooltipElement.classList.add(&quot;additional-features-layer__tooltip--hidden&quot;)}fetchFeatures(){return jp(this,void 0,void 0,function*(){yield Promise.all(Object.entries(tht).map(([t,e])=&gt;jp(this,void 0,void 0,function*(){const i=yield Promise.all(e.assets.map(t=&gt;jp(this,void 0,void 0,function*(){return{collection:yield Qct(t.url),style:t.style}})));this.assetsFeaturesByType[t]=i.flatMap(t=&gt;{const i=this.geoJSONReader.readFeatures(t.collection);return i.forEach(i=&gt;{i.setStyle(t.style),e.transformFeature(i)}),i})}))),this.featuresLoaded$.next(!0)})}}return t.\u0275fac=function(e){return new(e||t)(Da(HU),Da(kj),Da(Aq))},t.\u0275cmp=Gt({type:t,selectors:[[&quot;app-additional-features-layer&quot;]],inputs:{map:&quot;map&quot;},features:[$o],decls:0,vars:0,template:function(t,e){},styles:[&#39;.additional-features-layer__tooltip{position:relative;background:rgba(0,0,0,.7);border-radius:4px;color:#fff;padding:4px 8px;opacity:.8;white-space:nowrap;font-size:12px;pointer-events:none;touch-action:none}.additional-features-layer__tooltip:before{border-top:6px solid rgba(0,0,0,.7);border-right:6px solid transparent;border-left:6px solid transparent;content:&quot;&quot;;position:absolute;bottom:-6px;margin-left:-7px;left:50%}.additional-features-layer__tooltip--hidden{display:none}.additional-features-layer__separator{background-color:#fff}\n&#39;],encapsulation:2,changeDetection:0}),t})();const iht={openSeaMap:new R$({url:window.__anaisSettings.OPENSEAMAP_URL,crossOrigin:&quot;anonymous&quot;,attributions:&#39;\xa9 </td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es5.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;a&gt;&gt;&gt;0;)i=i+1|0;if((0|(o=o+1|0))==(0|s))break e}}o=0|gt(0|t,0|e,52),w(),o&amp;=15;t:do{if(o){i=1;n:for(;;){switch(h=0|gt(0|t,0|e,3*(15-i|0)|0),w(),7&amp;h){case 1:break n;case 0:break;default:break t}if(!(i&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0))break t;i=i+1|0}if(0|V(a,0|r[u&gt;&gt;2]))for(i=1;c=0|At(7,0,0|(u=3*(15-i|0)|0)),h=e&amp;~(0|w()),e=0|gt(0|t,0|e,0|u),w(),t=t&amp;~c|(e=0|At(0|le(7&amp;e),0,0|u)),e=0|h|w(),i&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)i=i+1|0;else for(i=1;u=0|gt(0|t,0|e,0|(h=3*(15-i|0)|0)),w(),c=0|At(7,0,0|h),e&amp;=~(0|w()),t=t&amp;~c|(h=0|At(0|se(7&amp;u),0,0|h)),e=0|e|w(),i&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)i=i+1|0}}while(0);if((0|s)&gt;0){i=0;do{t=0|Re(t,e),e=0|w(),i=i+1|0}while((0|i)!=(0|s))}}else t=0,e=0}while(0);return h=t,k(0|(c=e)),I=n,0|h}(n,t),e=0|w()):(e=0,t=0),k(0|e),I=i,0|t}function Be(e,t,n){var i,a=0,o=0,s=0;if(i=4+(n|=0)|0,o=0|gt(0|(e|=0),0|(t|=0),52),w(),o&amp;=15,s=0|gt(0|e,0|t,45),w(),a=0==(0|o),0|L(127&amp;s)){if(a)return 1;a=1}else{if(a)return 0;a=0==(0|r[i&gt;&gt;2])&amp;&amp;0==(0|r[n+8&gt;&gt;2])?0!=(0|r[n+12&gt;&gt;2])&amp;1:1}for(n=1;1&amp;n?ne(i):ie(i),s=0|gt(0|e,0|t,3*(15-n|0)|0),w(),re(i,7&amp;s),n&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0;)n=n+1|0;return 0|a}function ze(e,t,n){n|=0;var i,a,o=0,s=0,l=0,u=0,c=0,h=0;a=I,I=I+16|0,i=a,h=0|gt(0|(e|=0),0|(t|=0),45),w(),h&amp;=127;e:do{if(0!=(0|L(h))&amp;&amp;(l=0|gt(0|e,0|t,52),w(),0!=(0|(l&amp;=15)))){o=1;t:for(;;){switch(c=0|gt(0|e,0|t,3*(15-o|0)|0),w(),7&amp;c){case 5:break t;case 0:break;default:o=t;break e}if(!(o&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0)){o=t;break e}o=o+1|0}for(s=1,o=t;u=0|At(7,0,0|(t=3*(15-s|0)|0)),c=o&amp;~(0|w()),o=0|gt(0|e,0|o,0|t),w(),e=e&amp;~u|(o=0|At(0|le(7&amp;o),0,0|t)),o=0|c|w(),s&gt;&gt;&gt;0&lt;l&gt;&gt;&gt;0;)s=s+1|0}else o=t}while(0);if(r[n&gt;&gt;2]=r[(c=7728+(28*h|0)|0)&gt;&gt;2],r[n+4&gt;&gt;2]=r[c+4&gt;&gt;2],r[n+8&gt;&gt;2]=r[c+8&gt;&gt;2],r[n+12&gt;&gt;2]=r[c+12&gt;&gt;2],0|Be(e,o,n)){if(r[i&gt;&gt;2]=r[(u=n+4|0)&gt;&gt;2],r[i+4&gt;&gt;2]=r[u+4&gt;&gt;2],r[i+8&gt;&gt;2]=r[u+8&gt;&gt;2],l=0|gt(0|e,0|o,52),w(),c=15&amp;l,1&amp;l?(ie(u),l=c+1|0):l=c,0|L(h)){e:do{if(c)for(t=1;;){if(s=0|gt(0|e,0|o,3*(15-t|0)|0),w(),0|(s&amp;=7)){o=s;break e}if(!(t&gt;&gt;&gt;0&lt;c&gt;&gt;&gt;0)){o=0;break}t=t+1|0}else o=0}while(0);o=4==(0|o)&amp;1}else o=0;if(0|ge(n,l,o,0)){if(0|L(h))do{}while(0!=(0|ge(n,l,0,0)));(0|l)!=(0|c)&amp;&amp;te(u)}else(0|l)!=(0|c)&amp;&amp;(r[u&gt;&gt;2]=r[i&gt;&gt;2],r[u+4&gt;&gt;2]=r[i+4&gt;&gt;2],r[u+8&gt;&gt;2]=r[i+8&gt;&gt;2]);I=a}else I=a}function Ne(e,t,n){var i,a;n|=0,i=I,I=I+16|0,ze(e|=0,t|=0,a=i),t=0|gt(0|e,0|t,52),w(),function(e,t,n){var i,a;t|=0,n|=0,i=I,I=I+16|0,Z(4+(e|=0)|0,a=i),pe(a,0|r[e&gt;&gt;2],t,0,n),I=i}(a,15&amp;t,n),I=i}function Ve(e,t,n){n|=0;var i,r,a=0,o=0;r=I,I=I+16|0,ze(e|=0,t|=0,i=r),a=0|gt(0|e,0|t,45),w(),a=0==(0|L(127&amp;a)),o=0|gt(0|e,0|t,52),w(),o&amp;=15;e:do{if(!a){if(0|o)for(a=1;;){if(!(0==((0|At(7,0,3*(15-a|0)|0))&amp;e|0)&amp;0==((0|w())&amp;t|0)))break e;if(!(a&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0))break;a=a+1|0}return ve(i,o,0,5,n),void(I=r)}}while(0);ye(i,o,0,6,n),I=r}function Ue(e,t){t|=0;var n,i=0,a=0,o=0,s=0,l=0,u=0;if(At(0|(e|=0),0,52),n=134225919|w(),(0|e)&lt;1){a=0,i=0;do{0|L(a)&amp;&amp;(At(0|a,0,45),l=0|n|w(),r[(e=t+(i&lt;&lt;3)|0)&gt;&gt;2]=-1,r[e+4&gt;&gt;2]=l,i=i+1|0),a=a+1|0}while(122!=(0|a))}else{l=0,i=0;do{if(0|L(l)){for(At(0|l,0,45),a=1,o=-1,s=0|n|w();o&amp;=~(u=0|At(7,0,3*(15-a|0)|0)),s&amp;=~(0|w()),(0|a)!=(0|e);)a=a+1|0;r[(u=t+(i&lt;&lt;3)|0)&gt;&gt;2]=o,r[u+4&gt;&gt;2]=s,i=i+1|0}l=l+1|0}while(122!=(0|l))}}function je(e,t,n,i){var a,o,s=0,l=0,u=0,c=0;if(a=I,I=I+64|0,o=a,(0|(e|=0))==(0|(n|=0))&amp;(0|(t|=0))==(0|(i|=0))|!1|134217728!=(2013265920&amp;t|0)|!1|134217728!=(2013265920&amp;i|0)||(s=0|gt(0|e,0|t,52),w(),s&amp;=15,l=0|gt(0|n,0|i,52),w(),(0|s)!=(15&amp;l|0)))return I=a,0;if(l=s+-1|0,s&gt;&gt;&gt;0&gt;1&amp;&amp;(c=0|Ee(e,t,l),u=0|w(),(0|c)==(0|(l=0|Ee(n,i,l)))&amp;(0|u)==(0|w()))&amp;&amp;(s=0|gt(0|e,0|t,0|(l=3*(15^s)|0)),w(),s&amp;=7,l=0|gt(0|n,0|i,0|l),w(),0==(0|s)|0==(0|(l&amp;=7))||(0|r[21136+(s&lt;&lt;2)&gt;&gt;2])==(0|l)||(0|r[21168+(s&lt;&lt;2)&gt;&gt;2])==(0|l)))return I=a,1;l=(s=o)+56|0;do{r[s&gt;&gt;2]=0,s=s+4|0}while((0|s)&lt;(0|l));return R(e,t,1,o),s=(0|r[(c=o)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)||(0|r[(c=o+8|0)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)||(0|r[(c=o+16|0)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)||(0|r[(c=o+24|0)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)||(0|r[(c=o+32|0)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)||(0|r[(c=o+40|0)&gt;&gt;2])==(0|n)&amp;&amp;(0|r[c+4&gt;&gt;2])==(0|i)?1:1&amp;((0|r[(s=o+48|0)&gt;&gt;2])==(0|n)?(0|r[s+4&gt;&gt;2])==(0|i):0),I=a,0|s}function He(e,t,n){n|=0;var i,a,o,s,l=0;if(o=I,I=I+16|0,a=o,l=0|gt(0|(e|=0),0|(t|=0),56),w(),-1==(0|(t=0|function(e,t,n){n|=0;var i=0,a=0;return i=0|Te(e|=0,t|=0),(n+-1|0)&gt;&gt;&gt;0&gt;5||1==(0|n)&amp;(a=0!=(0|i))?0|(n=-1):(i=0|function(e,t){var n,i,a,o=0,s=0,l=0,u=0,c=0;if(a=I,I=I+32|0,i=a,ze(e|=0,t|=0,n=a+16|0),l=0|Ce(e,t),c=0|Ie(e,t),function(e,t){r[(t|=0)&gt;&gt;2]=r[(e=7728+(28*(e|=0)|0)|0)&gt;&gt;2],r[t+4&gt;&gt;2]=r[e+4&gt;&gt;2],r[t+8&gt;&gt;2]=r[e+8&gt;&gt;2],r[t+12&gt;&gt;2]=r[e+12&gt;&gt;2]}(l,i),t=0|function(e,t){e|=0;var n=0,i=0;if((t|=0)&gt;&gt;&gt;0&gt;20)return-1;do{if((0|r[11152+(216*t|0)&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+8&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+16&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+24&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+32&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+40&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+48&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+56&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+64&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+72&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+80&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+88&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+96&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+104&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+112&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+120&gt;&gt;2])!=(0|e))if((0|r[11152+(216*t|0)+128&gt;&gt;2])!=(0|e)){if((0|r[11152+(216*t|0)+136&gt;&gt;2])!=(0|e)){if((0|r[11152+(216*t|0)+144&gt;&gt;2])==(0|e)){e=0,n=2,i=0;break}if((0|r[11152+(216*t|0)+152&gt;&gt;2])==(0|e)){e=0,n=2,i=1;break}if((0|r[11152+(216*t|0)+160&gt;&gt;2])==(0|e)){e=0,n=2,i=2;break}if((0|r[11152+(216*t|0)+168&gt;&gt;2])==(0|e)){e=1,n=2,i=0;break}if((0|r[11152+(216*t|0)+176&gt;&gt;2])==(0|e)){e=1,n=2,i=1;break}if((0|r[11152+(216*t|0)+184&gt;&gt;2])==(0|e)){e=1,n=2,i=2;break}if((0|r[11152+(216*t|0)+192&gt;&gt;2])==(0|e)){e=2,n=2,i=0;break}if((0|r[11152+(216*t|0)+200&gt;&gt;2])==(0|e)){e=2,n=2,i=1;break}if((0|r[11152+(216*t|0)+208&gt;&gt;2])==(0|e)){e=2,n=2,i=2;break}return-1}e=2,n=1,i=2}else e=2,n=1,i=1;else e=2,n=1,i=0;else e=1,n=1,i=2;else e=1,n=1,i=1;else e=1,n=1,i=0;else e=0,n=1,i=2;else e=0,n=1,i=1;else e=0,n=1,i=0;else e=2,n=0,i=2;else e=2,n=0,i=1;else e=2,n=0,i=0;else e=1,n=0,i=2;else e=1,n=0,i=1;else e=1,n=0,i=0;else e=0,n=0,i=2;else e=0,n=0,i=1;else e=0,n=0,i=0}while(0);return 0|r[11152+(216*t|0)+(72*n|0)+(24*e|0)+(i&lt;&lt;3)+4&gt;&gt;2]}(l,0|r[n&gt;&gt;2]),!(0|L(l)))return I=a,0|t;switch(0|l){case 4:e=0,o=14;break;case 14:e=1,o=14;break;case 24:e=2,o=14;break;case 38:e=3,o=14;break;case 49:e=4,o=14;break;case 58:e=5,o=14;break;case 63:e=6,o=14;break;case 72:e=7,o=14;break;case 83:e=8,o=14;break;case 97:e=9,o=14;break;case 107:e=10,o=14;break;case 117:e=11,o=14;break;default:u=0,s=0}return 14==(0|o)&amp;&amp;(u=0|r[22096+(24*e|0)+8&gt;&gt;2],s=0|r[22096+(24*e|0)+16&gt;&gt;2]),(0|(e=0|r[n&gt;&gt;2]))!=(0|r[i&gt;&gt;2])&amp;&amp;(l=0|B(l))|(0|(e=0|r[n&gt;&gt;2]))==(0|s)&amp;&amp;(t=(t+1|0)%6|0),3==(0|c)&amp;(0|e)==(0|s)?(I=a,0|(c=(t+5|0)%6|0)):5==(0|c)&amp;(0|e)==(0|u)?(I=a,0|(c=(t+1|0)%6|0)):(I=a,0|(c=t))}(e,t),a?0|(n=(5-i+(0|r[22384+(n&lt;&lt;2)&gt;&gt;2])|0)%5|0):0|(n=(6-i+(0|r[22416+(n&lt;&lt;2)&gt;&gt;2])|0)%6|0))}(i=(s=!0&amp;268435456==(2013265920&amp;t|0))?e:0,e=s?-2130706433&amp;t|134217728:0,7&amp;l))))return r[n&gt;&gt;2]=0,void(I=o);ze(i,e,a),l=0|gt(0|i,0|e,52),w(),l&amp;=15,0|Te(i,e)?ve(a,l,t,2,n):ye(a,l,t,2,n),I=o}function Ge(e){e|=0;var t,n,i=0;return(t=0|ft(1,12))||x(22691,22646,49,22704),0|(i=0|r[(n=e+4|0)&gt;&gt;2])?(r[(i=i+8|0)&gt;&gt;2]=t,r[n&gt;&gt;2]=t,0|t):(0|r[e&gt;&gt;2]&amp;&amp;x(22721,22646,61,22744),r[(i=e)&gt;&gt;2]=t,r[n&gt;&gt;2]=t,0|t)}function $e(e,t){var n,i;return e|=0,t|=0,(i=0|ht(24))||x(22758,22646,78,22772),r[i&gt;&gt;2]=r[t&gt;&gt;2],r[i+4&gt;&gt;2]=r[t+4&gt;&gt;2],r[i+8&gt;&gt;2]=r[t+8&gt;&gt;2],r[i+12&gt;&gt;2]=r[t+12&gt;&gt;2],r[i+16&gt;&gt;2]=0,0|(n=0|r[(t=e+4|0)&gt;&gt;2])?(r[n+16&gt;&gt;2]=i,r[t&gt;&gt;2]=i,0|i):(0|r[e&gt;&gt;2]&amp;&amp;x(22787,22646,82,22772),r[e&gt;&gt;2]=i,r[t&gt;&gt;2]=i,0|i)}function qe(e){var t,n,i=0,o=0,s=0,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,A=0,y=0,_=0,b=0,k=0,w=0,C=0,S=0,E=0,M=0,T=0,I=0,R=0,O=0,D=0,P=0,F=0,L=0;if(0|r[(u=8+(e|=0)|0)&gt;&gt;2])return 1;if(!(s=0|r[e&gt;&gt;2]))return 0;i=s,o=0;do{o=o+1|0,i=0|r[i+8&gt;&gt;2]}while(0!=(0|i));if(o&gt;&gt;&gt;0&lt;2)return 0;(n=0|ht(o&lt;&lt;2))||x(22807,22646,317,22826),(t=0|ht(o&lt;&lt;5))||x(22848,22646,321,22826),r[e&gt;&gt;2]=0,r[(M=e+4|0)&gt;&gt;2]=0,r[u&gt;&gt;2]=0,o=0,P=0,E=0,m=0;e:for(;;){if(v=0|r[s&gt;&gt;2]){c=0,h=v;do{if(i=h,+l(+((f=+a[h+8&gt;&gt;3])-(d=+a[(u=(p=0==(0|(h=0|r[h+16&gt;&gt;2])))?v:h)+8&gt;&gt;3])))&gt;3.141592653589793){L=14;break}c+=(d-f)*(+a[i&gt;&gt;3]+ +a[u&gt;&gt;3])}while(!p);if(14==(0|L)){L=0,c=0,i=v;do{c+=(+a[i&gt;&gt;3]+ +a[(O=0==(0|(O=0|r[(D=i+16|0)&gt;&gt;2]))?v:O)&gt;&gt;3])*(((C=+a[O+8&gt;&gt;3])&lt;0?C+6.283185307179586:C)-((S=+a[i+8&gt;&gt;3])&lt;0?S+6.283185307179586:S)),i=0|r[(0==(0|i)?s:D)&gt;&gt;2]}while(0!=(0|i))}c&gt;0?(r[n+(P&lt;&lt;2)&gt;&gt;2]=s,P=P+1|0,u=E,i=m):L=19}else L=19;if(19==(0|L)){L=0;do{if(!o){if(m){u=M,h=m+8|0,i=s,o=e;break}if(0|r[e&gt;&gt;2]){L=27;break e}u=M,h=e,i=s,o=e;break}if(0|r[(i=o+8|0)&gt;&gt;2]){L=21;break e}if(!(o=0|ft(1,12))){L=23;break e}r[i&gt;&gt;2]=o,u=o+4|0,h=o,i=m}while(0);if(r[h&gt;&gt;2]=s,r[u&gt;&gt;2]=s,h=t+(E&lt;&lt;5)|0,p=0|r[s&gt;&gt;2]){for(a[(v=t+(E&lt;&lt;5)+8|0)&gt;&gt;3]=17976931348623157e292,a[(m=t+(E&lt;&lt;5)+24|0)&gt;&gt;3]=17976931348623157e292,a[h&gt;&gt;3]=-17976931348623157e292,a[(g=t+(E&lt;&lt;5)+16|0)&gt;&gt;3]=-17976931348623157e292,k=17976931348623157e292,w=-17976931348623157e292,u=0,A=p,f=17976931348623157e292,_=17976931348623157e292,b=-17976931348623157e292,d=-17976931348623157e292;c=+a[A&gt;&gt;3],S=+a[A+8&gt;&gt;3],C=+a[((y=0==(0|(A=0|r[A+16&gt;&gt;2])))?p:A)+8&gt;&gt;3],c&lt;f&amp;&amp;(a[v&gt;&gt;3]=c,f=c),S&lt;_&amp;&amp;(a[m&gt;&gt;3]=S,_=S),c&gt;b?a[h&gt;&gt;3]=c:c=b,S&gt;d&amp;&amp;(a[g&gt;&gt;3]=S,d=S),k=S&gt;0&amp;S&lt;k?S:k,w=S&lt;0&amp;S&gt;w?S:w,u|=+l(+(S-C))&gt;3.141592653589793,!y;)b=c;u&amp;&amp;(a[g&gt;&gt;3]=w,a[m&gt;&gt;3]=k)}else r[h&gt;&gt;2]=0,r[h+4&gt;&gt;2]=0,r[h+8&gt;&gt;2]=0,r[h+12&gt;&gt;2]=0,r[h+16&gt;&gt;2]=0,r[h+20&gt;&gt;2]=0,r[h+24&gt;&gt;2]=0,r[h+28&gt;&gt;2]=0;u=E+1|0}if(s=0|r[(D=s+8|0)&gt;&gt;2],r[D&gt;&gt;2]=0,!s){L=45;break}E=u,m=i}if(21==(0|L))x(22624,22646,35,22658);else if(23==(0|L))x(22678,22646,37,22658);else if(27==(0|L))x(22721,22646,61,22744);else if(45==(0|L)){e:do{if((0|P)&gt;0){for(D=0==(0|u),R=u&lt;&lt;2,O=0==(0|e),I=0,i=0;;){if(T=0|r[n+(I&lt;&lt;2)&gt;&gt;2],D)L=73;else{if(!(E=0|ht(R))){L=50;break}if(!(M=0|ht(R))){L=52;break}t:do{if(O)o=0;else{for(u=0,o=0,h=e;0|We(0|r[h&gt;&gt;2],s=t+(u&lt;&lt;5)|0,0|r[T&gt;&gt;2])?(r[E+(o&lt;&lt;2)&gt;&gt;2]=h,r[M+(o&lt;&lt;2)&gt;&gt;2]=s,y=o+1|0):y=o,h=0|r[h+8&gt;&gt;2];)u=u+1|0,o=y;if((0|y)&gt;0)if(s=0|r[E&gt;&gt;2],1==(0|y))o=s;else for(g=0,A=-1,o=s,m=s;;){for(p=0|r[m&gt;&gt;2],s=0,h=0;v=(0|(u=0|r[r[E+(h&lt;&lt;2)&gt;&gt;2]&gt;&gt;2]))==(0|p)?s:s+(1&amp;(0|We(u,0|r[M+(h&lt;&lt;2)&gt;&gt;2],0|r[p&gt;&gt;2])))|0,(0|(h=h+1|0))!=(0|y);)s=v;if(o=(u=(0|v)&gt;(0|A))?m:o,(0|(s=g+1|0))==(0|y))break t;g=s,A=u?v:A,m=0|r[E+(s&lt;&lt;2)&gt;&gt;2]}else o=0}}while(0);if(dt(E),dt(M),o){if(s=0|r[(u=o+4|0)&gt;&gt;2])o=s+8|0;else if(0|r[o&gt;&gt;2]){L=70;break}r[o&gt;&gt;2]=T,r[u&gt;&gt;2]=T}else L=73}if(73==(0|L)){if(L=0,0|(i=0|r[T&gt;&gt;2]))do{M=i,i=0|r[i+16&gt;&gt;2],dt(M)}while(0!=(0|i));dt(T),i=2}if((0|(I=I+1|0))&gt;=(0|P)){F=i;break e}}50==(0|L)?x(22863,22646,249,22882):52==(0|L)?x(22901,22646,252,22882):70==(0|L)&amp;&amp;x(22721,22646,61,22744)}else F=0}while(0);return dt(n),dt(t),0|F}return 0}function We(e,t,n){e|=0;var i=0,o=0,s=0,l=0,u=0,c=0,h=0,d=0;if(!(0|G(t|=0,n|=0)&amp;&amp;(t=0|H(t),h=+a[n&gt;&gt;3],i=+a[n+8&gt;&gt;3],i=t&amp;i&lt;0?i+6.283185307179586:i,e=0|r[e&gt;&gt;2],e)))return 0;if(t){t=0,n=e;e:for(;;){for(;l=+a[n&gt;&gt;3],c=+a[n+8&gt;&gt;3],o=+a[(d=0==(0|(d=0|r[(n=n+16|0)&gt;&gt;2]))?e:d)+8&gt;&gt;3],l&gt;(s=+a[d&gt;&gt;3])?(u=l,l=c):(u=s,s=l,l=o,o=c),h&lt;s|h&gt;u;)if(!(n=0|r[n&gt;&gt;2])){n=22;break e}if(i=(l=l&lt;0?l+6.283185307179586:l)==i|(c=o&lt;0?o+6.283185307179586:o)==i?i+-2220446049250313e-31:i,((c+=(h-s)/(u-s)*(l-c))&lt;0?c+6.283185307179586:c)&gt;i&amp;&amp;(t^=1),!(n=0|r[n&gt;&gt;2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,n=e;e:for(;;){for(;l=+a[n&gt;&gt;3],c=+a[n+8&gt;&gt;3],o=+a[(d=0==(0|(d=0|r[(n=n+16|0)&gt;&gt;2]))?e:d)+8&gt;&gt;3],l&gt;(s=+a[d&gt;&gt;3])?(u=l,l=c):(u=s,s=l,l=o,o=c),h&lt;s|h&gt;u;)if(!(n=0|r[n&gt;&gt;2])){n=22;break e}if(o+(h-s)/(u-s)*(l-o)&gt;(i=l==i|o==i?i+-2220446049250313e-31:i)&amp;&amp;(t^=1),!(n=0|r[n&gt;&gt;2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function Ye(e,t,n,a,o){n|=0,a|=0,o|=0;var s,l,u,c,h,d=0,f=0,p=0,v=0,m=0,g=0,A=0,y=0,_=0;if(c=I,I=I+32|0,h=c+16|0,u=c,d=0|gt(0|(e|=0),0|(t|=0),52),w(),d&amp;=15,A=0|gt(0|n,0|a,52),w(),(0|d)!=(15&amp;A|0))return I=c,1;if(m=0|gt(0|e,0|t,45),w(),m&amp;=127,g=0|gt(0|n,0|a,45),w(),A=(0|m)!=(0|(g&amp;=127))){if(7==(0|(p=0|j(m,g))))return I=c,2;7==(0|(v=0|j(g,m)))?x(22925,22949,151,22959):(y=p,f=v)}else y=0,f=0;s=0|L(m),l=0|L(g),r[h&gt;&gt;2]=0,r[h+4&gt;&gt;2]=0,r[h+8&gt;&gt;2]=0,r[h+12&gt;&gt;2]=0;do{if(y){if(p=(0|(g=0|r[4304+(28*m|0)+(y&lt;&lt;2)&gt;&gt;2]))&gt;0,l)if(p){m=0,v=n,p=a;do{v=0|De(v,p),p=0|w(),1==(0|(f=0|le(f)))&amp;&amp;(f=0|le(1)),m=m+1|0}while((0|m)!=(0|g));g=f,m=v,v=p}else g=f,m=n,v=a;else if(p){m=0,v=n,p=a;do{v=0|Pe(v,p),p=0|w(),f=0|le(f),m=m+1|0}while((0|m)!=(0|g));g=f,m=v,v=p}else g=f,m=n,v=a;if(Be(m,v,h),A||x(22972,22949,181,22959),(p=0!=(0|s))&amp;(f=0!=(0|l))&amp;&amp;x(22999,22949,182,22959),p){if(f=0|Ie(e,t),0|i[22032+(7*f|0)+y&gt;&gt;0]){d=3;break}m=v=0|r[21200+(28*f|0)+(y&lt;&lt;2)&gt;&gt;2],_=26}else if(f){if(f=0|Ie(m,v),0|i[22032+(7*f|0)+g&gt;&gt;0]){d=4;break}m=0,v=0|r[21200+(28*g|0)+(f&lt;&lt;2)&gt;&gt;2],_=26}else f=0;if(26==(0|_))if((0|v)&lt;=-1&amp;&amp;x(23030,22949,212,22959),(0|m)&lt;=-1&amp;&amp;x(23053,22949,213,22959),(0|v)&gt;0){p=h+4|0,f=0;do{oe(p),f=f+1|0}while((0|f)!=(0|v));f=m}else f=m;if(r[u&gt;&gt;2]=0,r[u+4&gt;&gt;2]=0,r[u+8&gt;&gt;2]=0,re(u,y),0|d)for(;0|Fe(d)?ne(u):ie(u),(0|d)&gt;1;)d=d+-1|0;if((0|f)&gt;0){d=0;do{oe(u),d=d+1|0}while((0|d)!=(0|f))}K(_=h+4|0,u,_),Y(_),_=50}else if(Be(n,a,h),0!=(0|s)&amp;0!=(0|l))if((0|g)!=(0|m)&amp;&amp;x(23077,22949,243,22959),f=0|Ie(e,t),d=0|Ie(n,a),0|i[22032+(7*f|0)+d&gt;&gt;0])d=5;else if((0|(f=0|r[21200+(28*f|0)+(d&lt;&lt;2)&gt;&gt;2]))&gt;0){p=h+4|0,d=0;do{oe(p),d=d+1|0}while((0|d)!=(0|f));_=50}else _=50;else _=50}while(0);return 50==(0|_)&amp;&amp;(r[o&gt;&gt;2]=r[(d=h+4|0)&gt;&gt;2],r[o+4&gt;&gt;2]=r[d+4&gt;&gt;2],r[o+8&gt;&gt;2]=r[d+8&gt;&gt;2],d=0),I=c,0|d}function Ze(e,t,n,i){n|=0,i|=0;var a,o,s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,A=0,y=0;if(o=I,I=I+48|0,u=o+36|0,c=o+24|0,h=o+12|0,d=o,l=0|gt(0|(e|=0),0|(t|=0),52),w(),l&amp;=15,p=0|gt(0|e,0|t,45),w(),a=0|L(p&amp;=127),At(0|l,0,52),g=134225919|w(),r[(m=i)&gt;&gt;2]=-1,r[m+4&gt;&gt;2]=g,!l)return(0|r[n&gt;&gt;2])&gt;1||(0|r[n+4&gt;&gt;2])&gt;1||(0|r[n+8&gt;&gt;2])&gt;1||127==(0|(s=0|U(p,0|J(n))))?(I=o,0|(g=1)):(v=0|At(0|s,0,45),m=0|w(),m|=-1040385&amp;r[(p=i)+4&gt;&gt;2],r[(g=i)&gt;&gt;2]=r[p&gt;&gt;2]|v,r[g+4&gt;&gt;2]=m,I=o,0|(g=0));for(r[u&gt;&gt;2]=r[n&gt;&gt;2],r[u+4&gt;&gt;2]=r[n+4&gt;&gt;2],r[u+8&gt;&gt;2]=r[n+8&gt;&gt;2];r[c&gt;&gt;2]=r[u&gt;&gt;2],r[c+4&gt;&gt;2]=r[u+4&gt;&gt;2],r[c+8&gt;&gt;2]=r[u+8&gt;&gt;2],0|Fe(l)?(ee(u),r[h&gt;&gt;2]=r[u&gt;&gt;2],r[h+4&gt;&gt;2]=r[u+4&gt;&gt;2],r[h+8&gt;&gt;2]=r[u+8&gt;&gt;2],ne(h)):(te(u),r[h&gt;&gt;2]=r[u&gt;&gt;2],r[h+4&gt;&gt;2]=r[u+4&gt;&gt;2],r[h+8&gt;&gt;2]=r[u+8&gt;&gt;2],ie(h)),X(c,h,d),Y(d),A=0|r[(m=i)&gt;&gt;2],m=0|r[m+4&gt;&gt;2],n=0|At(7,0,0|(y=3*(15-l|0)|0)),m&amp;=~(0|w()),y=0|At(0|J(d),0,0|y),m=0|w()|m,r[(g=i)&gt;&gt;2]=y|A&amp;~n,r[g+4&gt;&gt;2]=m,(0|l)&gt;1;)l=l+-1|0;e:do{if((0|r[u&gt;&gt;2])&lt;=1&amp;&amp;(0|r[u+4&gt;&gt;2])&lt;=1&amp;&amp;(0|r[u+8&gt;&gt;2])&lt;=1){d=127==(0|(c=0|U(p,l=0|J(u))))?0:0|L(c);t:do{if(l){if(a){if(u=21408+(28*(0|Ie(e,t))|0)+(l&lt;&lt;2)|0,(0|(u=0|r[u&gt;&gt;2]))&gt;0){n=0;do{l=0|se(l),n=n+1|0}while((0|n)!=(0|u))}if(1==(0|l)){s=3;break e}127==(0|(n=0|U(p,l)))&amp;&amp;x(23104,22949,376,23134),0|L(n)?x(23147,22949,377,23134):(v=u,f=l,s=n)}else v=0,f=l,s=c;if((0|(h=0|r[4304+(28*p|0)+(f&lt;&lt;2)&gt;&gt;2]))&lt;=-1&amp;&amp;x(23178,22949,384,23134),!d){if((0|v)&lt;=-1&amp;&amp;x(23030,22949,417,23134),0|v){l=0,n=0|r[(u=i)&gt;&gt;2],u=0|r[u+4&gt;&gt;2];do{n=0|Oe(n,u),u=0|w(),r[(y=i)&gt;&gt;2]=n,r[y+4&gt;&gt;2]=u,l=l+1|0}while((0|l)&lt;(0|v))}if((0|h)&lt;=0){l=54;break}for(l=0,n=0|r[(u=i)&gt;&gt;2],u=0|r[u+4&gt;&gt;2];;)if(n=0|Oe(n,u),u=0|w(),r[(y=i)&gt;&gt;2]=n,r[y+4&gt;&gt;2]=u,(0|(l=l+1|0))==(0|h)){l=54;break t}}if(7==(0|(c=0|j(s,p)))&amp;&amp;x(22925,22949,393,23134),n=0|r[(l=i)&gt;&gt;2],l=0|r[l+4&gt;&gt;2],(0|h)&gt;0){u=0;do{n=0|Oe(n,l),l=0|w(),r[(y=i)&gt;&gt;2]=n,r[y+4&gt;&gt;2]=l,u=u+1|0}while((0|u)!=(0|h))}if(n=0|Ie(n,l),y=0|B(s),(0|(n=0|r[(y?21824:21616)+(28*c|0)+(n&lt;&lt;2)&gt;&gt;2]))&lt;=-1&amp;&amp;x(23030,22949,412,23134),n){l=0,u=0|r[(c=i)&gt;&gt;2],c=0|r[c+4&gt;&gt;2];do{u=0|Re(u,c),c=0|w(),r[(y=i)&gt;&gt;2]=u,r[y+4&gt;&gt;2]=c,l=l+1|0}while((0|l)&lt;(0|n));l=54}else l=54}else if(0!=(0|a)&amp;0!=(0|d))if(l=21408+(28*(y=0|Ie(e,t))|0)+((0|Ie(0|r[(l=i)&gt;&gt;2],0|r[l+4&gt;&gt;2]))&lt;&lt;2)|0,(0|(l=0|r[l&gt;&gt;2]))&lt;=-1&amp;&amp;x(23201,22949,433,23134),l){s=0,n=0|r[(u=i)&gt;&gt;2],u=0|r[u+4&gt;&gt;2];do{n=0|Oe(n,u),u=0|w(),r[(y=i)&gt;&gt;2]=n,r[y+4&gt;&gt;2]=u,s=s+1|0}while((0|s)&lt;(0|l));s=c,l=54}else s=c,l=55;else s=c,l=54}while(0);if(54==(0|l)&amp;&amp;d&amp;&amp;(l=55),55==(0|l)&amp;&amp;1==(0|Ie(0|r[(y=i)&gt;&gt;2],0|r[y+4&gt;&gt;2]))){s=4;break}g=0|r[(y=i)&gt;&gt;2],y=-1040385&amp;r[y+4&gt;&gt;2],A=0|At(0|s,0,45),y=0|y|w(),r[(s=i)&gt;&gt;2]=g|A,r[s+4&gt;&gt;2]=y,s=0}else s=2}while(0);return I=o,0|s}function Ke(e,t){var n=0;if(!(t|=0))return 1;n=e|=0,e=1;do{e=0|y(0==(1&amp;t|0)?1:n,e),t&gt;&gt;=1,n=0|y(n,n)}while(0!=(0|t));return 0|e}function Xe(e,t,n){e|=0;var i,o=0,s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0;if(!(0|G(t|=0,n|=0))||(t=0|H(t),p=+a[n&gt;&gt;3],o=t&amp;(o=+a[n+8&gt;&gt;3])&lt;0?o+6.283185307179586:o,(0|(f=0|r[e&gt;&gt;2]))&lt;=0))return 0;if(i=0|r[e+4&gt;&gt;2],t){t=0,n=-1,e=0;e:for(;;){for(d=e;h=+a[i+(d&lt;&lt;4)+8&gt;&gt;3],s=+a[i+((e=(n+2|0)%(0|f)|0)&lt;&lt;4)+8&gt;&gt;3],(u=+a[i+(d&lt;&lt;4)&gt;&gt;3])&gt;(l=+a[i+(e&lt;&lt;4)&gt;&gt;3])?(c=u,u=h):(c=l,l=u,u=s,s=h),p&lt;l|p&gt;c;){if(!((0|(n=d+1|0))&lt;(0|f))){n=22;break e}e=d,d=n,n=e}if(o=(u=u&lt;0?u+6.283185307179586:u)==o|(h=s&lt;0?s+6.283185307179586:s)==o?o+-2220446049250313e-31:o,((h+=(p-l)/(c-l)*(u-h))&lt;0?h+6.283185307179586:h)&gt;o&amp;&amp;(t^=1),(0|(e=d+1|0))&gt;=(0|f)){n=22;break}n=d}if(22==(0|n))return 0|t}else{t=0,n=-1,e=0;e:for(;;){for(d=e;h=+a[i+(d&lt;&lt;4)+8&gt;&gt;3],s=+a[i+((e=(n+2|0)%(0|f)|0)&lt;&lt;4)+8&gt;&gt;3],(u=+a[i+(d&lt;&lt;4)&gt;&gt;3])&gt;(l=+a[i+(e&lt;&lt;4)&gt;&gt;3])?(c=u,u=h):(c=l,l=u,u=s,s=h),p&lt;l|p&gt;c;){if(!((0|(n=d+1|0))&lt;(0|f))){n=22;break e}e=d,d=n,n=e}if(s+(p-l)/(c-l)*(u-s)&gt;(o=u==o|s==o?o+-2220446049250313e-31:o)&amp;&amp;(t^=1),(0|(e=d+1|0))&gt;=(0|f)){n=22;break}n=d}if(22==(0|n))return 0|t}return 0}function Qe(e,t){t|=0;var n,i,o,s,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,A=0,y=0,_=0,b=0;if(!(n=0|r[(e|=0)&gt;&gt;2]))return r[t&gt;&gt;2]=0,r[t+4&gt;&gt;2]=0,r[t+8&gt;&gt;2]=0,r[t+12&gt;&gt;2]=0,r[t+16&gt;&gt;2]=0,r[t+20&gt;&gt;2]=0,r[t+24&gt;&gt;2]=0,void(r[t+28&gt;&gt;2]=0);if(a[(i=t+8|0)&gt;&gt;3]=17976931348623157e292,a[(o=t+24|0)&gt;&gt;3]=17976931348623157e292,a[t&gt;&gt;3]=-17976931348623157e292,a[(s=t+16|0)&gt;&gt;3]=-17976931348623157e292,!((0|n)&lt;=0)){for(y=0|r[e+4&gt;&gt;2],m=17976931348623157e292,g=-17976931348623157e292,A=0,e=-1,d=17976931348623157e292,f=17976931348623157e292,v=-17976931348623157e292,c=-17976931348623157e292,_=0;p=+a[y+(_&lt;&lt;4)+8&gt;&gt;3],h=+a[y+(((0|(e=e+2|0))==(0|n)?0:e)&lt;&lt;4)+8&gt;&gt;3],(u=+a[y+(_&lt;&lt;4)&gt;&gt;3])&lt;d&amp;&amp;(a[i&gt;&gt;3]=u,d=u),p&lt;f&amp;&amp;(a[o&gt;&gt;3]=p,f=p),u&gt;v?a[t&gt;&gt;3]=u:u=v,p&gt;c&amp;&amp;(a[s&gt;&gt;3]=p,c=p),m=p&gt;0&amp;p&lt;m?p:m,g=p&lt;0&amp;p&gt;g?p:g,A|=+l(+(p-h))&gt;3.141592653589793,(0|(e=_+1|0))!=(0|n);)b=_,v=u,_=e,e=b;!A||(a[s&gt;&gt;3]=g,a[o&gt;&gt;3]=m)}}function Je(e,t,n){var i,a=0;if(!(0|Xe(e|=0,t|=0,n|=0)))return 0;if((0|r[(i=e+8|0)&gt;&gt;2])&lt;=0)return 1;for(a=e+12|0,e=0;;){if(0|Xe((0|r[a&gt;&gt;2])+(e&lt;&lt;3)|0,t+((e=e+1|0)&lt;&lt;5)|0,n)){e=0,a=6;break}if((0|e)&gt;=(0|r[i&gt;&gt;2])){e=1,a=6;break}}return 6==(0|a)?0|e:0}function et(e,t,n,i,r){var o,s,l,u,c,h,d,f=0;a[(r|=0)&gt;&gt;3]=(u=+a[(e|=0)&gt;&gt;3])+(l=+a[(t|=0)&gt;&gt;3]-u)*(f=((f=+a[(i|=0)&gt;&gt;3]-(h=+a[(n|=0)&gt;&gt;3]))*((s=+a[e+8&gt;&gt;3])-(d=+a[n+8&gt;&gt;3]))-(u-h)*(c=+a[i+8&gt;&gt;3]-d))/(l*c-(o=+a[t+8&gt;&gt;3]-s)*f)),a[r+8&gt;&gt;3]=s+o*f}function tt(e,t){return+a[(e|=0)&gt;&gt;3]!=+a[(t|=0)&gt;&gt;3]?0|(t=0):0|(t=+a[e+8&gt;&gt;3]==+a[t+8&gt;&gt;3])}function nt(e,t){var n,i,r;return+((r=+a[(e|=0)&gt;&gt;3]-+a[(t|=0)&gt;&gt;3])*r+(i=+a[e+8&gt;&gt;3]-+a[t+8&gt;&gt;3])*i+(n=+a[e+16&gt;&gt;3]-+a[t+16&gt;&gt;3])*n)}function it(e,t,n){e|=0,n|=0;var i=0;(0|(t|=0))&gt;0?(i=0|ft(t,4),r[e&gt;&gt;2]=i,i||x(23230,23253,40,23267)):r[e&gt;&gt;2]=0,r[e+4&gt;&gt;2]=t,r[e+8&gt;&gt;2]=0,r[e+12&gt;&gt;2]=n}function rt(e){var t,n,i,o=0,s=0,u=0,h=0;t=4+(e|=0)|0,n=e+12|0,i=e+8|0;e:for(;;){for(s=0|r[t&gt;&gt;2],o=0;;){if((0|o)&gt;=(0|s))break e;if(h=0|r[(u=0|r[e&gt;&gt;2])+(o&lt;&lt;2)&gt;&gt;2])break;o=o+1|0}o=u+(~~(+l(+ +c(10,+ +(15-(0|r[n&gt;&gt;2])|0))*(+a[h&gt;&gt;3]+ +a[h+8&gt;&gt;3]))%+(0|s))&gt;&gt;&gt;0&lt;&lt;2)|0,s=0|r[o&gt;&gt;2];t:do{if(0|s){if(u=h+32|0,(0|s)==(0|h))r[o&gt;&gt;2]=r[u&gt;&gt;2];else{if(!(o=0|r[(s=s+32|0)&gt;&gt;2]))break;for(;(0|o)!=(0|h);)if(!(o=0|r[(s=o+32|0)&gt;&gt;2]))break t;r[s&gt;&gt;2]=r[u&gt;&gt;2]}dt(h),r[i&gt;&gt;2]=(0|r[i&gt;&gt;2])-1}}while(0)}dt(0|r[e&gt;&gt;2])}function at(e){var t,n=0,i=0;for(t=0|r[4+(e|=0)&gt;&gt;2],i=0;;){if((0|i)&gt;=(0|t)){n=0,i=4;break}if(n=0|r[(0|r[e&gt;&gt;2])+(i&lt;&lt;2)&gt;&gt;2]){i=4;break}i=i+1|0}return 4==(0|i)?0|n:0}function ot(e,t){t|=0;var n=0,i=0,o=0,s=0;if(n=~~(+l(+ +c(10,+ +(15-(0|r[12+(e|=0)&gt;&gt;2])|0))*(+a[t&gt;&gt;3]+ +a[t+8&gt;&gt;3]))%+(0|r[e+4&gt;&gt;2]))&gt;&gt;&gt;0,!(i=0|r[(n=(0|r[e&gt;&gt;2])+(n&lt;&lt;2)|0)&gt;&gt;2]))return 1;s=t+32|0;do{if((0|i)!=(0|t)){if(!(n=0|r[i+32&gt;&gt;2]))return 1;for(o=n;;){if((0|o)==(0|t)){o=8;break}if(!(n=0|r[o+32&gt;&gt;2])){n=1,o=10;break}i=o,o=n}if(8==(0|o)){r[i+32&gt;&gt;2]=r[s&gt;&gt;2];break}if(10==(0|o))return 0|n}else r[n&gt;&gt;2]=r[s&gt;&gt;2]}while(0);return dt(t),r[(s=e+8|0)&gt;&gt;2]=(0|r[s&gt;&gt;2])-1,0}function st(e,t,n){e|=0,t|=0,n|=0;var i,o=0,s=0,u=0;(i=0|ht(40))||x(23283,23253,98,23296),r[i&gt;&gt;2]=r[t&gt;&gt;2],r[i+4&gt;&gt;2]=r[t+4&gt;&gt;2],r[i+8&gt;&gt;2]=r[t+8&gt;&gt;2],r[i+12&gt;&gt;2]=r[t+12&gt;&gt;2],r[(s=i+16|0)&gt;&gt;2]=r[n&gt;&gt;2],r[s+4&gt;&gt;2]=r[n+4&gt;&gt;2],r[s+8&gt;&gt;2]=r[n+8&gt;&gt;2],r[s+12&gt;&gt;2]=r[n+12&gt;&gt;2],r[i+32&gt;&gt;2]=0,s=~~(+l(+ +c(10,+ +(15-(0|r[e+12&gt;&gt;2])|0))*(+a[t&gt;&gt;3]+ +a[t+8&gt;&gt;3]))%+(0|r[e+4&gt;&gt;2]))&gt;&gt;&gt;0,o=0|r[(s=(0|r[e&gt;&gt;2])+(s&lt;&lt;2)|0)&gt;&gt;2];do{if(o){for(;!(0|ke(o,t)&amp;&amp;0|ke(o+16|0,n));)if(!(0|r[(o=0==(0|(s=0|r[o+32&gt;&gt;2]))?o:s)+32&gt;&gt;2])){u=10;break}if(10==(0|u)){r[o+32&gt;&gt;2]=i;break}return dt(i),0|o}r[s&gt;&gt;2]=i}while(0);return r[(u=e+8|0)&gt;&gt;2]=1+(0|r[u&gt;&gt;2]),0|i}function lt(e,t,n){t|=0,n|=0;var i=0,o=0;if(o=~~(+l(+ +c(10,+ +(15-(0|r[12+(e|=0)&gt;&gt;2])|0))*(+a[t&gt;&gt;3]+ +a[t+8&gt;&gt;3]))%+(0|r[e+4&gt;&gt;2]))&gt;&gt;&gt;0,!(o=0|r[(0|r[e&gt;&gt;2])+(o&lt;&lt;2)&gt;&gt;2]))return 0;if(!n){for(e=o;;){if(0|ke(e,t)){i=10;break}if(!(e=0|r[e+32&gt;&gt;2])){e=0,i=10;break}}if(10==(0|i))return 0|e}for(e=o;;){if(0|ke(e,t)&amp;&amp;0|ke(e+16|0,n)){i=10;break}if(!(e=0|r[e+32&gt;&gt;2])){e=0,i=10;break}}return 10==(0|i)?0|e:0}function ut(e,t){t|=0;var n;if(n=~~(+l(+ +c(10,+ +(15-(0|r[12+(e|=0)&gt;&gt;2])|0))*(+a[t&gt;&gt;3]+ +a[t+8&gt;&gt;3]))%+(0|r[e+4&gt;&gt;2]))&gt;&gt;&gt;0,!(e=0|r[(0|r[e&gt;&gt;2])+(n&lt;&lt;2)&gt;&gt;2]))return 0;for(;;){if(0|ke(e,t)){t=5;break}if(!(e=0|r[e+32&gt;&gt;2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function ct(e){return 0|~~+function(e){return+ +wt(+(e=+e))}(e=+e)}function ht(e){e|=0;var t,n=0,i=0,a=0,o=0,s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,A=0,y=0,_=0,b=0,k=0;t=I,I=I+16|0,p=t;do{if(e&gt;&gt;&gt;0&lt;245){if(3&amp;(i=(f=0|r[5829])&gt;&gt;&gt;(e=(h=e&gt;&gt;&gt;0&lt;11?16:e+11&amp;-8)&gt;&gt;&gt;3))|0)return(0|(s=0|r[(o=8+(a=0|r[(i=8+(e=23356+((n=(1&amp;i^1)+e|0)&lt;&lt;1&lt;&lt;2)|0)|0)&gt;&gt;2])|0)&gt;&gt;2]))==(0|e)?r[5829]=f&amp;~(1&lt;&lt;n):(r[s+12&gt;&gt;2]=e,r[i&gt;&gt;2]=s),r[a+4&gt;&gt;2]=3|(k=n&lt;&lt;3),r[(k=a+k+4|0)&gt;&gt;2]=1|r[k&gt;&gt;2],I=t,0|o;if(h&gt;&gt;&gt;0&gt;(d=0|r[5831])&gt;&gt;&gt;0){if(0|i)return n=((n=i&lt;&lt;e&amp;((n=2&lt;&lt;e)|0-n))&amp;0-n)-1|0,(0|(i=0|r[(u=8+(s=0|r[(e=8+(n=23356+((a=((i=(n&gt;&gt;&gt;=u=n&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|u|(s=(n&gt;&gt;&gt;=i)&gt;&gt;&gt;2&amp;4)|(e=(n&gt;&gt;&gt;=s)&gt;&gt;&gt;1&amp;2)|(a=(n&gt;&gt;&gt;=e)&gt;&gt;&gt;1&amp;1))+(n&gt;&gt;&gt;a)|0)&lt;&lt;1&lt;&lt;2)|0)|0)&gt;&gt;2])|0)&gt;&gt;2]))==(0|n)?r[5829]=e=f&amp;~(1&lt;&lt;a):(r[i+12&gt;&gt;2]=n,r[e&gt;&gt;2]=i,e=f),l=(k=a&lt;&lt;3)-h|0,r[s+4&gt;&gt;2]=3|h,r[4+(o=s+h|0)&gt;&gt;2]=1|l,r[s+k&gt;&gt;2]=l,0|d&amp;&amp;(a=0|r[5834],i=23356+((n=d&gt;&gt;&gt;3)&lt;&lt;1&lt;&lt;2)|0,e&amp;(n=1&lt;&lt;n)?n=0|r[(e=i+8|0)&gt;&gt;2]:(r[5829]=e|n,n=i,e=i+8|0),r[e&gt;&gt;2]=a,r[n+12&gt;&gt;2]=a,r[a+8&gt;&gt;2]=n,r[a+12&gt;&gt;2]=i),r[5831]=l,r[5834]=o,I=t,0|u;if(s=0|r[5830]){for(i=(s&amp;0-s)-1|0,i=c=0|r[23620+(((a=(i&gt;&gt;&gt;=o=i&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|o|(l=(i&gt;&gt;&gt;=a)&gt;&gt;&gt;2&amp;4)|(u=(i&gt;&gt;&gt;=l)&gt;&gt;&gt;1&amp;2)|(c=(i&gt;&gt;&gt;=u)&gt;&gt;&gt;1&amp;1))+(i&gt;&gt;&gt;c)&lt;&lt;2)&gt;&gt;2],u=c,c=(-8&amp;r[c+4&gt;&gt;2])-h|0;(e=0|r[i+16&gt;&gt;2])||(e=0|r[i+20&gt;&gt;2]);)i=e,u=(o=(l=(-8&amp;r[e+4&gt;&gt;2])-h|0)&gt;&gt;&gt;0&lt;c&gt;&gt;&gt;0)?e:u,c=o?l:c;if((l=u+h|0)&gt;&gt;&gt;0&gt;u&gt;&gt;&gt;0){o=0|r[u+24&gt;&gt;2],n=0|r[u+12&gt;&gt;2];do{if((0|n)==(0|u)){if(!(n=0|r[(e=u+20|0)&gt;&gt;2])&amp;&amp;!(n=0|r[(e=u+16|0)&gt;&gt;2])){i=0;break}for(;;)if(i=0|r[(a=n+20|0)&gt;&gt;2])n=i,e=a;else{if(!(i=0|r[(a=n+16|0)&gt;&gt;2]))break;n=i,e=a}r[e&gt;&gt;2]=0,i=n}else r[12+(i=0|r[u+8&gt;&gt;2])&gt;&gt;2]=n,r[n+8&gt;&gt;2]=i,i=n}while(0);do{if(0|o){if((0|u)==(0|r[(e=23620+((n=0|r[u+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])){if(r[e&gt;&gt;2]=i,!i){r[5830]=s&amp;~(1&lt;&lt;n);break}}else if(r[((0|r[(k=o+16|0)&gt;&gt;2])==(0|u)?k:o+20|0)&gt;&gt;2]=i,!i)break;r[i+24&gt;&gt;2]=o,0|(n=0|r[u+16&gt;&gt;2])&amp;&amp;(r[i+16&gt;&gt;2]=n,r[n+24&gt;&gt;2]=i),0|(n=0|r[u+20&gt;&gt;2])&amp;&amp;(r[i+20&gt;&gt;2]=n,r[n+24&gt;&gt;2]=i)}}while(0);return c&gt;&gt;&gt;0&lt;16?(r[u+4&gt;&gt;2]=3|(k=c+h|0),r[(k=u+k+4|0)&gt;&gt;2]=1|r[k&gt;&gt;2]):(r[u+4&gt;&gt;2]=3|h,r[l+4&gt;&gt;2]=1|c,r[l+c&gt;&gt;2]=c,0|d&amp;&amp;(a=0|r[5834],i=23356+((n=d&gt;&gt;&gt;3)&lt;&lt;1&lt;&lt;2)|0,(n=1&lt;&lt;n)&amp;f?n=0|r[(e=i+8|0)&gt;&gt;2]:(r[5829]=n|f,n=i,e=i+8|0),r[e&gt;&gt;2]=a,r[n+12&gt;&gt;2]=a,r[a+8&gt;&gt;2]=n,r[a+12&gt;&gt;2]=i),r[5831]=c,r[5834]=l),I=t,0|u+8}f=h}else f=h}else f=h}else if(e&gt;&gt;&gt;0&lt;=4294967231)if(h=-8&amp;(e=e+11|0),a=0|r[5830]){o=0-h|0,c=(e&gt;&gt;&gt;=8)?h&gt;&gt;&gt;0&gt;16777215?31:h&gt;&gt;&gt;(7+(c=14-((u=(520192+(g=e&lt;&lt;(f=(e+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|f|(c=(245760+(g&lt;&lt;=u)|0)&gt;&gt;&gt;16&amp;2))+(g&lt;&lt;c&gt;&gt;&gt;15)|0)|0)&amp;1|c&lt;&lt;1:0,i=0|r[23620+(c&lt;&lt;2)&gt;&gt;2];e:do{if(i)for(e=0,u=h&lt;&lt;(31==(0|c)?0:25-(c&gt;&gt;&gt;1)|0),s=0;;){if((l=(-8&amp;r[i+4&gt;&gt;2])-h|0)&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0){if(!l){e=i,o=0,g=65;break e}e=i,o=l}if(s=0==(0|(g=0|r[i+20&gt;&gt;2]))|(0|g)==(0|(i=0|r[i+16+(u&gt;&gt;&gt;31&lt;&lt;2)&gt;&gt;2]))?s:g,!i){i=s,g=61;break}u&lt;&lt;=1}else i=0,e=0,g=61}while(0);if(61==(0|g)){if(0==(0|i)&amp;0==(0|e)){if(!(e=((e=2&lt;&lt;c)|0-e)&amp;a)){f=h;break}f=(e&amp;0-e)-1|0,e=0,i=0|r[23620+(((s=(f&gt;&gt;&gt;=l=f&gt;&gt;&gt;12&amp;16)&gt;&gt;&gt;5&amp;8)|l|(u=(f&gt;&gt;&gt;=s)&gt;&gt;&gt;2&amp;4)|(c=(f&gt;&gt;&gt;=u)&gt;&gt;&gt;1&amp;2)|(i=(f&gt;&gt;&gt;=c)&gt;&gt;&gt;1&amp;1))+(f&gt;&gt;&gt;i)&lt;&lt;2)&gt;&gt;2]}i?g=65:(u=e,l=o)}if(65==(0|g))for(s=i;;){if(o=(i=(f=(-8&amp;r[s+4&gt;&gt;2])-h|0)&gt;&gt;&gt;0&lt;o&gt;&gt;&gt;0)?f:o,e=i?s:e,(i=0|r[s+16&gt;&gt;2])||(i=0|r[s+20&gt;&gt;2]),!i){u=e,l=o;break}s=i}if(0!=(0|u)&amp;&amp;l&gt;&gt;&gt;0&lt;((0|r[5831])-h|0)&gt;&gt;&gt;0&amp;&amp;(d=u+h|0)&gt;&gt;&gt;0&gt;u&gt;&gt;&gt;0){s=0|r[u+24&gt;&gt;2],n=0|r[u+12&gt;&gt;2];do{if((0|n)==(0|u)){if(!(n=0|r[(e=u+20|0)&gt;&gt;2])&amp;&amp;!(n=0|r[(e=u+16|0)&gt;&gt;2])){n=0;break}for(;;)if(i=0|r[(o=n+20|0)&gt;&gt;2])n=i,e=o;else{if(!(i=0|r[(o=n+16|0)&gt;&gt;2]))break;n=i,e=o}r[e&gt;&gt;2]=0}else r[12+(k=0|r[u+8&gt;&gt;2])&gt;&gt;2]=n,r[n+8&gt;&gt;2]=k}while(0);do{if(s){if((0|u)==(0|r[(i=23620+((e=0|r[u+28&gt;&gt;2])&lt;&lt;2)|0)&gt;&gt;2])){if(r[i&gt;&gt;2]=n,!n){r[5830]=a&amp;=~(1&lt;&lt;e);break}}else if(r[((0|r[(k=s+16|0)&gt;&gt;2])==(0|u)?k:s+20|0)&gt;&gt;2]=n,!n)break;r[n+24&gt;&gt;2]=s,0|(e=0|r[u+16&gt;&gt;2])&amp;&amp;(r[n+16&gt;&gt;2]=e,r[e+24&gt;&gt;2]=n),(e=0|r[u+20&gt;&gt;2])&amp;&amp;(r[n+20&gt;&gt;2]=e,r[e+24&gt;&gt;2]=n)}}while(0);e:do{if(l&gt;&gt;&gt;0&lt;16)k=l+h|0,r[u+4&gt;&gt;2]=3|k,r[(k=u+k+4|0)&gt;&gt;2]=1|r[k&gt;&gt;2];else{if(r[u+4&gt;&gt;2]=3|h,r[d+4&gt;&gt;2]=1|l,r[d+l&gt;&gt;2]=l,n=l&gt;&gt;&gt;3,l&gt;&gt;&gt;0&lt;256){i=23356+(n&lt;&lt;1&lt;&lt;2)|0,(e=0|r[5829])&amp;(n=1&lt;&lt;n)?n=0|r[(e=i+8|0)&gt;&gt;2]:(r[5829]=e|n,n=i,e=i+8|0),r[e&gt;&gt;2]=d,r[n+12&gt;&gt;2]=d,r[d+8&gt;&gt;2]=n,r[d+12&gt;&gt;2]=i;break}if(i=(n=l&gt;&gt;&gt;8)?l&gt;&gt;&gt;0&gt;16777215?31:l&gt;&gt;&gt;(7+(i=14-((_=(520192+(k=n&lt;&lt;(b=(n+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|b|(i=(245760+(k&lt;&lt;=_)|0)&gt;&gt;&gt;16&amp;2))+(k&lt;&lt;i&gt;&gt;&gt;15)|0)|0)&amp;1|i&lt;&lt;1:0,n=23620+(i&lt;&lt;2)|0,r[d+28&gt;&gt;2]=i,r[4+(e=d+16|0)&gt;&gt;2]=0,r[e&gt;&gt;2]=0,!(a&amp;(e=1&lt;&lt;i))){r[5830]=a|e,r[n&gt;&gt;2]=d,r[d+24&gt;&gt;2]=n,r[d+12&gt;&gt;2]=d,r[d+8&gt;&gt;2]=d;break}n=0|r[n&gt;&gt;2];t:do{if((-8&amp;r[n+4&gt;&gt;2]|0)!=(0|l)){for(a=l&lt;&lt;(31==(0|i)?0:25-(i&gt;&gt;&gt;1)|0);e=0|r[(i=n+16+(a&gt;&gt;&gt;31&lt;&lt;2)|0)&gt;&gt;2];){if((-8&amp;r[e+4&gt;&gt;2]|0)==(0|l)){n=e;break t}a&lt;&lt;=1,n=e}r[i&gt;&gt;2]=d,r[d+24&gt;&gt;2]=n,r[d+12&gt;&gt;2]=d,r[d+8&gt;&gt;2]=d;break e}}while(0);r[12+(k=0|r[(b=n+8|0)&gt;&gt;2])&gt;&gt;2]=d,r[b&gt;&gt;2]=d,r[d+8&gt;&gt;2]=k,r[d+12&gt;&gt;2]=n,r[d+24&gt;&gt;2]=0}}while(0);return I=t,0|u+8}f=h}else f=h;else f=-1}while(0);if((i=0|r[5831])&gt;&gt;&gt;0&gt;=f&gt;&gt;&gt;0)return e=0|r[5834],(n=i-f|0)&gt;&gt;&gt;0&gt;15?(r[5834]=k=e+f|0,r[5831]=n,r[k+4&gt;&gt;2]=1|n,r[e+i&gt;&gt;2]=n,r[e+4&gt;&gt;2]=3|f):(r[5831]=0,r[5834]=0,r[e+4&gt;&gt;2]=3|i,r[(k=e+i+4|0)&gt;&gt;2]=1|r[k&gt;&gt;2]),I=t,0|e+8;if((l=0|r[5832])&gt;&gt;&gt;0&gt;f&gt;&gt;&gt;0)return r[5832]=_=l-f|0,r[5835]=b=(k=0|r[5835])+f|0,r[b+4&gt;&gt;2]=1|_,r[k+4&gt;&gt;2]=3|f,I=t,0|k+8;if(0|r[5947]?e=0|r[5949]:(r[5949]=4096,r[5948]=4096,r[5950]=-1,r[5951]=-1,r[5952]=0,r[5940]=0,r[5947]=-16&amp;p^1431655768,e=4096),u=f+48|0,(h=(s=e+(c=f+47|0)|0)&amp;(o=0-e|0))&gt;&gt;&gt;0&lt;=f&gt;&gt;&gt;0||0|(e=0|r[5939])&amp;&amp;(p=(d=0|r[5937])+h|0)&gt;&gt;&gt;0&lt;=d&gt;&gt;&gt;0|p&gt;&gt;&gt;0&gt;e&gt;&gt;&gt;0)return I=t,0;e:do{if(4&amp;r[5940])n=0,g=143;else{i=0|r[5835];t:do{if(i){for(a=23764;!((p=0|r[a&gt;&gt;2])&gt;&gt;&gt;0&lt;=i&gt;&gt;&gt;0&amp;&amp;(p+(0|r[a+4&gt;&gt;2])|0)&gt;&gt;&gt;0&gt;i&gt;&gt;&gt;0);){if(!(e=0|r[a+8&gt;&gt;2])){g=128;break t}a=e}if((n=s-l&amp;o)&gt;&gt;&gt;0&lt;2147483647)if((0|(e=0|xt(0|n)))==((0|r[a&gt;&gt;2])+(0|r[a+4&gt;&gt;2])|0)){if(-1!=(0|e)){l=n,s=e,g=145;break e}}else a=e,g=136;else n=0}else g=128}while(0);do{if(128==(0|g))if(-1!=(0|(i=0|xt(0)))&amp;&amp;(m=(n=(0==((m=(v=0|r[5948])-1|0)&amp;(n=i)|0)?0:(m+n&amp;0-v)-n|0)+h|0)+(v=0|r[5937])|0,n&gt;&gt;&gt;0&gt;f&gt;&gt;&gt;0&amp;n&gt;&gt;&gt;0&lt;2147483647)){if(0|(p=0|r[5939])&amp;&amp;m&gt;&gt;&gt;0&lt;=v&gt;&gt;&gt;0|m&gt;&gt;&gt;0&gt;p&gt;&gt;&gt;0){n=0;break}if((0|(e=0|xt(0|n)))==(0|i)){l=n,s=i,g=145;break e}a=e,g=136}else n=0}while(0);do{if(136==(0|g)){if(i=0-n|0,!(u&gt;&gt;&gt;0&gt;n&gt;&gt;&gt;0&amp;n&gt;&gt;&gt;0&lt;2147483647&amp;-1!=(0|a))){if(-1==(0|a)){n=0;break}l=n,s=a,g=145;break e}if((e=c-n+(e=0|r[5949])&amp;0-e)&gt;&gt;&gt;0&gt;=2147483647){l=n,s=a,g=145;break e}if(-1==(0|xt(0|e))){xt(0|i),n=0;break}l=e+n|0,s=a,g=145;break e}}while(0);r[5940]=4|r[5940],g=143}}while(0);if((143==(0|g)&amp;&amp;h&gt;&gt;&gt;0&lt;2147483647?!(-1==(0|(_=0|xt(0|h)))|1^(y=(A=(m=0|xt(0))-_|0)&gt;&gt;&gt;0&gt;(f+40|0)&gt;&gt;&gt;0)|_&gt;&gt;&gt;0&lt;m&gt;&gt;&gt;0&amp;-1!=(0|_)&amp;-1!=(0|m)^1):0)&amp;&amp;(l=y?A:n,s=_,g=145),145==(0|g)){r[5937]=n=(0|r[5937])+l|0,n&gt;&gt;&gt;0&gt;(0|r[5938])&gt;&gt;&gt;0&amp;&amp;(r[5938]=n),c=0|r[5835];e:do{if(c){for(n=23764;;){if((0|s)==((e=0|r[n&gt;&gt;2])+(i=0|r[n+4&gt;&gt;2])|0)){g=154;break}if(!(a=0|r[n+8&gt;&gt;2]))break;n=a}if(154==(0|g)&amp;&amp;(b=n+4|0,0==(8&amp;r[n+12&gt;&gt;2]|0))&amp;&amp;s&gt;&gt;&gt;0&gt;c&gt;&gt;&gt;0&amp;e&gt;&gt;&gt;0&lt;=c&gt;&gt;&gt;0){r[b&gt;&gt;2]=i+l,b=c+(_=0==(7&amp;(_=c+8|0)|0)?0:0-_&amp;7)|0,_=(k=(0|r[5832])+l|0)-_|0,r[5835]=b,r[5832]=_,r[b+4&gt;&gt;2]=1|_,r[c+k+4&gt;&gt;2]=40,r[5836]=r[5951];break}for(s&gt;&gt;&gt;0&lt;(0|r[5833])&gt;&gt;&gt;0&amp;&amp;(r[5833]=s),i=s+l|0,n=23764;;){if((0|r[n&gt;&gt;2])==(0|i)){g=162;break}if(!(e=0|r[n+8&gt;&gt;2]))break;n=e}if(162==(0|g)&amp;&amp;0==(8&amp;r[n+12&gt;&gt;2]|0)){r[n&gt;&gt;2]=s,r[(d=n+4|0)&gt;&gt;2]=(0|r[d&gt;&gt;2])+l,h=(d=s+(0==(7&amp;(d=s+8|0)|0)?0:0-d&amp;7)|0)+f|0,u=(n=i+(0==(7&amp;(n=i+8|0)|0)?0:0-n&amp;7)|0)-d-f|0,r[d+4&gt;&gt;2]=3|f;t:do{if((0|c)==(0|n))k=(0|r[5832])+u|0,r[5832]=k,r[5835]=h,r[h+4&gt;&gt;2]=1|k;else{if((0|r[5834])==(0|n)){r[5831]=k=(0|r[5831])+u|0,r[5834]=h,r[h+4&gt;&gt;2]=1|k,r[h+k&gt;&gt;2]=k;break}if(1==(3&amp;(e=0|r[n+4&gt;&gt;2])|0)){l=-8&amp;e,a=e&gt;&gt;&gt;3;n:do{if(e&gt;&gt;&gt;0&lt;256){if((0|(i=0|r[n+12&gt;&gt;2]))==(0|(e=0|r[n+8&gt;&gt;2]))){r[5829]=r[5829]&amp;~(1&lt;&lt;a);break}r[e+12&gt;&gt;2]=i,r[i+8&gt;&gt;2]=e;break}s=0|r[n+24&gt;&gt;2],e=0|r[n+12&gt;&gt;2];do{if((0|e)==(0|n)){if(e=0|r[(a=4+(i=n+16|0)|0)&gt;&gt;2])i=a;else if(!(e=0|r[i&gt;&gt;2])){e=0;break}for(;;)if(a=0|r[(o=e+20|0)&gt;&gt;2])e=a,i=o;else{if(!(a=0|r[(o=e+16|0)&gt;&gt;2]))break;e=a,i=o}r[i&gt;&gt;2]=0}else r[12+(k=0|r[n+8&gt;&gt;2])&gt;&gt;2]=e,r[e+8&gt;&gt;2]=k}while(0);if(!s)break;a=23620+((i=0|r[n+28&gt;&gt;2])&lt;&lt;2)|0;do{if((0|r[a&gt;&gt;2])==(0|n)){if(r[a&gt;&gt;2]=e,0|e)break;r[5830]=r[5830]&amp;~(1&lt;&lt;i);break n}if(r[((0|r[(k=s+16|0)&gt;&gt;2])==(0|n)?k:s+20|0)&gt;&gt;2]=e,!e)break n}while(0);if(r[e+24&gt;&gt;2]=s,0|(a=0|r[(i=n+16|0)&gt;&gt;2])&amp;&amp;(r[e+16&gt;&gt;2]=a,r[a+24&gt;&gt;2]=e),!(i=0|r[i+4&gt;&gt;2]))break;r[e+20&gt;&gt;2]=i,r[i+24&gt;&gt;2]=e}while(0);n=n+l|0,o=l+u|0}else o=u;if(r[(n=n+4|0)&gt;&gt;2]=-2&amp;r[n&gt;&gt;2],r[h+4&gt;&gt;2]=1|o,r[h+o&gt;&gt;2]=o,n=o&gt;&gt;&gt;3,o&gt;&gt;&gt;0&lt;256){i=23356+(n&lt;&lt;1&lt;&lt;2)|0,(e=0|r[5829])&amp;(n=1&lt;&lt;n)?n=0|r[(e=i+8|0)&gt;&gt;2]:(r[5829]=e|n,n=i,e=i+8|0),r[e&gt;&gt;2]=h,r[n+12&gt;&gt;2]=h,r[h+8&gt;&gt;2]=n,r[h+12&gt;&gt;2]=i;break}n=o&gt;&gt;&gt;8;do{if(n){if(o&gt;&gt;&gt;0&gt;16777215){a=31;break}a=o&gt;&gt;&gt;(7+(a=14-((_=(520192+(k=n&lt;&lt;(b=(n+1048320|0)&gt;&gt;&gt;16&amp;8))|0)&gt;&gt;&gt;16&amp;4)|b|(a=(245760+(k&lt;&lt;=_)|0)&gt;&gt;&gt;16&amp;2))+(k&lt;</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;a&gt;</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;noscript&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;styles.3f1a5fce2dbcdaf664bc.css&quot;&gt;&lt;/noscript&gt;</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">&lt;noscript&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;styles.3f1a5fce2dbcdaf664bc.css&quot;&gt;&lt;/noscript&gt;</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">6</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>This is an informational alert and so no changes are required.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%"></td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%"></td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10109/">10109</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10049"></a>
						<div>Informational</div></th>
					<th class="risk-0">Non-Storable Content</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The response contents are not storable by caching components such as proxy servers. If the response does not contain sensitive, personal or user-specific information, it may benefit from being stored and cached, to improve performance.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/assets/settings.js">https://anais.beta.gouv.fr/assets/settings.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">4</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>The content may be marked as storable by ensuring that the following conditions are satisfied:</div>
							<br />
						
							<div>The request method must be understood by the cache and defined as being cacheable (&quot;GET&quot;, &quot;HEAD&quot;, and &quot;POST&quot; are currently defined as cacheable)</div>
							<br />
						
							<div>The response status code must be understood by the cache (one of the 1XX, 2XX, 3XX, 4XX, or 5XX response classes are generally understood)</div>
							<br />
						
							<div>The &quot;no-store&quot; cache directive must not appear in the request or response header fields</div>
							<br />
						
							<div>For caching by &quot;shared&quot; caches such as &quot;proxy&quot; caches, the &quot;private&quot; response directive must not appear in the response</div>
							<br />
						
							<div>For caching by &quot;shared&quot; caches such as &quot;proxy&quot; caches, the &quot;Authorization&quot; header field must not appear in the request, unless the response explicitly allows it (using one of the &quot;must-revalidate&quot;, &quot;public&quot;, or &quot;s-maxage&quot; Cache-Control response directives)</div>
							<br />
						
							<div>In addition to the conditions above, at least one of the following conditions must also be satisfied by the response:</div>
							<br />
						
							<div>It must contain an &quot;Expires&quot; header field</div>
							<br />
						
							<div>It must contain a &quot;max-age&quot; response directive</div>
							<br />
						
							<div>For &quot;shared&quot; caches such as &quot;proxy&quot; caches, it must contain a &quot;s-maxage&quot; response directive</div>
							<br />
						
							<div>It must contain a &quot;Cache Control Extension&quot; that allows it to be cached</div>
							<br />
						
							<div>It must have a status code that is defined as cacheable by default (200, 203, 204, 206, 300, 301, 404, 405, 410, 414, 501).   </div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://tools.ietf.org/html/rfc7234">https://tools.ietf.org/html/rfc7234</a>
							<br />
						
							<a href="https://tools.ietf.org/html/rfc7231">https://tools.ietf.org/html/rfc7231</a>
							<br />
						
							<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html (obsoleted by rfc7234)">http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html (obsoleted by rfc7234)</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/524.html">524</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10049/">10049</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10015"></a>
						<div>Informational</div></th>
					<th class="risk-0">Re-examine Cache-control Directives</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The cache-control header has not been set properly or is missing, allowing the browser and proxies to cache content. For static assets like css, js, or image files this might be intended, however, the resources should be reviewed to ensure that no sensitive content will be cached.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr">https://anais.beta.gouv.fr</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%">Cache-Control</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/robots.txt">https://anais.beta.gouv.fr/robots.txt</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%">Cache-Control</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/sitemap.xml">https://anais.beta.gouv.fr/sitemap.xml</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%">Cache-Control</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">no-store</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">3</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>For secure content, ensure the cache-control HTTP header is set with &quot;no-cache, no-store, must-revalidate&quot;. If an asset should be cached consider setting the directives &quot;public, max-age, immutable&quot;.</div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html#web-content-caching">https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html#web-content-caching</a>
							<br />
						
							<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control</a>
							<br />
						
							<a href="https://grayduck.mn/2021/09/13/cache-control-recommendations/">https://grayduck.mn/2021/09/13/cache-control-recommendations/</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/525.html">525</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10015/">10015</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
			<table class="results">
				<tr height="24">
					<th width="20%" class="risk-0"><a
						id="10049"></a>
						<div>Informational</div></th>
					<th class="risk-0">Storable and Cacheable Content</th>
				</tr>
				<tr>
					<td width="20%">Description</td>
					<td width="80%">
							<div>The response contents are storable by caching components such as proxy servers, and may be retrieved directly from the cache, rather than from the origin server by the caching servers, in response to similar requests from other users.  If the response data is sensitive, personal or user-specific, this may result in sensitive information being leaked. In some cases, this may even result in a user gaining complete control of the session of another user, depending on the configuration of the caching components in use in their environment. This is primarily an issue where &quot;shared&quot; caching servers such as &quot;proxy&quot; caches are configured on the local network. This configuration is typically found in corporate or educational environments, for instance.</div>
							
						</td>
				</tr>
				<TR vAlign="top">
					<TD colspan="2"></TD>
				</TR>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/assets/images/favicon_anais.png">https://anais.beta.gouv.fr/assets/images/favicon_anais.png</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=7200</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js">https://anais.beta.gouv.fr/main-es2015.52acfe253d73f2628fb4.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js">https://anais.beta.gouv.fr/polyfills-es2015.ec173abd055e5a8effac.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js">https://anais.beta.gouv.fr/polyfills-es5.a6999adc4bcd02f5ccca.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es2015.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js">https://anais.beta.gouv.fr/runtime-es5.9bf4837035f0a238dd59.js</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
					<tr>
						<td width="20%"
							class="indent1">URL</td>
						<td width="80%"><a href="https://anais.beta.gouv.fr/styles.3f1a5fce2dbcdaf664bc.css">https://anais.beta.gouv.fr/styles.3f1a5fce2dbcdaf664bc.css</a></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Method</td>
						<td width="80%">GET</td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Parameter</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Attack</td>
						<td width="80%"></td>
					</tr>
					<tr>
						<td width="20%"
							class="indent2">Evidence</td>
						<td width="80%">max-age=2592000</td>
					</tr>
				
				<tr>
					<td width="20%">Instances</td>
					<td width="80%">7</td>
				</tr>
				<tr>
					<td width="20%">Solution</td>
					<td width="80%">
							<div>Validate that the response does not contain sensitive, personal or user-specific information.  If it does, consider the use of the following HTTP response headers, to limit, or prevent the content being stored and retrieved from the cache by another user:</div>
							<br />
						
							<div>Cache-Control: no-cache, no-store, must-revalidate, private</div>
							<br />
						
							<div>Pragma: no-cache</div>
							<br />
						
							<div>Expires: 0</div>
							<br />
						
							<div>This configuration directs both HTTP 1.0 and HTTP 1.1 compliant caching servers to not store the response, and to not retrieve the response (without validation) from the cache, in response to a similar request. </div>
							
						</td>
				</tr>
				<tr>
					<td width="20%">Reference</td>
					<td width="80%">
							<a href="https://tools.ietf.org/html/rfc7234">https://tools.ietf.org/html/rfc7234</a>
							<br />
						
							<a href="https://tools.ietf.org/html/rfc7231">https://tools.ietf.org/html/rfc7231</a>
							<br />
						
							<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html (obsoleted by rfc7234)">http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html (obsoleted by rfc7234)</a>
							
						</td>
				</tr>
				<tr>
					<td width="20%">CWE Id</td>
					<td width="80%"><a
						href="https://cwe.mitre.org/data/definitions/524.html">524</a></td>
				</tr>
				<tr>
					<td width="20%">WASC Id</td>
					<td width="80%">13</td>
				</tr>
				<tr>
					<td width="20%">Plugin Id</td>
					<td width="80%"><a
						href="https://www.zaproxy.org/docs/alerts/10049/">10049</a></td>
				</tr>
			</table>
			<div class="spacer"></div>
		
	
</body>
</html>

